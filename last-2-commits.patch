From 7fd6488ccce3feec724854266bf6ff40ab88d72c Mon Sep 17 00:00:00 2001
From: Andreas Rosenthal <arosenthal@ssystems.de>
Date: Thu, 25 Sep 2025 14:03:24 +0200
Subject: [PATCH 1/2] Merge remote-tracking branch
 'origin/feature/admin-settings' into checklist_dev

---
 amd/build/available_calendar.min.js           |  11 +
 amd/build/available_calendar.min.js.map       |   1 +
 amd/build/calendar.min.js                     |   9 +-
 amd/build/calendar.min.js.map                 |   2 +-
 amd/build/modal_delete_save_cancel.min.js     |   9 +-
 amd/build/modal_delete_save_cancel.min.js.map |   2 +-
 amd/build/possible_slots_refresh.min.js       |  11 +
 amd/build/possible_slots_refresh.min.js.map   |   1 +
 amd/src/available_calendar.js                 | 180 +++++++++++++++
 amd/src/calendar.js                           |  38 +++-
 amd/src/possible_slots_refresh.js             |  81 +++++++
 assets/event-calendar.min.css                 |   1 -
 assets/event-calendar.min.js                  |   6 -
 classes/external/delete_blocker.php           |  82 +++++++
 classes/external/get_possible_starttimes.php  | 176 +++++++++++++++
 classes/form/edit_event_form.php              | 149 +++++++-----
 classes/local/bool_timeline.php               | 180 +++++++++++++++
 classes/local/entity/bookit_event.php         |  11 +-
 classes/local/form/edit_blocker_form.php      | 149 ++++++++++++
 classes/local/form/edit_institution_form.php  |  73 ++++++
 classes/local/form/edit_room_form.php         |  74 ++++++
 classes/local/form/edit_weekplan_form.php     |  56 +++++
 .../local/form/edit_weekplan_room_form.php    |  93 ++++++++
 classes/local/formelement/colorpicker.php     | 114 ++++++++++
 .../local/formelement/colorpicker_rule.php    | 122 ++++++++++
 classes/local/manager/color_manager.php       | 163 ++++++++++++++
 classes/local/manager/event_manager.php       | 121 +++++++---
 classes/local/manager/weekplan_manager.php    | 213 ++++++++++++++++++
 classes/local/persistent/blocker.php          |  82 +++++++
 classes/local/persistent/institution.php      |  58 +++++
 classes/local/persistent/room.php             |  74 ++++++
 classes/local/persistent/weekplan.php         |  50 ++++
 classes/local/persistent/weekplan_room.php    | 100 ++++++++
 classes/local/table/institutions_table.php    |  91 ++++++++
 classes/local/table/rooms_table.php           | 102 +++++++++
 classes/local/table/weekplan_room_table.php   | 114 ++++++++++
 classes/local/table/weekplans_table.php       |  85 +++++++
 db/install.php                                |  50 ----
 db/install.xml                                | 163 +++++++++++---
 db/services.php                               |  40 ++++
 db/upgrade.php                                | 211 ++++++++++++++++-
 edit_institution.php                          |  74 ++++++
 edit_room.php                                 |  78 +++++++
 edit_weekplan.php                             |  79 +++++++
 edit_weekplan_room.php                        |  77 +++++++
 events.php                                    |   1 -
 events_available.php                          |  45 ++++
 institutions.php                              |  46 ++++
 lang/de/bookit.php                            | 126 +++++------
 lang/en/bookit.php                            |  68 +++++-
 lib.php                                       | 113 ----------
 rooms.php                                     |  46 ++++
 settings.php                                  | 166 ++++++++------
 templates/admin_calendar_legend.mustache      |  44 ++++
 templates/modal_delete_save_cancel.mustache   |   2 +-
 thirdpartylibs.xml                            |  11 +
 .../event-calendar}/custom-calendar.min.css   |   0
 .../event-calendar/event-calendar.min.css     |   1 +
 .../event-calendar/event-calendar.min.js      |   6 +
 .../event-calendar/event-calendar.min.js.map  |   1 +
 view.php                                      |   6 +-
 view_room.php                                 |  92 ++++++++
 weekplan.php                                  |  63 ++++++
 weekplans.php                                 |  46 ++++
 64 files changed, 4080 insertions(+), 459 deletions(-)
 create mode 100644 amd/build/available_calendar.min.js
 create mode 100644 amd/build/available_calendar.min.js.map
 create mode 100644 amd/build/possible_slots_refresh.min.js
 create mode 100644 amd/build/possible_slots_refresh.min.js.map
 create mode 100644 amd/src/available_calendar.js
 create mode 100644 amd/src/possible_slots_refresh.js
 delete mode 100644 assets/event-calendar.min.css
 delete mode 100644 assets/event-calendar.min.js
 create mode 100644 classes/external/delete_blocker.php
 create mode 100644 classes/external/get_possible_starttimes.php
 create mode 100644 classes/local/bool_timeline.php
 create mode 100644 classes/local/form/edit_blocker_form.php
 create mode 100644 classes/local/form/edit_institution_form.php
 create mode 100644 classes/local/form/edit_room_form.php
 create mode 100644 classes/local/form/edit_weekplan_form.php
 create mode 100644 classes/local/form/edit_weekplan_room_form.php
 create mode 100644 classes/local/formelement/colorpicker.php
 create mode 100644 classes/local/formelement/colorpicker_rule.php
 create mode 100644 classes/local/manager/color_manager.php
 create mode 100644 classes/local/manager/weekplan_manager.php
 create mode 100644 classes/local/persistent/blocker.php
 create mode 100644 classes/local/persistent/institution.php
 create mode 100644 classes/local/persistent/room.php
 create mode 100644 classes/local/persistent/weekplan.php
 create mode 100644 classes/local/persistent/weekplan_room.php
 create mode 100644 classes/local/table/institutions_table.php
 create mode 100644 classes/local/table/rooms_table.php
 create mode 100644 classes/local/table/weekplan_room_table.php
 create mode 100644 classes/local/table/weekplans_table.php
 create mode 100644 db/services.php
 create mode 100644 edit_institution.php
 create mode 100644 edit_room.php
 create mode 100644 edit_weekplan.php
 create mode 100644 edit_weekplan_room.php
 create mode 100644 events_available.php
 create mode 100644 institutions.php
 create mode 100644 rooms.php
 create mode 100644 templates/admin_calendar_legend.mustache
 create mode 100644 thirdpartylibs.xml
 rename {assets => thirdpartylibs/event-calendar}/custom-calendar.min.css (100%)
 create mode 100644 thirdpartylibs/event-calendar/event-calendar.min.css
 create mode 100644 thirdpartylibs/event-calendar/event-calendar.min.js
 create mode 100644 thirdpartylibs/event-calendar/event-calendar.min.js.map
 create mode 100644 view_room.php
 create mode 100644 weekplan.php
 create mode 100644 weekplans.php

diff --git a/amd/build/available_calendar.min.js b/amd/build/available_calendar.min.js
new file mode 100644
index 0000000..04c49c4
--- /dev/null
+++ b/amd/build/available_calendar.min.js
@@ -0,0 +1,11 @@
+define("mod_bookit/available_calendar",["exports","core/ajax","core/str","core/modal_events","core_form/modalform","core/prefetch","mod_bookit/calendar"],(function(_exports,Ajax,_str,_modal_events,_modalform,_prefetch,_calendar){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=
+/**
+   * Manage the calendar
+   *
+   * @module     mod_bookit/available_calendar
+   * @copyright  2024 Melanie Treitinger, Justus Dieckmann RUB
+   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+   */
+async function(eventsource,capabilities,lang){await(0,_calendar.theGlobalProperty)("EventCalendar");(0,_prefetch.prefetchStrings)("mod_bookit",["add_blocker"]),(0,_prefetch.prefetchStrings)("core",["today","month","week"]),(0,_prefetch.prefetchStrings)("calendar",["day","upcomingevents"]);const str_request_booking=await(0,_str.getString)("add_blocker","mod_bookit"),str_today=await(0,_str.getString)("today"),str_month=await(0,_str.getString)("month"),str_week=await(0,_str.getString)("week"),str_day=await(0,_str.getString)("day","calendar"),str_list=await(0,_str.getString)("upcomingevents","calendar");let viewType="timeGridWeek";window.screen.width<=1e3&&(viewType="listWeek");var calendar;calendar=new window.EventCalendar(document.getElementById("ec"),{locale:lang,view:viewType,firstDay:1,scrollTime:"09:00:00",slotMinTime:"07:00:00",dayMaxEvents:!0,nowIndicator:!0,selectable:!1,eventBackgroundColor:"#035AA3",eventStartEditable:!1,eventDurationEditable:!1,buttonText:function(text){return text.today=str_today,text.dayGridMonth=str_month,text.timeGridWeek=str_week,text.timeGridDay=str_day,text.listWeek=str_list,text},customButtons:{addButton:{text:str_request_booking,click:function(){const modalForm=new _modalform.default({formClass:"mod_bookit\\local\\form\\edit_blocker_form",args:{},modalConfig:{title:(0,_str.getString)("add_blocker","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.show()}}},dateClick:function(info){let d=new Date,dateoff=new Date(d.setMinutes(d.getMinutes()-d.getTimezoneOffset())),startdate=info.dateStr;if(startdate>dateoff.toISOString()){const modalForm=new _modalform.default({formClass:"mod_bookit\\local\\form\\edit_blocker_form",args:{startdate:startdate},modalConfig:{title:(0,_str.getString)("add_blocker","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.show()}},eventClick:function(info){if("blocker"===info.event.extendedProps.type){const modalForm=new _modalform.default({formClass:"mod_bookit\\local\\form\\edit_blocker_form",args:{id:info.event.id},modalConfig:{title:(0,_str.getString)("edit_blocker","mod_bookit")},moduleName:"mod_bookit/modal_delete_save_cancel"});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.addEventListener(modalForm.events.LOADED,(()=>{modalForm.modal.getRoot().on(_modal_events.default.delete,(async()=>{var blockerId;await(blockerId=info.event.id,Ajax.call([{methodname:"mod_bookit_delete_blocker",args:{blockerid:blockerId}}])[0]),calendar.refetchEvents()}))})),modalForm.show()}},headerToolbar:{start:"prev, next, today, addButton",center:"title",end:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},resources:[],eventSources:[{url:eventsource}],views:{timeGridWeek:{pointer:!0},resourceTimeGridWeek:{pointer:!0},resourceTimelineWeek:{pointer:!0,slotMinTime:"09:00",slotMaxTime:"21:00",slotWidth:80,resources:[]}}})},Ajax=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Ajax),_modal_events=_interopRequireDefault(_modal_events),_modalform=_interopRequireDefault(_modalform)}));
+
+//# sourceMappingURL=available_calendar.min.js.map
\ No newline at end of file
diff --git a/amd/build/available_calendar.min.js.map b/amd/build/available_calendar.min.js.map
new file mode 100644
index 0000000..a6b5a1c
--- /dev/null
+++ b/amd/build/available_calendar.min.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"available_calendar.min.js","sources":["../src/available_calendar.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage the calendar\n *\n * @module     mod_bookit/available_calendar\n * @copyright  2024 Melanie Treitinger, Justus Dieckmann RUB\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Ajax from 'core/ajax';\nimport {getString} from 'core/str';\nimport ModalEvents from 'core/modal_events';\nimport ModalForm from 'core_form/modalform';\nimport {prefetchStrings} from 'core/prefetch';\nimport {theGlobalProperty} from \"mod_bookit/calendar\";\n\n/**\n * Initializes the calendar.\n * @param {string} eventsource\n * @param {array} capabilities\n * @param {string} lang\n * @returns {Promise<void>}\n */\nexport async function init(eventsource, capabilities, lang) {\n    await theGlobalProperty('EventCalendar');\n\n    // Define toolbarbuttons.\n    const toolbarbuttons = 'prev, next, today, addButton';\n\n    // String variables.\n    prefetchStrings('mod_bookit', ['add_blocker']);\n    prefetchStrings('core', ['today', 'month', 'week']);\n    prefetchStrings('calendar', ['day', 'upcomingevents']);\n    const str_request_booking = await getString('add_blocker', 'mod_bookit');\n    const str_today = await getString('today');\n    const str_month = await getString('month');\n    const str_week = await getString('week');\n    const str_day = await getString('day', 'calendar');\n    const str_list = await getString('upcomingevents', 'calendar');\n\n    // Define viewtype.\n    let viewType = 'timeGridWeek';\n    if (window.screen.width <= 1000) {\n        viewType = 'listWeek';\n    }\n\n    var calendar;\n\n    calendar = new window.EventCalendar(document.getElementById('ec'), {\n        locale: lang,\n        view: viewType,\n        firstDay: 1,\n        scrollTime: '09:00:00',\n        slotMinTime: '07:00:00',\n        dayMaxEvents: true,\n        nowIndicator: true,\n        selectable: false,\n        eventBackgroundColor: '#035AA3',\n        eventStartEditable: false,\n        eventDurationEditable: false,\n        buttonText: function(text) {\n            text.today = str_today;\n            text.dayGridMonth = str_month;\n            text.timeGridWeek = str_week;\n            text.timeGridDay = str_day;\n            text.listWeek = str_list;\n            return text;\n        },\n        customButtons: {\n            addButton: {\n                text: str_request_booking,\n                click: function() {\n                    const modalForm = new ModalForm({\n                        formClass: \"mod_bookit\\\\local\\\\form\\\\edit_blocker_form\",\n                        args: {\n                        },\n                        modalConfig: {title: getString('add_blocker', 'mod_bookit')},\n                    });\n                    modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                        calendar.refetchEvents();\n                    });\n                    modalForm.show();\n                }\n            }\n        },\n        dateClick: function(info) {\n            let d = new Date();\n            let dateoff = new Date(d.setMinutes(d.getMinutes() - d.getTimezoneOffset()));\n            let startdate = info.dateStr;\n            if (startdate > dateoff.toISOString()) {\n                const modalForm = new ModalForm({\n                    formClass: \"mod_bookit\\\\local\\\\form\\\\edit_blocker_form\",\n                    args: {\n                        startdate: startdate,\n                    },\n                    modalConfig: {title: getString('add_blocker', 'mod_bookit')},\n                });\n                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                    calendar.refetchEvents();\n                });\n                modalForm.show();\n            }\n        },\n        eventClick: function(info) {\n            if (info.event.extendedProps.type === 'blocker') {\n                const modalForm = new ModalForm({\n                    formClass: \"mod_bookit\\\\local\\\\form\\\\edit_blocker_form\",\n                    args: {\n                        id: info.event.id,\n                    },\n                    modalConfig: {\n                        title: getString('edit_blocker', 'mod_bookit'),\n                    },\n                    moduleName: 'mod_bookit/modal_delete_save_cancel',\n                });\n                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                    calendar.refetchEvents();\n                });\n                modalForm.addEventListener(modalForm.events.LOADED, () => {\n                    modalForm.modal.getRoot().on(ModalEvents.delete, async() => {\n                        await deleteBlocker(info.event.id);\n                        calendar.refetchEvents();\n                    });\n                });\n                modalForm.show();\n            }\n        },\n        headerToolbar: {\n            start: toolbarbuttons,\n            center: 'title',\n            end: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'\n        },\n        resources: [],\n        eventSources: [\n            {\n                url: eventsource,\n            },\n        ],\n        views: {\n            timeGridWeek: {pointer: true},\n            resourceTimeGridWeek: {pointer: true},\n            resourceTimelineWeek: {\n                pointer: true,\n                slotMinTime: '09:00',\n                slotMaxTime: '21:00',\n                slotWidth: 80,\n                resources: []\n            }\n        },\n    });\n}\n\n/**\n * Deletes a blocker.\n *\n * @param {int} blockerId\n * @returns Promise<any>\n */\nfunction deleteBlocker(blockerId) {\n    return Ajax.call([{\n        methodname: 'mod_bookit_delete_blocker',\n        args: {\n            blockerid: blockerId\n        }\n    }])[0];\n}\n"],"names":["eventsource","capabilities","lang","str_request_booking","str_today","str_month","str_week","str_day","str_list","viewType","window","screen","width","calendar","EventCalendar","document","getElementById","locale","view","firstDay","scrollTime","slotMinTime","dayMaxEvents","nowIndicator","selectable","eventBackgroundColor","eventStartEditable","eventDurationEditable","buttonText","text","today","dayGridMonth","timeGridWeek","timeGridDay","listWeek","customButtons","addButton","click","modalForm","ModalForm","formClass","args","modalConfig","title","addEventListener","events","FORM_SUBMITTED","refetchEvents","show","dateClick","info","d","Date","dateoff","setMinutes","getMinutes","getTimezoneOffset","startdate","dateStr","toISOString","eventClick","event","extendedProps","type","id","moduleName","LOADED","modal","getRoot","on","ModalEvents","delete","async","blockerId","Ajax","call","methodname","blockerid","headerToolbar","start","center","end","resources","eventSources","url","views","pointer","resourceTimeGridWeek","resourceTimelineWeek","slotMaxTime","slotWidth"],"mappings":";;;;;;;;eAqC2BA,YAAaC,aAAcC,YAC5C,+BAAkB,+CAMR,aAAc,CAAC,8CACf,OAAQ,CAAC,QAAS,QAAS,uCAC3B,WAAY,CAAC,MAAO,yBAC9BC,0BAA4B,kBAAU,cAAe,cACrDC,gBAAkB,kBAAU,SAC5BC,gBAAkB,kBAAU,SAC5BC,eAAiB,kBAAU,QAC3BC,cAAgB,kBAAU,MAAO,YACjCC,eAAiB,kBAAU,iBAAkB,gBAG/CC,SAAW,eACXC,OAAOC,OAAOC,OAAS,MACvBH,SAAW,gBAGXI,SAEJA,SAAW,IAAIH,OAAOI,cAAcC,SAASC,eAAe,MAAO,CAC/DC,OAAQf,KACRgB,KAAMT,SACNU,SAAU,EACVC,WAAY,WACZC,YAAa,WACbC,cAAc,EACdC,cAAc,EACdC,YAAY,EACZC,qBAAsB,UACtBC,oBAAoB,EACpBC,uBAAuB,EACvBC,WAAY,SAASC,aACjBA,KAAKC,MAAQ1B,UACbyB,KAAKE,aAAe1B,UACpBwB,KAAKG,aAAe1B,SACpBuB,KAAKI,YAAc1B,QACnBsB,KAAKK,SAAW1B,SACTqB,MAEXM,cAAe,CACXC,UAAW,CACPP,KAAM1B,oBACNkC,MAAO,iBACGC,UAAY,IAAIC,mBAAU,CAC5BC,UAAW,6CACXC,KAAM,GAENC,YAAa,CAACC,OAAO,kBAAU,cAAe,iBAElDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDjC,SAASkC,mBAEbT,UAAUU,UAItBC,UAAW,SAASC,UACZC,EAAI,IAAIC,KACRC,QAAU,IAAID,KAAKD,EAAEG,WAAWH,EAAEI,aAAeJ,EAAEK,sBACnDC,UAAYP,KAAKQ,WACjBD,UAAYJ,QAAQM,cAAe,OAC7BrB,UAAY,IAAIC,mBAAU,CAC5BC,UAAW,6CACXC,KAAM,CACFgB,UAAWA,WAEff,YAAa,CAACC,OAAO,kBAAU,cAAe,iBAElDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDjC,SAASkC,mBAEbT,UAAUU,SAGlBY,WAAY,SAASV,SACqB,YAAlCA,KAAKW,MAAMC,cAAcC,KAAoB,OACvCzB,UAAY,IAAIC,mBAAU,CAC5BC,UAAW,6CACXC,KAAM,CACFuB,GAAId,KAAKW,MAAMG,IAEnBtB,YAAa,CACTC,OAAO,kBAAU,eAAgB,eAErCsB,WAAY,wCAEhB3B,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDjC,SAASkC,mBAEbT,UAAUM,iBAAiBN,UAAUO,OAAOqB,QAAQ,KAChD5B,UAAU6B,MAAMC,UAAUC,GAAGC,sBAAYC,QAAQC,cAuC9CC,gBAAAA,UAtCqBvB,KAAKW,MAAMG,GAuC5CU,KAAKC,KAAK,CAAC,CACdC,WAAY,4BACZnC,KAAM,CACFoC,UAAWJ,cAEf,IA3CgB5D,SAASkC,sBAGjBT,UAAUU,SAGlB8B,cAAe,CACXC,MArGe,+BAsGfC,OAAQ,QACRC,IAAK,kDAETC,UAAW,GACXC,aAAc,CACV,CACIC,IAAKpF,cAGbqF,MAAO,CACHrD,aAAc,CAACsD,SAAS,GACxBC,qBAAsB,CAACD,SAAS,GAChCE,qBAAsB,CAClBF,SAAS,EACTjE,YAAa,QACboE,YAAa,QACbC,UAAW,GACXR,UAAW"}
\ No newline at end of file
diff --git a/amd/build/calendar.min.js b/amd/build/calendar.min.js
index 4e12c87..eea2901 100644
--- a/amd/build/calendar.min.js
+++ b/amd/build/calendar.min.js
@@ -1,3 +1,10 @@
-define("mod_bookit/calendar",["exports","core/str","core_form/modalform","core/prefetch"],(function(_exports,_str,_modalform,_prefetch){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=async function(cmid,eventsource,capabilities,lang,config){await(globalPropertyName="EventCalendar",new Promise((resolve=>{const innerWait=()=>{window[globalPropertyName]||setTimeout(innerWait,20),resolve()};innerWait()})));var globalPropertyName;let textcolor="#ffffff";Object.hasOwn(config,"textcolor")&&(textcolor=config.textcolor,console.log("textcolor set to "+textcolor));let toolbarbuttons="prev,next today";capabilities.addevent&&(toolbarbuttons="prev,next today, addButton",console.log(capabilities));(0,_prefetch.prefetchStrings)("mod_bookit",["addbooking"]),(0,_prefetch.prefetchStrings)("core",["today","month","week"]),(0,_prefetch.prefetchStrings)("calendar",["day","upcomingevents"]);const str_request_booking=await(0,_str.getString)("addbooking","mod_bookit"),str_today=await(0,_str.getString)("today"),str_month=await(0,_str.getString)("month"),str_week=await(0,_str.getString)("week"),str_day=await(0,_str.getString)("day","calendar"),str_list=await(0,_str.getString)("upcomingevents","calendar");let viewType="timeGridWeek";window.screen.width<=1e3&&(viewType="listWeek");var calendar;calendar=new window.EventCalendar(document.getElementById("ec"),{locale:lang,view:viewType,firstDay:1,scrollTime:"09:00:00",slotMinTime:"07:00:00",dayMaxEvents:!0,nowIndicator:!0,selectable:!1,eventTextColor:textcolor,eventBackgroundColor:"#035AA3",eventStartEditable:!1,eventDurationEditable:!1,buttonText:function(text){return text.today=str_today,text.dayGridMonth=str_month,text.timeGridWeek=str_week,text.timeGridDay=str_day,text.listWeek=str_list,text},customButtons:{addButton:{text:str_request_booking,click:function(){const modalForm=new _modalform.default({formClass:"mod_bookit\\form\\edit_event_form",args:{cmid:cmid},modalConfig:{title:(0,_str.getString)("edit_event","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.show()}}},dateClick:function(info){let d=new Date,dateoff=new Date(d.setMinutes(d.getMinutes()-d.getTimezoneOffset())),startdate=info.dateStr;if(capabilities.addevent&&startdate>dateoff.toISOString()){const modalForm=new _modalform.default({formClass:"mod_bookit\\form\\edit_event_form",args:{cmid:cmid,startdate:startdate},modalConfig:{title:(0,_str.getString)("edit_event","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.show()}},eventClick:function(info){let id=info.event.id;if(console.log(info),console.log("cmid: "+cmid),console.log("id: "+id),console.log(info.event.extendedProps.reserved),!info.event.extendedProps.reserved){const modalForm=new _modalform.default({formClass:"mod_bookit\\form\\edit_event_form",args:{cmid:cmid,id:id},modalConfig:{title:(0,_str.getString)("edit_event","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.show()}},headerToolbar:{start:toolbarbuttons,center:"title",end:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},resources:[],eventSources:[{url:eventsource}],views:{timeGridWeek:{pointer:!0},resourceTimeGridWeek:{pointer:!0},resourceTimelineWeek:{pointer:!0,slotMinTime:"09:00",slotMaxTime:"21:00",slotWidth:80,resources:[]}}})},_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj}}));
+define("mod_bookit/calendar",["exports","core/str","core_form/modalform","core/prefetch","mod_bookit/possible_slots_refresh"],(function(_exports,_str,_modalform,_prefetch,_possible_slots_refresh){var obj;
+/**
+   * Manage the calendar
+   *
+   * @module     mod_bookit/calendar
+   * @copyright  2024 Melanie Treitinger, Justus Dieckmann RUB
+   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=async function(cmid,eventsource,capabilities,lang,config){await theGlobalProperty("EventCalendar");let textcolor="#ffffff";Object.hasOwn(config,"textcolor")&&(textcolor=config.textcolor);let toolbarbuttons="prev,next today";capabilities.addevent&&(toolbarbuttons="prev,next today, addButton");(0,_prefetch.prefetchStrings)("mod_bookit",["addbooking"]),(0,_prefetch.prefetchStrings)("core",["today","month","week"]),(0,_prefetch.prefetchStrings)("calendar",["day","upcomingevents"]);const str_request_booking=await(0,_str.getString)("addbooking","mod_bookit"),str_today=await(0,_str.getString)("today"),str_month=await(0,_str.getString)("month"),str_week=await(0,_str.getString)("week"),str_day=await(0,_str.getString)("day","calendar"),str_list=await(0,_str.getString)("upcomingevents","calendar");let viewType="timeGridWeek";window.screen.width<=1e3&&(viewType="listWeek");var calendar;calendar=new window.EventCalendar(document.getElementById("ec"),{locale:lang,view:viewType,firstDay:1,scrollTime:"09:00:00",slotMinTime:"07:00:00",dayMaxEvents:!0,nowIndicator:!0,selectable:!1,eventTextColor:textcolor,eventBackgroundColor:"#035AA3",eventStartEditable:!1,eventDurationEditable:!1,buttonText:function(text){return text.today=str_today,text.dayGridMonth=str_month,text.timeGridWeek=str_week,text.timeGridDay=str_day,text.listWeek=str_list,text},customButtons:{addButton:{text:str_request_booking,click:function(){const modalForm=new _modalform.default({formClass:"mod_bookit\\form\\edit_event_form",args:{cmid:cmid},modalConfig:{title:(0,_str.getString)("edit_event","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.addEventListener(modalForm.events.LOADED,_possible_slots_refresh.initPossibleStarttimesRefresh),modalForm.show()}}},dateClick:function(info){let d=new Date,dateoff=new Date(d.setMinutes(d.getMinutes()-d.getTimezoneOffset())),startdate=info.dateStr;if(capabilities.addevent&&startdate>dateoff.toISOString()){const modalForm=new _modalform.default({formClass:"mod_bookit\\form\\edit_event_form",args:{cmid:cmid,timeclicked:startdate},modalConfig:{title:(0,_str.getString)("edit_event","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.addEventListener(modalForm.events.LOADED,_possible_slots_refresh.initPossibleStarttimesRefresh),modalForm.show()}},eventClick:function(info){let id=info.event.id;if(!info.event.extendedProps.reserved){const modalForm=new _modalform.default({formClass:"mod_bookit\\form\\edit_event_form",args:{cmid:cmid,id:id},modalConfig:{title:(0,_str.getString)("edit_event","mod_bookit")}});modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(()=>{calendar.refetchEvents()})),modalForm.addEventListener(modalForm.events.LOADED,_possible_slots_refresh.initPossibleStarttimesRefresh),modalForm.show()}},headerToolbar:{start:toolbarbuttons,center:"title",end:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},resources:[],eventSources:[{url:eventsource}],views:{timeGridWeek:{pointer:!0},resourceTimeGridWeek:{pointer:!0},resourceTimelineWeek:{pointer:!0,slotMinTime:"09:00",slotMaxTime:"21:00",slotWidth:80,resources:[]}}})},_exports.theGlobalProperty=void 0,_modalform=(obj=_modalform)&&obj.__esModule?obj:{default:obj};const theGlobalProperty=globalPropertyName=>new Promise((resolve=>{const innerWait=()=>{window[globalPropertyName]||setTimeout(innerWait,20),resolve()};innerWait()}));_exports.theGlobalProperty=theGlobalProperty}));
 
 //# sourceMappingURL=calendar.min.js.map
\ No newline at end of file
diff --git a/amd/build/calendar.min.js.map b/amd/build/calendar.min.js.map
index a1b0dc9..ef1b42d 100644
--- a/amd/build/calendar.min.js.map
+++ b/amd/build/calendar.min.js.map
@@ -1 +1 @@
-{"version":3,"file":"calendar.min.js","sources":["../src/calendar.js"],"sourcesContent":["import {getString} from 'core/str';\nimport ModalForm from 'core_form/modalform';\nimport {prefetchStrings} from 'core/prefetch';\n\nconst theGlobalProperty = (globalPropertyName) => {\n    return new Promise((resolve) => {\n       const innerWait = () => {\n           if (!window[globalPropertyName]) {\n               setTimeout(innerWait, 20);\n           }\n           resolve();\n       };\n       innerWait();\n    });\n};\n\n/**\n * Initializes the calendar.\n * @param {int} cmid\n * @param {string} eventsource\n * @param {array} capabilities\n * @param {string} lang\n * @param {array} config\n * @returns {Promise<void>}\n */\nexport async function init(cmid, eventsource, capabilities, lang, config) {\n    await theGlobalProperty('EventCalendar');\n\n    // Set textcolor.\n    let textcolor = '#ffffff';\n    if (Object.hasOwn(config, 'textcolor')) {\n        textcolor = config.textcolor;\n        console.log('textcolor set to '+textcolor);\n    }\n\n    // Define toolbarbuttons.\n    let toolbarbuttons = 'prev,next today';\n    if (capabilities.addevent) {\n        toolbarbuttons = 'prev,next today, addButton';\n        console.log(capabilities);\n    }\n\n    // String variables.\n    prefetchStrings('mod_bookit', ['addbooking']);\n    prefetchStrings('core', ['today', 'month', 'week']);\n    prefetchStrings('calendar', ['day', 'upcomingevents']);\n    const str_request_booking   = await getString('addbooking', 'mod_bookit');\n    const str_today             = await getString('today');\n    const str_month             = await getString('month');\n    const str_week              = await getString('week');\n    const str_day               = await getString('day', 'calendar');\n    const str_list              = await getString('upcomingevents', 'calendar');\n    /*const str_request_booking = 'XXX';\n    const str_today             = 'XXX';\n    const str_month             = 'XXX';\n    const str_week              = 'XXX';\n    const str_day               = 'XXX';\n    const str_list              = 'XXX';*/\n\n    // Define viewtype.\n    let viewType = 'timeGridWeek';\n    if (window.screen.width <= 1000) {\n        viewType = 'listWeek';\n    }\n\n    var calendar;\n\n    calendar = new window.EventCalendar(document.getElementById('ec'), {\n        locale: lang,\n        view: viewType,\n        firstDay: 1,\n        scrollTime: '09:00:00',\n        slotMinTime: '07:00:00',\n        dayMaxEvents: true,\n        nowIndicator: true,\n        selectable: false,\n        eventTextColor: textcolor,\n        eventBackgroundColor: '#035AA3',\n        eventStartEditable: false,\n        eventDurationEditable: false,\n        buttonText: function (text) {\n            text.today = str_today;\n            text.dayGridMonth = str_month;\n            text.timeGridWeek = str_week;\n            text.timeGridDay = str_day;\n            text.listWeek = str_list;\n            return text;\n        },\n        customButtons: {\n            addButton: {\n                text: str_request_booking,\n                click: function() {\n                    const modalForm = new ModalForm({\n                                    formClass: \"mod_bookit\\\\form\\\\edit_event_form\",\n                                    args: {\n                                        cmid: cmid,\n                                    },\n                                    modalConfig: {title: getString('edit_event', 'mod_bookit')},\n                                });\n                                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                                    calendar.refetchEvents();\n                                });\n                                modalForm.show();\n                }\n            }\n        },\n        dateClick: function(info) {\n            let d = new Date();\n            let dateoff = new Date(d.setMinutes(d.getMinutes() - d.getTimezoneOffset()));\n            let startdate = info.dateStr;\n            if (capabilities.addevent && startdate > dateoff.toISOString()) {\n                const modalForm = new ModalForm({\n                    formClass: \"mod_bookit\\\\form\\\\edit_event_form\",\n                    args: {\n                        cmid: cmid,\n                        startdate: startdate,\n                    },\n                    modalConfig: {title: getString('edit_event', 'mod_bookit')},\n                });\n                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                    calendar.refetchEvents();\n                });\n                modalForm.show();\n            }\n        },\n        eventClick: function (info) {\n            let id = info.event.id;\n\n            console.log(info);\n            console.log(\"cmid: \"+cmid);\n            console.log(\"id: \"+id);\n            console.log(info.event.extendedProps.reserved);\n\n            if (!info.event.extendedProps.reserved) {\n                const modalForm = new ModalForm({\n                    formClass: \"mod_bookit\\\\form\\\\edit_event_form\",\n                    args: {\n                        cmid: cmid,\n                        id: id,\n                    },\n                    modalConfig: {title: getString('edit_event', 'mod_bookit')},\n                });\n                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                    calendar.refetchEvents();\n                });\n                modalForm.show();\n            }\n        },\n        headerToolbar: {\n            start: toolbarbuttons,\n            center: 'title',\n            end: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'\n        },\n        resources: [],\n        eventSources: [\n            {\n                url: eventsource,\n            },\n        ],\n        views: {\n            timeGridWeek: {pointer: true},\n            resourceTimeGridWeek: {pointer: true},\n            resourceTimelineWeek: {\n                pointer: true,\n                slotMinTime: '09:00',\n                slotMaxTime: '21:00',\n                slotWidth: 80,\n                resources: []\n            }\n        },\n    });\n}\n"],"names":["cmid","eventsource","capabilities","lang","config","globalPropertyName","Promise","resolve","innerWait","window","setTimeout","textcolor","Object","hasOwn","console","log","toolbarbuttons","addevent","str_request_booking","str_today","str_month","str_week","str_day","str_list","viewType","screen","width","calendar","EventCalendar","document","getElementById","locale","view","firstDay","scrollTime","slotMinTime","dayMaxEvents","nowIndicator","selectable","eventTextColor","eventBackgroundColor","eventStartEditable","eventDurationEditable","buttonText","text","today","dayGridMonth","timeGridWeek","timeGridDay","listWeek","customButtons","addButton","click","modalForm","ModalForm","formClass","args","modalConfig","title","addEventListener","events","FORM_SUBMITTED","refetchEvents","show","dateClick","info","d","Date","dateoff","setMinutes","getMinutes","getTimezoneOffset","startdate","dateStr","toISOString","eventClick","id","event","extendedProps","reserved","headerToolbar","start","center","end","resources","eventSources","url","views","pointer","resourceTimeGridWeek","resourceTimelineWeek","slotMaxTime","slotWidth"],"mappings":"qOAyB2BA,KAAMC,YAAaC,aAAcC,KAAMC,cArBvCC,mBAsBC,gBArBjB,IAAIC,SAASC,gBACXC,UAAY,KACTC,OAAOJ,qBACRK,WAAWF,UAAW,IAE1BD,WAEJC,gBARoBH,IAAAA,uBAyBnBM,UAAY,UACZC,OAAOC,OAAOT,OAAQ,eACtBO,UAAYP,OAAOO,UACnBG,QAAQC,IAAI,oBAAoBJ,gBAIhCK,eAAiB,kBACjBd,aAAae,WACbD,eAAiB,6BACjBF,QAAQC,IAAIb,6CAIA,aAAc,CAAC,6CACf,OAAQ,CAAC,QAAS,QAAS,uCAC3B,WAAY,CAAC,MAAO,yBAC9BgB,0BAA8B,kBAAU,aAAc,cACtDC,gBAA8B,kBAAU,SACxCC,gBAA8B,kBAAU,SACxCC,eAA8B,kBAAU,QACxCC,cAA8B,kBAAU,MAAO,YAC/CC,eAA8B,kBAAU,iBAAkB,gBAS5DC,SAAW,eACXf,OAAOgB,OAAOC,OAAS,MACvBF,SAAW,gBAGXG,SAEJA,SAAW,IAAIlB,OAAOmB,cAAcC,SAASC,eAAe,MAAO,CAC/DC,OAAQ5B,KACR6B,KAAMR,SACNS,SAAU,EACVC,WAAY,WACZC,YAAa,WACbC,cAAc,EACdC,cAAc,EACdC,YAAY,EACZC,eAAgB5B,UAChB6B,qBAAsB,UACtBC,oBAAoB,EACpBC,uBAAuB,EACvBC,WAAY,SAAUC,aAClBA,KAAKC,MAAQ1B,UACbyB,KAAKE,aAAe1B,UACpBwB,KAAKG,aAAe1B,SACpBuB,KAAKI,YAAc1B,QACnBsB,KAAKK,SAAW1B,SACTqB,MAEXM,cAAe,CACXC,UAAW,CACPP,KAAM1B,oBACNkC,MAAO,iBACGC,UAAY,IAAIC,mBAAU,CAChBC,UAAW,oCACXC,KAAM,CACFxD,KAAMA,MAEVyD,YAAa,CAACC,OAAO,kBAAU,aAAc,iBAEjDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDlC,SAASmC,mBAEbT,UAAUU,UAIlCC,UAAW,SAASC,UACZC,EAAI,IAAIC,KACRC,QAAU,IAAID,KAAKD,EAAEG,WAAWH,EAAEI,aAAeJ,EAAEK,sBACnDC,UAAYP,KAAKQ,WACjBvE,aAAae,UAAYuD,UAAYJ,QAAQM,cAAe,OACtDrB,UAAY,IAAIC,mBAAU,CAC5BC,UAAW,oCACXC,KAAM,CACFxD,KAAMA,KACNwE,UAAWA,WAEff,YAAa,CAACC,OAAO,kBAAU,aAAc,iBAEjDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDlC,SAASmC,mBAEbT,UAAUU,SAGlBY,WAAY,SAAUV,UACdW,GAAKX,KAAKY,MAAMD,MAEpB9D,QAAQC,IAAIkD,MACZnD,QAAQC,IAAI,SAASf,MACrBc,QAAQC,IAAI,OAAO6D,IACnB9D,QAAQC,IAAIkD,KAAKY,MAAMC,cAAcC,WAEhCd,KAAKY,MAAMC,cAAcC,SAAU,OAC9B1B,UAAY,IAAIC,mBAAU,CAC5BC,UAAW,oCACXC,KAAM,CACFxD,KAAMA,KACN4E,GAAIA,IAERnB,YAAa,CAACC,OAAO,kBAAU,aAAc,iBAEjDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDlC,SAASmC,mBAEbT,UAAUU,SAGlBiB,cAAe,CACXC,MAAOjE,eACPkE,OAAQ,QACRC,IAAK,kDAETC,UAAW,GACXC,aAAc,CACV,CACIC,IAAKrF,cAGbsF,MAAO,CACHxC,aAAc,CAACyC,SAAS,GACxBC,qBAAsB,CAACD,SAAS,GAChCE,qBAAsB,CAClBF,SAAS,EACTrD,YAAa,QACbwD,YAAa,QACbC,UAAW,GACXR,UAAW"}
\ No newline at end of file
+{"version":3,"file":"calendar.min.js","sources":["../src/calendar.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage the calendar\n *\n * @module     mod_bookit/calendar\n * @copyright  2024 Melanie Treitinger, Justus Dieckmann RUB\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {getString} from 'core/str';\nimport ModalForm from 'core_form/modalform';\nimport {prefetchStrings} from 'core/prefetch';\nimport {initPossibleStarttimesRefresh} from \"mod_bookit/possible_slots_refresh\";\n\nexport const theGlobalProperty = (globalPropertyName) => {\n    return new Promise((resolve) => {\n       const innerWait = () => {\n           if (!window[globalPropertyName]) {\n               setTimeout(innerWait, 20);\n           }\n           resolve();\n       };\n       innerWait();\n    });\n};\n\n/**\n * Initializes the calendar.\n * @param {int} cmid\n * @param {string} eventsource\n * @param {array} capabilities\n * @param {string} lang\n * @param {array} config\n * @returns {Promise<void>}\n */\nexport async function init(cmid, eventsource, capabilities, lang, config) {\n    await theGlobalProperty('EventCalendar');\n\n    // Set textcolor.\n    let textcolor = '#ffffff';\n    if (Object.hasOwn(config, 'textcolor')) {\n        textcolor = config.textcolor;\n    }\n\n    // Define toolbarbuttons.\n    let toolbarbuttons = 'prev,next today';\n    if (capabilities.addevent) {\n        toolbarbuttons = 'prev,next today, addButton';\n    }\n\n    // String variables.\n    prefetchStrings('mod_bookit', ['addbooking']);\n    prefetchStrings('core', ['today', 'month', 'week']);\n    prefetchStrings('calendar', ['day', 'upcomingevents']);\n    const str_request_booking   = await getString('addbooking', 'mod_bookit');\n    const str_today             = await getString('today');\n    const str_month             = await getString('month');\n    const str_week              = await getString('week');\n    const str_day               = await getString('day', 'calendar');\n    const str_list              = await getString('upcomingevents', 'calendar');\n    /*const str_request_booking = 'XXX';\n    const str_today             = 'XXX';\n    const str_month             = 'XXX';\n    const str_week              = 'XXX';\n    const str_day               = 'XXX';\n    const str_list              = 'XXX';*/\n\n    // Define viewtype.\n    let viewType = 'timeGridWeek';\n    if (window.screen.width <= 1000) {\n        viewType = 'listWeek';\n    }\n\n    var calendar;\n\n    calendar = new window.EventCalendar(document.getElementById('ec'), {\n        locale: lang,\n        view: viewType,\n        firstDay: 1,\n        scrollTime: '09:00:00',\n        slotMinTime: '07:00:00',\n        dayMaxEvents: true,\n        nowIndicator: true,\n        selectable: false,\n        eventTextColor: textcolor,\n        eventBackgroundColor: '#035AA3',\n        eventStartEditable: false,\n        eventDurationEditable: false,\n        buttonText: function (text) {\n            text.today = str_today;\n            text.dayGridMonth = str_month;\n            text.timeGridWeek = str_week;\n            text.timeGridDay = str_day;\n            text.listWeek = str_list;\n            return text;\n        },\n        customButtons: {\n            addButton: {\n                text: str_request_booking,\n                click: function() {\n                    const modalForm = new ModalForm({\n                                    formClass: \"mod_bookit\\\\form\\\\edit_event_form\",\n                                    args: {\n                                        cmid: cmid,\n                                    },\n                                    modalConfig: {title: getString('edit_event', 'mod_bookit')},\n                                });\n                                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                                    calendar.refetchEvents();\n                                });\n                                modalForm.addEventListener(modalForm.events.LOADED, initPossibleStarttimesRefresh);\n                                modalForm.show();\n                }\n            }\n        },\n        dateClick: function(info) {\n            let d = new Date();\n            let dateoff = new Date(d.setMinutes(d.getMinutes() - d.getTimezoneOffset()));\n            let startdate = info.dateStr;\n            if (capabilities.addevent && startdate > dateoff.toISOString()) {\n                const modalForm = new ModalForm({\n                    formClass: \"mod_bookit\\\\form\\\\edit_event_form\",\n                    args: {\n                        cmid: cmid,\n                        timeclicked: startdate,\n                    },\n                    modalConfig: {title: getString('edit_event', 'mod_bookit')},\n                });\n                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                    calendar.refetchEvents();\n                });\n                modalForm.addEventListener(modalForm.events.LOADED, initPossibleStarttimesRefresh);\n                modalForm.show();\n            }\n        },\n        eventClick: function (info) {\n            let id = info.event.id;\n\n            if (!info.event.extendedProps.reserved) {\n                const modalForm = new ModalForm({\n                    formClass: \"mod_bookit\\\\form\\\\edit_event_form\",\n                    args: {\n                        cmid: cmid,\n                        id: id,\n                    },\n                    modalConfig: {title: getString('edit_event', 'mod_bookit')},\n                });\n                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\n                    calendar.refetchEvents();\n                });\n                modalForm.addEventListener(modalForm.events.LOADED, initPossibleStarttimesRefresh);\n                modalForm.show();\n            }\n        },\n        headerToolbar: {\n            start: toolbarbuttons,\n            center: 'title',\n            end: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'\n        },\n        resources: [],\n        eventSources: [\n            {\n                url: eventsource,\n            },\n        ],\n        views: {\n            timeGridWeek: {pointer: true},\n            resourceTimeGridWeek: {pointer: true},\n            resourceTimelineWeek: {\n                pointer: true,\n                slotMinTime: '09:00',\n                slotMaxTime: '21:00',\n                slotWidth: 80,\n                resources: []\n            }\n        },\n    });\n}\n"],"names":["cmid","eventsource","capabilities","lang","config","theGlobalProperty","textcolor","Object","hasOwn","toolbarbuttons","addevent","str_request_booking","str_today","str_month","str_week","str_day","str_list","viewType","window","screen","width","calendar","EventCalendar","document","getElementById","locale","view","firstDay","scrollTime","slotMinTime","dayMaxEvents","nowIndicator","selectable","eventTextColor","eventBackgroundColor","eventStartEditable","eventDurationEditable","buttonText","text","today","dayGridMonth","timeGridWeek","timeGridDay","listWeek","customButtons","addButton","click","modalForm","ModalForm","formClass","args","modalConfig","title","addEventListener","events","FORM_SUBMITTED","refetchEvents","LOADED","initPossibleStarttimesRefresh","show","dateClick","info","d","Date","dateoff","setMinutes","getMinutes","getTimezoneOffset","startdate","dateStr","toISOString","timeclicked","eventClick","id","event","extendedProps","reserved","headerToolbar","start","center","end","resources","eventSources","url","views","pointer","resourceTimeGridWeek","resourceTimelineWeek","slotMaxTime","slotWidth","globalPropertyName","Promise","resolve","innerWait","setTimeout"],"mappings":";;;;;;;0FAiD2BA,KAAMC,YAAaC,aAAcC,KAAMC,cACxDC,kBAAkB,qBAGpBC,UAAY,UACZC,OAAOC,OAAOJ,OAAQ,eACtBE,UAAYF,OAAOE,eAInBG,eAAiB,kBACjBP,aAAaQ,WACbD,eAAiB,4DAIL,aAAc,CAAC,6CACf,OAAQ,CAAC,QAAS,QAAS,uCAC3B,WAAY,CAAC,MAAO,yBAC9BE,0BAA8B,kBAAU,aAAc,cACtDC,gBAA8B,kBAAU,SACxCC,gBAA8B,kBAAU,SACxCC,eAA8B,kBAAU,QACxCC,cAA8B,kBAAU,MAAO,YAC/CC,eAA8B,kBAAU,iBAAkB,gBAS5DC,SAAW,eACXC,OAAOC,OAAOC,OAAS,MACvBH,SAAW,gBAGXI,SAEJA,SAAW,IAAIH,OAAOI,cAAcC,SAASC,eAAe,MAAO,CAC/DC,OAAQtB,KACRuB,KAAMT,SACNU,SAAU,EACVC,WAAY,WACZC,YAAa,WACbC,cAAc,EACdC,cAAc,EACdC,YAAY,EACZC,eAAgB3B,UAChB4B,qBAAsB,UACtBC,oBAAoB,EACpBC,uBAAuB,EACvBC,WAAY,SAAUC,aAClBA,KAAKC,MAAQ3B,UACb0B,KAAKE,aAAe3B,UACpByB,KAAKG,aAAe3B,SACpBwB,KAAKI,YAAc3B,QACnBuB,KAAKK,SAAW3B,SACTsB,MAEXM,cAAe,CACXC,UAAW,CACPP,KAAM3B,oBACNmC,MAAO,iBACGC,UAAY,IAAIC,mBAAU,CAChBC,UAAW,oCACXC,KAAM,CACFlD,KAAMA,MAEVmD,YAAa,CAACC,OAAO,kBAAU,aAAc,iBAEjDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDlC,SAASmC,mBAEbT,UAAUM,iBAAiBN,UAAUO,OAAOG,OAAQC,uDACpDX,UAAUY,UAIlCC,UAAW,SAASC,UACZC,EAAI,IAAIC,KACRC,QAAU,IAAID,KAAKD,EAAEG,WAAWH,EAAEI,aAAeJ,EAAEK,sBACnDC,UAAYP,KAAKQ,WACjBnE,aAAaQ,UAAY0D,UAAYJ,QAAQM,cAAe,OACtDvB,UAAY,IAAIC,mBAAU,CAC5BC,UAAW,oCACXC,KAAM,CACFlD,KAAMA,KACNuE,YAAaH,WAEjBjB,YAAa,CAACC,OAAO,kBAAU,aAAc,iBAEjDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDlC,SAASmC,mBAEbT,UAAUM,iBAAiBN,UAAUO,OAAOG,OAAQC,uDACpDX,UAAUY,SAGlBa,WAAY,SAAUX,UACdY,GAAKZ,KAAKa,MAAMD,OAEfZ,KAAKa,MAAMC,cAAcC,SAAU,OAC9B7B,UAAY,IAAIC,mBAAU,CAC5BC,UAAW,oCACXC,KAAM,CACFlD,KAAMA,KACNyE,GAAIA,IAERtB,YAAa,CAACC,OAAO,kBAAU,aAAc,iBAEjDL,UAAUM,iBAAiBN,UAAUO,OAAOC,gBAAgB,KACxDlC,SAASmC,mBAEbT,UAAUM,iBAAiBN,UAAUO,OAAOG,OAAQC,uDACpDX,UAAUY,SAGlBkB,cAAe,CACXC,MAAOrE,eACPsE,OAAQ,QACRC,IAAK,kDAETC,UAAW,GACXC,aAAc,CACV,CACIC,IAAKlF,cAGbmF,MAAO,CACH3C,aAAc,CAAC4C,SAAS,GACxBC,qBAAsB,CAACD,SAAS,GAChCE,qBAAsB,CAClBF,SAAS,EACTxD,YAAa,QACb2D,YAAa,QACbC,UAAW,GACXR,UAAW,8GA/Jd5E,kBAAqBqF,oBACvB,IAAIC,SAASC,gBACXC,UAAY,KACT3E,OAAOwE,qBACRI,WAAWD,UAAW,IAE1BD,WAEJC"}
\ No newline at end of file
diff --git a/amd/build/modal_delete_save_cancel.min.js b/amd/build/modal_delete_save_cancel.min.js
index f00bc43..43a4ed6 100644
--- a/amd/build/modal_delete_save_cancel.min.js
+++ b/amd/build/modal_delete_save_cancel.min.js
@@ -1,3 +1,10 @@
-define("mod_bookit/modal_delete_save_cancel",["exports","core/modal","core/notification"],(function(_exports,_modal,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_modal=_interopRequireDefault(_modal),_notification=_interopRequireDefault(_notification);class ModalDeleteSaveCancel extends _modal.default{constructor(root){super(root),this.getFooter().find(this.getActionSelector("save")).length||_notification.default.exception({message:"No save button found"}),this.getFooter().find(this.getActionSelector("cancel")).length||_notification.default.exception({message:"No cancel button found"}),this.getFooter().find(this.getActionSelector("delete")).length||_notification.default.exception({message:"No delete button found"})}registerEventListeners(){super.registerEventListeners(),this.registerCloseOnSave(),this.registerCloseOnCancel(),this.registerCloseOnDelete()}setFooter(){_notification.default.exception({message:"Can not change the footer of a delete save cancel modal"})}setSaveButtonText(value){return this.setButtonText("save",value)}}return _exports.default=ModalDeleteSaveCancel,_defineProperty(ModalDeleteSaveCancel,"TYPE","mod_bookit-delete-save-cancel-modal"),_defineProperty(ModalDeleteSaveCancel,"TEMPLATE","mod_bookit/modal_delete_save_cancel"),ModalDeleteSaveCancel.registerModalType(),_exports.default}));
+define("mod_bookit/modal_delete_save_cancel",["exports","core/modal","core/notification"],(function(_exports,_modal,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
+/**
+   * Contain the logic for the delete/save/cancel modal.
+   *
+   * @module     mod_bookit/modal_delete_save_cancel
+   * @copyright  2025 Justus Dieckmann, RUB.
+   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_modal=_interopRequireDefault(_modal),_notification=_interopRequireDefault(_notification);class ModalDeleteSaveCancel extends _modal.default{static TYPE="mod_bookit-delete-save-cancel-modal";static TEMPLATE="mod_bookit/modal_delete_save_cancel";constructor(root){super(root),this.getFooter().find(this.getActionSelector("save")).length||_notification.default.exception({message:"No save button found"}),this.getFooter().find(this.getActionSelector("cancel")).length||_notification.default.exception({message:"No cancel button found"}),this.getFooter().find(this.getActionSelector("delete")).length||_notification.default.exception({message:"No delete button found"})}registerEventListeners(){super.registerEventListeners(),this.registerCloseOnSave(),this.registerCloseOnCancel(),this.registerCloseOnDelete()}setFooter(){_notification.default.exception({message:"Can not change the footer of a delete save cancel modal"})}setSaveButtonText(value){return this.setButtonText("save",value)}}return _exports.default=ModalDeleteSaveCancel,ModalDeleteSaveCancel.registerModalType(),_exports.default}));
 
 //# sourceMappingURL=modal_delete_save_cancel.min.js.map
\ No newline at end of file
diff --git a/amd/build/modal_delete_save_cancel.min.js.map b/amd/build/modal_delete_save_cancel.min.js.map
index ee1df87..8022af5 100644
--- a/amd/build/modal_delete_save_cancel.min.js.map
+++ b/amd/build/modal_delete_save_cancel.min.js.map
@@ -1 +1 @@
-{"version":3,"file":"modal_delete_save_cancel.min.js","sources":["../src/modal_delete_save_cancel.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Contain the logic for the delete/save/cancel modal.\n *\n * @module     mod_bookit/modal_delete_save_cancel\n * @copyright  2025 Justus Dieckmann, RUB.\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Modal from 'core/modal';\nimport Notification from 'core/notification';\n\n/**\n * The Delete/Save/Cancel Modal.\n *\n * @class\n * @extends core/modal\n */\nexport default class ModalDeleteSaveCancel extends Modal {\n    static TYPE = 'mod_bookit-delete-save-cancel-modal';\n    static TEMPLATE = 'mod_bookit/modal_delete_save_cancel';\n\n    constructor(root) {\n        super(root);\n\n        if (!this.getFooter().find(this.getActionSelector('save')).length) {\n            Notification.exception({message: 'No save button found'});\n        }\n\n        if (!this.getFooter().find(this.getActionSelector('cancel')).length) {\n            Notification.exception({message: 'No cancel button found'});\n        }\n\n        if (!this.getFooter().find(this.getActionSelector('delete')).length) {\n            Notification.exception({message: 'No delete button found'});\n        }\n    }\n\n    /**\n     * Register all event listeners.\n     */\n    registerEventListeners() {\n        // Call the parent registration.\n        super.registerEventListeners();\n\n        // Register to close on save/cancel.\n        this.registerCloseOnSave();\n        this.registerCloseOnCancel();\n        this.registerCloseOnDelete();\n    }\n\n    /**\n     * Override parent implementation to prevent changing the footer content.\n     */\n    setFooter() {\n        Notification.exception({message: 'Can not change the footer of a delete save cancel modal'});\n        return;\n    }\n\n    /**\n     * Set the title of the save button.\n     *\n     * @param {String|Promise} value The button text, or a Promise which will resolve it\n     * @returns{Promise}\n     */\n    setSaveButtonText(value) {\n        return this.setButtonText('save', value);\n    }\n}\n\nModalDeleteSaveCancel.registerModalType();\n"],"names":["ModalDeleteSaveCancel","Modal","constructor","root","this","getFooter","find","getActionSelector","length","exception","message","registerEventListeners","registerCloseOnSave","registerCloseOnCancel","registerCloseOnDelete","setFooter","setSaveButtonText","value","setButtonText","registerModalType"],"mappings":"yiBAgCqBA,8BAA8BC,eAI/CC,YAAYC,YACFA,MAEDC,KAAKC,YAAYC,KAAKF,KAAKG,kBAAkB,SAASC,8BAC1CC,UAAU,CAACC,QAAS,yBAGhCN,KAAKC,YAAYC,KAAKF,KAAKG,kBAAkB,WAAWC,8BAC5CC,UAAU,CAACC,QAAS,2BAGhCN,KAAKC,YAAYC,KAAKF,KAAKG,kBAAkB,WAAWC,8BAC5CC,UAAU,CAACC,QAAS,2BAOzCC,+BAEUA,8BAGDC,2BACAC,6BACAC,wBAMTC,kCACiBN,UAAU,CAACC,QAAS,4DAUrCM,kBAAkBC,cACPb,KAAKc,cAAc,OAAQD,sEAhDrBjB,6BACH,uDADGA,iCAEC,uCAkDtBA,sBAAsBmB"}
\ No newline at end of file
+{"version":3,"file":"modal_delete_save_cancel.min.js","sources":["../src/modal_delete_save_cancel.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Contain the logic for the delete/save/cancel modal.\n *\n * @module     mod_bookit/modal_delete_save_cancel\n * @copyright  2025 Justus Dieckmann, RUB.\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Modal from 'core/modal';\nimport Notification from 'core/notification';\n\n/**\n * The Delete/Save/Cancel Modal.\n *\n * @class\n * @extends core/modal\n */\nexport default class ModalDeleteSaveCancel extends Modal {\n    static TYPE = 'mod_bookit-delete-save-cancel-modal';\n    static TEMPLATE = 'mod_bookit/modal_delete_save_cancel';\n\n    constructor(root) {\n        super(root);\n\n        if (!this.getFooter().find(this.getActionSelector('save')).length) {\n            Notification.exception({message: 'No save button found'});\n        }\n\n        if (!this.getFooter().find(this.getActionSelector('cancel')).length) {\n            Notification.exception({message: 'No cancel button found'});\n        }\n\n        if (!this.getFooter().find(this.getActionSelector('delete')).length) {\n            Notification.exception({message: 'No delete button found'});\n        }\n    }\n\n    /**\n     * Register all event listeners.\n     */\n    registerEventListeners() {\n        // Call the parent registration.\n        super.registerEventListeners();\n\n        // Register to close on save/cancel.\n        this.registerCloseOnSave();\n        this.registerCloseOnCancel();\n        this.registerCloseOnDelete();\n    }\n\n    /**\n     * Override parent implementation to prevent changing the footer content.\n     */\n    setFooter() {\n        Notification.exception({message: 'Can not change the footer of a delete save cancel modal'});\n        return;\n    }\n\n    /**\n     * Set the title of the save button.\n     *\n     * @param {String|Promise} value The button text, or a Promise which will resolve it\n     * @returns{Promise}\n     */\n    setSaveButtonText(value) {\n        return this.setButtonText('save', value);\n    }\n}\n\nModalDeleteSaveCancel.registerModalType();\n"],"names":["ModalDeleteSaveCancel","Modal","constructor","root","this","getFooter","find","getActionSelector","length","exception","message","registerEventListeners","registerCloseOnSave","registerCloseOnCancel","registerCloseOnDelete","setFooter","setSaveButtonText","value","setButtonText","registerModalType"],"mappings":";;;;;;;qLAgCqBA,8BAA8BC,2BACjC,sDACI,sCAElBC,YAAYC,YACFA,MAEDC,KAAKC,YAAYC,KAAKF,KAAKG,kBAAkB,SAASC,8BAC1CC,UAAU,CAACC,QAAS,yBAGhCN,KAAKC,YAAYC,KAAKF,KAAKG,kBAAkB,WAAWC,8BAC5CC,UAAU,CAACC,QAAS,2BAGhCN,KAAKC,YAAYC,KAAKF,KAAKG,kBAAkB,WAAWC,8BAC5CC,UAAU,CAACC,QAAS,2BAOzCC,+BAEUA,8BAGDC,2BACAC,6BACAC,wBAMTC,kCACiBN,UAAU,CAACC,QAAS,4DAUrCM,kBAAkBC,cACPb,KAAKc,cAAc,OAAQD,sDAI1CjB,sBAAsBmB"}
\ No newline at end of file
diff --git a/amd/build/possible_slots_refresh.min.js b/amd/build/possible_slots_refresh.min.js
new file mode 100644
index 0000000..277b3ac
--- /dev/null
+++ b/amd/build/possible_slots_refresh.min.js
@@ -0,0 +1,11 @@
+define("mod_bookit/possible_slots_refresh",["exports","core/ajax"],(function(_exports,Ajax){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.initPossibleStarttimesRefresh=
+/**
+   * Fresh possible slots in the booking form.
+   *
+   * @module     mod_bookit/possible_slots_refresh
+   * @copyright  2025 Justus Dieckmann RUB
+   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+   */
+function initPossibleStarttimesRefresh(){const formEl=document.querySelector(".modal-body form");if(!formEl)return void setTimeout(initPossibleStarttimesRefresh,50);const roomEl=formEl.querySelector('select[name="roomid"]'),durationEl=formEl.querySelector('select[name="duration"]'),dateDayEl=formEl.querySelector('select[name="startdate[day]"]'),dateMonthEl=formEl.querySelector('select[name="startdate[month]"]'),dateYearEl=formEl.querySelector('select[name="startdate[year]"]'),timeEl=formEl.querySelector('select[name="starttime"]'),refreshStarttimes=async()=>{const year=parseInt(dateYearEl.value),month=parseInt(dateMonthEl.value),day=parseInt(dateDayEl.value),starttimes=await Ajax.call([{methodname:"mod_bookit_get_possible_starttimes",args:{year:year,month:month,day:day,duration:durationEl.value,roomid:roomEl.value}}])[0],currentSelected=new Date(1e3*timeEl.value);for(;timeEl.options.length;)timeEl.options.remove(0);for(let slot of starttimes){const opt=document.createElement("option");opt.value=slot.timestamp,opt.innerText=slot.string;const date=new Date(1e3*slot.timestamp);60*date.getHours()+date.getMinutes()===60*currentSelected.getHours()+currentSelected.getMinutes()&&(opt.selected=!0),timeEl.options.add(opt)}};for(let el of[roomEl,durationEl,dateDayEl,dateMonthEl,dateYearEl])el.addEventListener("change",refreshStarttimes)},Ajax=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Ajax)}));
+
+//# sourceMappingURL=possible_slots_refresh.min.js.map
\ No newline at end of file
diff --git a/amd/build/possible_slots_refresh.min.js.map b/amd/build/possible_slots_refresh.min.js.map
new file mode 100644
index 0000000..178fd1a
--- /dev/null
+++ b/amd/build/possible_slots_refresh.min.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"possible_slots_refresh.min.js","sources":["../src/possible_slots_refresh.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Fresh possible slots in the booking form.\n *\n * @module     mod_bookit/possible_slots_refresh\n * @copyright  2025 Justus Dieckmann RUB\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Ajax from 'core/ajax';\n\n/**\n * Initializes the calendar.\n */\nexport function initPossibleStarttimesRefresh() {\n    const formEl = document.querySelector('.modal-body form');\n    if (!formEl) {\n        setTimeout(initPossibleStarttimesRefresh, 50);\n        return;\n    }\n\n    const roomEl = formEl.querySelector('select[name=\"roomid\"]');\n    const durationEl = formEl.querySelector('select[name=\"duration\"]');\n    const dateDayEl = formEl.querySelector('select[name=\"startdate[day]\"]');\n    const dateMonthEl = formEl.querySelector('select[name=\"startdate[month]\"]');\n    const dateYearEl = formEl.querySelector('select[name=\"startdate[year]\"]');\n\n    const timeEl = formEl.querySelector('select[name=\"starttime\"]');\n\n    const refreshStarttimes = async() => {\n        const year = parseInt(dateYearEl.value);\n        const month = parseInt(dateMonthEl.value);\n        const day = parseInt(dateDayEl.value);\n\n        const starttimes = await Ajax.call([{\n            methodname: 'mod_bookit_get_possible_starttimes',\n            args: {\n                year: year,\n                month: month,\n                day: day,\n                duration: durationEl.value,\n                roomid: roomEl.value,\n            }\n        }])[0];\n\n        const currentSelected = new Date(timeEl.value * 1000);\n\n        while (timeEl.options.length) {\n            timeEl.options.remove(0);\n        }\n\n        for (let slot of starttimes) {\n            const opt = document.createElement(\"option\");\n            opt.value = slot.timestamp;\n            opt.innerText = slot.string;\n            const date = new Date(slot.timestamp * 1000);\n            if (date.getHours() * 60 + date.getMinutes() === currentSelected.getHours() * 60 + currentSelected.getMinutes()) {\n                opt.selected = true;\n            }\n            timeEl.options.add(opt);\n        }\n    };\n\n    for (let el of [roomEl, durationEl, dateDayEl, dateMonthEl, dateYearEl]) {\n        el.addEventListener('change', refreshStarttimes);\n    }\n}\n"],"names":["initPossibleStarttimesRefresh","formEl","document","querySelector","setTimeout","roomEl","durationEl","dateDayEl","dateMonthEl","dateYearEl","timeEl","refreshStarttimes","async","year","parseInt","value","month","day","starttimes","Ajax","call","methodname","args","duration","roomid","currentSelected","Date","options","length","remove","slot","opt","createElement","timestamp","innerText","string","date","getHours","getMinutes","selected","add","el","addEventListener"],"mappings":";;;;;;;;SA4BgBA,sCACNC,OAASC,SAASC,cAAc,wBACjCF,mBACDG,WAAWJ,8BAA+B,UAIxCK,OAASJ,OAAOE,cAAc,yBAC9BG,WAAaL,OAAOE,cAAc,2BAClCI,UAAYN,OAAOE,cAAc,iCACjCK,YAAcP,OAAOE,cAAc,mCACnCM,WAAaR,OAAOE,cAAc,kCAElCO,OAAST,OAAOE,cAAc,4BAE9BQ,kBAAoBC,gBAChBC,KAAOC,SAASL,WAAWM,OAC3BC,MAAQF,SAASN,YAAYO,OAC7BE,IAAMH,SAASP,UAAUQ,OAEzBG,iBAAmBC,KAAKC,KAAK,CAAC,CAChCC,WAAY,qCACZC,KAAM,CACFT,KAAMA,KACNG,MAAOA,MACPC,IAAKA,IACLM,SAAUjB,WAAWS,MACrBS,OAAQnB,OAAOU,UAEnB,GAEEU,gBAAkB,IAAIC,KAAoB,IAAfhB,OAAOK,YAEjCL,OAAOiB,QAAQC,QAClBlB,OAAOiB,QAAQE,OAAO,OAGrB,IAAIC,QAAQZ,WAAY,OACnBa,IAAM7B,SAAS8B,cAAc,UACnCD,IAAIhB,MAAQe,KAAKG,UACjBF,IAAIG,UAAYJ,KAAKK,aACfC,KAAO,IAAIV,KAAsB,IAAjBI,KAAKG,WACL,GAAlBG,KAAKC,WAAkBD,KAAKE,eAA8C,GAA7Bb,gBAAgBY,WAAkBZ,gBAAgBa,eAC/FP,IAAIQ,UAAW,GAEnB7B,OAAOiB,QAAQa,IAAIT,WAItB,IAAIU,KAAM,CAACpC,OAAQC,WAAYC,UAAWC,YAAaC,YACxDgC,GAAGC,iBAAiB,SAAU/B"}
\ No newline at end of file
diff --git a/amd/src/available_calendar.js b/amd/src/available_calendar.js
new file mode 100644
index 0000000..fb675b3
--- /dev/null
+++ b/amd/src/available_calendar.js
@@ -0,0 +1,180 @@
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Manage the calendar
+ *
+ * @module     mod_bookit/available_calendar
+ * @copyright  2024 Melanie Treitinger, Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+import * as Ajax from 'core/ajax';
+import {getString} from 'core/str';
+import ModalEvents from 'core/modal_events';
+import ModalForm from 'core_form/modalform';
+import {prefetchStrings} from 'core/prefetch';
+import {theGlobalProperty} from "mod_bookit/calendar";
+
+/**
+ * Initializes the calendar.
+ * @param {string} eventsource
+ * @param {array} capabilities
+ * @param {string} lang
+ * @returns {Promise<void>}
+ */
+export async function init(eventsource, capabilities, lang) {
+    await theGlobalProperty('EventCalendar');
+
+    // Define toolbarbuttons.
+    const toolbarbuttons = 'prev, next, today, addButton';
+
+    // String variables.
+    prefetchStrings('mod_bookit', ['add_blocker']);
+    prefetchStrings('core', ['today', 'month', 'week']);
+    prefetchStrings('calendar', ['day', 'upcomingevents']);
+    const str_request_booking = await getString('add_blocker', 'mod_bookit');
+    const str_today = await getString('today');
+    const str_month = await getString('month');
+    const str_week = await getString('week');
+    const str_day = await getString('day', 'calendar');
+    const str_list = await getString('upcomingevents', 'calendar');
+
+    // Define viewtype.
+    let viewType = 'timeGridWeek';
+    if (window.screen.width <= 1000) {
+        viewType = 'listWeek';
+    }
+
+    var calendar;
+
+    calendar = new window.EventCalendar(document.getElementById('ec'), {
+        locale: lang,
+        view: viewType,
+        firstDay: 1,
+        scrollTime: '09:00:00',
+        slotMinTime: '07:00:00',
+        dayMaxEvents: true,
+        nowIndicator: true,
+        selectable: false,
+        eventBackgroundColor: '#035AA3',
+        eventStartEditable: false,
+        eventDurationEditable: false,
+        buttonText: function(text) {
+            text.today = str_today;
+            text.dayGridMonth = str_month;
+            text.timeGridWeek = str_week;
+            text.timeGridDay = str_day;
+            text.listWeek = str_list;
+            return text;
+        },
+        customButtons: {
+            addButton: {
+                text: str_request_booking,
+                click: function() {
+                    const modalForm = new ModalForm({
+                        formClass: "mod_bookit\\local\\form\\edit_blocker_form",
+                        args: {
+                        },
+                        modalConfig: {title: getString('add_blocker', 'mod_bookit')},
+                    });
+                    modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {
+                        calendar.refetchEvents();
+                    });
+                    modalForm.show();
+                }
+            }
+        },
+        dateClick: function(info) {
+            let d = new Date();
+            let dateoff = new Date(d.setMinutes(d.getMinutes() - d.getTimezoneOffset()));
+            let startdate = info.dateStr;
+            if (startdate > dateoff.toISOString()) {
+                const modalForm = new ModalForm({
+                    formClass: "mod_bookit\\local\\form\\edit_blocker_form",
+                    args: {
+                        startdate: startdate,
+                    },
+                    modalConfig: {title: getString('add_blocker', 'mod_bookit')},
+                });
+                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {
+                    calendar.refetchEvents();
+                });
+                modalForm.show();
+            }
+        },
+        eventClick: function(info) {
+            if (info.event.extendedProps.type === 'blocker') {
+                const modalForm = new ModalForm({
+                    formClass: "mod_bookit\\local\\form\\edit_blocker_form",
+                    args: {
+                        id: info.event.id,
+                    },
+                    modalConfig: {
+                        title: getString('edit_blocker', 'mod_bookit'),
+                    },
+                    moduleName: 'mod_bookit/modal_delete_save_cancel',
+                });
+                modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {
+                    calendar.refetchEvents();
+                });
+                modalForm.addEventListener(modalForm.events.LOADED, () => {
+                    modalForm.modal.getRoot().on(ModalEvents.delete, async() => {
+                        await deleteBlocker(info.event.id);
+                        calendar.refetchEvents();
+                    });
+                });
+                modalForm.show();
+            }
+        },
+        headerToolbar: {
+            start: toolbarbuttons,
+            center: 'title',
+            end: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
+        },
+        resources: [],
+        eventSources: [
+            {
+                url: eventsource,
+            },
+        ],
+        views: {
+            timeGridWeek: {pointer: true},
+            resourceTimeGridWeek: {pointer: true},
+            resourceTimelineWeek: {
+                pointer: true,
+                slotMinTime: '09:00',
+                slotMaxTime: '21:00',
+                slotWidth: 80,
+                resources: []
+            }
+        },
+    });
+}
+
+/**
+ * Deletes a blocker.
+ *
+ * @param {int} blockerId
+ * @returns Promise<any>
+ */
+function deleteBlocker(blockerId) {
+    return Ajax.call([{
+        methodname: 'mod_bookit_delete_blocker',
+        args: {
+            blockerid: blockerId
+        }
+    }])[0];
+}
diff --git a/amd/src/calendar.js b/amd/src/calendar.js
index 0b73464..7982b4f 100644
--- a/amd/src/calendar.js
+++ b/amd/src/calendar.js
@@ -1,8 +1,32 @@
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Manage the calendar
+ *
+ * @module     mod_bookit/calendar
+ * @copyright  2024 Melanie Treitinger, Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
 import {getString} from 'core/str';
 import ModalForm from 'core_form/modalform';
 import {prefetchStrings} from 'core/prefetch';
+import {initPossibleStarttimesRefresh} from "mod_bookit/possible_slots_refresh";
 
-const theGlobalProperty = (globalPropertyName) => {
+export const theGlobalProperty = (globalPropertyName) => {
     return new Promise((resolve) => {
        const innerWait = () => {
            if (!window[globalPropertyName]) {
@@ -30,14 +54,12 @@ export async function init(cmid, eventsource, capabilities, lang, config) {
     let textcolor = '#ffffff';
     if (Object.hasOwn(config, 'textcolor')) {
         textcolor = config.textcolor;
-        console.log('textcolor set to '+textcolor);
     }
 
     // Define toolbarbuttons.
     let toolbarbuttons = 'prev,next today';
     if (capabilities.addevent) {
         toolbarbuttons = 'prev,next today, addButton';
-        console.log(capabilities);
     }
 
     // String variables.
@@ -100,6 +122,7 @@ export async function init(cmid, eventsource, capabilities, lang, config) {
                                 modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {
                                     calendar.refetchEvents();
                                 });
+                                modalForm.addEventListener(modalForm.events.LOADED, initPossibleStarttimesRefresh);
                                 modalForm.show();
                 }
             }
@@ -113,24 +136,20 @@ export async function init(cmid, eventsource, capabilities, lang, config) {
                     formClass: "mod_bookit\\form\\edit_event_form",
                     args: {
                         cmid: cmid,
-                        startdate: startdate,
+                        timeclicked: startdate,
                     },
                     modalConfig: {title: getString('edit_event', 'mod_bookit')},
                 });
                 modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {
                     calendar.refetchEvents();
                 });
+                modalForm.addEventListener(modalForm.events.LOADED, initPossibleStarttimesRefresh);
                 modalForm.show();
             }
         },
         eventClick: function (info) {
             let id = info.event.id;
 
-            console.log(info);
-            console.log("cmid: "+cmid);
-            console.log("id: "+id);
-            console.log(info.event.extendedProps.reserved);
-
             if (!info.event.extendedProps.reserved) {
                 const modalForm = new ModalForm({
                     formClass: "mod_bookit\\form\\edit_event_form",
@@ -143,6 +162,7 @@ export async function init(cmid, eventsource, capabilities, lang, config) {
                 modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {
                     calendar.refetchEvents();
                 });
+                modalForm.addEventListener(modalForm.events.LOADED, initPossibleStarttimesRefresh);
                 modalForm.show();
             }
         },
diff --git a/amd/src/possible_slots_refresh.js b/amd/src/possible_slots_refresh.js
new file mode 100644
index 0000000..91bd4a2
--- /dev/null
+++ b/amd/src/possible_slots_refresh.js
@@ -0,0 +1,81 @@
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Fresh possible slots in the booking form.
+ *
+ * @module     mod_bookit/possible_slots_refresh
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+import * as Ajax from 'core/ajax';
+
+/**
+ * Initializes the calendar.
+ */
+export function initPossibleStarttimesRefresh() {
+    const formEl = document.querySelector('.modal-body form');
+    if (!formEl) {
+        setTimeout(initPossibleStarttimesRefresh, 50);
+        return;
+    }
+
+    const roomEl = formEl.querySelector('select[name="roomid"]');
+    const durationEl = formEl.querySelector('select[name="duration"]');
+    const dateDayEl = formEl.querySelector('select[name="startdate[day]"]');
+    const dateMonthEl = formEl.querySelector('select[name="startdate[month]"]');
+    const dateYearEl = formEl.querySelector('select[name="startdate[year]"]');
+
+    const timeEl = formEl.querySelector('select[name="starttime"]');
+
+    const refreshStarttimes = async() => {
+        const year = parseInt(dateYearEl.value);
+        const month = parseInt(dateMonthEl.value);
+        const day = parseInt(dateDayEl.value);
+
+        const starttimes = await Ajax.call([{
+            methodname: 'mod_bookit_get_possible_starttimes',
+            args: {
+                year: year,
+                month: month,
+                day: day,
+                duration: durationEl.value,
+                roomid: roomEl.value,
+            }
+        }])[0];
+
+        const currentSelected = new Date(timeEl.value * 1000);
+
+        while (timeEl.options.length) {
+            timeEl.options.remove(0);
+        }
+
+        for (let slot of starttimes) {
+            const opt = document.createElement("option");
+            opt.value = slot.timestamp;
+            opt.innerText = slot.string;
+            const date = new Date(slot.timestamp * 1000);
+            if (date.getHours() * 60 + date.getMinutes() === currentSelected.getHours() * 60 + currentSelected.getMinutes()) {
+                opt.selected = true;
+            }
+            timeEl.options.add(opt);
+        }
+    };
+
+    for (let el of [roomEl, durationEl, dateDayEl, dateMonthEl, dateYearEl]) {
+        el.addEventListener('change', refreshStarttimes);
+    }
+}
diff --git a/assets/event-calendar.min.css b/assets/event-calendar.min.css
deleted file mode 100644
index 5e559ca..0000000
--- a/assets/event-calendar.min.css
+++ /dev/null
@@ -1 +0,0 @@
-.ec{color-scheme:light;--ec-h:0;--ec-s:0%;--ec-l-300:91.00%;--ec-l-500:83.50%;--ec-l-600:78.40%;--ec-l-700:71.40%;--ec-bg-fallback-color:#fff;--ec-hs:var(--ec-h),var(--ec-s);--ec-color-300:hsl(var(--ec-hs),var(--ec-l-300));--ec-color-500:hsl(var(--ec-hs),var(--ec-l-500));--ec-color-600:hsl(var(--ec-hs),var(--ec-l-600));--ec-color-700:hsl(var(--ec-hs),var(--ec-l-700));--ec-border-color:var(--ec-color-500);--ec-accent-color:var(--ec-color-600);--ec-button-bg-color:var(--ec-bg-color);--ec-button-border-color:var(--ec-color-600);--ec-button-text-color:var(--ec-text-color);--ec-button-active-bg-color:var(--ec-color-300);--ec-button-active-border-color:var(--ec-color-700);--ec-button-active-text-color:var(--ec-button-text-color);--ec-event-bg-color:#039be5;--ec-event-text-color:#fff;--ec-bg-event-color:var(--ec-color-500);--ec-bg-event-opacity:0.3;--ec-list-day-bg-color:var(--ec-bg-color,var(--ec-bg-fallback-color));--ec-today-bg-color:rgba(255,220,40,.15);--ec-highlight-color:rgba(188,232,241,.3);--ec-popup-bg-color:var(--ec-bg-color,var(--ec-bg-fallback-color));--ec-now-indicator-color:#ea4335}.ec-dark .ec{color-scheme:dark;--ec-h:215;--ec-s:15%;--ec-l-300:25.50%;--ec-l-500:42.40%;--ec-l-600:49.80%;--ec-l-700:57.30%;--ec-bg-fallback-color:#22272e}@media(prefers-color-scheme:dark){.ec-auto-dark .ec{color-scheme:dark;--ec-h:215;--ec-s:15%;--ec-l-300:25.50%;--ec-l-500:42.40%;--ec-l-600:49.80%;--ec-l-700:57.30%;--ec-bg-fallback-color:#22272e}}.ec-timeline .ec-container{display:flex;flex:1 1 0%;min-height:0}.ec-timeline .ec-main{display:flex;flex-direction:column;min-width:0}.ec-timeline .ec-content{flex-direction:column}.ec-timeline .ec-body{flex:1 1 auto;overflow:auto}.ec-timeline .ec-body .ec-content{min-height:100%;min-width:-moz-max-content;min-width:max-content;position:relative}.ec-timeline .ec-body .ec-days{flex-shrink:0}.ec-timeline .ec-body .ec-days:not(:last-child){flex-grow:0}.ec-timeline .ec-header{overflow:hidden}.ec-timeline .ec-header .ec-days{min-width:-moz-max-content;min-width:max-content}.ec-timeline .ec-header .ec-day{display:flex;flex-basis:auto;flex-direction:column}.ec-timeline .ec-day,.ec-timeline .ec-header .ec-day:first-child .ec-day-head,.ec-timeline .ec-header .ec-day:first-child .ec-time:first-child{border:none}.ec-timeline .ec-day-head{border-style:none none none solid}.ec-timeline .ec-times{border-top:1px solid var(--ec-border-color);display:flex}.ec-timeline .ec-time{border-left:1px solid var(--ec-border-color);box-sizing:border-box;font-size:.95em;min-height:24px;overflow:hidden;text-overflow:ellipsis}.ec-timeline .ec-line,.ec-timeline .ec-time{width:72px}.ec-timeline .ec-events{height:100%;margin:0;position:relative}.ec-timeline .ec-event{position:absolute}.ec-timeline .ec-bg-event{height:100%;z-index:auto}.ec-timeline .ec-lines{display:flex}.ec-timeline .ec-line:not(:first-child):after{border-left:1px solid var(--ec-border-color);content:"";height:100%;pointer-events:none;position:absolute}.ec-timeline .ec-sidebar{border-right-style:solid;border:1px solid var(--ec-border-color);border-right:1px var(--ec-border-color);padding:0}.ec-timeline .ec-sidebar .ec-sidebar-title{border-bottom:1px solid var(--ec-border-color);box-sizing:initial;flex-shrink:0}.ec-timeline .ec-sidebar .ec-content{flex:1;overflow:hidden}.ec-timeline .ec-sidebar .ec-resource{flex-shrink:0;padding:0 8px}.ec-timeline .ec-sidebar .ec-resource:not(:last-child){border-bottom:1px solid var(--ec-border-color);flex-grow:0}.ec-timeline .ec-sidebar .ec-resource:last-child{flex-basis:100%!important}.ec-timeline .ec-sidebar .ec-resource span{padding-top:8px}.ec-time-grid .ec-body .ec-event{position:absolute}.ec-time-grid .ec-body .ec-event-title{position:sticky;top:0}.ec-time-grid .ec-body .ec-resizer{bottom:0;cursor:ns-resize;height:50%;left:0;max-height:8px;right:0}.ec-time-grid .ec-bg-event{width:100%;z-index:1}.ec-time-grid .ec-time{line-height:24px;position:relative;text-align:right;top:-12px}.ec-time-grid .ec-all-day .ec-time,.ec-time-grid .ec-header .ec-time{height:0;overflow-y:hidden;visibility:hidden}.ec-time-grid .ec-line,.ec-time-grid .ec-time{height:24px}.ec-time-grid .ec-lines{width:8px}.ec-time-grid .ec-line:not(:first-child):after{border-bottom:1px solid var(--ec-border-color);content:"";pointer-events:none;position:absolute;width:100%}.ec-time-grid .ec-body:not(.ec-compact) .ec-line:nth-child(2n):after{border-bottom-style:dotted}.ec-time-grid .ec-sidebar-title{height:0;overflow-y:hidden;text-align:right;visibility:hidden}.ec-time-grid .ec-all-day .ec-sidebar-title{height:auto;padding:8px 0;visibility:visible}.ec-day-grid .ec-body{flex:1 1 auto}.ec-day-grid .ec-body .ec-day{min-height:5em;position:relative}.ec-day-grid .ec-content{flex-direction:column;height:100%}.ec-day-grid .ec-uniform .ec-content{overflow:hidden}.ec-day-grid .ec-uniform .ec-days{flex:1 1 0%;min-height:0}.ec-day-grid .ec-uniform .ec-day{min-height:0}.ec-day-grid .ec-day:first-child{border-left:none}.ec-day-grid .ec-day-head{border:none;display:block;padding:4px 4px 3px;text-align:right}.ec-day-grid .ec-day-foot{bottom:0;font-size:.85em;padding:2px;position:absolute}.ec-day-grid .ec-day-foot a{cursor:pointer}.ec-day,.ec-days,.ec-resource{flex:1 1 0;max-width:100%;min-width:0}.ec{background-color:var(--ec-bg-color);color:var(--ec-text-color);display:flex;flex-direction:column;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ec ::-webkit-scrollbar{background-color:transparent}.ec ::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:var(--ec-border-color);border:4px solid transparent;border-radius:8px;box-shadow:none;min-height:40px}.ec :hover::-webkit-scrollbar-thumb{background-color:var(--ec-accent-color)}.ec-hidden-scroll{display:none;flex-shrink:0;overflow-y:scroll;visibility:hidden}.ec-with-scroll .ec-hidden-scroll{display:block}.ec-toolbar{align-items:center;display:flex;flex:0 0 auto;justify-content:space-between;margin-bottom:1em}.ec-toolbar>*{margin-bottom:-.5em}.ec-toolbar>*>*{margin-bottom:.5em}.ec-toolbar>*>:not(:last-child){margin-right:.75em}.ec-title{margin:0}.ec-button{background-color:var(--ec-button-bg-color);border:1px solid var(--ec-button-border-color);border-radius:.25rem;font-size:1rem;line-height:1.5;padding:.375rem .75rem}.ec-button:not(:disabled){color:var(--ec-button-text-color);cursor:pointer}.ec-button.ec-active,.ec-button:not(:disabled):hover{background-color:var(--ec-button-active-bg-color);border-color:var(--ec-button-active-border-color);color:var(--ec-button-active-text-color);z-index:1}.ec-button-group{display:inline-flex}.ec-button-group .ec-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.ec-button-group .ec-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.ec-icon{display:inline-block;width:1em}.ec-icon.ec-next:after,.ec-icon.ec-prev:after{border-right:2px solid;border-top:2px solid;content:"";display:inline-block;height:.5em;position:relative;width:.5em}.ec-icon.ec-prev:after{transform:rotate(-135deg) translate(-2px,2px)}.ec-icon.ec-next:after{transform:rotate(45deg) translate(-2px,2px)}.ec-all-day,.ec-body,.ec-day,.ec-day-head,.ec-days,.ec-header{border:1px solid var(--ec-border-color)}.ec-header{display:flex;flex-shrink:0}.ec-header .ec-resource{flex-direction:column}.ec-header .ec-resource .ec-days{border-top-style:solid}.ec-header .ec-days{border-bottom:none}.ec-header .ec-day{line-height:24px;min-height:24px;overflow:hidden;text-align:center;text-overflow:ellipsis}.ec-all-day{border-top:none;flex-shrink:0}.ec-all-day .ec-days{border-bottom:none}.ec-all-day .ec-day{padding-bottom:4px;position:relative}.ec-body{overflow-x:hidden;overflow-y:auto;position:relative}.ec:not(.ec-list) .ec-body{border-top:none}.ec-sidebar{flex:0 0 auto;flex-direction:column;max-width:100%;padding:0 4px 0 8px;width:auto}.ec-content,.ec-sidebar{display:flex}.ec-list .ec-content{flex-direction:column}.ec-days,.ec-resource{display:flex}.ec-days{border-style:none none solid}.ec-days:last-child{border-bottom:none}.ec-day-grid .ec-days,.ec-resource .ec-days{flex:1 0 auto}.ec-day{border-style:none none none solid}.ec-day.ec-today{background-color:var(--ec-today-bg-color)}.ec-day.ec-highlight{background-color:var(--ec-highlight-color)}.ec-day.ec-other-month .ec-day-head{opacity:.3}.ec-list .ec-day{border:none}.ec-list .ec-day-head{background-color:var(--ec-list-day-bg-color);border-style:solid none;margin:-1px 0 0;padding:8px 14px;position:sticky;top:0;z-index:2}.ec-list .ec-day:first-child .ec-day-head{border-top:none}.ec-list .ec-day-side{float:right}.ec-list .ec-no-events{padding:5em 0;text-align:center}.ec-events{margin:0 6px 0 0}.ec-events.ec-preview,.ec-time-grid .ec-events{position:relative}.ec-all-day .ec-events,.ec-day-grid .ec-events{display:flow-root}.ec-event{background-color:var(--ec-event-bg-color);border-radius:3px;box-shadow:0 0 1px 0 var(--ec-border-color);box-sizing:border-box;color:var(--ec-event-text-color);display:flex;font-size:.85em;line-height:1.5;padding:2px;z-index:1}.ec-all-day .ec-event,.ec-day-grid .ec-event{position:relative}.ec-list .ec-event{background-color:transparent;border-radius:0;color:inherit;flex-direction:row;padding:8px 14px}.ec-event.ec-preview{opacity:.8;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:1000}.ec-event.ec-pointer{box-shadow:none;color:inherit;display:flex;pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:0}.ec-event-body{display:flex;flex-direction:column;width:100%}.ec-all-day .ec-event-body,.ec-day-grid .ec-event-body,.ec-timeline .ec-event-body{flex-direction:row}.ec-event-tag{border-radius:2px;margin-right:8px;width:4px}.ec-event-time{flex-shrink:0;margin:0 0 1px;overflow:hidden;white-space:nowrap}.ec-day-grid .ec-event-time,.ec-timeline .ec-event-time{margin:0 3px 0 0;max-width:100%;text-overflow:ellipsis}.ec-event-title{font-weight:inherit;margin:unset;overflow:hidden}.ec-all-day .ec-event-title,.ec-day-grid .ec-event-title,.ec-timeline .ec-event-title{min-height:1.5em;text-overflow:ellipsis;white-space:nowrap}.ec-list .ec-event-title{font-size:1rem}.ec-draggable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-ghost{opacity:.5;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-bg-events{position:relative}.ec-all-day .ec-bg-events,.ec-day-grid .ec-bg-events{inset:0;position:absolute}.ec-bg-event{background-color:var(--ec-bg-event-color);opacity:var(--ec-bg-event-opacity);position:absolute}.ec-all-day .ec-bg-event,.ec-day-grid .ec-bg-event{height:100%;z-index:auto}.ec-time{white-space:nowrap}.ec-popup{background-color:var(--ec-popup-bg-color);border:1px solid var(--ec-border-color);border-radius:6px;box-shadow:0 1px 3px 0 hsla(var(--ec-hs),50%,.15),0 4px 8px 3px hsla(var(--ec-hs),50%,.15);display:flex;flex-direction:column;min-width:180px;outline:1px solid transparent;padding:8px 10px 14px;position:absolute;top:0;width:110%;z-index:1010}.ec-popup .ec-day-head{display:flex;justify-content:space-between;text-align:left}.ec-popup .ec-day-head a{cursor:pointer;font-size:1.5em;line-height:.8}.ec-popup .ec-events{margin:0;min-height:0;overflow:auto}.ec-extra{height:100%;margin-left:-6.5px;overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-now-indicator{border-top:2px solid var(--ec-now-indicator-color);pointer-events:none;position:absolute;width:100%;z-index:1005}.ec-now-indicator:before{background:var(--ec-now-indicator-color);border-radius:50%;content:"";height:12px;margin-top:-7px;pointer-events:none;position:absolute;width:12px}.ec-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-all-day .ec-resizer,.ec-day-grid .ec-resizer,.ec-timeline .ec-resizer{bottom:0;cursor:ew-resize;max-width:8px;right:0;top:0;width:50%}.ec-dragging{cursor:pointer!important}.ec-resizing-y{cursor:ns-resize!important}.ec-resizing-x{cursor:ew-resize!important}
\ No newline at end of file
diff --git a/assets/event-calendar.min.js b/assets/event-calendar.min.js
deleted file mode 100644
index 3816b2c..0000000
--- a/assets/event-calendar.min.js
+++ /dev/null
@@ -1,6 +0,0 @@
-/*!
-EventCalendar v3.4.0
-https://github.com/vkurko/calendar
-*/
-var EventCalendar=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function l(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e){for(var n=arguments.length,l=new Array(n>1?n-1:0),r=1;r<n;r++)l[r-1]=arguments[r];if(null==e){for(const t of l)t(void 0);return t}const o=e.subscribe(...l);return o.unsubscribe?()=>o.unsubscribe():o}function a(t){let e;return s(t,(t=>e=t))(),e}function c(t,e,n){t.$$.on_destroy.push(s(e,n))}function u(t,e,n,l){if(t){const r=d(t,e,n,l);return t[0](r)}}function d(t,e,n,l){return t[1]&&l?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](l(e))):n.ctx}function f(t,e,n,l){if(t[2]&&l){const r=t[2](l(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let l=0;l<n;l+=1)t[l]=e.dirty[l]|r[l];return t}return e.dirty|r}return e.dirty}function h(t,e,n,l,r,o){if(r){const i=d(e,n,l,o);t.p(i,r)}}function m(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function p(t,e,n){return t.set(n),e}function g(e){return e&&o(e.destroy)?e.destroy:t}const $="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function v(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function C(){return x(" ")}function _(){return x("")}function T(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function D(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.data!==e&&(t.data=e)}function M(t,e,n,l){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function U(t,e){return new t(e)}let L;function H(t){L=t}function N(){if(!L)throw new Error("Function called outside component initialization");return L}function B(t){N().$$.on_mount.push(t)}function R(t){N().$$.after_update.push(t)}function F(){const t=N();return function(e,n){let{cancelable:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.$$.callbacks[e];if(r){const o=function(t,e){let{bubbles:n=!1,cancelable:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new CustomEvent(t,{detail:e,bubbles:n,cancelable:l})}(e,n,{cancelable:l});return r.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function z(t){return N().$$.context.get(t)}function A(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const P=[],j=[];let I=[];const W=[],O=Promise.resolve();let G=!1;function q(){G||(G=!0,O.then(K))}function Y(){return q(),O}function X(t){I.push(t)}const V=new Set;let J=0;function K(){if(0!==J)return;const t=L;do{try{for(;J<P.length;){const t=P[J];J++,H(t),Q(t.$$)}}catch(t){throw P.length=0,J=0,t}for(H(null),P.length=0,J=0;j.length;)j.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];V.has(e)||(V.add(e),e())}I.length=0}while(P.length);for(;W.length;)W.pop()();G=!1,V.clear(),H(t)}function Q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(X)}}const Z=new Set;let tt;function et(){tt={r:0,c:[],p:tt}}function nt(){tt.r||r(tt.c),tt=tt.p}function lt(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function rt(t,e,n,l){if(t&&t.o){if(Z.has(t))return;Z.add(t),tt.c.push((()=>{Z.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function ot(t){return void 0!==t?.length?t:Array.from(t)}function it(t,e){rt(t,1,1,(()=>{e.delete(t.key)}))}function st(t,e,n,l,o,i,s,a,c,u,d,f){let h=t.length,m=i.length,p=h;const g={};for(;p--;)g[t[p].key]=p;const $=[],v=new Map,y=new Map,w=[];for(p=m;p--;){const t=f(o,i,p),l=n(t);let r=s.get(l);r?w.push((()=>r.p(t,e))):(r=u(l,t),r.c()),v.set(l,$[p]=r),l in g&&y.set(l,Math.abs(p-g[l]))}const b=new Set,k=new Set;function x(t){lt(t,1),t.m(a,d),s.set(t.key,t),d=t.first,m--}for(;h&&m;){const e=$[m-1],n=t[h-1],l=e.key,r=n.key;e===n?(d=e.first,h--,m--):v.has(r)?!s.has(l)||b.has(l)?x(e):k.has(r)?h--:y.get(l)>y.get(r)?(k.add(l),x(e)):(b.add(r),h--):(c(n,s),h--)}for(;h--;){const e=t[h];v.has(e.key)||c(e,s)}for(;m;)x($[m-1]);return r(w),$}function at(t){t&&t.c()}function ct(t,e,l){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,l),X((()=>{const e=t.$$.on_mount.map(n).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),s.forEach(X)}function ut(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];I.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),I=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(e,n,o,i,s,a){let c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const d=L;H(e);const f=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:s,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:l(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let h=!1;if(f.ctx=o?o(e,n.props||{},(function(t,n){const l=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=l)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](l),h&&function(t,e){-1===t.$$.dirty[0]&&(P.push(t),q(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),h=!0,r(f.before_update),f.fragment=!!i&&i(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(w)}else f.fragment&&f.fragment.c();n.intro&&lt(e.$$.fragment),ct(e,n.target,n.anchor),K()}H(d)}class ft{$$=void 0;$$set=void 0;$destroy(){ut(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ht=[];function mt(t,e){return{subscribe:pt(t,e).subscribe}}function pt(e){let n,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const r=new Set;function o(t){if(i(e,t)&&(e=t,n)){const t=!ht.length;for(const t of r)t[1](),ht.push(t,e);if(t){for(let t=0;t<ht.length;t+=2)ht[t][0](ht[t+1]);ht.length=0}}}function s(t){o(t(e))}return{set:o,update:s,subscribe:function(i){const a=[i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t];return r.add(a),1===r.size&&(n=l(o,s)||t),i(e),()=>{r.delete(a),0===r.size&&n&&(n(),n=null)}}}}function gt(e,n,l){const i=!Array.isArray(e),a=i?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=n.length<2;return mt(l,((e,l)=>{let u=!1;const d=[];let f=0,h=t;const m=()=>{if(f)return;h();const r=n(i?d[0]:d,e,l);c?e(r):h=o(r)?r:t},p=a.map(((t,e)=>s(t,(t=>{d[e]=t,f&=~(1<<e),u&&m()}),(()=>{f|=1<<e}))));return u=!0,m(),function(){r(p),h(),u=!1}}))}function $t(t){return function(e){return"Enter"===e.key||" "===e.key&&!e.preventDefault()?t.call(this,e):void 0}}function vt(t,e){let n={update(e){"string"==typeof e?t.innerText=e:e?.domNodes?t.replaceChildren(...e.domNodes):e?.html&&(t.innerHTML=e.html)}};return n.update(e),n}function yt(t,e){const n=n=>{t&&!t.contains(n.target)&&t.dispatchEvent(new CustomEvent(e+"outside",{detail:{jsEvent:n}}))};return document.addEventListener(e,n,!0),{destroy(){document.removeEventListener(e,n,!0)}}}const wt=86400;function bt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return void 0!==t?t instanceof Date?Ft(t):function(t){const e=t.match(/\d+/g);return new Date(Date.UTC(Number(e[0]),Number(e[1])-1,Number(e[2]),Number(e[3]||0),Number(e[4]||0),Number(e[5]||0)))}(t):Ft(new Date)}function kt(t){if("number"==typeof t)t={seconds:t};else if("string"==typeof t){let e=0,n=2;for(let l of t.split(":",3))e+=parseInt(l,10)*Math.pow(60,n--);t={seconds:e}}else t instanceof Date&&(t={hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds()});let e=t.weeks||t.week||0;return{years:t.years||t.year||0,months:t.months||t.month||0,days:7*e+(t.days||t.day||0),seconds:60*(t.hours||t.hour||0)*60+60*(t.minutes||t.minute||0)+(t.seconds||t.second||0),inWeeks:!!e}}function xt(t){return new Date(t.getTime())}function Ct(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.setUTCFullYear(t.getUTCFullYear()+n*e.years);let l=t.getUTCMonth()+n*e.months;for(t.setUTCMonth(l),l%=12,l<0&&(l+=12);t.getUTCMonth()!==l;)Dt(t);return t.setUTCDate(t.getUTCDate()+n*e.days),t.setUTCSeconds(t.getUTCSeconds()+n*e.seconds),t}function _t(t,e){return Ct(t,e,-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1))}function Tt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.setUTCDate(t.getUTCDate()+e),t}function Dt(t){return Tt(t,-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}function Et(t){return t.setUTCHours(0,0,0,0),t}function St(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}function Mt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:19;return t.toISOString().substring(0,e)}function Ut(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),l=1;l<e;l++)n[l-1]=arguments[l];return n.every((e=>t.getTime()===e.getTime()))}function Lt(t,e){let n=e-t.getUTCDay();return t.setUTCDate(t.getUTCDate()+(n<=0?n:n-7)),t}function Ht(t){return"string"==typeof t&&t.length<=10}function Nt(t){return t.seconds}function Bt(t,e){return Ct(t,e),t}function Rt(t,e,n){if(_t(t,e),n.length&&n.length<7)for(;n.includes(t.getUTCDay());)Dt(t);return t}function Ft(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))}function zt(t,e,n){n.update((n=>n.set(e,t)))}function At(t){r(t),t.clear()}function Pt(t,e,n){e??=t,n.has(e)||n.set(e,setTimeout((()=>{n.delete(e),t()})))}function jt(){return Object.assign(...arguments)}function It(t){return Object.keys(t)}function Wt(t){return Math.floor(t)}function Ot(t){return Math.ceil(t)}function Gt(){return Math.min(...arguments)}function qt(){return Math.max(...arguments)}function Yt(t){return Array.isArray(t)}function Xt(t,e,n){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=document.createElement(t);r.className=e,"string"==typeof n?r.innerText=n:n.domNodes?r.replaceChildren(...n.domNodes):n.html&&(r.innerHTML=n.html);for(let t of l)r.setAttribute(...t);return r}function Vt(t){return t.getBoundingClientRect()}function Jt(t,e){for(;e--;)t=t.parentElement;return t}function Kt(t){return Vt(t).height}let Qt=Symbol("ec");function Zt(t,e){t[Qt]=e}function te(t){return!!t?.[Qt]}function ee(t){return t[Qt]}function ne(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;for(let l of n.elementsFromPoint(t,e)){if(te(l))return l;if(l.shadowRoot){let n=ne(t,e,l.shadowRoot);if(n)return n}}return null}function le(t){return(t=jt({},t)).currentStart=St(t.currentStart),t.currentEnd=St(t.currentEnd),t.activeStart=St(t.activeStart),t.activeEnd=St(t.activeEnd),t}function re(t){return t.startsWith("list")}function oe(t){return t.includes("Timeline")}let ie=1;function se(t){return t.map((t=>{let e={id:"id"in t?String(t.id):`{generated-${ie++}}`,resourceIds:ae(t,"resourceId").map(String),allDay:t.allDay??(Ht(t.start)&&Ht(t.end)),start:bt(t.start),end:bt(t.end),title:t.title??"",editable:t.editable,startEditable:t.startEditable,durationEditable:t.durationEditable,display:t.display??"auto",extendedProps:t.extendedProps??{},backgroundColor:t.backgroundColor??t.color,textColor:t.textColor,classNames:ae(t,"className"),styles:ae(t,"style")};if(e.allDay){Et(e.start);let t=xt(e.end);Et(e.end),Ut(e.end,t)&&!Ut(e.end,e.start)||Tt(e.end)}return e}))}function ae(t,e){let n=t[e+"s"]??t[e]??[];return Yt(n)?n:[n]}function ce(t){return t.map((t=>({events:t.events,url:t.url&&t.url.trimEnd("&")||"",method:t.method&&t.method.toUpperCase()||"GET",extraParams:t.extraParams||{}})))}function ue(t,e,n){return{start:t.start>e?t.start:e,end:t.end<n?t.end:n,event:t}}function de(t){t.sort(((t,e)=>t.start-e.start||e.event.allDay-t.event.allDay))}function fe(t,e,n,l,r,i){let s=r.formatRange(t.start,e&&"pointer"!==t.event.display?(a=xt(t.start),c=t.end,a.setUTCHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),0),a):t.start);var a,c;let u;if(n&&(u=o(n)?n({event:pe(t.event),timeText:s,view:le(i)}):n),void 0===u){let e;switch(t.event.display){case"background":e=[];break;case"pointer":e=[he(s,t,l)];break;default:e=[...t.event.allDay?[]:[he(s,t,l)],Xt("h4",l.eventTitle,t.event.title)]}u={domNodes:e}}return[s,u]}function he(t,e,n){return Xt("time",n.eventTime,t,[["datetime",Mt(e.start)]])}function me(t,e,n){let l=e.classNames;return t&&(o(t)&&(t=t({event:pe(e),view:le(n)})),l=[...Yt(t)?t:[t],...l]),l}function pe(t){return $e(t,St)}function ge(t){return $e(t,xt)}function $e(t,e){return(t=jt({},t)).start=e(t.start),t.end=e(t.end),t}function ve(t,e){let n={};if(t.length){let l;de(t);for(let r of t){let t=[],o=Et(xt(r.start));for(;r.end>o;){if(!e.includes(o.getUTCDay())&&(t.push(xt(o)),t.length>1)){let t=o.getTime();n[t]?n[t].chunks.push(r):n[t]={sorted:!1,chunks:[r]}}Tt(o)}if(t.length){r.date=t[0],r.days=t.length,r.dates=t,r.start<t[0]&&(r.start=t[0]);let e=Tt(xt(t.at(-1)));r.end>e&&(r.end=e)}else r.date=Et(xt(r.start)),r.days=1,r.dates=[r.date];l&&Ut(l.date,r.date)&&(r.prev=l),l=r}}return n}function ye(t,e,n){t.top=0,t.prev&&(t.top=t.prev.bottom+1),t.bottom=t.top+n;let l=1,r=t.date.getTime();if(e[r]){e[r].sorted||(e[r].chunks.sort(((t,e)=>t.top-e.top)),e[r].sorted=!0);for(let n of e[r].chunks)if(t.top<n.bottom&&t.bottom>n.top){let e=n.bottom-t.top+1;l+=e,t.top+=e,t.bottom+=e}}return l}function we(t,e){t.length=e.length;let n=[];for(let e of t)n.push(e?.reposition?.());return n}function be(t,e,n,l){return t.start<n&&t.end>e&&(void 0===l||t.resourceIds.includes(l.id))}function ke(t){return function(t){return"preview"===t}(t)||Ce(t)||function(t){return"pointer"===t}(t)}function xe(t){return"background"===t}function Ce(t){return"ghost"===t}function _e(t){return Se(t,"day")}function Te(t){return Se(t,"week")}function De(t){return Se(t,"month")}function Ee(t){return Se(t,"year")}function Se(t,e){return{...t,next:"Next "+e,prev:"Previous "+e}}function Me(t){return e=>({...e,view:t})}function Ue(t){return t.map((t=>({id:String(t.id),title:t.title||"",eventBackgroundColor:t.eventBackgroundColor,eventTextColor:t.eventTextColor})))}function Le(t,e){return Ne(t,e)?.eventBackgroundColor}function He(t,e){return Ne(t,e)?.eventTextColor}function Ne(t,e){return e.find((e=>t.resourceIds.includes(e.id)))}function Be(t,e){return gt([t,e],(t=>{let[e,n]=t,l=o(n)?{format:n}:new Intl.DateTimeFormat(e,n);return{format:t=>l.format(St(t))}}))}function Re(t,e){return gt([t,e],(t=>{let e,[n,l]=t;if(o(l))e=l;else{let t=new Intl.DateTimeFormat(n,l);e=(e,n)=>{if(e<=n)return t.formatRange(e,n);{let l=t.formatRangeToParts(n,e),r="",o=["startRange","endRange"],i=[!1,!1];for(let t of l){let e=o.indexOf(t.source);e>=0?i[e]||(r+=Fe(o[1-e],l),i[e]=!0):r+=t.value}return r}}}return{formatRange:(t,n)=>e(St(t),St(n))}}))}function Fe(t,e){let n="";for(let l of e)l.source==t&&(n+=l.value);return n}function ze(t){return gt([t.resources,t.filterResourcesWithEvents,t._events,t._activeRange],(t=>{let[e,n,l,r]=t,o=e;return n&&(o=e.filter((t=>{for(let e of l)if("background"!==e.display&&e.resourceIds.includes(t.id)&&e.start<r.end&&e.end>r.start)return!0;return!1}))),o.length||(o=Ue([{}])),o}))}function Ae(t,e,n,l){t=xt(t);let r=e.seconds<3600,o=[],i=xt(t),s=1;for(Ct(t,n.min),Ct(i,n.max);t<i;)o.push([Mt(t),l.format(t),o.length&&(s||!r)]),Ct(t,e),s=1-s;return o}function Pe(t,e,n,l,r){let i=kt(t),s=kt(e);if(n){let t=kt(Gt(Nt(i),qt(0,Nt(s)-wt))),e=kt(qt(Nt(s),Nt(t)+wt)),a=o(n?.eventFilter)?n.eventFilter:t=>!xe(t.display);t:for(let n of l){let l=Ct(xt(n),i),o=Ct(xt(n),s),c=Ct(xt(n),t),u=Ct(xt(n),e);for(let d of r)if(!d.allDay&&a(d)&&d.start<u&&d.end>c){if(d.start<l){let e=qt((d.start-n)/1e3,Nt(t));e<Nt(i)&&(i.seconds=e)}if(d.end>o){let t=Gt((d.end-n)/1e3,Nt(e));t>Nt(s)&&(s.seconds=t)}if(Nt(i)===Nt(t)&&Nt(s)===Nt(e))break t}}}return{min:i,max:s}}class je{constructor(t,n){let l=function(t){let e={allDayContent:void 0,allDaySlot:!0,buttonText:{today:"today"},customButtons:{},date:new Date,datesSet:void 0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},dayHeaderAriaLabelFormat:{dateStyle:"full"},displayEventEnd:!0,duration:{weeks:1},events:[],eventAllUpdated:void 0,eventBackgroundColor:void 0,eventTextColor:void 0,eventClassNames:void 0,eventClick:void 0,eventColor:void 0,eventContent:void 0,eventDidMount:void 0,eventMouseEnter:void 0,eventMouseLeave:void 0,eventSources:[],eventTimeFormat:{hour:"numeric",minute:"2-digit"},filterResourcesWithEvents:!1,firstDay:0,flexibleSlotTimeLimits:!1,headerToolbar:{start:"title",center:"",end:"today prev,next"},height:void 0,hiddenDays:[],highlightedDates:[],lazyFetching:!0,loading:void 0,locale:void 0,nowIndicator:!1,resourceLabelContent:void 0,resourceLabelDidMount:void 0,resources:[],selectable:!1,scrollTime:"06:00:00",slotDuration:"00:30:00",slotEventOverlap:!0,slotHeight:24,slotLabelFormat:{hour:"numeric",minute:"2-digit"},slotMaxTime:"24:00:00",slotMinTime:"00:00:00",slotWidth:72,theme:{allDay:"ec-all-day",active:"ec-active",bgEvent:"ec-bg-event",bgEvents:"ec-bg-events",body:"ec-body",button:"ec-button",buttonGroup:"ec-button-group",calendar:"ec",compact:"ec-compact",content:"ec-content",day:"ec-day",dayHead:"ec-day-head",days:"ec-days",event:"ec-event",eventBody:"ec-event-body",eventTime:"ec-event-time",eventTitle:"ec-event-title",events:"ec-events",extra:"ec-extra",handle:"ec-handle",header:"ec-header",hiddenScroll:"ec-hidden-scroll",highlight:"ec-highlight",icon:"ec-icon",line:"ec-line",lines:"ec-lines",nowIndicator:"ec-now-indicator",otherMonth:"ec-other-month",resource:"ec-resource",sidebar:"ec-sidebar",sidebarTitle:"ec-sidebar-title",today:"ec-today",time:"ec-time",title:"ec-title",toolbar:"ec-toolbar",view:"",weekdays:["ec-sun","ec-mon","ec-tue","ec-wed","ec-thu","ec-fri","ec-sat"],withScroll:"ec-with-scroll"},titleFormat:{year:"numeric",month:"short",day:"numeric"},view:void 0,viewDidMount:void 0,views:{}};for(let n of t)n.createOptions?.(e);return e}(t=t||[]),r=function(t){let e={date:t=>Et(bt(t)),duration:kt,events:se,eventSources:ce,hiddenDays:t=>[...new Set(t)],highlightedDates:t=>t.map((t=>Et(bt(t)))),resources:Ue,scrollTime:kt,slotDuration:kt,slotMaxTime:kt,slotMinTime:kt};for(let n of t)n.createParsers?.(e);return e}(t);l=Ie(l,r),n=Ie(n,r);for(let[t,e]of Object.entries(l))this[t]=pt(e);this._queue=pt(new Map),this._queue2=pt(new Map),this._tasks=new Map,this._auxiliary=pt([]),this._dayGrid=gt(this.view,(t=>t?.startsWith("dayGrid"))),this._currentRange=function(t){return gt([t.date,t.duration,t.firstDay],(t=>{let e,[n,l,r]=t,o=xt(n);return l.months?o.setUTCDate(1):l.inWeeks&&Lt(o,r),e=Ct(xt(o),l),{start:o,end:e}}))}(this),this._activeRange=function(t){return gt([t._currentRange,t.firstDay,t.slotMaxTime,t._dayGrid],(t=>{let[e,n,l,r]=t,o=xt(e.start),i=xt(e.end);if(r)Lt(o,n),function(t,e){let n=e-t.getUTCDay();t.setUTCDate(t.getUTCDate()+(n>=0?n:n+7))}(i,n);else if(l.days||l.seconds>wt){Ct(Dt(i),l);let t=Dt(xt(i));t<o&&(o=t)}return{start:o,end:i}}))}(this),this._fetchedRange=pt({start:void 0,end:void 0}),this._events=function(t){let e,n=pt([]),l=0,r={};return gt([t.events,t.eventSources,t._activeRange,t._fetchedRange,t.lazyFetching,t.loading],((n,i)=>zt((()=>{let[t,r,s,a,c,u]=n;if(r.length){if(!a.start||a.start>s.start||a.end<s.end||!c){e&&e.abort(),e=new AbortController,o(u)&&!l&&u(!0);let t=()=>{0==--l&&o(u)&&u(!1)},n=[],c=e=>t(),d=e=>{n=n.concat(se(e)),i(n),t()},f=Mt(s.start),h=Mt(s.end);for(let t of r){if(o(t.events)){let e=t.events({start:St(s.start),end:St(s.end),startStr:f,endStr:h},d,c);void 0!==e&&Promise.resolve(e).then(d,c)}else{let n=o(t.extraParams)?t.extraParams():jt({},t.extraParams);n.start=f,n.end=h,n=new URLSearchParams(n);let l,r=t.url,i={};["GET","HEAD"].includes(t.method)?r+=(r.includes("?")?"&":"?")+n:(i["content-type"]="application/x-www-form-urlencoded;charset=UTF-8",l=String(n)),fetch(r,{method:t.method,headers:i,body:l,signal:e.signal,credentials:"same-origin"}).then((t=>t.json())).then(d).catch(c)}++l}a.start=s.start,a.end=s.end}}else i(t)}),r,t._queue)),[]).subscribe(n.set),n}(this),this._now=mt(bt(),(t=>{let e=setInterval((()=>{t(bt())}),1e3);return()=>clearInterval(e)})),this._today=function(t){return gt(t._now,(t=>Et(xt(t))))}(this),this._intlEventTime=Re(this.locale,this.eventTimeFormat),this._intlSlotLabel=Be(this.locale,this.slotLabelFormat),this._intlDayHeader=Be(this.locale,this.dayHeaderFormat),this._intlDayHeaderAL=Be(this.locale,this.dayHeaderAriaLabelFormat),this._intlTitle=Re(this.locale,this.titleFormat),this._bodyEl=pt(void 0),this._scrollable=pt(!1),this._viewTitle=function(t){return gt([t.date,t._activeRange,t._intlTitle,t._dayGrid],(t=>{let[e,n,l,r]=t;return r?l.formatRange(e,e):l.formatRange(n.start,Dt(xt(n.end)))}))}(this),this._viewDates=function(t){return gt([t._activeRange,t.hiddenDays],(e=>{let[n,l]=e,r=[],o=Et(xt(n.start)),i=Et(xt(n.end));for(;o<i;)l.includes(o.getUTCDay())||r.push(xt(o)),Tt(o);return!r.length&&l.length&&l.length<7&&(t.date.update((t=>{for(;l.includes(t.getUTCDay());)Tt(t);return t})),r=a(t._viewDates)),r}))}(this),this._view=function(t){return gt([t.view,t._viewTitle,t._currentRange,t._activeRange],(t=>function(t,e,n,l){return{type:t,title:e,currentStart:n.start,currentEnd:n.end,activeStart:l.start,activeEnd:l.end,calendar:void 0}}(...t)))}(this),this._viewComponent=pt(void 0),this._interaction=pt({}),this._iEvents=pt([null,null]),this._iClasses=pt(e),this._iClass=pt(void 0),this._set=(t,e)=>{Ge(t,this)&&(r[t]&&(e=r[t](e)),this[t].set(e))},this._get=t=>Ge(t,this)?a(this[t]):void 0;for(let e of t)e.createStores?.(this);n.view&&this.view.set(n.view);let i=new Set([...It(l.views),...It(n.views??{})]);for(let t of i){let e=We(l,l.views[t]??{}),r=We(e,n,n.views?.[t]??{}),i=r.component;Oe(r,this);for(let t of It(r)){let{set:n,_set:l=n,...i}=this[t];this[t]={set:["buttonText","theme"].includes(t)?i=>{if(o(i)){let o=i(e[t]);r[t]=o,n(n===l?o:i)}else r[t]=i,n(i)}:e=>{r[t]=e,n(e)},_set:l,...i}}this.view.subscribe((e=>{if(e===t){this._viewComponent.set(i),o(r.viewDidMount)&&Y().then((()=>r.viewDidMount(a(this._view))));for(let t of It(r))this[t]._set(r[t])}}))}}}function Ie(t,e){let n={...t};for(let t of It(e))t in n&&(n[t]=e[t](n[t]));if(t.views){n.views={};for(let l of It(t.views))n.views[l]=Ie(t.views[l],e)}return n}function We(){let t={};for(var e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];for(let e of n){let n={};for(let l of["buttonText","theme"])o(e[l])&&(n[l]=e[l](t[l]));t={...t,...e,...n}}return t}function Oe(t,e){It(t).filter((t=>!Ge(t,e)||"view"==t)).forEach((e=>delete t[e]))}function Ge(t,e){return e.hasOwnProperty(t)&&"_"!==t[0]}function qe(t,e,n){const l=t.slice();return l[25]=e[n],l}function Ye(t){let e,n,l,r,o,i=t[5][t[25]]+"";function s(){return t[22](t[25])}return{c(){e=k("button"),n=x(i),E(e,"class",l=t[3].button+(t[7]===t[25]?" "+t[3].active:"")+" ec-"+t[25])},m(t,l){y(t,e,l),v(e,n),r||(o=T(e,"click",s),r=!0)},p(r,o){t=r,33&o&&i!==(i=t[5][t[25]]+"")&&S(n,i),137&o&&l!==(l=t[3].button+(t[7]===t[25]?" "+t[3].active:"")+" ec-"+t[25])&&E(e,"class",l)},d(t){t&&w(e),r=!1,o()}}}function Xe(t){let e,n,l,i,s;return{c(){e=k("button"),E(e,"class",n=t[3].button+" ec-"+t[25]+(t[6][t[25]].active?" "+t[3].active:""))},m(n,r){y(n,e,r),i||(s=[T(e,"click",(function(){o(t[6][t[25]].click)&&t[6][t[25]].click.apply(this,arguments)})),g(l=vt.call(null,e,t[6][t[25]].text))],i=!0)},p(r,i){t=r,73&i&&n!==(n=t[3].button+" ec-"+t[25]+(t[6][t[25]].active?" "+t[3].active:""))&&E(e,"class",n),l&&o(l.update)&&65&i&&l.update.call(null,t[6][t[25]].text)},d(t){t&&w(e),i=!1,r(s)}}}function Ve(t){let e,n,l,r,o,i=t[5][t[25]]+"";return{c(){e=k("button"),n=x(i),E(e,"class",l=t[3].button+" ec-"+t[25]),e.disabled=t[1]},m(l,i){y(l,e,i),v(e,n),r||(o=T(e,"click",t[21]),r=!0)},p(t,r){33&r&&i!==(i=t[5][t[25]]+"")&&S(n,i),9&r&&l!==(l=t[3].button+" ec-"+t[25])&&E(e,"class",l),2&r&&(e.disabled=t[1])},d(t){t&&w(e),r=!1,o()}}}function Je(t){let e,n,l,r,o,i,s,a;return{c(){e=k("button"),n=k("i"),E(n,"class",l=t[3].icon+" ec-"+t[25]),E(e,"class",r=t[3].button+" ec-"+t[25]),E(e,"aria-label",o=t[5].next),E(e,"title",i=t[5].next)},m(l,r){y(l,e,r),v(e,n),s||(a=T(e,"click",t[19]),s=!0)},p(t,s){9&s&&l!==(l=t[3].icon+" ec-"+t[25])&&E(n,"class",l),9&s&&r!==(r=t[3].button+" ec-"+t[25])&&E(e,"class",r),32&s&&o!==(o=t[5].next)&&E(e,"aria-label",o),32&s&&i!==(i=t[5].next)&&E(e,"title",i)},d(t){t&&w(e),s=!1,a()}}}function Ke(t){let e,n,l,r,o,i,s,a;return{c(){e=k("button"),n=k("i"),E(n,"class",l=t[3].icon+" ec-"+t[25]),E(e,"class",r=t[3].button+" ec-"+t[25]),E(e,"aria-label",o=t[5].prev),E(e,"title",i=t[5].prev)},m(l,r){y(l,e,r),v(e,n),s||(a=T(e,"click",t[18]),s=!0)},p(t,s){9&s&&l!==(l=t[3].icon+" ec-"+t[25])&&E(n,"class",l),9&s&&r!==(r=t[3].button+" ec-"+t[25])&&E(e,"class",r),32&s&&o!==(o=t[5].prev)&&E(e,"aria-label",o),32&s&&i!==(i=t[5].prev)&&E(e,"title",i)},d(t){t&&w(e),s=!1,a()}}}function Qe(t){let e,n,l,r,i;return{c(){e=k("h2"),E(e,"class",n=t[3].title)},m(n,o){y(n,e,o),r||(i=g(l=vt.call(null,e,t[4])),r=!0)},p(t,r){8&r&&n!==(n=t[3].title)&&E(e,"class",n),l&&o(l.update)&&16&r&&l.update.call(null,t[4])},d(t){t&&w(e),r=!1,i()}}}function Ze(t){let e;function n(t,e){return"title"==t[25]?Qe:"prev"==t[25]?Ke:"next"==t[25]?Je:"today"==t[25]?Ve:t[6][t[25]]?Xe:""!=t[25]?Ye:void 0}let l=n(t),r=l&&l(t);return{c(){r&&r.c(),e=_()},m(t,n){r&&r.m(t,n),y(t,e,n)},p(t,o){l===(l=n(t))&&r?r.p(t,o):(r&&r.d(1),r=l&&l(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){t&&w(e),r&&r.d(t)}}}function tn(e){let n,l=ot(e[0]),r=[];for(let t=0;t<l.length;t+=1)r[t]=Ze(qe(e,l,t));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=_()},m(t,e){for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(t,e);y(t,n,e)},p(t,e){let[o]=e;if(917759&o){let e;for(l=ot(t[0]),e=0;e<l.length;e+=1){const i=qe(t,l,e);r[e]?r[e].p(i,o):(r[e]=Ze(i),r[e].c(),r[e].m(n.parentNode,n))}for(;e<r.length;e+=1)r[e].d(1);r.length=l.length}},i:t,o:t,d(t){t&&w(n),b(r,t)}}}function en(t,e,n){let l,r,o,i,s,a,u,d,f,{buttons:h}=e,{_currentRange:m,_viewTitle:g,buttonText:$,customButtons:v,date:y,duration:w,hiddenDays:b,theme:k,view:x}=z("state");c(t,m,(t=>n(20,i=t))),c(t,g,(t=>n(4,a=t))),c(t,$,(t=>n(5,u=t))),c(t,v,(t=>n(6,d=t))),c(t,y,(t=>n(2,r=t))),c(t,w,(t=>n(23,l=t))),c(t,b,(t=>n(24,o=t))),c(t,k,(t=>n(3,s=t))),c(t,x,(t=>n(7,f=t)));let C,_=Et(bt());return t.$$set=t=>{"buttons"in t&&n(0,h=t.buttons)},t.$$.update=()=>{1048576&t.$$.dirty&&n(1,C=_>=i.start&&_<i.end||null)},[h,C,r,s,a,u,d,f,m,g,$,v,y,w,b,k,x,_,function(){p(y,r=Rt(r,l,o),r)},function(){p(y,r=Bt(r,l),r)},i,()=>p(y,r=xt(_),r),t=>p(x,f=t,f)]}class nn extends ft{constructor(t){super(),dt(this,t,en,tn,i,{buttons:0})}}function ln(t,e,n){const l=t.slice();return l[5]=e[n],l}function rn(t,e,n){const l=t.slice();return l[8]=e[n],l}function on(t){let e,n;return e=new nn({props:{buttons:t[8]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.buttons=t[8]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function sn(t){let e,n,l,r;return n=new nn({props:{buttons:t[8]}}),{c(){e=k("div"),at(n.$$.fragment),E(e,"class",l=t[1].buttonGroup)},m(t,l){y(t,e,l),ct(n,e,null),r=!0},p(t,o){const i={};1&o&&(i.buttons=t[8]),n.$set(i),(!r||2&o&&l!==(l=t[1].buttonGroup))&&E(e,"class",l)},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&w(e),ut(n)}}}function an(t){let e,n,l,r;const o=[sn,on],i=[];function s(t,e){return t[8].length>1?0:1}return e=s(t),n=i[e]=o[e](t),{c(){n.c(),l=_()},m(t,n){i[e].m(t,n),y(t,l,n),r=!0},p(t,r){let a=e;e=s(t),e===a?i[e].p(t,r):(et(),rt(i[a],1,1,(()=>{i[a]=null})),nt(),n=i[e],n?n.p(t,r):(n=i[e]=o[e](t),n.c()),lt(n,1),n.m(l.parentNode,l))},i(t){r||(lt(n),r=!0)},o(t){rt(n),r=!1},d(t){t&&w(l),i[e].d(t)}}}function cn(t){let e,n,l,r,o=ot(t[0][t[5]]),i=[];for(let e=0;e<o.length;e+=1)i[e]=an(rn(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=k("div");for(let t=0;t<i.length;t+=1)i[t].c();n=C(),E(e,"class",l="ec-"+t[5])},m(t,l){y(t,e,l);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);v(e,n),r=!0},p(t,a){if(3&a){let l;for(o=ot(t[0][t[5]]),l=0;l<o.length;l+=1){const r=rn(t,o,l);i[l]?(i[l].p(r,a),lt(i[l],1)):(i[l]=an(r),i[l].c(),lt(i[l],1),i[l].m(e,n))}for(et(),l=o.length;l<i.length;l+=1)s(l);nt()}(!r||1&a&&l!==(l="ec-"+t[5]))&&E(e,"class",l)},i(t){if(!r){for(let t=0;t<o.length;t+=1)lt(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);r=!1},d(t){t&&w(e),b(i,t)}}}function un(t){let e,n,l,r=ot(It(t[0])),o=[];for(let e=0;e<r.length;e+=1)o[e]=cn(ln(t,r,e));const i=t=>rt(o[t],1,1,(()=>{o[t]=null}));return{c(){e=k("nav");for(let t=0;t<o.length;t+=1)o[t].c();E(e,"class",n=t[1].toolbar)},m(t,n){y(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);l=!0},p(t,s){let[a]=s;if(3&a){let n;for(r=ot(It(t[0])),n=0;n<r.length;n+=1){const l=ln(t,r,n);o[n]?(o[n].p(l,a),lt(o[n],1)):(o[n]=cn(l),o[n].c(),lt(o[n],1),o[n].m(e,null))}for(et(),n=r.length;n<o.length;n+=1)i(n);nt()}(!l||2&a&&n!==(n=t[1].toolbar))&&E(e,"class",n)},i(t){if(!l){for(let t=0;t<r.length;t+=1)lt(o[t]);l=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)rt(o[t]);l=!1},d(t){t&&w(e),b(o,t)}}}function dn(t,e,n){let l,r,{headerToolbar:o,theme:i}=z("state");c(t,o,(t=>n(4,l=t))),c(t,i,(t=>n(1,r=t)));let s={start:[],center:[],end:[]};return t.$$.update=()=>{if(17&t.$$.dirty)for(let t of It(s))n(0,s[t]=l[t].split(" ").map((t=>t.split(","))),s)},[s,r,o,i,l]}class fn extends ft{constructor(t){super(),dt(this,t,dn,un,i,{})}}function hn(t,e,n){const l=t.slice();return l[11]=e[n],l}function mn(t){let e,n,l;var r=t[11];return r&&(e=U(r,{})),{c(){e&&at(e.$$.fragment),n=_()},m(t,r){e&&ct(e,t,r),y(t,n,r),l=!0},p(t,l){if(1&l&&r!==(r=t[11])){if(e){et();const t=e;rt(t.$$.fragment,1,0,(()=>{ut(t,1)})),nt()}r?(e=U(r,{}),at(e.$$.fragment),lt(e.$$.fragment,1),ct(e,n.parentNode,n)):e=null}},i(t){l||(e&&lt(e.$$.fragment,t),l=!0)},o(t){e&&rt(e.$$.fragment,t),l=!1},d(t){t&&w(n),e&&ut(e,t)}}}function pn(t){let e,n,l=ot(t[0]),r=[];for(let e=0;e<l.length;e+=1)r[e]=mn(hn(t,l,e));const o=t=>rt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);y(t,e,l),n=!0},p(t,n){let[i]=n;if(1&i){let n;for(l=ot(t[0]),n=0;n<l.length;n+=1){const o=hn(t,l,n);r[n]?(r[n].p(o,i),lt(r[n],1)):(r[n]=mn(o),r[n].c(),lt(r[n],1),r[n].m(e.parentNode,e))}for(et(),n=l.length;n<r.length;n+=1)o(n);nt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)lt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&w(e),b(r,t)}}}function gn(t,e,n){let l,r,i,s,{datesSet:a,_auxiliary:u,_activeRange:d,_queue:f,_view:h}=z("state");c(t,a,(t=>n(7,r=t))),c(t,u,(t=>n(0,s=t))),c(t,d,(t=>n(5,i=t))),c(t,h,(t=>n(6,l=t)));let m={};return t.$$.update=()=>{32&t.$$.dirty&&function(t){o(r)&&zt((()=>r({start:St(t.start),end:St(t.end),startStr:Mt(t.start),endStr:Mt(t.end),view:le(l)})),m,f)}(i)},[s,a,u,d,h,i]}let $n=class extends ft{constructor(t){super(),dt(this,t,gn,pn,i,{})}};function vn(t){let e,n,l,r,o,i,s,a,c,u,d;n=new fn({});var f=t[5];return f&&(r=U(f,{})),a=new $n({}),{c(){e=k("div"),at(n.$$.fragment),l=C(),r&&at(r.$$.fragment),s=C(),at(a.$$.fragment),E(e,"class",o=t[1].calendar+" "+t[1].view+(t[0]?" "+t[1].withScroll:"")+(t[2]?" "+t[1][t[2]]:"")),E(e,"role",i=re(t[4])?"list":"table"),M(e,"height",t[3])},m(o,i){y(o,e,i),ct(n,e,null),v(e,l),r&&ct(r,e,null),y(o,s,i),ct(a,o,i),c=!0,u||(d=T(window,"resize",t[20]),u=!0)},p(t,n){if(32&n[0]&&f!==(f=t[5])){if(r){et();const t=r;rt(t.$$.fragment,1,0,(()=>{ut(t,1)})),nt()}f?(r=U(f,{}),at(r.$$.fragment),lt(r.$$.fragment,1),ct(r,e,null)):r=null}(!c||7&n[0]&&o!==(o=t[1].calendar+" "+t[1].view+(t[0]?" "+t[1].withScroll:"")+(t[2]?" "+t[1][t[2]]:"")))&&E(e,"class",o),(!c||16&n[0]&&i!==(i=re(t[4])?"list":"table"))&&E(e,"role",i),8&n[0]&&M(e,"height",t[3])},i(t){c||(lt(n.$$.fragment,t),r&&lt(r.$$.fragment,t),lt(a.$$.fragment,t),c=!0)},o(t){rt(n.$$.fragment,t),r&&rt(r.$$.fragment,t),rt(a.$$.fragment,t),c=!1},d(t){t&&(w(e),w(s)),ut(n),r&&ut(r),ut(a,t),u=!1,d()}}}function yn(t,e,n){let l,r,o,i,s,u,d,f,h,m,g,$,v,y,{plugins:w=[]}=e,{options:b={}}=e,k=N(),x=new je(w,b);var C,_;C="state",_=x,N().$$.context.set(C,_);let{_viewComponent:T,_bodyEl:D,_interaction:E,_iClass:S,_events:M,_queue:U,_queue2:L,_tasks:H,_scrollable:B,date:F,duration:z,hiddenDays:A,height:P,theme:j,view:I}=x;c(t,T,(t=>n(5,y=t))),c(t,D,(t=>n(37,l=t))),c(t,E,(t=>n(43,f=t))),c(t,S,(t=>n(2,g=t))),c(t,M,(t=>n(44,h=t))),c(t,U,(t=>n(39,i=t))),c(t,L,(t=>n(38,o=t))),c(t,B,(t=>n(0,r=t))),c(t,F,(t=>n(42,d=t))),c(t,z,(t=>n(41,u=t))),c(t,A,(t=>n(40,s=t))),c(t,P,(t=>n(3,$=t))),c(t,j,(t=>n(1,m=t))),c(t,I,(t=>n(4,v=t)));let W={...b};function O(t,e){return x._set(t,e),this}var G;function q(){var t;l&&p(B,r=(t=l).scrollHeight>t.clientHeight,r)}return G=()=>{At(i)},N().$$.before_update.push(G),R((()=>{At(o),Pt(q,null,H)})),t.$$set=t=>{"plugins"in t&&n(21,w=t.plugins),"options"in t&&n(22,b=t.options)},t.$$.update=()=>{if(4194304&t.$$.dirty[0])for(let[t,e]of function(t,e){let n=[];for(let l of It(t))t[l]!==e[l]&&n.push([l,t[l]]);return jt(e,t),n}(b,W))O(t,e)},[r,m,g,$,v,y,T,D,E,S,M,U,L,B,F,z,A,P,j,I,q,w,b,O,function(t){let e=x._get(t);return e instanceof Date?St(e):e},function(){return x._fetchedRange.set({start:void 0,end:void 0}),this},function(){return h.map(pe)},function(t){for(let e of h)if(e.id==t)return pe(e);return null},function(t){return t=se([t])[0],h.push(t),M.set(h),t},function(t){for(let e of h)if(e.id==t.id)return jt(e,t=se([t])[0]),M.set(h),t;return null},function(t){let e=h.findIndex((e=>e.id==t));return e>=0&&(h.splice(e,1),M.set(h)),this},function(){return le(a(x._view))},function(){return f.action?.unselect(),this},function(t,e){let n=ne(t,e);if(n){let l=ee(n)(t,e);return l.date=St(l.date),l}return null},function(){ut(k,!0)},function(){return p(F,d=Bt(d,u),d),this},function(){return p(F,d=Rt(d,u,s),d),this}]}class wn extends ft{constructor(t){super(),dt(this,t,yn,vn,i,{plugins:21,options:22,setOption:23,getOption:24,refetchEvents:25,getEvents:26,getEventById:27,addEvent:28,updateEvent:29,removeEventById:30,getView:31,unselect:32,dateFromPoint:33,destroy:34,next:35,prev:36},null,[-1,-1])}get setOption(){return this.$$.ctx[23]}get getOption(){return this.$$.ctx[24]}get refetchEvents(){return this.$$.ctx[25]}get getEvents(){return this.$$.ctx[26]}get getEventById(){return this.$$.ctx[27]}get addEvent(){return this.$$.ctx[28]}get updateEvent(){return this.$$.ctx[29]}get removeEventById(){return this.$$.ctx[30]}get getView(){return this.$$.ctx[31]}get unselect(){return this.$$.ctx[32]}get dateFromPoint(){return this.$$.ctx[33]}get destroy(){return this.$$.ctx[34]}get next(){return this.$$.ctx[35]}get prev(){return this.$$.ctx[36]}}function bn(t,e,n){const l=t.slice();return l[8]=e[n],l}function kn(t){let e,n,l,r,i,s,a,c;return{c(){e=k("div"),n=k("span"),i=C(),E(n,"aria-label",l=t[2].format(t[8])),E(e,"class",s=t[0].day+" "+t[0].weekdays?.[t[8].getUTCDay()]),E(e,"role","columnheader")},m(l,o){y(l,e,o),v(e,n),v(e,i),a||(c=g(r=vt.call(null,n,t[3].format(t[8]))),a=!0)},p(i,a){t=i,6&a&&l!==(l=t[2].format(t[8]))&&E(n,"aria-label",l),r&&o(r.update)&&10&a&&r.update.call(null,t[3].format(t[8])),3&a&&s!==(s=t[0].day+" "+t[0].weekdays?.[t[8].getUTCDay()])&&E(e,"class",s)},d(t){t&&w(e),a=!1,c()}}}function xn(e){let n,l,r,o,i,s,a,c=ot(e[1]),u=[];for(let t=0;t<c.length;t+=1)u[t]=kn(bn(e,c,t));return{c(){n=k("div"),l=k("div");for(let t=0;t<u.length;t+=1)u[t].c();o=C(),i=k("div"),E(l,"class",r=e[0].days),E(l,"role","row"),E(i,"class",s=e[0].hiddenScroll),E(n,"class",a=e[0].header)},m(t,e){y(t,n,e),v(n,l);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(l,null);v(n,o),v(n,i)},p(t,e){let[o]=e;if(15&o){let e;for(c=ot(t[1]),e=0;e<c.length;e+=1){const n=bn(t,c,e);u[e]?u[e].p(n,o):(u[e]=kn(n),u[e].c(),u[e].m(l,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=c.length}1&o&&r!==(r=t[0].days)&&E(l,"class",r),1&o&&s!==(s=t[0].hiddenScroll)&&E(i,"class",s),1&o&&a!==(a=t[0].header)&&E(n,"class",a)},i:t,o:t,d(t){t&&w(n),b(u,t)}}}function Cn(t,e,n){let l,r,o,i,{theme:s,_intlDayHeader:a,_intlDayHeaderAL:u,_days:d}=z("state");return c(t,s,(t=>n(0,l=t))),c(t,a,(t=>n(3,i=t))),c(t,u,(t=>n(2,o=t))),c(t,d,(t=>n(1,r=t))),[l,r,o,i,s,a,u,d]}let _n=class extends ft{constructor(t){super(),dt(this,t,Cn,xn,i,{})}};function Tn(t){let e,n,l,i,s,a,c,u,d,f,h;var m=t[8].resizer;function p(t,e){return{props:{event:t[0]}}}return m&&(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[32](t[8],"x"))&&t[32](t[8],"x").apply(this,arguments)}))),{c(){e=k("article"),n=k("div"),s=C(),a&&at(a.$$.fragment),E(n,"class",l=t[2].eventBody),E(e,"class",t[4]),E(e,"style",t[5]),E(e,"role",c=t[7]?"button":void 0),E(e,"tabindex",u=t[7]?0:void 0)},m(l,r){y(l,e,r),v(e,n),v(e,s),a&&ct(a,e,null),t[51](e),d=!0,f||(h=[g(i=vt.call(null,n,t[6])),T(e,"click",(function(){o(t[7]||void 0)&&(t[7]||void 0).apply(this,arguments)})),T(e,"keydown",(function(){o(t[7]&&$t(t[7]))&&(t[7]&&$t(t[7])).apply(this,arguments)})),T(e,"mouseenter",(function(){o(t[31](t[9],t[1]))&&t[31](t[9],t[1]).apply(this,arguments)})),T(e,"mouseleave",(function(){o(t[31](t[10],t[1]))&&t[31](t[10],t[1]).apply(this,arguments)})),T(e,"pointerdown",(function(){o(!ke(t[1])&&t[32](t[8]))&&(!ke(t[1])&&t[32](t[8])).apply(this,arguments)}))],f=!0)},p(r,s){if(t=r,(!d||4&s[0]&&l!==(l=t[2].eventBody))&&E(n,"class",l),i&&o(i.update)&&64&s[0]&&i.update.call(null,t[6]),256&s[0]&&m!==(m=t[8].resizer)){if(a){et();const t=a;rt(t.$$.fragment,1,0,(()=>{ut(t,1)})),nt()}m?(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[32](t[8],"x"))&&t[32](t[8],"x").apply(this,arguments)})),at(a.$$.fragment),lt(a.$$.fragment,1),ct(a,e,null)):a=null}else if(m){const e={};1&s[0]&&(e.event=t[0]),a.$set(e)}(!d||16&s[0])&&E(e,"class",t[4]),(!d||32&s[0])&&E(e,"style",t[5]),(!d||128&s[0]&&c!==(c=t[7]?"button":void 0))&&E(e,"role",c),(!d||128&s[0]&&u!==(u=t[7]?0:void 0))&&E(e,"tabindex",u)},i(t){d||(a&&lt(a.$$.fragment,t),d=!0)},o(t){a&&rt(a.$$.fragment,t),d=!1},d(n){n&&w(e),a&&ut(a),t[51](null),f=!1,r(h)}}}function Dn(t,e,n){let l,r,i,s,a,u,d,f,h,m,p,g,$,v,y,w,b,k,x,C,_,T,D,E,S,M,{chunk:U}=e,{longChunks:L={}}=e,{inPopup:H=!1}=e,{dates:N=[]}=e,{dayMaxEvents:F,displayEventEnd:A,eventAllUpdated:P,eventBackgroundColor:I,eventTextColor:W,eventClick:O,eventColor:G,eventContent:q,eventClassNames:Y,eventDidMount:X,eventMouseEnter:V,eventMouseLeave:J,resources:K,theme:Q,_view:Z,_intlEventTime:tt,_interaction:et,_iClasses:nt,_hiddenEvents:lt,_popupDate:rt,_tasks:ot}=z("state");c(t,F,(t=>n(54,i=t))),c(t,A,(t=>n(44,g=t))),c(t,P,(t=>n(56,d=t))),c(t,I,(t=>n(50,k=t))),c(t,W,(t=>n(47,y=t))),c(t,O,(t=>n(40,l=t))),c(t,G,(t=>n(49,b=t))),c(t,q,(t=>n(43,p=t))),c(t,Y,(t=>n(45,$=t))),c(t,X,(t=>n(57,f=t))),c(t,V,(t=>n(9,x=t))),c(t,J,(t=>n(10,C=t))),c(t,K,(t=>n(48,w=t))),c(t,Q,(t=>n(2,m=t))),c(t,Z,(t=>n(41,u=t))),c(t,tt,(t=>n(42,h=t))),c(t,et,(t=>n(8,a=t))),c(t,nt,(t=>n(46,v=t))),c(t,lt,(t=>n(53,r=t))),c(t,rt,(t=>n(55,s=t)));let it,st,at=1,ct=!1;function ut(t,e){return!ke(e)&&o(t)?e=>t({event:pe(T),el:_,jsEvent:e,view:le(u)}):void 0}return B((()=>{o(f)&&f({event:pe(T),timeText:M,el:_,view:le(u)})})),R((()=>{o(d)&&!ke(it)&&Pt((()=>d({view:le(u)})),"eau",ot)})),t.$$set=t=>{"chunk"in t&&n(33,U=t.chunk),"longChunks"in t&&n(34,L=t.longChunks),"inPopup"in t&&n(35,H=t.inPopup),"dates"in t&&n(36,N=t.dates)},t.$$.update=()=>{if(4&t.$$.dirty[1]&&n(0,T=U.event),39&t.$$.dirty[0]|1033604&t.$$.dirty[1]){n(1,it=T.display);let t=T.backgroundColor||Le(T,w)||k||b,e=T.textColor||He(T,w)||y;if(xe(it))n(5,E=`width:calc(${100*U.days}% + ${U.days-1}px);`);else{let t=at;if(T._margin){let[e,n]=T._margin;U.date>=n[0]&&U.date<=n.at(-1)&&(t=e)}n(5,E=`width:calc(${100*U.days}% + ${7*(U.days-1)}px);margin-top:${t}px;`)}t&&n(5,E+=`background-color:${t};`),e&&n(5,E+=`color:${e};`),ct&&n(5,E+="visibility:hidden;"),n(5,E+=T.styles.join(";")),n(4,D=[xe(it)?m.bgEvent:m.event,...v([],T),...me($,T,u)].join(" "))}4&t.$$.dirty[0]|15364&t.$$.dirty[1]&&n(6,[M,S]=fe(U,g,p,m,h,u),S),2&t.$$.dirty[0]|512&t.$$.dirty[1]&&n(7,st=ut(l,it))},[T,it,m,_,D,E,S,st,a,x,C,F,A,P,I,W,O,G,q,Y,X,V,J,K,Q,Z,tt,et,nt,lt,rt,ut,function(t,e){return t.action?t=>a.action.drag(T,t,e,H?s:null,[Vt(_).top-Vt(Jt(_,1)).top,N]):void 0},U,L,H,N,function(){_&&(n(38,at=ye(U,L,Kt(_))),!0===i?function(){let t=Jt(_,2),e=Kt(t)-Kt(t.firstElementChild)-function(t){let e=0;for(let n=0;n<U.days&&(e=qt(e,Kt(t.lastElementChild)),t=t.nextElementSibling);++n);return e}(t);n(39,ct=U.bottom>e);let l=!1;for(let t of U.dates){let e=r[t.getTime()];if(e){let t=e.size;ct?e.add(U.event):e.delete(U.event),t!==e.size&&(l=!0)}}l&&lt.set(r)}():n(39,ct=!1))},at,ct,l,u,h,p,g,$,v,y,w,b,k,function(t){j[t?"unshift":"push"]((()=>{_=t,n(3,_)}))}]}let En=class extends ft{constructor(t){super(),dt(this,t,Dn,Tn,i,{chunk:33,longChunks:34,inPopup:35,dates:36,reposition:37},null,[-1,-1])}get reposition(){return this.$$.ctx[37]}};function Sn(t,e,n){const l=t.slice();return l[20]=e[n],l}function Mn(t,e){let n,l,r;return l=new En({props:{chunk:e[20],inPopup:!0}}),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){e=t;const r={};1&n&&(r.chunk=e[20]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),ut(l,t)}}}function Un(t){let e,n,l,i,s,a,c,u,d,f,h,m,p,$,b,_,S,M=[],U=new Map,L=ot(t[0]);const H=t=>t[20].event;for(let e=0;e<L.length;e+=1){let n=Sn(t,L,e),l=H(n);U.set(l,M[e]=Mn(l,n))}return{c(){e=k("div"),n=k("div"),l=k("time"),a=C(),c=k("a"),u=x(""),h=C(),m=k("div");for(let t=0;t<M.length;t+=1)M[t].c();E(l,"datetime",i=Mt(t[3],10)),E(c,"role","button"),E(c,"tabindex","0"),E(c,"aria-label",d=t[6].close),E(n,"class",f=t[4].dayHead),E(m,"class",p=t[4].events),E(e,"class",$=t[4].popup),E(e,"style",t[2])},m(r,o){y(r,e,o),v(e,n),v(n,l),v(n,a),v(n,c),v(c,u),v(e,h),v(e,m);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(m,null);t[16](e),b=!0,_||(S=[g(s=vt.call(null,l,t[5].format(t[3]))),T(c,"click",D(t[13])),T(c,"keydown",$t(t[13])),g(yt.call(null,e,"pointerdown")),T(e,"pointerdown",D(t[15])),T(e,"pointerdownoutside",t[14])],_=!0)},p(t,r){let[a]=r;(!b||8&a&&i!==(i=Mt(t[3],10)))&&E(l,"datetime",i),s&&o(s.update)&&40&a&&s.update.call(null,t[5].format(t[3])),(!b||64&a&&d!==(d=t[6].close))&&E(c,"aria-label",d),(!b||16&a&&f!==(f=t[4].dayHead))&&E(n,"class",f),1&a&&(L=ot(t[0]),et(),M=st(M,a,H,0,t,L,U,m,it,Mn,null,Sn),nt()),(!b||16&a&&p!==(p=t[4].events))&&E(m,"class",p),(!b||16&a&&$!==($=t[4].popup))&&E(e,"class",$),(!b||4&a)&&E(e,"style",t[2])},i(t){if(!b){for(let t=0;t<L.length;t+=1)lt(M[t]);b=!0}},o(t){for(let t=0;t<M.length;t+=1)rt(M[t]);b=!1},d(n){n&&w(e);for(let t=0;t<M.length;t+=1)M[t].d();t[16](null),_=!1,r(S)}}}function Ln(t,e,n){let l,r,o,i,s,a,u,{buttonText:d,theme:f,_interaction:h,_intlDayPopover:m,_popupDate:g,_popupChunks:$}=z("state");c(t,d,(t=>n(6,a=t))),c(t,f,(t=>n(4,i=t))),c(t,h,(t=>n(17,l=t))),c(t,m,(t=>n(5,s=t))),c(t,g,(t=>n(3,r=t))),c(t,$,(t=>n(0,o=t)));let v="";function y(){u&&(n(2,v=""),Y().then((()=>{o.length?function(){let t,e,l=Jt(u,1),r=Jt(l,3),o=Vt(u),i=Vt(l),s=Vt(r);if(n(2,v=""),o.width>=s.width){t=s.left-i.left;let e=i.right-s.right;n(2,v+=`right:${e}px;`)}else t=(i.width-o.width)/2,i.left+t<s.left?t=s.left-i.left:i.left+t+o.width>s.right&&(t=s.right-i.left-o.width);if(n(2,v+=`left:${t}px;`),o.height>=s.height){e=s.top-i.top;let t=i.bottom-s.bottom;n(2,v+=`bottom:${t}px;`)}else e=(i.height-o.height)/2,i.top+e<s.top?e=s.top-i.top:i.top+e+o.height>s.bottom&&(e=s.bottom-i.top-o.height);n(2,v+=`top:${e}px;`)}():w()})))}function w(t){p(g,r=null,r)}return t.$$.update=()=>{1&t.$$.dirty&&o&&y()},[o,u,v,r,i,s,a,d,f,h,m,g,$,w,function(t){w(),l.action?.noClick()},function(e){A.call(this,t,e)},function(t){j[t?"unshift":"push"]((()=>{u=t,n(1,u)}))}]}class Hn extends ft{constructor(t){super(),dt(this,t,Ln,Un,i,{})}}function Nn(t,e,n){const l=t.slice();return l[44]=e[n],l[45]=e,l[46]=n,l}function Bn(t,e,n){const l=t.slice();return l[44]=e[n],l}function Rn(t,e){let n,l,r;return l=new En({props:{chunk:e[44]}}),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){e=t;const r={};256&n[0]&&(r.chunk=e[44]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),ut(l,t)}}}function Fn(t){let e,n,l,r;return n=new En({props:{chunk:t[2][2]}}),{c(){e=k("div"),at(n.$$.fragment),E(e,"class",l=t[14].events)},m(t,l){y(t,e,l),ct(n,e,null),r=!0},p(t,o){const i={};4&o[0]&&(i.chunk=t[2][2]),n.$set(i),(!r||16384&o[0]&&l!==(l=t[14].events))&&E(e,"class",l)},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&w(e),ut(n)}}}function zn(t){let e,n,l,r;return n=new En({props:{chunk:t[2][0]}}),{c(){e=k("div"),at(n.$$.fragment),E(e,"class",l=t[14].events+" "+t[14].preview)},m(t,l){y(t,e,l),ct(n,e,null),r=!0},p(t,o){const i={};4&o[0]&&(i.chunk=t[2][0]),n.$set(i),(!r||16384&o[0]&&l!==(l=t[14].events+" "+t[14].preview))&&E(e,"class",l)},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&w(e),ut(n)}}}function An(t,e){let n,l,r,o=e[46];const i=()=>e[38](l,o),s=()=>e[38](null,o);let a={chunk:e[44],longChunks:e[1],dates:e[3]};return l=new En({props:a}),i(),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){o!==(e=t)[46]&&(s(),o=e[46],i());const r={};32&n[0]&&(r.chunk=e[44]),2&n[0]&&(r.longChunks=e[1]),8&n[0]&&(r.dates=e[3]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),s(),ut(l,t)}}}function Pn(t){let e,n;return e=new Hn({}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function jn(t){let e,n,l,i;return{c(){e=k("a"),E(e,"role","button"),E(e,"tabindex","0"),E(e,"aria-haspopup","true")},m(r,o){y(r,e,o),l||(i=[T(e,"click",D(t[27])),T(e,"keydown",$t(t[27])),T(e,"pointerdown",D(t[37])),g(n=vt.call(null,e,t[12]))],l=!0)},p(t,e){n&&o(n.update)&&4096&e[0]&&n.update.call(null,t[12])},d(t){t&&w(e),l=!1,r(i)}}}function In(t){let e,n,l,i,s,a,c,u,d,f,h,m,p,$,b,x,_,D,S,M,U,L=[],H=new Map,N=t[2][2]&&Ut(t[2][2].date,t[0]),B=t[2][0]&&Ut(t[2][0].date,t[0]),R=[],F=new Map,z=ot(t[8]);const A=t=>t[44].event;for(let e=0;e<z.length;e+=1){let n=Bn(t,z,e),l=A(n);H.set(l,L[e]=Rn(l,n))}let P=N&&Fn(t),j=B&&zn(t),I=ot(t[5]);const W=t=>t[44].event;for(let e=0;e<I.length;e+=1){let n=Nn(t,I,e),l=W(n);F.set(l,R[e]=An(l,n))}let O=t[7]&&Pn(),G=t[6].size&&jn(t);return{c(){e=k("div"),n=k("time"),a=C(),c=k("div");for(let t=0;t<L.length;t+=1)L[t].c();d=C(),P&&P.c(),f=C(),j&&j.c(),h=C(),m=k("div");for(let t=0;t<R.length;t+=1)R[t].c();$=C(),O&&O.c(),b=C(),x=k("div"),G&&G.c(),E(n,"class",l=t[14].dayHead),E(n,"datetime",i=Mt(t[0],10)),E(c,"class",u=t[14].bgEvents),E(m,"class",p=t[14].events),E(x,"class",_=t[14].dayFoot),E(e,"class",D=t[14].day+" "+t[14].weekdays?.[t[0].getUTCDay()]+(t[9]?" "+t[14].today:"")+(t[10]?" "+t[14].otherMonth:"")+(t[11]?" "+t[14].highlight:"")),E(e,"role","cell")},m(l,r){y(l,e,r),v(e,n),v(e,a),v(e,c);for(let t=0;t<L.length;t+=1)L[t]&&L[t].m(c,null);v(e,d),P&&P.m(e,null),v(e,f),j&&j.m(e,null),v(e,h),v(e,m);for(let t=0;t<R.length;t+=1)R[t]&&R[t].m(m,null);v(e,$),O&&O.m(e,null),v(e,b),v(e,x),G&&G.m(x,null),t[39](e),S=!0,M||(U=[g(s=vt.call(null,n,t[16].format(t[0]))),T(e,"pointerleave",(function(){o(t[15].pointer?.leave)&&t[15].pointer?.leave.apply(this,arguments)})),T(e,"pointerdown",(function(){o(t[15].action?.select)&&t[15].action?.select.apply(this,arguments)}))],M=!0)},p(r,a){t=r,(!S||16384&a[0]&&l!==(l=t[14].dayHead))&&E(n,"class",l),(!S||1&a[0]&&i!==(i=Mt(t[0],10)))&&E(n,"datetime",i),s&&o(s.update)&&65537&a[0]&&s.update.call(null,t[16].format(t[0])),256&a[0]&&(z=ot(t[8]),et(),L=st(L,a,A,0,t,z,H,c,it,Rn,null,Bn),nt()),(!S||16384&a[0]&&u!==(u=t[14].bgEvents))&&E(c,"class",u),5&a[0]&&(N=t[2][2]&&Ut(t[2][2].date,t[0])),N?P?(P.p(t,a),5&a[0]&&lt(P,1)):(P=Fn(t),P.c(),lt(P,1),P.m(e,f)):P&&(et(),rt(P,1,1,(()=>{P=null})),nt()),5&a[0]&&(B=t[2][0]&&Ut(t[2][0].date,t[0])),B?j?(j.p(t,a),5&a[0]&&lt(j,1)):(j=zn(t),j.c(),lt(j,1),j.m(e,h)):j&&(et(),rt(j,1,1,(()=>{j=null})),nt()),8234&a[0]&&(I=ot(t[5]),et(),R=st(R,a,W,0,t,I,F,m,it,An,null,Nn),nt()),(!S||16384&a[0]&&p!==(p=t[14].events))&&E(m,"class",p),t[7]?O?128&a[0]&&lt(O,1):(O=Pn(),O.c(),lt(O,1),O.m(e,b)):O&&(et(),rt(O,1,1,(()=>{O=null})),nt()),t[6].size?G?G.p(t,a):(G=jn(t),G.c(),G.m(x,null)):G&&(G.d(1),G=null),(!S||16384&a[0]&&_!==(_=t[14].dayFoot))&&E(x,"class",_),(!S||19969&a[0]&&D!==(D=t[14].day+" "+t[14].weekdays?.[t[0].getUTCDay()]+(t[9]?" "+t[14].today:"")+(t[10]?" "+t[14].otherMonth:"")+(t[11]?" "+t[14].highlight:"")))&&E(e,"class",D)},i(t){if(!S){for(let t=0;t<z.length;t+=1)lt(L[t]);lt(P),lt(j);for(let t=0;t<I.length;t+=1)lt(R[t]);lt(O),S=!0}},o(t){for(let t=0;t<L.length;t+=1)rt(L[t]);rt(P),rt(j);for(let t=0;t<R.length;t+=1)rt(R[t]);rt(O),S=!1},d(n){n&&w(e);for(let t=0;t<L.length;t+=1)L[t].d();P&&P.d(),j&&j.d();for(let t=0;t<R.length;t+=1)R[t].d();O&&O.d(),G&&G.d(),t[39](null),M=!1,r(U)}}}function Wn(t,e,n){let l,r,i,s,a,u,d,f,h,m,g,$,v,y,w,b,{date:k}=e,{chunks:x}=e,{bgChunks:C}=e,{longChunks:_}=e,{iChunks:T=[]}=e,{dates:D}=e,{date:E,dayMaxEvents:S,highlightedDates:M,moreLinkContent:U,theme:L,_hiddenEvents:H,_intlDayCell:N,_popupDate:B,_popupChunks:R,_today:F,_interaction:P,_queue:I}=z("state");c(t,E,(t=>n(35,u=t))),c(t,M,(t=>n(34,a=t))),c(t,U,(t=>n(32,i=t))),c(t,L,(t=>n(14,f=t))),c(t,H,(t=>n(33,s=t))),c(t,N,(t=>n(16,m=t))),c(t,B,(t=>n(31,r=t))),c(t,R,(t=>n(40,l=t))),c(t,F,(t=>n(36,d=t))),c(t,P,(t=>n(15,h=t)));let W,O=new Set,G="",q=[];function X(){let t=Tt(xt(k)),e=$.concat(_[k.getTime()]?.chunks||[]);p(R,l=e.map((e=>jt({},e,ue(e.event,k,t),{days:1,dates:[k]}))).sort(((t,e)=>t.top-e.top)),l)}return t.$$set=t=>{"date"in t&&n(0,k=t.date),"chunks"in t&&n(28,x=t.chunks),"bgChunks"in t&&n(29,C=t.bgChunks),"longChunks"in t&&n(1,_=t.longChunks),"iChunks"in t&&n(2,T=t.iChunks),"dates"in t&&n(3,D=t.dates)},t.$$.update=()=>{if(805306465&t.$$.dirty[0]){n(5,$=[]),n(8,v=C.filter((t=>Ut(t.date,k)))),O.clear(),n(6,O),n(29,C),n(0,k),n(28,x),n(5,$);for(let t of x)Ut(t.date,k)&&$.push(t)}if(65&t.$$.dirty[0]&&p(H,s[k.getTime()]=O,s),1&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(9,y=Ut(k,d)),1&t.$$.dirty[0]|24&t.$$.dirty[1]&&(n(10,w=k.getUTCMonth()!==u.getUTCMonth()),n(11,b=a.some((t=>Ut(t,k))))),64&t.$$.dirty[0]|6&t.$$.dirty[1]&&s&&O.size){let t="+"+O.size+" more";n(12,G=i?o(i)?i({num:O.size,text:t}):i:t)}1&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(7,W=r&&Ut(k,r)),162&t.$$.dirty[0]&&W&&_&&$&&Y().then(X),17&t.$$.dirty[0]&&g&&Zt(g,(()=>({allDay:!0,date:k,resource:void 0,dayEl:g})))},[k,_,T,D,g,$,O,W,v,y,w,b,G,q,f,h,m,E,M,U,L,H,N,B,R,F,P,function(){p(B,r=k,r)},x,C,function(){we(q,$)},r,i,s,a,u,d,function(e){A.call(this,t,e)},function(t,e){j[t?"unshift":"push"]((()=>{q[e]=t,n(13,q)}))},function(t){j[t?"unshift":"push"]((()=>{g=t,n(4,g)}))}]}let On=class extends ft{constructor(t){super(),dt(this,t,Wn,In,i,{date:0,chunks:28,bgChunks:29,longChunks:1,iChunks:2,dates:3,reposition:30},null,[-1,-1])}get reposition(){return this.$$.ctx[30]}};function Gn(t,e,n){const l=t.slice();return l[22]=e[n],l[23]=e,l[24]=n,l}function qn(t){let e,n,l=t[24];const r=()=>t[19](e,l),o=()=>t[19](null,l);let i={date:t[22],chunks:t[1],bgChunks:t[2],longChunks:t[3],iChunks:t[4],dates:t[0]};return e=new On({props:i}),r(),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){l!==t[24]&&(o(),l=t[24],r());const i={};1&n&&(i.date=t[22]),2&n&&(i.chunks=t[1]),4&n&&(i.bgChunks=t[2]),8&n&&(i.longChunks=t[3]),16&n&&(i.iChunks=t[4]),1&n&&(i.dates=t[0]),e.$set(i)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){o(),ut(e,t)}}}function Yn(t){let e,n,l,r,o,i=ot(t[0]),s=[];for(let e=0;e<i.length;e+=1)s[e]=qn(Gn(t,i,e));const a=t=>rt(s[t],1,1,(()=>{s[t]=null}));return{c(){e=k("div");for(let t=0;t<s.length;t+=1)s[t].c();E(e,"class",n=t[6].days),E(e,"role","row")},m(n,i){y(n,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);l=!0,r||(o=T(window,"resize",t[12]),r=!0)},p(t,r){let[o]=r;if(63&o){let n;for(i=ot(t[0]),n=0;n<i.length;n+=1){const l=Gn(t,i,n);s[n]?(s[n].p(l,o),lt(s[n],1)):(s[n]=qn(l),s[n].c(),lt(s[n],1),s[n].m(e,null))}for(et(),n=i.length;n<s.length;n+=1)a(n);nt()}(!l||64&o&&n!==(n=t[6].days))&&E(e,"class",n)},i(t){if(!l){for(let t=0;t<i.length;t+=1)lt(s[t]);l=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)rt(s[t]);l=!1},d(t){t&&w(e),b(s,t),r=!1,o()}}}function Xn(t,e,n){let l,r,o,i,s,{dates:a}=e,{_events:u,_iEvents:d,_queue2:f,_hiddenEvents:h,hiddenDays:m,theme:p}=z("state");c(t,u,(t=>n(18,i=t))),c(t,d,(t=>n(17,o=t))),c(t,h,(t=>n(15,l=t))),c(t,m,(t=>n(16,r=t))),c(t,p,(t=>n(6,s=t)));let g,$,v,y,w,b=[],k=[],x={};function C(){zt((()=>we(k,a)),x,f)}return t.$$set=t=>{"dates"in t&&n(0,a=t.dates)},t.$$.update=()=>{if(1&t.$$.dirty&&(n(13,y=a[0]),n(14,w=Tt(xt(a.at(-1))))),352262&t.$$.dirty){n(1,g=[]),n(2,$=[]);for(let t of i)if(be(t,y,w)){let e=ue(t,y,w);xe(t.display)?t.allDay&&$.push(e):g.push(e)}ve($,r),n(3,v=ve(g,r)),C()}221184&t.$$.dirty&&n(4,b=o.map((t=>{let e;return t&&be(t,y,w)?(e=ue(t,y,w),ve([e],r)):e=null,e}))),32768&t.$$.dirty&&l&&Y().then(C)},[a,g,$,v,b,k,s,u,d,h,m,p,C,y,w,l,r,o,i,function(t,e){j[t?"unshift":"push"]((()=>{k[e]=t,n(5,k)}))}]}let Vn=class extends ft{constructor(t){super(),dt(this,t,Xn,Yn,i,{dates:0})}};function Jn(t,e,n){const l=t.slice();return l[15]=e[n],l}function Kn(t){let e,n;return e=new Vn({props:{dates:t[15]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n&&(l.dates=t[15]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Qn(t){let e,n,l,r,o,i=ot(t[0]),s=[];for(let e=0;e<i.length;e+=1)s[e]=Kn(Jn(t,i,e));const a=t=>rt(s[t],1,1,(()=>{s[t]=null}));return{c(){e=k("div"),n=k("div");for(let t=0;t<s.length;t+=1)s[t].c();E(n,"class",l=t[2].content),E(e,"class",r=t[2].body+(!0===t[1]?" "+t[2].uniform:""))},m(l,r){y(l,e,r),v(e,n);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(n,null);t[13](e),o=!0},p(t,c){let[u]=c;if(1&u){let e;for(i=ot(t[0]),e=0;e<i.length;e+=1){const l=Jn(t,i,e);s[e]?(s[e].p(l,u),lt(s[e],1)):(s[e]=Kn(l),s[e].c(),lt(s[e],1),s[e].m(n,null))}for(et(),e=i.length;e<s.length;e+=1)a(e);nt()}(!o||4&u&&l!==(l=t[2].content))&&E(n,"class",l),(!o||6&u&&r!==(r=t[2].body+(!0===t[1]?" "+t[2].uniform:"")))&&E(e,"class",r)},i(t){if(!o){for(let t=0;t<i.length;t+=1)lt(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)rt(s[t]);o=!1},d(n){n&&w(e),b(s,n),t[13](null)}}}function Zn(t,e,n){let l,r,o,i,s,a,u,d,{_bodyEl:f,_viewDates:h,_hiddenEvents:m,dayMaxEvents:g,hiddenDays:$,theme:v}=z("state");return c(t,f,(t=>n(3,a=t))),c(t,h,(t=>n(11,l=t))),c(t,m,(t=>n(14,o=t))),c(t,g,(t=>n(1,r=t))),c(t,$,(t=>n(12,i=t))),c(t,v,(t=>n(2,s=t))),t.$$.update=()=>{if(7171&t.$$.dirty){n(0,u=[]),n(10,d=7-i.length),p(m,o={},o);for(let t=0;t<l.length/d;++t){let e=[];for(let n=0;n<d;++n)e.push(l[t*d+n]);u.push(e)}}},[u,r,s,a,f,h,m,g,$,v,d,l,i,function(t){j[t?"unshift":"push"]((()=>{a=t,f.set(a)}))}]}let tl=class extends ft{constructor(t){super(),dt(this,t,Zn,Qn,i,{})}};function el(e){let n,l,r,o;return n=new _n({}),r=new tl({}),{c(){at(n.$$.fragment),l=C(),at(r.$$.fragment)},m(t,e){ct(n,t,e),y(t,l,e),ct(r,t,e),o=!0},p:t,i(t){o||(lt(n.$$.fragment,t),lt(r.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),rt(r.$$.fragment,t),o=!1},d(t){t&&w(l),ut(n,t),ut(r,t)}}}let nl=class extends ft{constructor(t){super(),dt(this,t,null,el,i,{})}};var ll={createOptions(t){t.dayMaxEvents=!1,t.dayCellFormat={day:"numeric"},t.dayPopoverFormat={month:"long",day:"numeric",year:"numeric"},t.moreLinkContent=void 0,t.buttonText.dayGridMonth="month",t.buttonText.close="Close",t.theme.uniform="ec-uniform",t.theme.dayFoot="ec-day-foot",t.theme.popup="ec-popup",t.view="dayGridMonth",t.views.dayGridMonth={buttonText:De,component:nl,dayHeaderFormat:{weekday:"short"},dayHeaderAriaLabelFormat:{weekday:"long"},displayEventEnd:!1,duration:{months:1},theme:Me("ec-day-grid ec-month-view"),titleFormat:{year:"numeric",month:"long"}}},createStores(t){t._days=function(t){return gt([t.date,t.firstDay,t.hiddenDays],(t=>{let[e,n,l]=t,r=[],o=xt(e),i=7;for(;o.getUTCDay()!==n&&i;)Dt(o),--i;for(let t=0;t<7;++t)l.includes(o.getUTCDay())||r.push(xt(o)),Tt(o);return r}))}(t),t._intlDayCell=Be(t.locale,t.dayCellFormat),t._intlDayPopover=Be(t.locale,t.dayPopoverFormat),t._hiddenEvents=pt({}),t._popupDate=pt(null),t._popupChunks=pt([])}};function rl(e){let n,l,i,s,a,c,u,d,f,h,m;return{c(){n=k("article"),l=k("div"),s=C(),a=k("div"),E(l,"class",i=e[0].eventTag),E(l,"style",e[3]),E(a,"class",c=e[0].eventBody),E(n,"class",e[2]),E(n,"role",d=e[5]?"button":void 0),E(n,"tabindex",f=e[5]?0:void 0)},m(t,r){y(t,n,r),v(n,l),v(n,s),v(n,a),e[38](n),h||(m=[g(u=vt.call(null,a,e[4])),T(n,"click",(function(){o(e[5])&&e[5].apply(this,arguments)})),T(n,"keydown",(function(){o(e[5]&&$t(e[5]))&&(e[5]&&$t(e[5])).apply(this,arguments)})),T(n,"mouseenter",(function(){o(e[25](e[6]))&&e[25](e[6]).apply(this,arguments)})),T(n,"mouseleave",(function(){o(e[25](e[7]))&&e[25](e[7]).apply(this,arguments)})),T(n,"pointerdown",(function(){o(e[8].action?.noAction)&&e[8].action?.noAction.apply(this,arguments)}))],h=!0)},p(t,r){e=t,1&r[0]&&i!==(i=e[0].eventTag)&&E(l,"class",i),8&r[0]&&E(l,"style",e[3]),1&r[0]&&c!==(c=e[0].eventBody)&&E(a,"class",c),u&&o(u.update)&&16&r[0]&&u.update.call(null,e[4]),4&r[0]&&E(n,"class",e[2]),32&r[0]&&d!==(d=e[5]?"button":void 0)&&E(n,"role",d),32&r[0]&&f!==(f=e[5]?0:void 0)&&E(n,"tabindex",f)},i:t,o:t,d(t){t&&w(n),e[38](null),h=!1,r(m)}}}function ol(t,e,n){let l,r,i,s,a,u,d,f,h,m,p,g,$,v,y,w,b,k,x,C,_,T,D,{chunk:E}=e,{displayEventEnd:S,eventAllUpdated:M,eventBackgroundColor:U,eventTextColor:L,eventColor:H,eventContent:N,eventClassNames:F,eventClick:A,eventDidMount:P,eventMouseEnter:I,eventMouseLeave:W,resources:O,theme:G,_view:q,_intlEventTime:Y,_interaction:X,_tasks:V}=z("state");function J(t){return o(t)?e=>t({event:pe(k),el:b,jsEvent:e,view:le(r)}):void 0}return c(t,S,(t=>n(32,f=t))),c(t,M,(t=>n(40,i=t))),c(t,U,(t=>n(37,$=t))),c(t,L,(t=>n(34,m=t))),c(t,H,(t=>n(36,g=t))),c(t,N,(t=>n(31,d=t))),c(t,F,(t=>n(33,h=t))),c(t,A,(t=>n(28,l=t))),c(t,P,(t=>n(41,s=t))),c(t,I,(t=>n(6,v=t))),c(t,W,(t=>n(7,y=t))),c(t,O,(t=>n(35,p=t))),c(t,G,(t=>n(0,u=t))),c(t,q,(t=>n(29,r=t))),c(t,Y,(t=>n(30,a=t))),c(t,X,(t=>n(8,w=t))),B((()=>{o(s)&&s({event:pe(k),timeText:T,el:b,view:le(r)})})),R((()=>{o(i)&&Pt((()=>i({view:le(r)})),"eau",V)})),t.$$set=t=>{"chunk"in t&&n(26,E=t.chunk)},t.$$.update=()=>{if(67108864&t.$$.dirty[0]&&n(27,k=E.event),671088649&t.$$.dirty[0]|124&t.$$.dirty[1]){n(3,C="");let t=k.backgroundColor||Le(k,p)||$||g;t&&n(3,C=`background-color:${t};`);let e=k.textColor||He(k,p)||m;e&&n(3,C+=`color:${e};`),n(3,C+=k.styles.join(";")),n(2,x=[u.event,...me(h,k,r)].join(" "))}1677721601&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(4,[T,_]=fe(E,f,d,u,a,r),_),268435456&t.$$.dirty[0]&&n(5,D=J(l))},[u,b,x,C,_,D,v,y,w,S,M,U,L,H,N,F,A,P,I,W,O,G,q,Y,X,J,E,k,l,r,a,d,f,h,m,p,g,$,function(t){j[t?"unshift":"push"]((()=>{b=t,n(1,b)}))}]}let il=class extends ft{constructor(t){super(),dt(this,t,ol,rl,i,{chunk:26},null,[-1,-1])}};function sl(t,e,n){const l=t.slice();return l[21]=e[n],l}function al(t){let e,n,l,i,s,a,c,u,d,f,h,m,p,$,b=[],x=new Map,_=ot(t[2]);const D=t=>t[21].event;for(let e=0;e<_.length;e+=1){let n=sl(t,_,e),l=D(n);x.set(l,b[e]=cl(l,n))}return{c(){e=k("div"),n=k("h4"),l=k("time"),s=C(),a=k("time"),f=C();for(let t=0;t<b.length;t+=1)b[t].c();E(l,"datetime",t[5]),E(a,"class",c=t[6].daySide),E(a,"datetime",t[5]),E(n,"class",d=t[6].dayHead),E(e,"class",h=t[6].day+" "+t[6].weekdays?.[t[0].getUTCDay()]+(t[3]?" "+t[6].today:"")+(t[4]?" "+t[6].highlight:"")),E(e,"role","listitem")},m(r,c){y(r,e,c),v(e,n),v(n,l),v(n,s),v(n,a),v(e,f);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(e,null);t[20](e),m=!0,p||($=[g(i=vt.call(null,l,t[8].format(t[0]))),g(u=vt.call(null,a,t[9].format(t[0]))),T(e,"pointerdown",(function(){o(t[7].action?.select)&&t[7].action?.select.apply(this,arguments)}))],p=!0)},p(r,s){t=r,(!m||32&s)&&E(l,"datetime",t[5]),i&&o(i.update)&&257&s&&i.update.call(null,t[8].format(t[0])),(!m||64&s&&c!==(c=t[6].daySide))&&E(a,"class",c),(!m||32&s)&&E(a,"datetime",t[5]),u&&o(u.update)&&513&s&&u.update.call(null,t[9].format(t[0])),(!m||64&s&&d!==(d=t[6].dayHead))&&E(n,"class",d),4&s&&(_=ot(t[2]),et(),b=st(b,s,D,0,t,_,x,e,it,cl,null,sl),nt()),(!m||89&s&&h!==(h=t[6].day+" "+t[6].weekdays?.[t[0].getUTCDay()]+(t[3]?" "+t[6].today:"")+(t[4]?" "+t[6].highlight:"")))&&E(e,"class",h)},i(t){if(!m){for(let t=0;t<_.length;t+=1)lt(b[t]);m=!0}},o(t){for(let t=0;t<b.length;t+=1)rt(b[t]);m=!1},d(n){n&&w(e);for(let t=0;t<b.length;t+=1)b[t].d();t[20](null),p=!1,r($)}}}function cl(t,e){let n,l,r;return l=new il({props:{chunk:e[21]}}),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){e=t;const r={};4&n&&(r.chunk=e[21]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),ut(l,t)}}}function ul(t){let e,n,l=t[2].length&&al(t);return{c(){l&&l.c(),e=_()},m(t,r){l&&l.m(t,r),y(t,e,r),n=!0},p(t,n){let[r]=n;t[2].length?l?(l.p(t,r),4&r&&lt(l,1)):(l=al(t),l.c(),lt(l,1),l.m(e.parentNode,e)):l&&(et(),rt(l,1,1,(()=>{l=null})),nt())},i(t){n||(lt(l),n=!0)},o(t){rt(l),n=!1},d(t){t&&w(e),l&&l.d(t)}}}function dl(t,e,n){let l,r,o,i,s,a,u,d,f,h,m,p,{date:g}=e,{_events:$,_interaction:v,_intlListDay:y,_intlListDaySide:w,_today:b,highlightedDates:k,theme:x}=z("state");return c(t,$,(t=>n(19,o=t))),c(t,v,(t=>n(7,s=t))),c(t,y,(t=>n(8,a=t))),c(t,w,(t=>n(9,u=t))),c(t,b,(t=>n(18,r=t))),c(t,k,(t=>n(17,l=t))),c(t,x,(t=>n(6,i=t))),t.$$set=t=>{"date"in t&&n(0,g=t.date)},t.$$.update=()=>{if(524293&t.$$.dirty){n(2,f=[]);let t=g,e=Tt(xt(g));for(let n of o)if(!xe(n.display)&&be(n,t,e)){let l=ue(n,t,e);f.push(l)}de(f)}262145&t.$$.dirty&&n(3,h=Ut(g,r)),131073&t.$$.dirty&&n(4,m=l.some((t=>Ut(t,g)))),1&t.$$.dirty&&n(5,p=Mt(g,10)),3&t.$$.dirty&&d&&Zt(d,(()=>({allDay:!0,date:g,resource:void 0,dayEl:d})))},[g,d,f,h,m,p,i,s,a,u,$,v,y,w,b,k,x,l,r,o,function(t){j[t?"unshift":"push"]((()=>{d=t,n(1,d)}))}]}let fl=class extends ft{constructor(t){super(),dt(this,t,dl,ul,i,{date:0})}};function hl(t,e,n){const l=t.slice();return l[18]=e[n],l}function ml(t){let e,n,l=ot(t[1]),r=[];for(let e=0;e<l.length;e+=1)r[e]=gl(hl(t,l,e));const o=t=>rt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);y(t,e,l),n=!0},p(t,n){if(2&n){let i;for(l=ot(t[1]),i=0;i<l.length;i+=1){const o=hl(t,l,i);r[i]?(r[i].p(o,n),lt(r[i],1)):(r[i]=gl(o),r[i].c(),lt(r[i],1),r[i].m(e.parentNode,e))}for(et(),i=l.length;i<r.length;i+=1)o(i);nt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)lt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&w(e),b(r,t)}}}function pl(e){let n,l,i,s,a;return{c(){n=k("div"),E(n,"class",l=e[3].noEvents)},m(t,l){y(t,n,l),s||(a=[g(i=vt.call(null,n,e[0])),T(n,"click",e[12])],s=!0)},p(t,e){8&e&&l!==(l=t[3].noEvents)&&E(n,"class",l),i&&o(i.update)&&1&e&&i.update.call(null,t[0])},i:t,o:t,d(t){t&&w(n),s=!1,r(a)}}}function gl(t){let e,n;return e=new fl({props:{date:t[18]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};2&n&&(l.date=t[18]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function $l(t){let e,n,l,r,o,i,s;const a=[pl,ml],c=[];function u(t,e){return t[2]?0:1}return l=u(t),r=c[l]=a[l](t),{c(){e=k("div"),n=k("div"),r.c(),E(n,"class",o=t[3].content),E(e,"class",i=t[3].body)},m(r,o){y(r,e,o),v(e,n),c[l].m(n,null),t[15](e),s=!0},p(t,d){let[f]=d,h=l;l=u(t),l===h?c[l].p(t,f):(et(),rt(c[h],1,1,(()=>{c[h]=null})),nt(),r=c[l],r?r.p(t,f):(r=c[l]=a[l](t),r.c()),lt(r,1),r.m(n,null)),(!s||8&f&&o!==(o=t[3].content))&&E(n,"class",o),(!s||8&f&&i!==(i=t[3].body))&&E(e,"class",i)},i(t){s||(lt(r),s=!0)},o(t){rt(r),s=!1},d(n){n&&w(e),c[l].d(),t[15](null)}}}function vl(t,e,n){let l,r,i,s,a,u,d,f,h,{_bodyEl:m,_events:p,_view:g,_viewDates:$,noEventsClick:v,noEventsContent:y,theme:w}=z("state");return c(t,m,(t=>n(4,d=t))),c(t,p,(t=>n(14,s=t))),c(t,g,(t=>n(16,l=t))),c(t,$,(t=>n(1,a=t))),c(t,v,(t=>n(17,r=t))),c(t,y,(t=>n(13,i=t))),c(t,w,(t=>n(3,u=t))),t.$$.update=()=>{if(16386&t.$$.dirty&&(n(2,f=!0),a.length)){let t=a[0],e=Tt(xt(a.at(-1)));for(let l of s)if(!xe(l.display)&&l.start<e&&l.end>t){n(2,f=!1);break}}8193&t.$$.dirty&&(n(0,h=o(i)?i():i),"string"==typeof h&&n(0,h={html:h}))},[h,a,f,u,d,m,p,g,$,v,y,w,function(t){o(r)&&r({jsEvent:t,view:le(l)})},i,s,function(t){j[t?"unshift":"push"]((()=>{d=t,m.set(d)}))}]}let yl=class extends ft{constructor(t){super(),dt(this,t,vl,$l,i,{})}};function wl(e){let n,l;return n=new yl({}),{c(){at(n.$$.fragment)},m(t,e){ct(n,t,e),l=!0},p:t,i(t){l||(lt(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){ut(n,t)}}}let bl=class extends ft{constructor(t){super(),dt(this,t,null,wl,i,{})}};var kl={createOptions(t){t.buttonText.listDay="list",t.buttonText.listWeek="list",t.buttonText.listMonth="list",t.buttonText.listYear="list",t.listDayFormat={weekday:"long"},t.listDaySideFormat={year:"numeric",month:"long",day:"numeric"},t.noEventsClick=void 0,t.noEventsContent="No events",t.theme.daySide="ec-day-side",t.theme.eventTag="ec-event-tag",t.theme.noEvents="ec-no-events",t.view="listWeek",t.views.listDay={buttonText:_e,component:bl,duration:{days:1},theme:Me("ec-list ec-day-view")},t.views.listWeek={buttonText:Te,component:bl,duration:{weeks:1},theme:Me("ec-list ec-week-view")},t.views.listMonth={buttonText:De,component:bl,duration:{months:1},theme:Me("ec-list ec-month-view")},t.views.listYear={buttonText:Ee,component:bl,duration:{years:1},theme:Me("ec-list ec-year-view")}},createStores(t){t._intlListDay=Be(t.locale,t.listDayFormat),t._intlListDaySide=Be(t.locale,t.listDaySideFormat)}};const xl=t=>({}),Cl=t=>({});function _l(t,e,n){const l=t.slice();return l[9]=e[n],l}function Tl(t){let e,n,l,r,i,s;return{c(){e=k("time"),E(e,"class",n=t[1].time),E(e,"datetime",l=t[9][0])},m(n,l){y(n,e,l),i||(s=g(r=vt.call(null,e,t[9][2]?t[9][1]:"")),i=!0)},p(i,s){t=i,2&s&&n!==(n=t[1].time)&&E(e,"class",n),4&s&&l!==(l=t[9][0])&&E(e,"datetime",l),r&&o(r.update)&&4&s&&r.update.call(null,t[9][2]?t[9][1]:"")},d(t){t&&w(e),i=!1,s()}}}function Dl(t){let e,n,l,r,i,s,a,c,d,p,$,x,_,T,D,S=ot(t[2]),M=[];for(let e=0;e<S.length;e+=1)M[e]=Tl(_l(t,S,e));const U=t[8].lines,L=u(U,t,t[7],Cl),H=t[8].default,N=u(H,t,t[7],null);return{c(){e=k("div"),n=k("div"),i=C();for(let t=0;t<M.length;t+=1)M[t].c();a=C(),c=k("div"),d=k("div"),L&&L.c(),$=C(),N&&N.c(),E(n,"class",l=t[1].sidebarTitle),E(e,"class",s=t[1].sidebar),E(d,"class",p=t[1].lines),E(c,"class",x=t[1].days),E(c,"role","row")},m(l,o){y(l,e,o),v(e,n),v(e,i);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(e,null);y(l,a,o),y(l,c,o),v(c,d),L&&L.m(d,null),v(c,$),N&&N.m(c,null),_=!0,T||(D=g(r=vt.call(null,n,t[0])),T=!0)},p(t,i){let[a]=i;if((!_||2&a&&l!==(l=t[1].sidebarTitle))&&E(n,"class",l),r&&o(r.update)&&1&a&&r.update.call(null,t[0]),6&a){let n;for(S=ot(t[2]),n=0;n<S.length;n+=1){const l=_l(t,S,n);M[n]?M[n].p(l,a):(M[n]=Tl(l),M[n].c(),M[n].m(e,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=S.length}(!_||2&a&&s!==(s=t[1].sidebar))&&E(e,"class",s),L&&L.p&&(!_||128&a)&&h(L,U,t,t[7],_?f(U,t[7],a,xl):m(t[7]),Cl),(!_||2&a&&p!==(p=t[1].lines))&&E(d,"class",p),N&&N.p&&(!_||128&a)&&h(N,H,t,t[7],_?f(H,t[7],a,null):m(t[7]),null),(!_||2&a&&x!==(x=t[1].days))&&E(c,"class",x)},i(t){_||(lt(L,t),lt(N,t),_=!0)},o(t){rt(L,t),rt(N,t),_=!1},d(t){t&&(w(e),w(a),w(c)),b(M,t),L&&L.d(t),N&&N.d(t),T=!1,D()}}}function El(t,e,n){let l,r,i,s,{$$slots:a={},$$scope:u}=e,{allDayContent:d,theme:f,_times:h}=z("state");return c(t,d,(t=>n(6,l=t))),c(t,f,(t=>n(1,r=t))),c(t,h,(t=>n(2,i=t))),t.$$set=t=>{"$$scope"in t&&n(7,u=t.$$scope)},t.$$.update=()=>{64&t.$$.dirty&&n(0,s=function(t){let e,n="all-day";return t?(e=o(t)?t({text:n}):t,"string"==typeof e&&(e={html:e})):e={html:n},e}(l))},[s,r,i,d,f,h,l,u,a]}class Sl extends ft{constructor(t){super(),dt(this,t,El,Dl,i,{})}}function Ml(t,e,n){const l=t.slice();return l[23]=e[n],l}function Ul(t){let e;const n=t[16].default,l=u(n,t,t[18],null);return{c(){l&&l.c()},m(t,n){l&&l.m(t,n),e=!0},p(t,r){l&&l.p&&(!e||262144&r)&&h(l,n,t,t[18],e?f(n,t[18],r,null):m(t[18]),null)},i(t){e||(lt(l,t),e=!0)},o(t){rt(l,t),e=!1},d(t){l&&l.d(t)}}}function Ll(t){let e,n;return{c(){e=k("div"),E(e,"class",n=t[3].line)},m(t,n){y(t,e,n)},p(t,l){8&l&&n!==(n=t[3].line)&&E(e,"class",n)},d(t){t&&w(e)}}}function Hl(t){let e,n=ot(t[2]),l=[];for(let e=0;e<n.length;e+=1)l[e]=Ll(Ml(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=_()},m(t,n){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,n);y(t,e,n)},p(t,r){if(12&r){let o;for(n=ot(t[2]),o=0;o<n.length;o+=1){const i=Ml(t,n,o);l[o]?l[o].p(i,r):(l[o]=Ll(i),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){t&&w(e),b(l,t)}}}function Nl(t){let e,n,l,r,o,i;return l=new Sl({props:{$$slots:{lines:[Hl],default:[Ul]},$$scope:{ctx:t}}}),{c(){e=k("div"),n=k("div"),at(l.$$.fragment),E(n,"class",r=t[3].content),E(e,"class",o=t[3].body+(t[1]?" "+t[3].compact:""))},m(r,o){y(r,e,o),v(e,n),ct(l,n,null),t[17](e),i=!0},p(t,s){let[a]=s;const c={};262156&a&&(c.$$scope={dirty:a,ctx:t}),l.$set(c),(!i||8&a&&r!==(r=t[3].content))&&E(n,"class",r),(!i||10&a&&o!==(o=t[3].body+(t[1]?" "+t[3].compact:"")))&&E(e,"class",o)},i(t){i||(lt(l.$$.fragment,t),i=!0)},o(t){rt(l.$$.fragment,t),i=!1},d(n){n&&w(e),ut(l),t[17](null)}}}function Bl(t,e,n){let l,r,o,i,s,a,u,d,f,h,{$$slots:m={},$$scope:g}=e,{_bodyEl:$,_viewDates:v,_slotTimeLimits:y,_times:w,scrollTime:b,slotDuration:k,slotHeight:x,theme:C}=z("state");c(t,$,(t=>n(21,u=t))),c(t,v,(t=>n(14,s=t))),c(t,y,(t=>n(20,o=t))),c(t,w,(t=>n(15,a=t))),c(t,b,(t=>n(13,i=t))),c(t,k,(t=>n(12,r=t))),c(t,x,(t=>n(19,l=t))),c(t,C,(t=>n(3,d=t)));let _=[];return t.$$set=t=>{"$$scope"in t&&n(18,g=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&p($,u=f,u),36864&t.$$.dirty&&(n(1,h=r.seconds>=3600),n(2,_.length=a.length,_)),24577&t.$$.dirty&&f&&n(0,f.scrollTop=((i.seconds-o.min.seconds)/r.seconds-.5)*l,f)},[f,h,_,d,$,v,y,w,b,k,x,C,r,i,s,a,m,function(t){j[t?"unshift":"push"]((()=>{f=t,n(0,f)}))},g]}let Rl=class extends ft{constructor(t){super(),dt(this,t,Bl,Nl,i,{})}};function Fl(t){let e,n,l,i,s,a,c,u,d,f,h;var m=t[10].resizer;function p(t,e){return{props:{event:t[0]}}}return m&&(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[33](t[10],"y"))&&t[33](t[10],"y").apply(this,arguments)}))),{c(){e=k("article"),n=k("div"),s=C(),a&&at(a.$$.fragment),E(n,"class",l=t[2].eventBody),E(e,"class",t[4]),E(e,"style",t[5]),E(e,"role",c=t[7]?"button":void 0),E(e,"tabindex",u=t[7]?0:void 0)},m(l,r){y(l,e,r),v(e,n),v(e,s),a&&ct(a,e,null),t[51](e),d=!0,f||(h=[g(i=vt.call(null,n,t[6])),T(e,"click",(function(){o(t[7])&&t[7].apply(this,arguments)})),T(e,"keydown",(function(){o(t[7]&&$t(t[7]))&&(t[7]&&$t(t[7])).apply(this,arguments)})),T(e,"mouseenter",(function(){o(t[32](t[8],t[1]))&&t[32](t[8],t[1]).apply(this,arguments)})),T(e,"mouseleave",(function(){o(t[32](t[9],t[1]))&&t[32](t[9],t[1]).apply(this,arguments)})),T(e,"pointerdown",(function(){o(!xe(t[1])&&!ke(t[1])&&t[33](t[10]))&&(!xe(t[1])&&!ke(t[1])&&t[33](t[10])).apply(this,arguments)}))],f=!0)},p(r,s){if(t=r,(!d||4&s[0]&&l!==(l=t[2].eventBody))&&E(n,"class",l),i&&o(i.update)&&64&s[0]&&i.update.call(null,t[6]),1024&s[0]&&m!==(m=t[10].resizer)){if(a){et();const t=a;rt(t.$$.fragment,1,0,(()=>{ut(t,1)})),nt()}m?(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[33](t[10],"y"))&&t[33](t[10],"y").apply(this,arguments)})),at(a.$$.fragment),lt(a.$$.fragment,1),ct(a,e,null)):a=null}else if(m){const e={};1&s[0]&&(e.event=t[0]),a.$set(e)}(!d||16&s[0])&&E(e,"class",t[4]),(!d||32&s[0])&&E(e,"style",t[5]),(!d||128&s[0]&&c!==(c=t[7]?"button":void 0))&&E(e,"role",c),(!d||128&s[0]&&u!==(u=t[7]?0:void 0))&&E(e,"tabindex",u)},i(t){d||(a&&lt(a.$$.fragment,t),d=!0)},o(t){a&&rt(a.$$.fragment,t),d=!1},d(n){n&&w(e),a&&ut(a),t[51](null),f=!1,r(h)}}}function zl(t,e,n){let l,r,i,s,a,u,d,f,h,m,p,g,$,v,y,w,b,k,x,C,_,T,D,E,S,M,U,L,H,{date:N}=e,{chunk:F}=e,{displayEventEnd:A,eventAllUpdated:P,eventBackgroundColor:I,eventTextColor:W,eventColor:O,eventContent:G,eventClick:q,eventDidMount:Y,eventClassNames:X,eventMouseEnter:V,eventMouseLeave:J,slotEventOverlap:K,slotDuration:Q,slotHeight:Z,resources:tt,theme:et,_view:nt,_intlEventTime:lt,_interaction:rt,_iClasses:ot,_slotTimeLimits:it,_tasks:st}=z("state");function at(t,e){return!ke(e)&&o(t)?e=>t({event:pe(D),el:T,jsEvent:e,view:le(r)}):void 0}return c(t,A,(t=>n(40,f=t))),c(t,P,(t=>n(53,i=t))),c(t,I,(t=>n(47,y=t))),c(t,W,(t=>n(44,g=t))),c(t,O,(t=>n(46,v=t))),c(t,G,(t=>n(39,d=t))),c(t,q,(t=>n(36,l=t))),c(t,Y,(t=>n(54,s=t))),c(t,X,(t=>n(41,h=t))),c(t,V,(t=>n(8,x=t))),c(t,J,(t=>n(9,C=t))),c(t,K,(t=>n(43,p=t))),c(t,Q,(t=>n(50,k=t))),c(t,Z,(t=>n(48,w=t))),c(t,tt,(t=>n(45,$=t))),c(t,et,(t=>n(2,u=t))),c(t,nt,(t=>n(37,r=t))),c(t,lt,(t=>n(38,a=t))),c(t,rt,(t=>n(10,_=t))),c(t,ot,(t=>n(42,m=t))),c(t,it,(t=>n(49,b=t))),B((()=>{o(s)&&s({event:pe(D),timeText:L,el:T,view:le(r)})})),R((()=>{o(i)&&!ke(E)&&Pt((()=>i({view:le(r)})),"eau",st)})),t.$$set=t=>{"date"in t&&n(34,N=t.date),"chunk"in t&&n(35,F=t.chunk)},t.$$.update=()=>{if(16&t.$$.dirty[1]&&n(0,D=F.event),39&t.$$.dirty[0]|1047640&t.$$.dirty[1]){n(1,E=D.display);let t=k.seconds,e=b.min.seconds,l=(F.start-N)/1e3,o=(F.end-N)/1e3,i=(l-e)/t*w,s=(o-l)/t*w,a=(b.max.seconds-l)/t*w,c=D.backgroundColor||Le(D,$)||y||v,d=D.textColor||He(D,$)||g;n(5,M=`top:${i}px;min-height:${s}px;height:${s}px;max-height:${a}px;`),c&&n(5,M+=`background-color:${c};`),d&&n(5,M+=`color:${d};`),(!xe(E)&&!ke(E)||Ce(E))&&n(5,M+=`z-index:${F.column+1};left:${100/F.group.columns.length*F.column}%;width:${100/F.group.columns.length*(p?.5*(1+F.group.columns.length-F.column):1)}%;`),n(5,M+=D.styles.join(";")),n(4,S=[xe(E)?u.bgEvent:u.event,...m([],D),...me(h,D,r)].join(" "))}4&t.$$.dirty[0]|976&t.$$.dirty[1]&&n(6,[L,U]=fe(F,f,d,u,a,r),U),2&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(7,H=!xe(E)&&at(l,E))},[D,E,u,T,S,M,U,H,x,C,_,A,P,I,W,O,G,q,Y,X,V,J,K,Q,Z,tt,et,nt,lt,rt,ot,it,at,function(t,e){return t.action?n=>t.action.drag(D,n,e):void 0},N,F,l,r,a,d,f,h,m,p,g,$,v,y,w,b,k,function(t){j[t?"unshift":"push"]((()=>{T=t,n(3,T)}))}]}let Al=class extends ft{constructor(t){super(),dt(this,t,zl,Fl,i,{date:34,chunk:35},null,[-1,-1])}};function Pl(e){let n,l;return{c(){n=k("div"),E(n,"class",l=e[1].nowIndicator),M(n,"top",e[0]+"px")},m(t,e){y(t,n,e)},p(t,e){let[r]=e;2&r&&l!==(l=t[1].nowIndicator)&&E(n,"class",l),1&r&&M(n,"top",t[0]+"px")},i:t,o:t,d(t){t&&w(n)}}}function jl(t,e,n){let l,r,o,i,s,a,u,{slotDuration:d,slotHeight:f,theme:h,_now:m,_today:p,_slotTimeLimits:g}=z("state");c(t,d,(t=>n(11,o=t))),c(t,f,(t=>n(9,l=t))),c(t,h,(t=>n(1,a=t))),c(t,m,(t=>n(13,s=t))),c(t,p,(t=>n(12,i=t))),c(t,g,(t=>n(10,r=t)));let $=0;return t.$$.update=()=>{if(12288&t.$$.dirty&&n(8,u=(s-i)/1e3/60),3840&t.$$.dirty){let t=o.seconds/60,e=r.min.seconds/60;n(0,$=(u-e)/t*l)}},[$,a,d,f,h,m,p,g,u,l,r,o,i,s]}class Il extends ft{constructor(t){super(),dt(this,t,jl,Pl,i,{})}}function Wl(t,e,n){const l=t.slice();return l[32]=e[n],l}function Ol(t,e,n){const l=t.slice();return l[32]=e[n],l}function Gl(t,e){let n,l,r;return l=new Al({props:{date:e[0],chunk:e[32]}}),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){e=t;const r={};1&n[0]&&(r.date=e[0]),8&n[0]&&(r.chunk=e[32]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),ut(l,t)}}}function ql(t){let e,n;return e=new Al({props:{date:t[0],chunk:t[4][1]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n[0]&&(l.date=t[0]),16&n[0]&&(l.chunk=t[4][1]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Yl(t,e){let n,l,r;return l=new Al({props:{date:e[0],chunk:e[32]}}),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){e=t;const r={};1&n[0]&&(r.date=e[0]),4&n[0]&&(r.chunk=e[32]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),ut(l,t)}}}function Xl(t){let e,n;return e=new Al({props:{date:t[0],chunk:t[4][0]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n[0]&&(l.date=t[0]),16&n[0]&&(l.chunk=t[4][0]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Vl(t){let e,n;return e=new Il({}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Jl(t){let e,n,l,i,s,a,c,u,d,f,h,m,p,g,$,b=[],x=new Map,_=[],D=new Map,S=ot(t[3]);const M=t=>t[32].event;for(let e=0;e<S.length;e+=1){let n=Ol(t,S,e),l=M(n);x.set(l,b[e]=Gl(l,n))}let U=t[4][1]&&ql(t),L=ot(t[2]);const H=t=>t[32].event;for(let e=0;e<L.length;e+=1){let n=Wl(t,L,e),l=H(n);D.set(l,_[e]=Yl(l,n))}let N=t[4][0]&&!t[4][0].event.allDay&&Xl(t),B=t[9]&&t[5]&&Vl();return{c(){e=k("div"),n=k("div");for(let t=0;t<b.length;t+=1)b[t].c();i=C(),s=k("div"),U&&U.c(),a=C();for(let t=0;t<_.length;t+=1)_[t].c();c=C(),N&&N.c(),d=C(),f=k("div"),B&&B.c(),E(n,"class",l=t[7].bgEvents),E(s,"class",u=t[7].events),E(f,"class",h=t[7].extra),E(e,"class",m=t[7].day+" "+t[7].weekdays?.[t[0].getUTCDay()]+(t[5]?" "+t[7].today:"")+(t[6]?" "+t[7].highlight:"")),E(e,"role","cell")},m(l,r){y(l,e,r),v(e,n);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(n,null);v(e,i),v(e,s),U&&U.m(s,null),v(s,a);for(let t=0;t<_.length;t+=1)_[t]&&_[t].m(s,null);v(s,c),N&&N.m(s,null),v(e,d),v(e,f),B&&B.m(f,null),t[28](e),p=!0,g||($=[T(e,"pointerleave",(function(){o(t[8].pointer?.leave)&&t[8].pointer?.leave.apply(this,arguments)})),T(e,"pointerdown",(function(){o(t[8].action?.select)&&t[8].action?.select.apply(this,arguments)}))],g=!0)},p(r,o){t=r,9&o[0]&&(S=ot(t[3]),et(),b=st(b,o,M,0,t,S,x,n,it,Gl,null,Ol),nt()),(!p||128&o[0]&&l!==(l=t[7].bgEvents))&&E(n,"class",l),t[4][1]?U?(U.p(t,o),16&o[0]&&lt(U,1)):(U=ql(t),U.c(),lt(U,1),U.m(s,a)):U&&(et(),rt(U,1,1,(()=>{U=null})),nt()),5&o[0]&&(L=ot(t[2]),et(),_=st(_,o,H,0,t,L,D,s,it,Yl,c,Wl),nt()),t[4][0]&&!t[4][0].event.allDay?N?(N.p(t,o),16&o[0]&&lt(N,1)):(N=Xl(t),N.c(),lt(N,1),N.m(s,null)):N&&(et(),rt(N,1,1,(()=>{N=null})),nt()),(!p||128&o[0]&&u!==(u=t[7].events))&&E(s,"class",u),t[9]&&t[5]?B?544&o[0]&&lt(B,1):(B=Vl(),B.c(),lt(B,1),B.m(f,null)):B&&(et(),rt(B,1,1,(()=>{B=null})),nt()),(!p||128&o[0]&&h!==(h=t[7].extra))&&E(f,"class",h),(!p||225&o[0]&&m!==(m=t[7].day+" "+t[7].weekdays?.[t[0].getUTCDay()]+(t[5]?" "+t[7].today:"")+(t[6]?" "+t[7].highlight:"")))&&E(e,"class",m)},i(t){if(!p){for(let t=0;t<S.length;t+=1)lt(b[t]);lt(U);for(let t=0;t<L.length;t+=1)lt(_[t]);lt(N),lt(B),p=!0}},o(t){for(let t=0;t<b.length;t+=1)rt(b[t]);rt(U);for(let t=0;t<_.length;t+=1)rt(_[t]);rt(N),rt(B),p=!1},d(n){n&&w(e);for(let t=0;t<b.length;t+=1)b[t].d();U&&U.d();for(let t=0;t<_.length;t+=1)_[t].d();N&&N.d(),B&&B.d(),t[28](null),g=!1,r($)}}}function Kl(t,e,n){let l,r,o,i,s,a,u,d,f,h,m,{date:p}=e,{resource:g}=e,{_events:$,_iEvents:v,highlightedDates:y,nowIndicator:w,slotDuration:b,slotHeight:k,theme:x,_interaction:C,_today:_,_slotTimeLimits:T}=z("state");c(t,$,(t=>n(27,u=t))),c(t,v,(t=>n(26,a=t))),c(t,y,(t=>n(24,i=t))),c(t,w,(t=>n(9,h=t))),c(t,b,(t=>n(30,r=t))),c(t,k,(t=>n(29,l=t))),c(t,x,(t=>n(7,d=t))),c(t,C,(t=>n(8,f=t))),c(t,_,(t=>n(25,s=t))),c(t,T,(t=>n(23,o=t)));let D,E,S,M,U,L,H=[];function N(t,e){return e-=Vt(m).top,{allDay:!1,date:Ct(Ct(xt(p),o.min),r,Wt(e/l)),resource:g,dayEl:m}}return t.$$set=t=>{"date"in t&&n(0,p=t.date),"resource"in t&&n(20,g=t.resource)},t.$$.update=()=>{if(8388609&t.$$.dirty[0]&&(n(21,U=Ct(xt(p),o.min)),n(22,L=Ct(xt(p),o.max))),141557772&t.$$.dirty[0]){n(2,D=[]),n(3,E=[]);for(let t of u)if((!t.allDay||xe(t.display))&&be(t,U,L,g)){let e=ue(t,U,L);if("background"===t.display)E.push(e);else D.push(e)}!function(t){if(!t.length)return;de(t);let e={columns:[],end:t[0].end};for(let n of t){let t=0;if(n.start<e.end){for(;t<e.columns.length&&!(e.columns[t].at(-1).end<=n.start);++t);n.end>e.end&&(e.end=n.end)}else e={columns:[],end:n.end};e.columns.length<t+1&&e.columns.push([]),e.columns[t].push(n),n.group=e,n.column=t}}(D)}74448896&t.$$.dirty[0]&&n(4,H=a.map((t=>t&&be(t,U,L,g)?ue(t,U,L):null))),33554433&t.$$.dirty[0]&&n(5,S=Ut(p,s)),16777217&t.$$.dirty[0]&&n(6,M=i.some((t=>Ut(t,p)))),2&t.$$.dirty[0]&&m&&Zt(m,N)},[p,m,D,E,H,S,M,d,f,h,$,v,y,w,b,k,x,C,_,T,g,U,L,o,i,s,a,u,function(t){j[t?"unshift":"push"]((()=>{m=t,n(1,m)}))}]}let Ql=class extends ft{constructor(t){super(),dt(this,t,Kl,Jl,i,{date:0,resource:20},null,[-1,-1])}};function Zl(t){let e,n,l,i,s,a,c,u,d,f,h;var m=t[10].resizer;function p(t,e){return{props:{event:t[0]}}}return m&&(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[29](t[10],"x"))&&t[29](t[10],"x").apply(this,arguments)}))),{c(){e=k("article"),n=k("div"),s=C(),a&&at(a.$$.fragment),E(n,"class",l=t[2].eventBody),E(e,"class",t[4]),E(e,"style",t[5]),E(e,"role",c=t[7]?"button":void 0),E(e,"tabindex",u=t[7]?0:void 0)},m(l,r){y(l,e,r),v(e,n),v(e,s),a&&ct(a,e,null),t[45](e),d=!0,f||(h=[g(i=vt.call(null,n,t[6])),T(e,"click",(function(){o(t[7])&&t[7].apply(this,arguments)})),T(e,"keydown",(function(){o(t[7]&&$t(t[7]))&&(t[7]&&$t(t[7])).apply(this,arguments)})),T(e,"mouseenter",(function(){o(t[28](t[8],t[1]))&&t[28](t[8],t[1]).apply(this,arguments)})),T(e,"mouseleave",(function(){o(t[28](t[9],t[1]))&&t[28](t[9],t[1]).apply(this,arguments)})),T(e,"pointerdown",(function(){o(!ke(t[1])&&t[29](t[10]))&&(!ke(t[1])&&t[29](t[10])).apply(this,arguments)}))],f=!0)},p(r,s){if(t=r,(!d||4&s[0]&&l!==(l=t[2].eventBody))&&E(n,"class",l),i&&o(i.update)&&64&s[0]&&i.update.call(null,t[6]),1024&s[0]&&m!==(m=t[10].resizer)){if(a){et();const t=a;rt(t.$$.fragment,1,0,(()=>{ut(t,1)})),nt()}m?(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[29](t[10],"x"))&&t[29](t[10],"x").apply(this,arguments)})),at(a.$$.fragment),lt(a.$$.fragment,1),ct(a,e,null)):a=null}else if(m){const e={};1&s[0]&&(e.event=t[0]),a.$set(e)}(!d||16&s[0])&&E(e,"class",t[4]),(!d||32&s[0])&&E(e,"style",t[5]),(!d||128&s[0]&&c!==(c=t[7]?"button":void 0))&&E(e,"role",c),(!d||128&s[0]&&u!==(u=t[7]?0:void 0))&&E(e,"tabindex",u)},i(t){d||(a&&lt(a.$$.fragment,t),d=!0)},o(t){a&&rt(a.$$.fragment,t),d=!1},d(n){n&&w(e),a&&ut(a),t[45](null),f=!1,r(h)}}}function tr(t,e,n){let l,r,i,s,a,u,d,f,h,m,p,g,$,v,y,w,b,k,x,C,_,T,D,{chunk:E}=e,{longChunks:S={}}=e,{displayEventEnd:M,eventAllUpdated:U,eventBackgroundColor:L,eventTextColor:H,eventClick:N,eventColor:F,eventContent:A,eventClassNames:P,eventDidMount:I,eventMouseEnter:W,eventMouseLeave:O,resources:G,theme:q,_view:Y,_intlEventTime:X,_interaction:V,_iClasses:J,_tasks:K}=z("state");c(t,M,(t=>n(38,f=t))),c(t,U,(t=>n(47,i=t))),c(t,L,(t=>n(44,v=t))),c(t,H,(t=>n(41,p=t))),c(t,N,(t=>n(34,l=t))),c(t,F,(t=>n(43,$=t))),c(t,A,(t=>n(37,d=t))),c(t,P,(t=>n(39,h=t))),c(t,I,(t=>n(48,s=t))),c(t,W,(t=>n(8,y=t))),c(t,O,(t=>n(9,w=t))),c(t,G,(t=>n(42,g=t))),c(t,q,(t=>n(2,u=t))),c(t,Y,(t=>n(35,r=t))),c(t,X,(t=>n(36,a=t))),c(t,V,(t=>n(10,b=t))),c(t,J,(t=>n(40,m=t)));let Q,Z,tt=1;function et(t,e){return!ke(e)&&o(t)?e=>t({event:pe(x),el:k,jsEvent:e,view:le(r)}):void 0}return B((()=>{o(s)&&s({event:pe(x),timeText:D,el:k,view:le(r)})})),R((()=>{o(i)&&!ke(Q)&&Pt((()=>i({view:le(r)})),"eau",K)})),t.$$set=t=>{"chunk"in t&&n(30,E=t.chunk),"longChunks"in t&&n(31,S=t.longChunks)},t.$$.update=()=>{if(1073741824&t.$$.dirty[0]&&n(0,x=E.event),1073741863&t.$$.dirty[0]|16148&t.$$.dirty[1]){n(1,Q=x.display);let t=x.backgroundColor||Le(x,g)||v||$,e=x.textColor||He(x,g)||p;xe(Q)?n(5,_=`width:calc(${100*E.days}% + ${E.days-1}px);`):n(5,_=`width:calc(${100*E.days}% + ${7*(E.days-1)}px);margin-top:${x._margin??tt}px;`),t&&n(5,_+=`background-color:${t};`),e&&n(5,_+=`color:${e};`),n(5,_+=x.styles.join(";")),n(4,C=[xe(Q)?u.bgEvent:u.event,...m([],x),...me(h,x,r)].join(" "))}1073741828&t.$$.dirty[0]|240&t.$$.dirty[1]&&n(6,[D,T]=fe(E,f,d,u,a,r),T),2&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(7,Z=et(l,Q))},[x,Q,u,k,C,_,T,Z,y,w,b,M,U,L,H,N,F,A,P,I,W,O,G,q,Y,X,V,J,et,function(t,e){return t.action?n=>t.action.drag(x,n,e,null,Vt(k).top-Vt(Jt(k,1)).top):void 0},E,S,function(){k&&n(33,tt=ye(E,S,Kt(k)))},tt,l,r,a,d,f,h,m,p,g,$,v,function(t){j[t?"unshift":"push"]((()=>{k=t,n(3,k)}))}]}let er=class extends ft{constructor(t){super(),dt(this,t,tr,Zl,i,{chunk:30,longChunks:31,reposition:32},null,[-1,-1])}get reposition(){return this.$$.ctx[32]}};function nr(t,e,n){const l=t.slice();return l[23]=e[n],l[24]=e,l[25]=n,l}function lr(t,e,n){const l=t.slice();return l[23]=e[n],l}function rr(t,e){let n,l,r;return l=new er({props:{chunk:e[23]}}),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){e=t;const r={};32&n&&(r.chunk=e[23]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),ut(l,t)}}}function or(t){let e,n,l,r;return n=new er({props:{chunk:t[2][0]}}),{c(){e=k("div"),at(n.$$.fragment),E(e,"class",l=t[9].events+" "+t[9].preview)},m(t,l){y(t,e,l),ct(n,e,null),r=!0},p(t,o){const i={};4&o&&(i.chunk=t[2][0]),n.$set(i),(!r||512&o&&l!==(l=t[9].events+" "+t[9].preview))&&E(e,"class",l)},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&w(e),ut(n)}}}function ir(t,e){let n,l,r,o=e[25];const i=()=>e[21](l,o),s=()=>e[21](null,o);let a={chunk:e[23],longChunks:e[1]};return l=new er({props:a}),i(),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){o!==(e=t)[25]&&(s(),o=e[25],i());const r={};16&n&&(r.chunk=e[23]),2&n&&(r.longChunks=e[1]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),s(),ut(l,t)}}}function sr(t){let e,n,l,i,s,a,c,u,d,f,h,m=[],p=new Map,g=t[2][0]&&Ut(t[2][0].date,t[0]),$=[],b=new Map,x=ot(t[5]);const _=t=>t[23].event;for(let e=0;e<x.length;e+=1){let n=lr(t,x,e),l=_(n);p.set(l,m[e]=rr(l,n))}let D=g&&or(t),S=ot(t[4]);const M=t=>t[23].event;for(let e=0;e<S.length;e+=1){let n=nr(t,S,e),l=M(n);b.set(l,$[e]=ir(l,n))}return{c(){e=k("div"),n=k("div");for(let t=0;t<m.length;t+=1)m[t].c();i=C(),D&&D.c(),s=C(),a=k("div");for(let t=0;t<$.length;t+=1)$[t].c();E(n,"class",l=t[9].bgEvents),E(a,"class",c=t[9].events),E(e,"class",u=t[9].day+" "+t[9].weekdays?.[t[0].getUTCDay()]+(t[6]?" "+t[9].today:"")+(t[7]?" "+t[9].highlight:"")),E(e,"role","cell")},m(l,r){y(l,e,r),v(e,n);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(n,null);v(e,i),D&&D.m(e,null),v(e,s),v(e,a);for(let t=0;t<$.length;t+=1)$[t]&&$[t].m(a,null);t[22](e),d=!0,f||(h=[T(e,"pointerleave",(function(){o(t[10].pointer?.leave)&&t[10].pointer?.leave.apply(this,arguments)})),T(e,"pointerdown",(function(){o(t[10].action?.select)&&t[10].action?.select.apply(this,arguments)}))],f=!0)},p(r,o){let[i]=o;t=r,32&i&&(x=ot(t[5]),et(),m=st(m,i,_,0,t,x,p,n,it,rr,null,lr),nt()),(!d||512&i&&l!==(l=t[9].bgEvents))&&E(n,"class",l),5&i&&(g=t[2][0]&&Ut(t[2][0].date,t[0])),g?D?(D.p(t,i),5&i&&lt(D,1)):(D=or(t),D.c(),lt(D,1),D.m(e,s)):D&&(et(),rt(D,1,1,(()=>{D=null})),nt()),274&i&&(S=ot(t[4]),et(),$=st($,i,M,0,t,S,b,a,it,ir,null,nr),nt()),(!d||512&i&&c!==(c=t[9].events))&&E(a,"class",c),(!d||705&i&&u!==(u=t[9].day+" "+t[9].weekdays?.[t[0].getUTCDay()]+(t[6]?" "+t[9].today:"")+(t[7]?" "+t[9].highlight:"")))&&E(e,"class",u)},i(t){if(!d){for(let t=0;t<x.length;t+=1)lt(m[t]);lt(D);for(let t=0;t<S.length;t+=1)lt($[t]);d=!0}},o(t){for(let t=0;t<m.length;t+=1)rt(m[t]);rt(D);for(let t=0;t<$.length;t+=1)rt($[t]);d=!1},d(n){n&&w(e);for(let t=0;t<m.length;t+=1)m[t].d();D&&D.d();for(let t=0;t<$.length;t+=1)$[t].d();t[22](null),f=!1,r(h)}}}function ar(t,e,n){let l,r,o,i,s,a,u,d,f,{date:h}=e,{chunks:m}=e,{bgChunks:p}=e,{longChunks:g}=e,{iChunks:$=[]}=e,{resource:v}=e,{highlightedDates:y,theme:w,_interaction:b,_today:k}=z("state");c(t,y,(t=>n(19,l=t))),c(t,w,(t=>n(9,o=t))),c(t,b,(t=>n(10,i=t))),c(t,k,(t=>n(20,r=t)));let x=[];return t.$$set=t=>{"date"in t&&n(0,h=t.date),"chunks"in t&&n(15,m=t.chunks),"bgChunks"in t&&n(16,p=t.bgChunks),"longChunks"in t&&n(1,g=t.longChunks),"iChunks"in t&&n(2,$=t.iChunks),"resource"in t&&n(17,v=t.resource)},t.$$.update=()=>{32769&t.$$.dirty&&n(4,a=m.filter((t=>Ut(t.date,h)))),65537&t.$$.dirty&&n(5,u=p.filter((t=>Ut(t.date,h)))),1048577&t.$$.dirty&&n(6,d=Ut(h,r)),524289&t.$$.dirty&&n(7,f=l.some((t=>Ut(t,h)))),131081&t.$$.dirty&&s&&Zt(s,(()=>({allDay:!0,date:h,resource:v,dayEl:s})))},[h,g,$,s,a,u,d,f,x,o,i,y,w,b,k,m,p,v,function(){we(x,a)},l,r,function(t,e){j[t?"unshift":"push"]((()=>{x[e]=t,n(8,x)}))},function(t){j[t?"unshift":"push"]((()=>{s=t,n(3,s)}))}]}let cr=class extends ft{constructor(t){super(),dt(this,t,ar,sr,i,{date:0,chunks:15,bgChunks:16,longChunks:1,iChunks:2,resource:17,reposition:18})}get reposition(){return this.$$.ctx[18]}};function ur(t,e,n){const l=t.slice();return l[19]=e[n],l[20]=e,l[21]=n,l}function dr(t){let e,n,l=t[21];const r=()=>t[16](e,l),o=()=>t[16](null,l);let i={date:t[19],chunks:t[2],bgChunks:t[3],longChunks:t[4],iChunks:t[5],resource:t[1]};return e=new cr({props:i}),r(),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){l!==t[21]&&(o(),l=t[21],r());const i={};1&n&&(i.date=t[19]),4&n&&(i.chunks=t[2]),8&n&&(i.bgChunks=t[3]),16&n&&(i.longChunks=t[4]),32&n&&(i.iChunks=t[5]),2&n&&(i.resource=t[1]),e.$set(i)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){o(),ut(e,t)}}}function fr(t){let e,n,l,r,o=ot(t[0]),i=[];for(let e=0;e<o.length;e+=1)i[e]=dr(ur(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=_()},m(o,s){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(o,s);y(o,e,s),n=!0,l||(r=T(window,"resize",t[10]),l=!0)},p(t,n){let[l]=n;if(127&l){let n;for(o=ot(t[0]),n=0;n<o.length;n+=1){const r=ur(t,o,n);i[n]?(i[n].p(r,l),lt(i[n],1)):(i[n]=dr(r),i[n].c(),lt(i[n],1),i[n].m(e.parentNode,e))}for(et(),n=o.length;n<i.length;n+=1)s(n);nt()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)lt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);n=!1},d(t){t&&w(e),b(i,t),l=!1,r()}}}function hr(t,e,n){let l,r,o,{dates:i}=e,{resource:s}=e,{_events:a,_iEvents:u,_queue2:d,hiddenDays:f}=z("state");c(t,a,(t=>n(15,o=t))),c(t,u,(t=>n(14,r=t))),c(t,f,(t=>n(13,l=t)));let h,m,p,g,$,v=[],y=[],w={};function b(){zt((()=>we(y,i)),w,d)}return t.$$set=t=>{"dates"in t&&n(0,i=t.dates),"resource"in t&&n(1,s=t.resource)},t.$$.update=()=>{if(1&t.$$.dirty&&(n(11,g=i[0]),n(12,$=Tt(xt(i.at(-1))))),47118&t.$$.dirty){n(2,h=[]),n(3,m=[]);for(let t of o)if(t.allDay&&be(t,g,$,s)){let e=ue(t,g,$);xe(t.display)?m.push(e):h.push(e)}ve(m,l),n(4,p=ve(h,l)),b()}30722&t.$$.dirty&&n(5,v=r.map((t=>{let e;return t&&t.allDay&&be(t,g,$,s)?(e=ue(t,g,$),ve([e],l)):e=null,e})))},[i,s,h,m,p,v,y,a,u,f,b,g,$,l,r,o,function(t,e){j[t?"unshift":"push"]((()=>{y[e]=t,n(6,y)}))}]}class mr extends ft{constructor(t){super(),dt(this,t,hr,fr,i,{dates:0,resource:1})}}function pr(t,e,n){const l=t.slice();return l[10]=e[n],l}function gr(t,e,n){const l=t.slice();return l[10]=e[n],l}function $r(t){let e,n,l,r,i,s,a,c,u;return{c(){e=k("div"),n=k("time"),s=C(),E(n,"datetime",l=Mt(t[10],10)),E(n,"aria-label",r=t[2].format(t[10])),E(e,"class",a=t[0].day+" "+t[0].weekdays?.[t[10].getUTCDay()]),E(e,"role","columnheader")},m(l,r){y(l,e,r),v(e,n),v(e,s),c||(u=g(i=vt.call(null,n,t[3].format(t[10]))),c=!0)},p(s,c){t=s,2&c&&l!==(l=Mt(t[10],10))&&E(n,"datetime",l),6&c&&r!==(r=t[2].format(t[10]))&&E(n,"aria-label",r),i&&o(i.update)&&10&c&&i.update.call(null,t[3].format(t[10])),3&c&&a!==(a=t[0].day+" "+t[0].weekdays?.[t[10].getUTCDay()])&&E(e,"class",a)},d(t){t&&w(e),c=!1,u()}}}function vr(t){let e,n=ot(t[1]),l=[];for(let e=0;e<n.length;e+=1)l[e]=$r(gr(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=_()},m(t,n){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,n);y(t,e,n)},p(t,r){if(15&r){let o;for(n=ot(t[1]),o=0;o<n.length;o+=1){const i=gr(t,n,o);l[o]?l[o].p(i,r):(l[o]=$r(i),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){t&&w(e),b(l,t)}}}function yr(t){let e,n,l,r,o,i,s,a,c;return l=new Sl({props:{$$slots:{default:[wr]},$$scope:{ctx:t}}}),{c(){e=k("div"),n=k("div"),at(l.$$.fragment),r=C(),o=k("div"),E(o,"class",i=t[0].hiddenScroll),E(n,"class",s=t[0].content),E(e,"class",a=t[0].allDay)},m(t,i){y(t,e,i),v(e,n),ct(l,n,null),v(n,r),v(n,o),c=!0},p(t,r){const u={};32770&r&&(u.$$scope={dirty:r,ctx:t}),l.$set(u),(!c||1&r&&i!==(i=t[0].hiddenScroll))&&E(o,"class",i),(!c||1&r&&s!==(s=t[0].content))&&E(n,"class",s),(!c||1&r&&a!==(a=t[0].allDay))&&E(e,"class",a)},i(t){c||(lt(l.$$.fragment,t),c=!0)},o(t){rt(l.$$.fragment,t),c=!1},d(t){t&&w(e),ut(l)}}}function wr(t){let e,n;return e=new mr({props:{dates:t[1]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};2&n&&(l.dates=t[1]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function br(t){let e,n;return e=new Ql({props:{date:t[10]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};2&n&&(l.date=t[10]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function kr(t){let e,n,l=ot(t[1]),r=[];for(let e=0;e<l.length;e+=1)r[e]=br(pr(t,l,e));const o=t=>rt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);y(t,e,l),n=!0},p(t,n){if(2&n){let i;for(l=ot(t[1]),i=0;i<l.length;i+=1){const o=pr(t,l,i);r[i]?(r[i].p(o,n),lt(r[i],1)):(r[i]=br(o),r[i].c(),lt(r[i],1),r[i].m(e.parentNode,e))}for(et(),i=l.length;i<r.length;i+=1)o(i);nt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)lt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&w(e),b(r,t)}}}function xr(t){let e,n,l,r,o,i,s,a,c,u;n=new Sl({props:{$$slots:{default:[vr]},$$scope:{ctx:t}}});let d=t[4]&&yr(t);return c=new Rl({props:{$$slots:{default:[kr]},$$scope:{ctx:t}}}),{c(){e=k("div"),at(n.$$.fragment),l=C(),r=k("div"),s=C(),d&&d.c(),a=C(),at(c.$$.fragment),E(r,"class",o=t[0].hiddenScroll),E(e,"class",i=t[0].header)},m(t,o){y(t,e,o),ct(n,e,null),v(e,l),v(e,r),y(t,s,o),d&&d.m(t,o),y(t,a,o),ct(c,t,o),u=!0},p(t,l){let[s]=l;const f={};32783&s&&(f.$$scope={dirty:s,ctx:t}),n.$set(f),(!u||1&s&&o!==(o=t[0].hiddenScroll))&&E(r,"class",o),(!u||1&s&&i!==(i=t[0].header))&&E(e,"class",i),t[4]?d?(d.p(t,s),16&s&&lt(d,1)):(d=yr(t),d.c(),lt(d,1),d.m(a.parentNode,a)):d&&(et(),rt(d,1,1,(()=>{d=null})),nt());const h={};32770&s&&(h.$$scope={dirty:s,ctx:t}),c.$set(h)},i(t){u||(lt(n.$$.fragment,t),lt(d),lt(c.$$.fragment,t),u=!0)},o(t){rt(n.$$.fragment,t),rt(d),rt(c.$$.fragment,t),u=!1},d(t){t&&(w(e),w(s),w(a)),ut(n),d&&d.d(t),ut(c,t)}}}function Cr(t,e,n){let l,r,o,i,s,{_viewDates:a,_intlDayHeader:u,_intlDayHeaderAL:d,allDaySlot:f,theme:h}=z("state");return c(t,a,(t=>n(1,r=t))),c(t,u,(t=>n(3,i=t))),c(t,d,(t=>n(2,o=t))),c(t,f,(t=>n(4,s=t))),c(t,h,(t=>n(0,l=t))),[l,r,o,i,s,a,u,d,f,h]}let _r=class extends ft{constructor(t){super(),dt(this,t,Cr,xr,i,{})}};var Tr={createOptions(t){t.buttonText.timeGridDay="day",t.buttonText.timeGridWeek="week",t.view="timeGridWeek",t.views.timeGridDay={buttonText:_e,component:_r,dayHeaderFormat:{weekday:"long"},duration:{days:1},theme:Me("ec-time-grid ec-day-view"),titleFormat:{year:"numeric",month:"long",day:"numeric"}},t.views.timeGridWeek={buttonText:Te,component:_r,duration:{weeks:1},theme:Me("ec-time-grid ec-week-view")}},createStores(t){t._slotTimeLimits=function(t){return gt([t.slotMinTime,t.slotMaxTime,t.flexibleSlotTimeLimits,t._viewDates,t._events],(t=>Pe(...t)))}(t),t._times=function(t){return gt([t.slotDuration,t._slotTimeLimits,t._intlSlotLabel],(t=>Ae(Et(bt()),...t)))}(t)}};function Dr(e){let n,l,r,i;return{c(){n=k("span"),E(n,"aria-label",e[2])},m(t,o){y(t,n,o),e[9](n),r||(i=g(l=vt.call(null,n,e[1])),r=!0)},p(t,e){let[r]=e;4&r&&E(n,"aria-label",t[2]),l&&o(l.update)&&2&r&&l.update.call(null,t[1])},i:t,o:t,d(t){t&&w(n),e[9](null),r=!1,i()}}}function Er(t,e,n){let l,r,i,{resource:s}=e,{date:a}=e,{resourceLabelContent:u,resourceLabelDidMount:d,_intlDayHeaderAL:f}=z("state");c(t,u,(t=>n(8,i=t))),c(t,d,(t=>n(11,r=t))),c(t,f,(t=>n(10,l=t)));const h=F();let m,p,g;return B((()=>{o(r)&&r({resource:s,date:a?St(a):void 0,el:m})})),R((()=>{a?n(2,g=l.format(a)+", "+m.innerText):(n(2,g=void 0),h("text",m.innerText))})),t.$$set=t=>{"resource"in t&&n(6,s=t.resource),"date"in t&&n(7,a=t.date)},t.$$.update=()=>{448&t.$$.dirty&&n(1,p=i?o(i)?i({resource:s,date:a?St(a):void 0}):i:s.title)},[m,p,g,u,d,f,s,a,i,function(t){j[t?"unshift":"push"]((()=>{m=t,n(0,m)}))}]}let Sr=class extends ft{constructor(t){super(),dt(this,t,Er,Dr,i,{resource:6,date:7})}};function Mr(t,e,n){const l=t.slice();return l[17]=e[n],l}function Ur(t,e,n){const l=t.slice();return l[20]=e[n],l}function Lr(t,e,n){const l=t.slice();return l[26]=e[n],l}function Hr(t,e,n){const l=t.slice();return l[23]=e[n],l}function Nr(t,e,n){const l=t.slice();return l[26]=e[n],l}function Br(t,e,n){const l=t.slice();return l[17]=e[n],l[32]=n,l}function Rr(t,e,n){const l=t.slice();return l[20]=e[n],l}function Fr(t){let e,n,l,r;return n=new Sr({props:{resource:t[17]}}),n.$on("text",(function(){for(var e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return t[16](t[32],...n)})),{c(){e=k("div"),at(n.$$.fragment),E(e,"class",l=t[5].day)},m(t,l){y(t,e,l),ct(n,e,null),r=!0},p(o,i){t=o;const s={};8&i[0]&&(s.resource=t[17]),n.$set(s),(!r||32&i[0]&&l!==(l=t[5].day))&&E(e,"class",l)},i(t){r||(lt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){t&&w(e),ut(n)}}}function zr(e){let n,l,r,i,s,a,c,u;return{c(){n=k("div"),l=k("time"),E(l,"datetime",r=Mt(e[17],10)),E(l,"aria-label",i=e[6].format(e[17])),E(n,"class",a=e[5].day+" "+e[5].weekdays?.[e[17].getUTCDay()])},m(t,r){y(t,n,r),v(n,l),c||(u=g(s=vt.call(null,l,e[7].format(e[17]))),c=!0)},p(t,c){e=t,8&c[0]&&r!==(r=Mt(e[17],10))&&E(l,"datetime",r),72&c[0]&&i!==(i=e[6].format(e[17]))&&E(l,"aria-label",i),s&&o(s.update)&&136&c[0]&&s.update.call(null,e[7].format(e[17])),40&c[0]&&a!==(a=e[5].day+" "+e[5].weekdays?.[e[17].getUTCDay()])&&E(n,"class",a)},i:t,o:t,d(t){t&&w(n),c=!1,u()}}}function Ar(t){let e,n,l,r=ot(t[3][1]),o=[];for(let e=0;e<r.length;e+=1)o[e]=Ir(Rr(t,r,e));const i=t=>rt(o[t],1,1,(()=>{o[t]=null}));return{c(){e=k("div");for(let t=0;t<o.length;t+=1)o[t].c();E(e,"class",n=t[5].days)},m(t,n){y(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);l=!0},p(t,s){if(252&s[0]){let n;for(r=ot(t[3][1]),n=0;n<r.length;n+=1){const l=Rr(t,r,n);o[n]?(o[n].p(l,s),lt(o[n],1)):(o[n]=Ir(l),o[n].c(),lt(o[n],1),o[n].m(e,null))}for(et(),n=r.length;n<o.length;n+=1)i(n);nt()}(!l||32&s[0]&&n!==(n=t[5].days))&&E(e,"class",n)},i(t){if(!l){for(let t=0;t<r.length;t+=1)lt(o[t]);l=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)rt(o[t]);l=!1},d(t){t&&w(e),b(o,t)}}}function Pr(e){let n,l,r,i,s,a,c,u,d;return{c(){n=k("div"),l=k("time"),a=C(),E(l,"datetime",r=Mt(e[20],10)),E(l,"aria-label",i=""+(e[4][e[32]]+e[6].format(e[20]))),E(n,"class",c=e[5].day+" "+e[5].weekdays?.[e[20].getUTCDay()]),E(n,"role","columnheader")},m(t,r){y(t,n,r),v(n,l),v(n,a),u||(d=g(s=vt.call(null,l,e[7].format(e[20]))),u=!0)},p(t,a){e=t,8&a[0]&&r!==(r=Mt(e[20],10))&&E(l,"datetime",r),88&a[0]&&i!==(i=""+(e[4][e[32]]+e[6].format(e[20])))&&E(l,"aria-label",i),s&&o(s.update)&&136&a[0]&&s.update.call(null,e[7].format(e[20])),40&a[0]&&c!==(c=e[5].day+" "+e[5].weekdays?.[e[20].getUTCDay()])&&E(n,"class",c)},i:t,o:t,d(t){t&&w(n),u=!1,d()}}}function jr(t){let e,n,l,r,o;return n=new Sr({props:{resource:t[20],date:t[17]}}),{c(){e=k("div"),at(n.$$.fragment),l=C(),E(e,"class",r=t[5].day),E(e,"role","columnheader")},m(t,r){y(t,e,r),ct(n,e,null),v(e,l),o=!0},p(t,l){const i={};8&l[0]&&(i.resource=t[20]),8&l[0]&&(i.date=t[17]),n.$set(i),(!o||32&l[0]&&r!==(r=t[5].day))&&E(e,"class",r)},i(t){o||(lt(n.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),o=!1},d(t){t&&w(e),ut(n)}}}function Ir(t){let e,n,l,r;const o=[jr,Pr],i=[];function s(t,e){return t[2]?0:1}return e=s(t),n=i[e]=o[e](t),{c(){n.c(),l=_()},m(t,n){i[e].m(t,n),y(t,l,n),r=!0},p(t,r){let a=e;e=s(t),e===a?i[e].p(t,r):(et(),rt(i[a],1,1,(()=>{i[a]=null})),nt(),n=i[e],n?n.p(t,r):(n=i[e]=o[e](t),n.c()),lt(n,1),n.m(l.parentNode,l))},i(t){r||(lt(n),r=!0)},o(t){rt(n),r=!1},d(t){t&&w(l),i[e].d(t)}}}function Wr(t){let e,n,l,r,o,i,s;const a=[zr,Fr],c=[];function u(t,e){return t[2]?0:1}n=u(t),l=c[n]=a[n](t);let d=t[3][1].length>1&&Ar(t);return{c(){e=k("div"),l.c(),r=C(),d&&d.c(),o=C(),E(e,"class",i=t[5].resource)},m(t,l){y(t,e,l),c[n].m(e,null),v(e,r),d&&d.m(e,null),v(e,o),s=!0},p(t,f){let h=n;n=u(t),n===h?c[n].p(t,f):(et(),rt(c[h],1,1,(()=>{c[h]=null})),nt(),l=c[n],l?l.p(t,f):(l=c[n]=a[n](t),l.c()),lt(l,1),l.m(e,r)),t[3][1].length>1?d?(d.p(t,f),8&f[0]&&lt(d,1)):(d=Ar(t),d.c(),lt(d,1),d.m(e,o)):d&&(et(),rt(d,1,1,(()=>{d=null})),nt()),(!s||32&f[0]&&i!==(i=t[5].resource))&&E(e,"class",i)},i(t){s||(lt(l),lt(d),s=!0)},o(t){rt(l),rt(d),s=!1},d(t){t&&w(e),c[n].d(),d&&d.d()}}}function Or(t){let e,n,l=ot(t[3][0]),r=[];for(let e=0;e<l.length;e+=1)r[e]=Wr(Br(t,l,e));const o=t=>rt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);y(t,e,l),n=!0},p(t,n){if(252&n[0]){let i;for(l=ot(t[3][0]),i=0;i<l.length;i+=1){const o=Br(t,l,i);r[i]?(r[i].p(o,n),lt(r[i],1)):(r[i]=Wr(o),r[i].c(),lt(r[i],1),r[i].m(e.parentNode,e))}for(et(),i=l.length;i<r.length;i+=1)o(i);nt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)lt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&w(e),b(r,t)}}}function Gr(t){let e,n,l,r,o,i,s,a,c;return l=new Sl({props:{$$slots:{default:[Kr]},$$scope:{ctx:t}}}),{c(){e=k("div"),n=k("div"),at(l.$$.fragment),r=C(),o=k("div"),E(o,"class",i=t[5].hiddenScroll),E(n,"class",s=t[5].content),E(e,"class",a=t[5].allDay)},m(t,i){y(t,e,i),v(e,n),ct(l,n,null),v(n,r),v(n,o),c=!0},p(t,r){const u={};39&r[0]|16&r[1]&&(u.$$scope={dirty:r,ctx:t}),l.$set(u),(!c||32&r[0]&&i!==(i=t[5].hiddenScroll))&&E(o,"class",i),(!c||32&r[0]&&s!==(s=t[5].content))&&E(n,"class",s),(!c||32&r[0]&&a!==(a=t[5].allDay))&&E(e,"class",a)},i(t){c||(lt(l.$$.fragment,t),c=!0)},o(t){rt(l.$$.fragment,t),c=!1},d(t){t&&w(e),ut(l)}}}function qr(t){let e,n,l=ot(t[1]),r=[];for(let e=0;e<l.length;e+=1)r[e]=Xr(Lr(t,l,e));const o=t=>rt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);y(t,e,l),n=!0},p(t,n){if(35&n[0]){let i;for(l=ot(t[1]),i=0;i<l.length;i+=1){const o=Lr(t,l,i);r[i]?(r[i].p(o,n),lt(r[i],1)):(r[i]=Xr(o),r[i].c(),lt(r[i],1),r[i].m(e.parentNode,e))}for(et(),i=l.length;i<r.length;i+=1)o(i);nt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)lt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&w(e),b(r,t)}}}function Yr(t){let e,n,l=ot(t[0]),r=[];for(let e=0;e<l.length;e+=1)r[e]=Jr(Hr(t,l,e));const o=t=>rt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);y(t,e,l),n=!0},p(t,n){if(35&n[0]){let i;for(l=ot(t[0]),i=0;i<l.length;i+=1){const o=Hr(t,l,i);r[i]?(r[i].p(o,n),lt(r[i],1)):(r[i]=Jr(o),r[i].c(),lt(r[i],1),r[i].m(e.parentNode,e))}for(et(),i=l.length;i<r.length;i+=1)o(i);nt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)lt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&w(e),b(r,t)}}}function Xr(t){let e,n,l,r,o;return n=new mr({props:{dates:t[0],resource:t[26]}}),{c(){e=k("div"),at(n.$$.fragment),l=C(),E(e,"class",r=t[5].resource)},m(t,r){y(t,e,r),ct(n,e,null),v(e,l),o=!0},p(t,l){const i={};1&l[0]&&(i.dates=t[0]),2&l[0]&&(i.resource=t[26]),n.$set(i),(!o||32&l[0]&&r!==(r=t[5].resource))&&E(e,"class",r)},i(t){o||(lt(n.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),o=!1},d(t){t&&w(e),ut(n)}}}function Vr(t){let e,n;return e=new mr({props:{dates:[t[23]],resource:t[26]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n[0]&&(l.dates=[t[23]]),2&n[0]&&(l.resource=t[26]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Jr(t){let e,n,l,r,o=ot(t[1]),i=[];for(let e=0;e<o.length;e+=1)i[e]=Vr(Nr(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=k("div");for(let t=0;t<i.length;t+=1)i[t].c();n=C(),E(e,"class",l=t[5].resource)},m(t,l){y(t,e,l);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);v(e,n),r=!0},p(t,a){if(3&a[0]){let l;for(o=ot(t[1]),l=0;l<o.length;l+=1){const r=Nr(t,o,l);i[l]?(i[l].p(r,a),lt(i[l],1)):(i[l]=Vr(r),i[l].c(),lt(i[l],1),i[l].m(e,n))}for(et(),l=o.length;l<i.length;l+=1)s(l);nt()}(!r||32&a[0]&&l!==(l=t[5].resource))&&E(e,"class",l)},i(t){if(!r){for(let t=0;t<o.length;t+=1)lt(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);r=!1},d(t){t&&w(e),b(i,t)}}}function Kr(t){let e,n,l,r;const o=[Yr,qr],i=[];function s(t,e){return t[2]?0:1}return e=s(t),n=i[e]=o[e](t),{c(){n.c(),l=_()},m(t,n){i[e].m(t,n),y(t,l,n),r=!0},p(t,r){let a=e;e=s(t),e===a?i[e].p(t,r):(et(),rt(i[a],1,1,(()=>{i[a]=null})),nt(),n=i[e],n?n.p(t,r):(n=i[e]=o[e](t),n.c()),lt(n,1),n.m(l.parentNode,l))},i(t){r||(lt(n),r=!0)},o(t){rt(n),r=!1},d(t){t&&w(l),i[e].d(t)}}}function Qr(t){let e,n;return e=new Ql({props:{date:t[2]?t[17]:t[20],resource:t[2]?t[20]:t[17]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};12&n[0]&&(l.date=t[2]?t[17]:t[20]),12&n[0]&&(l.resource=t[2]?t[20]:t[17]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Zr(t){let e,n,l,r,o=ot(t[3][1]),i=[];for(let e=0;e<o.length;e+=1)i[e]=Qr(Ur(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=k("div");for(let t=0;t<i.length;t+=1)i[t].c();n=C(),E(e,"class",l=t[5].resource)},m(t,l){y(t,e,l);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);v(e,n),r=!0},p(t,a){if(12&a[0]){let l;for(o=ot(t[3][1]),l=0;l<o.length;l+=1){const r=Ur(t,o,l);i[l]?(i[l].p(r,a),lt(i[l],1)):(i[l]=Qr(r),i[l].c(),lt(i[l],1),i[l].m(e,n))}for(et(),l=o.length;l<i.length;l+=1)s(l);nt()}(!r||32&a[0]&&l!==(l=t[5].resource))&&E(e,"class",l)},i(t){if(!r){for(let t=0;t<o.length;t+=1)lt(i[t]);r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);r=!1},d(t){t&&w(e),b(i,t)}}}function to(t){let e,n,l=ot(t[3][0]),r=[];for(let e=0;e<l.length;e+=1)r[e]=Zr(Mr(t,l,e));const o=t=>rt(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=_()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);y(t,e,l),n=!0},p(t,n){if(44&n[0]){let i;for(l=ot(t[3][0]),i=0;i<l.length;i+=1){const o=Mr(t,l,i);r[i]?(r[i].p(o,n),lt(r[i],1)):(r[i]=Zr(o),r[i].c(),lt(r[i],1),r[i].m(e.parentNode,e))}for(et(),i=l.length;i<r.length;i+=1)o(i);nt()}},i(t){if(!n){for(let t=0;t<l.length;t+=1)lt(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&w(e),b(r,t)}}}function eo(t){let e,n,l,r,o,i,s,a,c,u;n=new Sl({props:{$$slots:{default:[Or]},$$scope:{ctx:t}}});let d=t[8]&&Gr(t);return c=new Rl({props:{$$slots:{default:[to]},$$scope:{ctx:t}}}),{c(){e=k("div"),at(n.$$.fragment),l=C(),r=k("div"),s=C(),d&&d.c(),a=C(),at(c.$$.fragment),E(r,"class",o=t[5].hiddenScroll),E(e,"class",i=t[5].header)},m(t,o){y(t,e,o),ct(n,e,null),v(e,l),v(e,r),y(t,s,o),d&&d.m(t,o),y(t,a,o),ct(c,t,o),u=!0},p(t,l){const s={};252&l[0]|16&l[1]&&(s.$$scope={dirty:l,ctx:t}),n.$set(s),(!u||32&l[0]&&o!==(o=t[5].hiddenScroll))&&E(r,"class",o),(!u||32&l[0]&&i!==(i=t[5].header))&&E(e,"class",i),t[8]?d?(d.p(t,l),256&l[0]&&lt(d,1)):(d=Gr(t),d.c(),lt(d,1),d.m(a.parentNode,a)):d&&(et(),rt(d,1,1,(()=>{d=null})),nt());const f={};44&l[0]|16&l[1]&&(f.$$scope={dirty:l,ctx:t}),c.$set(f)},i(t){u||(lt(n.$$.fragment,t),lt(d),lt(c.$$.fragment,t),u=!0)},o(t){rt(n.$$.fragment,t),rt(d),rt(c.$$.fragment,t),u=!1},d(t){t&&(w(e),w(s),w(a)),ut(n),d&&d.d(t),ut(c,t)}}}function no(t,e,n){let l,r,o,i,s,a,u,d,{datesAboveResources:f,_viewDates:h,_viewResources:m,_intlDayHeader:p,_intlDayHeaderAL:g,allDaySlot:$,theme:v}=z("state");c(t,f,(t=>n(2,o=t))),c(t,h,(t=>n(0,l=t))),c(t,m,(t=>n(1,r=t))),c(t,p,(t=>n(7,a=t))),c(t,g,(t=>n(6,s=t))),c(t,$,(t=>n(8,u=t))),c(t,v,(t=>n(5,i=t)));let y=[];return t.$$.update=()=>{7&t.$$.dirty[0]&&n(3,d=o?[l,r]:[r,l])},[l,r,o,d,y,i,s,a,u,f,h,m,p,g,$,v,(t,e)=>n(4,y[t]=e.detail+", ",y)]}let lo=class extends ft{constructor(t){super(),dt(this,t,no,eo,i,{},null,[-1,-1])}};var ro={createOptions(t){t.datesAboveResources=!1,t.buttonText.resourceTimeGridDay="resources",t.buttonText.resourceTimeGridWeek="resources",t.view="resourceTimeGridWeek",t.views.resourceTimeGridDay={buttonText:_e,component:lo,duration:{days:1},theme:Me("ec-time-grid ec-resource-day-view")},t.views.resourceTimeGridWeek={buttonText:Te,component:lo,duration:{weeks:1},theme:Me("ec-time-grid ec-resource-week-view")}},createStores(t){"_times"in t||Tr.createStores(t),"_viewResources"in t||(t._viewResources=ze(t))}};function oo(e){let n,l,r,i;return{c(){n=k("span")},m(t,o){y(t,n,o),e[7](n),r||(i=g(l=vt.call(null,n,e[1])),r=!0)},p(t,e){let[n]=e;l&&o(l.update)&&2&n&&l.update.call(null,t[1])},i:t,o:t,d(t){t&&w(n),e[7](null),r=!1,i()}}}function io(t,e,n){let l,r,i,s,{resource:a}=e,{date:u}=e,{resourceLabelContent:d,resourceLabelDidMount:f}=z("state");return c(t,d,(t=>n(6,r=t))),c(t,f,(t=>n(8,l=t))),B((()=>{o(l)&&l({resource:a,date:u?St(u):void 0,el:i})})),t.$$set=t=>{"resource"in t&&n(4,a=t.resource),"date"in t&&n(5,u=t.date)},t.$$.update=()=>{112&t.$$.dirty&&n(1,s=r?o(r)?r({resource:a,date:u?St(u):void 0}):r:a.title)},[i,s,d,f,a,u,r,function(t){j[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class so extends ft{constructor(t){super(),dt(this,t,io,oo,i,{resource:4,date:5})}}function ao(t,e,n){const l=t.slice();return l[12]=e[n],l}function co(t){let e,n,l,r,o;return n=new so({props:{resource:t[12]}}),{c(){e=k("div"),at(n.$$.fragment),l=C(),E(e,"class",r=t[1].resource),M(e,"flex-basis",qt(t[4].get(t[12])??0,34)+"px"),E(e,"role","rowheader")},m(t,r){y(t,e,r),ct(n,e,null),v(e,l),o=!0},p(t,l){const i={};8&l&&(i.resource=t[12]),n.$set(i),(!o||2&l&&r!==(r=t[1].resource))&&E(e,"class",r),(!o||24&l)&&M(e,"flex-basis",qt(t[4].get(t[12])??0,34)+"px")},i(t){o||(lt(n.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),o=!1},d(t){t&&w(e),ut(n)}}}function uo(t){let e,n,l,r,o,i,s,a,c=ot(t[3]),u=[];for(let e=0;e<c.length;e+=1)u[e]=co(ao(t,c,e));const d=t=>rt(u[t],1,1,(()=>{u[t]=null}));return{c(){e=k("div"),n=k("div"),r=C(),o=k("div");for(let t=0;t<u.length;t+=1)u[t].c();E(n,"class",l=t[1].sidebarTitle),M(n,"flex-basis",t[0]+"px"),E(o,"class",i=t[1].content),E(e,"class",s=t[1].sidebar)},m(l,i){y(l,e,i),v(e,n),v(e,r),v(e,o);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(o,null);t[10](o),a=!0},p(t,r){let[f]=r;if((!a||2&f&&l!==(l=t[1].sidebarTitle))&&E(n,"class",l),(!a||1&f)&&M(n,"flex-basis",t[0]+"px"),26&f){let e;for(c=ot(t[3]),e=0;e<c.length;e+=1){const n=ao(t,c,e);u[e]?(u[e].p(n,f),lt(u[e],1)):(u[e]=co(n),u[e].c(),lt(u[e],1),u[e].m(o,null))}for(et(),e=c.length;e<u.length;e+=1)d(e);nt()}(!a||2&f&&i!==(i=t[1].content))&&E(o,"class",i),(!a||2&f&&s!==(s=t[1].sidebar))&&E(e,"class",s)},i(t){if(!a){for(let t=0;t<c.length;t+=1)lt(u[t]);a=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)rt(u[t]);a=!1},d(n){n&&w(e),b(u,n),t[10](null)}}}function fo(t,e,n){let l,r,o,i,s,{_viewResources:a,_headerEl:u,_resHs:d,_sidebarEl:f,theme:h}=z("state");c(t,a,(t=>n(3,i=t))),c(t,u,(t=>n(11,l=t))),c(t,d,(t=>n(4,s=t))),c(t,f,(t=>n(2,o=t))),c(t,h,(t=>n(1,r=t)));let m=0;return R((()=>{n(0,m=l.clientHeight)})),[m,r,o,i,s,a,u,d,f,h,function(t){j[t?"unshift":"push"]((()=>{o=t,f.set(o)}))}]}class ho extends ft{constructor(t){super(),dt(this,t,fo,uo,i,{})}}function mo(t,e,n){const l=t.slice();return l[15]=e[n],l}function po(t,e,n){const l=t.slice();return l[18]=e[n],l}function go(t){let e,n,l,r,i,s,a,c;return{c(){e=k("div"),n=k("time"),E(n,"datetime",l=Mt(t[15],10)),E(n,"aria-label",r=t[4].format(t[15])),E(e,"class",s=t[0].time),E(e,"role","columnheader")},m(l,r){y(l,e,r),v(e,n),a||(c=g(i=vt.call(null,n,t[5].format(t[15]))),a=!0)},p(a,c){t=a,4&c&&l!==(l=Mt(t[15],10))&&E(n,"datetime",l),20&c&&r!==(r=t[4].format(t[15]))&&E(n,"aria-label",r),i&&o(i.update)&&36&c&&i.update.call(null,t[5].format(t[15])),1&c&&s!==(s=t[0].time)&&E(e,"class",s)},d(t){t&&w(e),a=!1,c()}}}function $o(t){let e,n,l,r,i,s,a,c,u,d,f,h=ot(t[6][t[15].getTime()]),m=[];for(let e=0;e<h.length;e+=1)m[e]=vo(po(t,h,e));return{c(){e=k("div"),n=k("time"),a=C(),c=k("div");for(let t=0;t<m.length;t+=1)m[t].c();E(n,"datetime",l=Mt(t[15],10)),E(n,"aria-label",r=t[4].format(t[15])),E(e,"class",s=t[0].dayHead),E(c,"class",u=t[0].times)},m(l,r){y(l,e,r),v(e,n),y(l,a,r),y(l,c,r);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(c,null);d||(f=g(i=vt.call(null,n,t[5].format(t[15]))),d=!0)},p(a,d){if(t=a,4&d&&l!==(l=Mt(t[15],10))&&E(n,"datetime",l),20&d&&r!==(r=t[4].format(t[15]))&&E(n,"aria-label",r),i&&o(i.update)&&36&d&&i.update.call(null,t[5].format(t[15])),1&d&&s!==(s=t[0].dayHead)&&E(e,"class",s),69&d){let e;for(h=ot(t[6][t[15].getTime()]),e=0;e<h.length;e+=1){const n=po(t,h,e);m[e]?m[e].p(n,d):(m[e]=vo(n),m[e].c(),m[e].m(c,null))}for(;e<m.length;e+=1)m[e].d(1);m.length=h.length}1&d&&u!==(u=t[0].times)&&E(c,"class",u)},d(t){t&&(w(e),w(a),w(c)),b(m,t),d=!1,f()}}}function vo(t){let e,n,l,r,i,s,a,c;return{c(){e=k("div"),n=k("time"),i=C(),E(n,"datetime",l=t[18][0]),E(e,"class",s=t[0].time),E(e,"role","columnheader")},m(l,o){y(l,e,o),v(e,n),v(e,i),a||(c=g(r=vt.call(null,n,t[18][1])),a=!0)},p(i,a){t=i,68&a&&l!==(l=t[18][0])&&E(n,"datetime",l),r&&o(r.update)&&68&a&&r.update.call(null,t[18][1]),1&a&&s!==(s=t[0].time)&&E(e,"class",s)},d(t){t&&w(e),a=!1,c()}}}function yo(t){let e,n,l,r;function o(t,e){return 8&e&&(n=null),null==n&&(n=!!Nt(t[3])),n?$o:go}let i=o(t,-1),s=i(t);return{c(){e=k("div"),s.c(),l=C(),E(e,"class",r=t[0].day+" "+t[0].weekdays?.[t[15].getUTCDay()])},m(t,n){y(t,e,n),s.m(e,null),v(e,l)},p(t,n){i===(i=o(t,n))&&s?s.p(t,n):(s.d(1),s=i(t),s&&(s.c(),s.m(e,l))),5&n&&r!==(r=t[0].day+" "+t[0].weekdays?.[t[15].getUTCDay()])&&E(e,"class",r)},d(t){t&&w(e),s.d()}}}function wo(e){let n,l,r,o,i,s,a,c=ot(e[2]),u=[];for(let t=0;t<c.length;t+=1)u[t]=yo(mo(e,c,t));return{c(){n=k("div"),l=k("div");for(let t=0;t<u.length;t+=1)u[t].c();o=C(),i=k("div"),E(l,"class",r=e[0].days),E(l,"role","row"),E(i,"class",s=e[0].hiddenScroll),E(n,"class",a=e[0].header)},m(t,r){y(t,n,r),v(n,l);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(l,null);v(n,o),v(n,i),e[14](n)},p(t,e){let[o]=e;if(125&o){let e;for(c=ot(t[2]),e=0;e<c.length;e+=1){const n=mo(t,c,e);u[e]?u[e].p(n,o):(u[e]=yo(n),u[e].c(),u[e].m(l,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=c.length}1&o&&r!==(r=t[0].days)&&E(l,"class",r),1&o&&s!==(s=t[0].hiddenScroll)&&E(i,"class",s),1&o&&a!==(a=t[0].header)&&E(n,"class",a)},i:t,o:t,d(t){t&&w(n),b(u,t),e[14](null)}}}function bo(t,e,n){let l,r,o,i,s,a,u,{_headerEl:d,_intlDayHeader:f,_intlDayHeaderAL:h,_dayTimes:m,_viewDates:p,slotDuration:g,theme:$}=z("state");return c(t,d,(t=>n(1,r=t))),c(t,f,(t=>n(5,a=t))),c(t,h,(t=>n(4,s=t))),c(t,m,(t=>n(6,u=t))),c(t,p,(t=>n(2,o=t))),c(t,g,(t=>n(3,i=t))),c(t,$,(t=>n(0,l=t))),[l,r,o,i,s,a,u,d,f,h,m,p,g,$,function(t){j[t?"unshift":"push"]((()=>{r=t,d.set(r)}))}]}class ko extends ft{constructor(t){super(),dt(this,t,bo,wo,i,{})}}function xo(t,e){return t[e.getTime()]??{min:kt(0),max:kt(0)}}function Co(t){let e,n,l,i,s,a,c,u,d,f,h;var m=t[11].resizer;function p(t,e){return{props:{event:t[0]}}}return m&&(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[33](t[11],"x"))&&t[33](t[11],"x").apply(this,arguments)}))),{c(){e=k("article"),n=k("div"),s=C(),a&&at(a.$$.fragment),E(n,"class",l=t[3].eventBody),E(e,"class",t[5]),E(e,"style",t[6]),E(e,"role",c=t[8]?"button":void 0),E(e,"tabindex",u=t[8]?0:void 0)},m(l,r){y(l,e,r),v(e,n),v(e,s),a&&ct(a,e,null),t[55](e),d=!0,f||(h=[g(i=vt.call(null,n,t[7])),T(e,"click",(function(){o(t[8])&&t[8].apply(this,arguments)})),T(e,"keydown",(function(){o(t[8]&&$t(t[8]))&&(t[8]&&$t(t[8])).apply(this,arguments)})),T(e,"mouseenter",(function(){o(t[32](t[9],t[1]))&&t[32](t[9],t[1]).apply(this,arguments)})),T(e,"mouseleave",(function(){o(t[32](t[10],t[1]))&&t[32](t[10],t[1]).apply(this,arguments)})),T(e,"pointerdown",(function(){o(!xe(t[1])&&!ke(t[1])&&t[33](t[11]))&&(!xe(t[1])&&!ke(t[1])&&t[33](t[11])).apply(this,arguments)}))],f=!0)},p(r,s){if(t=r,(!d||8&s[0]&&l!==(l=t[3].eventBody))&&E(n,"class",l),i&&o(i.update)&&128&s[0]&&i.update.call(null,t[7]),2048&s[0]&&m!==(m=t[11].resizer)){if(a){et();const t=a;rt(t.$$.fragment,1,0,(()=>{ut(t,1)})),nt()}m?(a=U(m,p(t)),a.$on("pointerdown",(function(){o(t[33](t[11],"x"))&&t[33](t[11],"x").apply(this,arguments)})),at(a.$$.fragment),lt(a.$$.fragment,1),ct(a,e,null)):a=null}else if(m){const e={};1&s[0]&&(e.event=t[0]),a.$set(e)}(!d||32&s[0])&&E(e,"class",t[5]),(!d||64&s[0])&&E(e,"style",t[6]),(!d||256&s[0]&&c!==(c=t[8]?"button":void 0))&&E(e,"role",c),(!d||256&s[0]&&u!==(u=t[8]?0:void 0))&&E(e,"tabindex",u)},i(t){d||(a&&lt(a.$$.fragment,t),d=!0)},o(t){a&&rt(a.$$.fragment,t),d=!1},d(n){n&&w(e),a&&ut(a),t[55](null),f=!1,r(h)}}}function _o(t){let e,n,l=t[2]>0&&Co(t);return{c(){l&&l.c(),e=_()},m(t,r){l&&l.m(t,r),y(t,e,r),n=!0},p(t,n){t[2]>0?l?(l.p(t,n),4&n[0]&&lt(l,1)):(l=Co(t),l.c(),lt(l,1),l.m(e.parentNode,e)):l&&(et(),rt(l,1,1,(()=>{l=null})),nt())},i(t){n||(lt(l),n=!0)},o(t){rt(l),n=!1},d(t){t&&w(e),l&&l.d(t)}}}function To(t,e,n){let l,r,i,s,a,u,d,f,h,m,p,g,$,v,y,w,b,k,x,C,_,T,D,E,S,M,U,L,{date:H}=e,{chunk:N}=e,{dayChunks:F=[]}=e,{longChunks:A={}}=e,{resource:P}=e,{displayEventEnd:I,eventAllUpdated:W,eventBackgroundColor:O,eventTextColor:G,eventColor:q,eventContent:Y,eventClick:X,eventDidMount:V,eventClassNames:J,eventMouseEnter:K,eventMouseLeave:Q,resources:Z,slotDuration:tt,slotWidth:et,theme:nt,_view:lt,_intlEventTime:rt,_interaction:ot,_iClasses:it,_dayTimeLimits:st,_tasks:at}=z("state");c(t,I,(t=>n(46,h=t))),c(t,W,(t=>n(57,s=t))),c(t,O,(t=>n(52,y=t))),c(t,G,(t=>n(49,g=t))),c(t,q,(t=>n(51,v=t))),c(t,Y,(t=>n(45,f=t))),c(t,X,(t=>n(42,r=t))),c(t,V,(t=>n(58,a=t))),c(t,J,(t=>n(47,m=t))),c(t,K,(t=>n(9,k=t))),c(t,Q,(t=>n(10,x=t))),c(t,Z,(t=>n(50,$=t))),c(t,tt,(t=>n(41,l=t))),c(t,et,(t=>n(53,w=t))),c(t,nt,(t=>n(3,d=t))),c(t,lt,(t=>n(43,i=t))),c(t,rt,(t=>n(44,u=t))),c(t,ot,(t=>n(11,C=t))),c(t,it,(t=>n(48,p=t))),c(t,st,(t=>n(54,b=t)));let ct=ke(N.event.display)?1:0,ut=0;function dt(t,e){return!ke(e)&&o(t)?e=>t({event:pe(T),el:_,jsEvent:e,view:le(i)}):void 0}return B((()=>{o(a)&&a({event:pe(T),timeText:U,el:_,view:le(i)})})),R((()=>{o(s)&&!ke(D)&&Pt((()=>s({view:le(i)})),"eau",at)})),t.$$set=t=>{"date"in t&&n(34,H=t.date),"chunk"in t&&n(35,N=t.chunk),"dayChunks"in t&&n(36,F=t.dayChunks),"longChunks"in t&&n(37,A=t.longChunks),"resource"in t&&n(38,P=t.resource)},t.$$.update=()=>{if(16&t.$$.dirty[1]&&n(0,T=N.event),79&t.$$.dirty[0]|16717464&t.$$.dirty[1]){n(1,D=T.display);let t=Nt(l);if(t){let e=(N.start-H)/1e3,l=(N.end-H)/1e3,r=xo(b,H),o=Nt(r.min),i=Nt(r.max);e-=o,e<0&&(e=0),e>i-o&&(e=i-o);let s=0;for(let t=0;t<N.days;++t){let e=xo(b,N.dates[t]),n=Nt(e.min),r=Nt(e.max),o=wt*t,i=o+wt;i>l&&(i=l),i>o+r&&(s+=i-o-r);let a=l-o;a>n&&(a=n),s+=a}l-=s;let a=e/t*w;n(2,ut=(l-e)/t*w),n(6,S=`left:${a}px;width:${ut}px;`)}else n(2,ut=100*N.days),n(6,S=`width:${ut}%;`);let e=T.backgroundColor||Le(T,$)||y||v,r=T.textColor||He(T,$)||g,o=ct;if(T._margin){let[t,e]=T._margin;P===e&&(o=t)}n(6,S+=`margin-top:${o}px;`),e&&n(6,S+=`background-color:${e};`),r&&n(6,S+=`color:${r};`),n(6,S+=T.styles.join(";")),n(5,E=[xe(D)?d.bgEvent:d.event,...p([],T),...me(m,T,i)].join(" "))}8&t.$$.dirty[0]|61456&t.$$.dirty[1]&&n(7,[U,M]=fe(N,h,f,d,u,i),M),2&t.$$.dirty[0]|2048&t.$$.dirty[1]&&n(8,L=!xe(D)&&dt(r,D))},[T,D,ut,d,_,E,S,M,L,k,x,C,I,W,O,G,q,Y,X,V,J,K,Q,Z,tt,et,nt,lt,rt,ot,it,st,dt,function(t,e){return t.action?n=>t.action.drag(T,n,e,null,[ct,P]):void 0},H,N,F,A,P,function(){if(!_)return 0;let t=Kt(_);return n(40,ct=function(t,e,n,l,r){t.top=0,t.bottom=l;let o=1,i=t.date.getTime();n=n?.[i]?.chunks??[];let s=[...e,...n];s.sort(((t,e)=>(t.top??0)-(e.top??0)||t.start-e.start||e.event.allDay-t.event.allDay));for(let e of s)if(e!==t&&(r||t.start<e.end&&t.end>e.start)&&t.top<e.bottom&&t.bottom>e.top){let n=e.bottom-t.top+1;o+=n,t.top+=n,t.bottom+=n}return o}(N,F,A,t,!Nt(l))),ct+t},ct,l,r,i,u,f,h,m,p,g,$,v,y,w,b,function(t){j[t?"unshift":"push"]((()=>{_=t,n(4,_)}))}]}class Do extends ft{constructor(t){super(),dt(this,t,To,_o,i,{date:34,chunk:35,dayChunks:36,longChunks:37,resource:38,reposition:39},null,[-1,-1])}get reposition(){return this.$$.ctx[39]}}function Eo(t,e,n){const l=t.slice();return l[36]=e[n],l[37]=e,l[38]=n,l}function So(t,e,n){const l=t.slice();return l[36]=e[n],l}function Mo(t,e){let n,l,r;return l=new Do({props:{date:e[0],chunk:e[36]}}),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){e=t;const r={};1&n[0]&&(r.date=e[0]),512&n[0]&&(r.chunk=e[36]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),ut(l,t)}}}function Uo(t){let e,n;return e=new Do({props:{date:t[0],chunk:t[3][t[13]]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n[0]&&(l.date=t[0]),8200&n[0]&&(l.chunk=t[3][t[13]]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Lo(t,e){let n,l,r,o=e[38];const i=()=>e[29](l,o),s=()=>e[29](null,o);let a={date:e[0],chunk:e[36],dayChunks:e[8],longChunks:e[2],resource:e[1]};return l=new Do({props:a}),i(),{key:t,first:null,c(){n=_(),at(l.$$.fragment),this.first=n},m(t,e){y(t,n,e),ct(l,t,e),r=!0},p(t,n){o!==(e=t)[38]&&(s(),o=e[38],i());const r={};1&n[0]&&(r.date=e[0]),256&n[0]&&(r.chunk=e[36]),256&n[0]&&(r.dayChunks=e[8]),4&n[0]&&(r.longChunks=e[2]),2&n[0]&&(r.resource=e[1]),l.$set(r)},i(t){r||(lt(l.$$.fragment,t),r=!0)},o(t){rt(l.$$.fragment,t),r=!1},d(t){t&&w(n),s(),ut(l,t)}}}function Ho(t){let e,n;return e=new Do({props:{date:t[0],chunk:t[3][0],resource:t[1]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};1&n[0]&&(l.date=t[0]),8&n[0]&&(l.chunk=t[3][0]),2&n[0]&&(l.resource=t[1]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function No(t){let e,n,l,i,s,a,c,u,d,f,h=[],m=new Map,p=t[3][t[13]]&&Ut(t[3][t[13]].date,t[0]),g=[],$=new Map,b=t[3][0]&&Ut(t[3][0].date,t[0]),x=ot(t[9]);const _=t=>t[36].event;for(let e=0;e<x.length;e+=1){let n=So(t,x,e),l=_(n);m.set(l,h[e]=Mo(l,n))}let D=p&&Uo(t),S=ot(t[8]);const U=t=>t[36].event;for(let e=0;e<S.length;e+=1){let n=Eo(t,S,e),l=U(n);$.set(l,g[e]=Lo(l,n))}let L=b&&Ho(t);return{c(){e=k("div"),n=k("div");for(let t=0;t<h.length;t+=1)h[t].c();l=C(),D&&D.c(),i=C();for(let t=0;t<g.length;t+=1)g[t].c();s=C(),L&&L.c(),E(n,"class",a=t[14].events),E(e,"class",c=t[14].day+" "+t[14].weekdays?.[t[0].getUTCDay()]+(t[10]?" "+t[14].today:"")+(t[11]?" "+t[14].highlight:"")),M(e,"flex-grow",t[6]?null:Ot((Nt(t[5].max)-Nt(t[5].min))/Nt(t[7]))),E(e,"role","cell")},m(r,a){y(r,e,a),v(e,n);for(let t=0;t<h.length;t+=1)h[t]&&h[t].m(n,null);v(n,l),D&&D.m(n,null),v(n,i);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(n,null);v(n,s),L&&L.m(n,null),t[30](e),u=!0,d||(f=[T(e,"pointerleave",(function(){o(t[15].pointer?.leave)&&t[15].pointer?.leave.apply(this,arguments)})),T(e,"pointerdown",(function(){o(t[15].action?.select)&&t[15].action?.select.apply(this,arguments)}))],d=!0)},p(r,o){t=r,513&o[0]&&(x=ot(t[9]),et(),h=st(h,o,_,0,t,x,m,n,it,Mo,l,So),nt()),8201&o[0]&&(p=t[3][t[13]]&&Ut(t[3][t[13]].date,t[0])),p?D?(D.p(t,o),8201&o[0]&&lt(D,1)):(D=Uo(t),D.c(),lt(D,1),D.m(n,i)):D&&(et(),rt(D,1,1,(()=>{D=null})),nt()),4359&o[0]&&(S=ot(t[8]),et(),g=st(g,o,U,0,t,S,$,n,it,Lo,s,Eo),nt()),9&o[0]&&(b=t[3][0]&&Ut(t[3][0].date,t[0])),b?L?(L.p(t,o),9&o[0]&&lt(L,1)):(L=Ho(t),L.c(),lt(L,1),L.m(n,null)):L&&(et(),rt(L,1,1,(()=>{L=null})),nt()),(!u||16384&o[0]&&a!==(a=t[14].events))&&E(n,"class",a),(!u||19457&o[0]&&c!==(c=t[14].day+" "+t[14].weekdays?.[t[0].getUTCDay()]+(t[10]?" "+t[14].today:"")+(t[11]?" "+t[14].highlight:"")))&&E(e,"class",c),(!u||224&o[0])&&M(e,"flex-grow",t[6]?null:Ot((Nt(t[5].max)-Nt(t[5].min))/Nt(t[7])))},i(t){if(!u){for(let t=0;t<x.length;t+=1)lt(h[t]);lt(D);for(let t=0;t<S.length;t+=1)lt(g[t]);lt(L),u=!0}},o(t){for(let t=0;t<h.length;t+=1)rt(h[t]);rt(D);for(let t=0;t<g.length;t+=1)rt(g[t]);rt(L),u=!1},d(n){n&&w(e);for(let t=0;t<h.length;t+=1)h[t].d();D&&D.d();for(let t=0;t<g.length;t+=1)g[t].d();L&&L.d(),t[30](null),d=!1,r(f)}}}function Bo(t,e,n){let l,r,o,i,s,a,u,d,f,h,m,p,{date:g}=e,{resource:$}=e,{chunks:v}=e,{bgChunks:y}=e,{longChunks:w}=e,{iChunks:b=[]}=e,{highlightedDates:k,slotDuration:x,slotWidth:C,theme:_,_interaction:T,_today:D,_dayTimeLimits:E}=z("state");c(t,k,(t=>n(26,o=t))),c(t,x,(t=>n(7,r=t))),c(t,C,(t=>n(33,l=t))),c(t,_,(t=>n(14,a=t))),c(t,T,(t=>n(15,u=t))),c(t,D,(t=>n(27,i=t))),c(t,E,(t=>n(28,s=t)));let S,M,U=[],L=1;function H(t){return Ut(t.date,g)}function N(t,e){return t-=Vt(d).left,{allDay:M,date:M?xt(g):Ct(Ct(xt(g),S.min),r,Wt(t/l)),resource:$,dayEl:d}}return t.$$set=t=>{"date"in t&&n(0,g=t.date),"resource"in t&&n(1,$=t.resource),"chunks"in t&&n(23,v=t.chunks),"bgChunks"in t&&n(24,y=t.bgChunks),"longChunks"in t&&n(2,w=t.longChunks),"iChunks"in t&&n(3,b=t.iChunks)},t.$$.update=()=>{268435489&t.$$.dirty[0]&&(n(5,S=xo(s,g)),Ct(xt(g),S.min),Ct(xt(g),S.max)),192&t.$$.dirty[0]&&(n(6,M=!Nt(r)),n(13,L=M?2:1)),8388608&t.$$.dirty[0]&&n(8,f=v.filter(H)),16777280&t.$$.dirty[0]&&n(9,h=y.filter((t=>(!M||t.event.allDay)&&H(t)))),134217729&t.$$.dirty[0]&&n(10,m=Ut(g,i)),67108865&t.$$.dirty[0]&&n(11,p=o.some((t=>Ut(t,g)))),16&t.$$.dirty[0]&&d&&Zt(d,N)},[g,$,w,b,d,S,M,r,f,h,m,p,U,L,a,u,k,x,C,_,T,D,E,v,y,function(){return qt(...we(U,f))},o,i,s,function(t,e){j[t?"unshift":"push"]((()=>{U[e]=t,n(12,U)}))},function(t){j[t?"unshift":"push"]((()=>{d=t,n(4,d)}))}]}class Ro extends ft{constructor(t){super(),dt(this,t,Bo,No,i,{date:0,resource:1,chunks:23,bgChunks:24,longChunks:2,iChunks:3,reposition:25},null,[-1,-1])}get reposition(){return this.$$.ctx[25]}}function Fo(t,e,n){const l=t.slice();return l[25]=e[n],l[26]=e,l[27]=n,l}function zo(t){let e,n,l=t[27];const r=()=>t[21](e,l),o=()=>t[21](null,l);let i={date:t[25],resource:t[0],chunks:t[1],bgChunks:t[2],longChunks:t[4],iChunks:t[5]};return e=new Ro({props:i}),r(),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){l!==t[27]&&(o(),l=t[27],r());const i={};8&n&&(i.date=t[25]),1&n&&(i.resource=t[0]),2&n&&(i.chunks=t[1]),4&n&&(i.bgChunks=t[2]),16&n&&(i.longChunks=t[4]),32&n&&(i.iChunks=t[5]),e.$set(i)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){o(),ut(e,t)}}}function Ao(t){let e,n,l,r,o,i=ot(t[3]),s=[];for(let e=0;e<i.length;e+=1)s[e]=zo(Fo(t,i,e));const a=t=>rt(s[t],1,1,(()=>{s[t]=null}));return{c(){e=k("div");for(let t=0;t<s.length;t+=1)s[t].c();E(e,"class",n=t[8].days),M(e,"flex-basis",qt(t[7],34)+"px"),E(e,"role","row")},m(n,i){y(n,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);l=!0,r||(o=T(window,"resize",t[15]),r=!0)},p(t,r){let[o]=r;if(127&o){let n;for(i=ot(t[3]),n=0;n<i.length;n+=1){const l=Fo(t,i,n);s[n]?(s[n].p(l,o),lt(s[n],1)):(s[n]=zo(l),s[n].c(),lt(s[n],1),s[n].m(e,null))}for(et(),n=i.length;n<s.length;n+=1)a(n);nt()}(!l||256&o&&n!==(n=t[8].days))&&E(e,"class",n),(!l||128&o)&&M(e,"flex-basis",qt(t[7],34)+"px")},i(t){if(!l){for(let t=0;t<i.length;t+=1)lt(s[t]);l=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)rt(s[t]);l=!1},d(t){t&&w(e),b(s,t),r=!1,o()}}}function Po(t,e,n){let l,r,o,i,s,a,{resource:u}=e,{_viewDates:d,_events:f,_iEvents:h,_queue2:m,_resHs:p,hiddenDays:g,theme:$}=z("state");c(t,d,(t=>n(3,s=t))),c(t,f,(t=>n(20,o=t))),c(t,h,(t=>n(19,r=t))),c(t,p,(t=>n(22,i=t))),c(t,g,(t=>n(18,l=t))),c(t,$,(t=>n(8,a=t)));let v,y,w,b,k,x=[],C=[],_=0,T={};function D(){zt((()=>{n(7,_=Ot(qt(...we(C,s)))+10),i.set(u,_),p.set(i)}),T,m)}return t.$$set=t=>{"resource"in t&&n(0,u=t.resource)},t.$$.update=()=>{if(8&t.$$.dirty&&(n(16,b=s[0]),n(17,k=Tt(xt(s.at(-1))))),1507335&t.$$.dirty){n(1,v=[]),n(2,y=[]);for(let t of o)if(be(t,b,k,u)){let e=ue(t,b,k);xe(t.display)?y.push(e):v.push(e)}ve(y,l),n(4,w=ve(v,l)),D()}983041&t.$$.dirty&&n(5,x=r.map((t=>{let e;return t&&be(t,b,k,u)?(e=ue(t,b,k),ve([e],l)):e=null,e})))},[u,v,y,s,w,x,C,_,a,d,f,h,p,g,$,D,b,k,l,r,o,function(t,e){j[t?"unshift":"push"]((()=>{C[e]=t,n(6,C)}))}]}class jo extends ft{constructor(t){super(),dt(this,t,Po,Ao,i,{resource:0})}}function Io(t,e,n){const l=t.slice();return l[26]=e[n],l}function Wo(t,e,n){const l=t.slice();return l[29]=e[n],l}function Oo(t,e,n){const l=t.slice();return l[32]=e[n],l}function Go(t){let e,n;return{c(){e=k("div"),E(e,"class",n=t[2].line)},m(t,n){y(t,e,n)},p(t,l){4&l[0]&&n!==(n=t[2].line)&&E(e,"class",n)},d(t){t&&w(e)}}}function qo(t){let e,n=ot(t[3][t[29].getTime()]),l=[];for(let e=0;e<n.length;e+=1)l[e]=Go(Oo(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=_()},m(t,n){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,n);y(t,e,n)},p(t,r){if(14&r[0]){let o;for(n=ot(t[3][t[29].getTime()]),o=0;o<n.length;o+=1){const i=Oo(t,n,o);l[o]?l[o].p(i,r):(l[o]=Go(i),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){t&&w(e),b(l,t)}}}function Yo(t){let e,n;return e=new jo({props:{resource:t[26]}}),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){const l={};16&n[0]&&(l.resource=t[26]),e.$set(l)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ut(e,t)}}}function Xo(t){let e,n,l,r,o,i,s,a,c,u,d=ot(t[1]),f=[];for(let e=0;e<d.length;e+=1)f[e]=qo(Wo(t,d,e));let h=ot(t[4]),m=[];for(let e=0;e<h.length;e+=1)m[e]=Yo(Io(t,h,e));const p=t=>rt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=k("div"),n=k("div"),l=k("div");for(let t=0;t<f.length;t+=1)f[t].c();o=C();for(let t=0;t<m.length;t+=1)m[t].c();E(l,"class",r=t[2].lines),E(n,"class",i=t[2].content),E(e,"class",s=t[2].body)},m(r,i){y(r,e,i),v(e,n),v(n,l);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(l,null);v(n,o);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(n,null);t[18](e),a=!0,c||(u=T(e,"scroll",t[16]),c=!0)},p(t,o){if(14&o[0]){let e;for(d=ot(t[1]),e=0;e<d.length;e+=1){const n=Wo(t,d,e);f[e]?f[e].p(n,o):(f[e]=qo(n),f[e].c(),f[e].m(l,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=d.length}if((!a||4&o[0]&&r!==(r=t[2].lines))&&E(l,"class",r),16&o[0]){let e;for(h=ot(t[4]),e=0;e<h.length;e+=1){const l=Io(t,h,e);m[e]?(m[e].p(l,o),lt(m[e],1)):(m[e]=Yo(l),m[e].c(),lt(m[e],1),m[e].m(n,null))}for(et(),e=h.length;e<m.length;e+=1)p(e);nt()}(!a||4&o[0]&&i!==(i=t[2].content))&&E(n,"class",i),(!a||4&o[0]&&s!==(s=t[2].body))&&E(e,"class",s)},i(t){if(!a){for(let t=0;t<h.length;t+=1)lt(m[t]);a=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)rt(m[t]);a=!1},d(n){n&&w(e),b(f,n),b(m,n),t[18](null),c=!1,u()}}}function Vo(t,e,n){let l,r,o,i,s,a,u,d,f,h,m,g,{_bodyEl:$,_headerEl:v,_sidebarEl:y,_dayTimes:w,_dayTimeLimits:b,_viewResources:k,_viewDates:x,scrollTime:C,slotDuration:_,slotWidth:T,theme:D}=z("state");return c(t,$,(t=>n(22,a=t))),c(t,v,(t=>n(24,d=t))),c(t,y,(t=>n(23,u=t))),c(t,w,(t=>n(3,h=t))),c(t,b,(t=>n(21,s=t))),c(t,k,(t=>n(4,m=t))),c(t,x,(t=>n(1,i=t))),c(t,C,(t=>n(17,o=t))),c(t,_,(t=>n(20,r=t))),c(t,T,(t=>n(19,l=t))),c(t,D,(t=>n(2,f=t))),t.$$.update=()=>{1&t.$$.dirty[0]&&p($,a=g,a),131075&t.$$.dirty[0]&&g&&function(){let t=xo(s,i[0]);n(0,g.scrollLeft=(Nt(o)-Nt(t.min))/Nt(r)*l,g)}()},[g,i,f,h,m,$,v,y,w,b,k,x,C,_,T,D,function(){p(v,d.scrollLeft=a.scrollLeft,d),p(y,u.scrollTop=a.scrollTop,u)},o,function(t){j[t?"unshift":"push"]((()=>{g=t,n(0,g)}))}]}class Jo extends ft{constructor(t){super(),dt(this,t,Vo,Xo,i,{},null,[-1,-1])}}function Ko(t){let e,n,l,r,o,i,s,a,c,u;return n=new ho({}),o=new ko({}),s=new Jo({}),{c(){e=k("div"),at(n.$$.fragment),l=C(),r=k("div"),at(o.$$.fragment),i=C(),at(s.$$.fragment),E(r,"class",a=t[0].main),E(e,"class",c=t[0].container)},m(t,a){y(t,e,a),ct(n,e,null),v(e,l),v(e,r),ct(o,r,null),v(r,i),ct(s,r,null),u=!0},p(t,n){let[l]=n;(!u||1&l&&a!==(a=t[0].main))&&E(r,"class",a),(!u||1&l&&c!==(c=t[0].container))&&E(e,"class",c)},i(t){u||(lt(n.$$.fragment,t),lt(o.$$.fragment,t),lt(s.$$.fragment,t),u=!0)},o(t){rt(n.$$.fragment,t),rt(o.$$.fragment,t),rt(s.$$.fragment,t),u=!1},d(t){t&&w(e),ut(n),ut(o),ut(s)}}}function Qo(t,e,n){let l,{theme:r}=z("state");return c(t,r,(t=>n(0,l=t))),[l,r]}class Zo extends ft{constructor(t){super(),dt(this,t,Qo,Ko,i,{})}}var ti={createOptions(t){t.buttonText.resourceTimelineDay="timeline",t.buttonText.resourceTimelineWeek="timeline",t.buttonText.resourceTimelineMonth="timeline",t.theme.main="ec-main",t.theme.times="ec-times",t.theme.container="ec-container",t.view="resourceTimelineWeek",t.views.resourceTimelineDay={buttonText:_e,component:Zo,displayEventEnd:!1,dayHeaderFormat:{weekday:"long"},duration:{days:1},slotDuration:"01:00",theme:Me("ec-timeline ec-resource-day-view"),titleFormat:{year:"numeric",month:"long",day:"numeric"}},t.views.resourceTimelineWeek={buttonText:Te,component:Zo,displayEventEnd:!1,duration:{weeks:1},slotDuration:"01:00",theme:Me("ec-timeline ec-resource-week-view")},t.views.resourceTimelineMonth={buttonText:De,component:Zo,displayEventEnd:!1,dayHeaderFormat:{weekday:"short",day:"numeric"},duration:{months:1},slotDuration:{days:1},theme:Me("ec-timeline ec-resource-month-view"),titleFormat:{year:"numeric",month:"long"}}},createStores(t){"_viewResources"in t||(t._viewResources=ze(t)),t._headerEl=pt(void 0),t._dayTimeLimits=function(t){return gt([t.slotMinTime,t.slotMaxTime,t.flexibleSlotTimeLimits,t._viewDates,t._events],(t=>{let[e,n,l,r,o]=t,i={};for(let t of r)i[t.getTime()]=Pe(e,n,l,[t],o);return i}))}(t),t._dayTimes=function(t){return gt([t._viewDates,t.slotDuration,t._dayTimeLimits,t._intlSlotLabel],(t=>{let[e,n,l,r]=t,o={};for(let t of e){let e=t.getTime();o[e]=e in l?Ae(t,n,l[e],r):[]}return o}))}(t),t._resHs=pt(new Map),t._sidebarEl=pt(void 0)}};let ei=!1;function ni(t,e,n){return qt(e,Gt(n,t))}const{window:li}=$;function ri(e){let n,l;return{c:t,m(t,r){n||(l=[T(li,"pointermove",e[33]),T(li,"pointerup",e[34]),T(li,"pointercancel",e[34]),T(li,"scroll",e[0]),T(li,"selectstart",ii(e[35])),T(li,"contextmenu",(function(){o(ii(e[43]))&&ii(e[43]).apply(this,arguments)})),T(li,"touchstart",e[36]),T(li,"touchmove",e[42],{passive:!1})],n=!0)},p(t,n){e=t},i:t,o:t,d(t){n=!1,r(l)}}}function oi(t){return t.isPrimary&&("mouse"!==t.pointerType||1&t.buttons)}function ii(t){return e=>{t()&&e.preventDefault()}}function si(t,e,n){let l,i,s,a,u,d,f,h,m,g,$,v,y,w,b,k,x,C,_,D,E,S,M,U,L,H,N,B,R,F,P,j,I,W,O,G,q,Y,X,V,J,K,Q,Z,tt,et,nt,lt,rt,ot,it,st,at,ct,ut,dt,ft,{_iEvents:ht,_iClass:mt,_events:pt,_view:gt,_dayGrid:$t,_draggable:vt,_bodyEl:yt,dateClick:wt,dragScroll:bt,datesAboveResources:Dt,eventDragMinDistance:Et,eventDragStart:Ut,eventDragStop:Lt,eventDrop:Ht,eventLongPressDelay:Nt,eventResizeStart:Bt,eventResizeStop:Rt,eventResize:Ft,longPressDelay:zt,selectable:At,select:Pt,selectBackgroundColor:It,selectLongPressDelay:Wt,selectMinDistance:Ot,slotDuration:Yt,slotHeight:Xt,slotWidth:Kt,unselect:Qt,unselectAuto:Zt,unselectCancel:te,view:ie}=z("state");function se(t){window.getSelection().removeAllRanges(),V=K=t.clientX,J=Q=t.clientY;let e=ne(K,Q);({allDay:rt,date:G,resource:Y}=ee(e)(K,Q)),oe(f)?Z=et=B:(Z=Jt(e,Y?4:3),et=Jt(e,Y&&(1===j||N)?2:1)),ce(),"mouse"!==t.pointerType&&n(1,ut=setTimeout((()=>{j&&(I=!0,ae(t))}),(he()?H:L)??U))}function ae(t){if(I||t&&"mouse"===t.pointerType&&Math.sqrt(Math.pow(K-V,2)+Math.pow(Q-J,2))>=(he()?M:S)){I=!0,$e(t),p(mt,h=ot,h),a[0]||(he()?p(ht,a[0]={id:"{select}",allDay:W.allDay,start:W.start,title:"",display:"preview",extendedProps:{},backgroundColor:u,resourceIds:W.resourceIds,classNames:[],styles:[]},a):function(t,e){o(e)&&e({event:pe(W),jsEvent:t,view:le(l)});O=W.display,W.display="preview",p(ht,a[0]=ge(W),a),void 0!==ft&&p(ht,a[0]._margin=ft,a);W.display="ghost",pt.set(s)}(t,fe()?E:D));let e=ne(ni(K,dt[0],dt[1]),ni(Q,dt[2],dt[3]));if(e){let t;({allDay:t,date:q,resource:X}=ee(e)(K,Q)),t===rt&&(lt=kt((q-G)/1e3),p(ht,a[0].end=Ct(xt(W.end),lt),a),fe()?a[0].end<it&&(p(ht,a[0].end=it,a),lt=kt((it-W.end)/1e3)):he()?a[0].end<W.end?(p(ht,a[0].start=_t(a[0].end,st),a),p(ht,a[0].end=W.end,a)):p(ht,a[0].start=W.start,a):(p(ht,a[0].start=Ct(xt(W.start),lt),a),Y&&(p(ht,a[0].resourceIds=W.resourceIds.filter((t=>t!==Y.id)),a),a[0].resourceIds.push(X.id))))}}if(_){let t=2*C,n=x;e=()=>{Z&&(Q<t&&window.scrollBy(0,qt(-10,(Q-t)/3)),Q<tt.top+t&&(Z.scrollTop+=qt(-10,(Q-tt.top-t)/3)),Q>window.innerHeight-t&&window.scrollBy(0,Gt(10,(Q-window.innerHeight+t)/3)),Q>tt.bottom-t&&(Z.scrollTop+=Gt(10,(Q-tt.bottom+t)/3)),oe(f)&&(K<tt.left+n&&(Z.scrollLeft+=qt(-10,(K-tt.left-n)/3)),K>tt.right-n&&(Z.scrollLeft+=Gt(10,(K-tt.right+n)/3))))},ei||(ei=!0,window.requestAnimationFrame((()=>{e(),ei=!1})))}var e}function ce(){tt=Vt(Z),nt=Vt(et),dt=[qt(0,nt.left+(oe(f)?1:d?0:8)),Gt(document.documentElement.clientWidth,nt.left+et.clientWidth)-2,qt(0,tt.top),Gt(document.documentElement.clientHeight,tt.top+Z.clientHeight)-2]}function ue(){p(ht,a[0]=null,a)}function de(t,e){t.start=e.start,t.end=e.end,t.resourceIds=e.resourceIds,pt.set(s)}function fe(){return 2===j}function he(){return 3===j}function me(){return j&&j<4}function $e(t){at&&(at=!1,ue(),o(i)&&i({jsEvent:t,view:le(l)}))}c(t,ht,(t=>n(72,a=t))),c(t,mt,(t=>n(76,h=t))),c(t,pt,(t=>n(71,s=t))),c(t,gt,(t=>n(69,l=t))),c(t,$t,(t=>n(74,d=t))),c(t,vt,(t=>n(99,P=t))),c(t,yt,(t=>n(96,B=t))),c(t,wt,(t=>n(77,m=t))),c(t,bt,(t=>n(87,_=t))),c(t,Dt,(t=>n(95,N=t))),c(t,Et,(t=>n(90,S=t))),c(t,Ut,(t=>n(88,D=t))),c(t,Lt,(t=>n(80,v=t))),c(t,Ht,(t=>n(78,g=t))),c(t,Nt,(t=>n(93,L=t))),c(t,Bt,(t=>n(89,E=t))),c(t,Rt,(t=>n(81,y=t))),c(t,Ft,(t=>n(79,$=t))),c(t,zt,(t=>n(92,U=t))),c(t,At,(t=>n(98,F=t))),c(t,Pt,(t=>n(82,w=t))),c(t,It,(t=>n(73,u=t))),c(t,Wt,(t=>n(94,H=t))),c(t,Ot,(t=>n(91,M=t))),c(t,Yt,(t=>n(97,R=t))),c(t,Xt,(t=>n(86,C=t))),c(t,Kt,(t=>n(85,x=t))),c(t,Qt,(t=>n(70,i=t))),c(t,Zt,(t=>n(84,k=t))),c(t,te,(t=>n(83,b=t))),c(t,ie,(t=>n(75,f=t))),gt.subscribe($e);return[function(){me()&&(ce(),ae())},ut,ht,mt,pt,gt,$t,vt,yt,wt,bt,Dt,Et,Ut,Lt,Ht,Nt,Bt,Rt,Ft,zt,At,Pt,It,Wt,Ot,Yt,Xt,Kt,Qt,Zt,te,ie,function(t){me()&&t.isPrimary&&(K=t.clientX,Q=t.clientY,ae(t))},function(t){if(!at||!k||b&&t.target.closest(b)||$e(t),j&&t.isPrimary){if(I)if(he()){if(at=!0,o(w)){let{start:e,end:n}=pe(a[0]);w({start:e,end:n,startStr:Mt(a[0].start),endStr:Mt(a[0].end),allDay:rt,jsEvent:t,view:le(l),resource:Y})}}else{W.display=O;let e=fe()?y:v;o(e)&&e({event:pe(W),jsEvent:t,view:le(l)});let n=ge(W);if(de(W,a[0]),ue(),e=fe()?$:g,o(e)){let r,o=W;r=fe()?{endDelta:lt}:{delta:lt,oldResource:Y!==X?Y:void 0,newResource:Y!==X?X:void 0},e(jt(r,{event:pe(W),oldEvent:pe(n),jsEvent:t,view:le(l),revert(){de(o,n)}}))}}else if((4===j||he())&&o(m)&&!ct){K=t.clientX,Q=t.clientY;let e=ne(K,Q);if(e){let{allDay:n,date:r,resource:o}=ee(e)(K,Q);m({allDay:n,date:St(r),dateStr:Mt(r),dayEl:e,jsEvent:t,view:le(l),resource:o})}}I=!1,j=V=J=K=Q=W=O=G=q=Y=X=lt=rt=p(mt,h=it=st=ft=void 0,h),Z=et=tt=nt=void 0,ut&&(clearTimeout(ut),n(1,ut=void 0))}ct=!1},me,function(t){if(me()){let e=t.target,n=[],l=()=>r(n);n.push(T(e,"touchmove",ii((()=>I)))),n.push(T(e,"touchend",l)),n.push(T(e,"touchcancel",l))}},function(t,e,n,l,r){j||(j=oi(e)?n?2:P(t)?1:5:5,me()&&(W=t,se(e),l&&(G=l),r&&(ft=r),ot=n?"x"==n?"resizingX":"resizingY":"dragging",n&&(it=xt(W.start),rt?(it.setUTCHours(W.end.getUTCHours(),W.end.getUTCMinutes(),W.end.getUTCSeconds(),0),it<W.start&&Tt(it)):Ct(it,R)),ae(e)))},function(t){j||(j=oi(t)?F&&!re(f)?3:4:5,me()&&(se(t),ot="selecting",st=rt?kt({day:1}):R,W={allDay:rt,start:G,end:Ct(xt(G),st),resourceIds:Y?[Y.id]:[]},ae(t)))},function(){j||(j=5)},$e,function(){ct=!0},function(e){A.call(this,t,e)},()=>ut]}class ai extends ft{constructor(t){super(),dt(this,t,si,ri,i,{drag:37,select:38,noAction:39,handleScroll:0,unselect:40,noClick:41},null,[-1,-1,-1,-1])}get drag(){return this.$$.ctx[37]}get select(){return this.$$.ctx[38]}get noAction(){return this.$$.ctx[39]}get handleScroll(){return this.$$.ctx[0]}get unselect(){return this.$$.ctx[40]}get noClick(){return this.$$.ctx[41]}}function ci(e){let n,l;return{c:t,m(t,r){n||(l=[T(window,"pointermove",e[3]),T(window,"scroll",e[0])],n=!0)},p:t,i:t,o:t,d(t){n=!1,r(l)}}}function ui(t){return t.isPrimary&&"mouse"===t.pointerType}function di(t,e,n){let l,r,{_iEvents:o,slotDuration:i}=z("state");c(t,o,(t=>n(5,l=t))),c(t,i,(t=>n(8,r=t)));let s=0,a=0;function u(){let t=ne(s,a);if(t){let{allDay:e,date:n,resource:i}=ee(t)(s,a),c=e?2:1;l[c]||function(t){p(o,l[t]={id:"{pointer}",title:"",display:"pointer",extendedProps:{},backgroundColor:"transparent",classNames:[],styles:[]},l)}(c),p(o,l[c].start=n,l),p(o,l[c].end=Ct(xt(n),r),l),p(o,l[c].resourceIds=i?[i.id]:[],l)}}function d(){p(o,l[1]=null,l),p(o,l[2]=null,l)}return t.$$.update=()=>{32&t.$$.dirty&&l[0]&&d()},[function(){u()},o,i,function(t){ui(t)&&(s=t.clientX,a=t.clientY,u())},function(t){ui(t)&&d()},l]}class fi extends ft{constructor(t){super(),dt(this,t,di,ci,i,{leave:4,handleScroll:0})}get leave(){return this.$$.ctx[4]}get handleScroll(){return this.$$.ctx[0]}}function hi(t){let e,n,l,r;return{c(){e=k("div"),E(e,"class",n=t[1].resizer)},m(n,o){y(n,e,o),l||(r=T(e,"pointerdown",t[8]),l=!0)},p(t,l){2&l&&n!==(n=t[1].resizer)&&E(e,"class",n)},d(t){t&&w(e),l=!1,r()}}}function mi(e){let n,l=e[0]&&hi(e);return{c(){l&&l.c(),n=_()},m(t,e){l&&l.m(t,e),y(t,n,e)},p(t,e){let[r]=e;t[0]?l?l.p(t,r):(l=hi(t),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:t,o:t,d(t){t&&w(n),l&&l.d(t)}}}function pi(t,e,n){let l,r,o,i,{event:s}=e,{theme:a,eventDurationEditable:u,editable:d}=z("state");return c(t,a,(t=>n(1,o=t))),c(t,u,(t=>n(7,r=t))),c(t,d,(t=>n(6,l=t))),t.$$set=t=>{"event"in t&&n(5,s=t.event)},t.$$.update=()=>{224&t.$$.dirty&&n(0,i=!xe(s.display)&&!ke(s.display)&&((s.durationEditable??r)||(s.editable??l)))},[i,o,a,u,d,s,l,r,function(e){A.call(this,t,e)}]}class gi extends ft{constructor(t){super(),dt(this,t,pi,mi,i,{event:5})}}function $i(t){let e,n;return e=new fi({props:{}}),t[16](e),{c(){at(e.$$.fragment)},m(t,l){ct(e,t,l),n=!0},p(t,n){e.$set({})},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(n){t[16](null),ut(e,n)}}}function vi(t){let e,n,l,r;e=new ai({props:{}}),t[15](e);let o=t[1]&&$i(t);return{c(){at(e.$$.fragment),n=C(),o&&o.c(),l=_()},m(t,i){ct(e,t,i),y(t,n,i),o&&o.m(t,i),y(t,l,i),r=!0},p(t,n){let[r]=n;e.$set({}),t[1]?o?(o.p(t,r),2&r&&lt(o,1)):(o=$i(t),o.c(),lt(o,1),o.m(l.parentNode,l)):o&&(et(),rt(o,1,1,(()=>{o=null})),nt())},i(t){r||(lt(e.$$.fragment,t),lt(o),r=!0)},o(t){rt(e.$$.fragment,t),rt(o),r=!1},d(r){r&&(w(n),w(l)),t[15](null),ut(e,r),o&&o.d(r)}}}function yi(t,e,n){let l,r,o,i,s,a,u,d,{theme:f,editable:h,eventStartEditable:m,eventDurationEditable:g,pointer:$,_bodyEl:v,_interaction:y,_iClasses:w,_draggable:b}=z("state");function k(){for(let t of Object.values(l))t?.handleScroll?.()}return c(t,f,(t=>n(11,o=t))),c(t,h,(t=>n(13,a=t))),c(t,m,(t=>n(14,u=t))),c(t,$,(t=>n(1,d=t))),c(t,v,(t=>n(10,r=t))),c(t,y,(t=>n(0,l=t))),c(t,w,(t=>n(17,s=t))),c(t,b,(t=>n(12,i=t))),p(y,l.resizer=gi,l),t.$$.update=()=>{24576&t.$$.dirty&&p(b,i=t=>(t.startEditable??u)||(t.editable??a),i),6144&t.$$.dirty&&p(w,s=(t,e)=>{let{display:n}=e;return ke(n)?[o[n]]:!xe(n)&&i(e)?[o.draggable]:[]},s),1024&t.$$.dirty&&r&&T(r,"scroll",k)},[l,d,f,h,m,$,v,y,w,b,r,o,i,a,u,function(t){j[t?"unshift":"push"]((()=>{l.action=t,y.set(l)}))},function(t){j[t?"unshift":"push"]((()=>{l.pointer=t,y.set(l)}))}]}class wi extends ft{constructor(t){super(),dt(this,t,yi,vi,i,{})}}var bi={createOptions(t){t.dateClick=void 0,t.dragScroll=!0,t.editable=!1,t.eventDragMinDistance=5,t.eventDragStart=void 0,t.eventDragStop=void 0,t.eventDrop=void 0,t.eventDurationEditable=!0,t.eventLongPressDelay=void 0,t.eventResizeStart=void 0,t.eventResizeStop=void 0,t.eventResize=void 0,t.eventStartEditable=!0,t.longPressDelay=1e3,t.pointer=!1,t.select=void 0,t.selectBackgroundColor=void 0,t.selectLongPressDelay=void 0,t.selectMinDistance=5,t.unselect=void 0,t.unselectAuto=!0,t.unselectCancel="",t.theme.draggable="ec-draggable",t.theme.ghost="ec-ghost",t.theme.preview="ec-preview",t.theme.pointer="ec-pointer",t.theme.resizer="ec-resizer",t.theme.dragging="ec-dragging",t.theme.resizingY="ec-resizing-y",t.theme.resizingX="ec-resizing-x",t.theme.selecting="ec-selecting"},createStores(e){e._draggable=pt(t),e._auxiliary.update((t=>[...t,wi]))}};return class extends wn{constructor(t,e){super({target:t,props:{plugins:[ll,kl,Tr,ro,ti,bi],options:e}})}get view(){return this.getView()}}}();
-//# sourceMappingURL=event-calendar.min.js.map
diff --git a/classes/external/delete_blocker.php b/classes/external/delete_blocker.php
new file mode 100644
index 0000000..8a0217b
--- /dev/null
+++ b/classes/external/delete_blocker.php
@@ -0,0 +1,82 @@
+<?php
+// This file is part of Moodle - https://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
+
+/**
+ * External API for deleting a blocker.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\external;
+
+use core_external\external_api;
+use core_external\external_function_parameters;
+use core_external\external_single_structure;
+use core_external\external_value;
+use mod_bookit\local\persistent\blocker;
+
+defined('MOODLE_INTERNAL') || die;
+
+require_once($CFG->libdir . "/externallib.php");
+
+/**
+ * External API for deleting a blocker.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class delete_blocker extends external_api {
+    /**
+     * Description for delete_blocker parameters.
+     * @return external_function_parameters
+     */
+    public static function execute_parameters(): external_function_parameters {
+        return new external_function_parameters([
+            'blockerid' => new external_value(PARAM_INT),
+        ]);
+    }
+
+    /**
+     * Execution for delete_blocker external api.
+     * @param int $blockerid
+     * @return array
+     */
+    public static function execute(int $blockerid): array {
+        [
+            'blockerid' => $blockerid,
+        ] = self::validate_parameters(self::execute_parameters(), [
+            'blockerid' => $blockerid,
+        ]);
+        $context = \context_system::instance();
+        self::validate_context($context);
+        require_admin();
+
+        $blocker = blocker::get_record(['id' => $blockerid], MUST_EXIST);
+        $blocker->delete();
+
+        return [];
+    }
+
+    /**
+     * Description of delete_blocker return value.
+     * @return external_single_structure
+     */
+    public static function execute_returns(): external_single_structure {
+        return new external_single_structure([]);
+    }
+}
diff --git a/classes/external/get_possible_starttimes.php b/classes/external/get_possible_starttimes.php
new file mode 100644
index 0000000..de06fbf
--- /dev/null
+++ b/classes/external/get_possible_starttimes.php
@@ -0,0 +1,176 @@
+<?php
+// This file is part of Moodle - https://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
+
+/**
+ * External API for deleting a blocker.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\external;
+
+use core_external\external_api;
+use core_external\external_function_parameters;
+use core_external\external_multiple_structure;
+use core_external\external_single_structure;
+use core_external\external_value;
+use DateTime;
+use mod_bookit\local\bool_timeline;
+use mod_bookit\local\manager\event_manager;
+use mod_bookit\local\manager\weekplan_manager;
+use mod_bookit\local\persistent\blocker;
+use mod_bookit\local\persistent\room;
+use mod_bookit\local\persistent\weekplan_room;
+
+defined('MOODLE_INTERNAL') || die;
+
+require_once($CFG->libdir . "/externallib.php");
+
+/**
+ * External API for getting possible slots.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class get_possible_starttimes extends external_api {
+    /**
+     * Description for get_possible_slots parameters.
+     * @return external_function_parameters
+     */
+    public static function execute_parameters(): external_function_parameters {
+        return new external_function_parameters([
+            'year' => new external_value(PARAM_INT),
+            'month' => new external_value(PARAM_INT),
+            'day' => new external_value(PARAM_INT),
+            'duration' => new external_value(PARAM_INT),
+            'roomid' => new external_value(PARAM_INT),
+        ]);
+    }
+
+    /**
+     * Lists all possible starttimes for that day, duration and room.
+     * @param DateTime $date
+     * @param int $duration
+     * @param int $roomid
+     * @return array Associative array of [Timestamp => Time string].
+     */
+    public static function list_possible_starttimes(DateTime $date, int $duration, int $roomid): array {
+        $room = room::get_record(['id' => $roomid], MUST_EXIST);
+
+        $timestamp = $date->getTimestamp();
+
+        $weekplanid = weekplan_room::get_applicable_weekplanid($timestamp, $roomid);
+        if (!$weekplanid || !$room->get('active')) {
+            return [];
+        }
+
+        // String 'N' gets 1 for Monday through 7 for Sunday.
+        $weekday = (int) $date->format('N') - 1;
+        $weekstarttime = $timestamp - weekplan_manager::SECONDS_PER_DAY * $weekday;
+        $slots = weekplan_manager::get_weekplanslots_for_weekday($weekplanid, $weekday);
+        $blockers = blocker::get_blockers_for_room($roomid, $timestamp, $timestamp + weekplan_manager::SECONDS_PER_DAY);
+
+        $timeline = new bool_timeline(false);
+
+        foreach ($slots as $slot) {
+            $slot->starttime = event_manager::place_weekly_time_into_week($slot->starttime, $weekstarttime);
+            $slot->endtime = event_manager::place_weekly_time_into_week($slot->endtime, $weekstarttime);
+            $timeline->set_range($slot->starttime, $slot->endtime, true);
+        }
+
+        foreach ($blockers as $blocker) {
+            $timeline->set_range($blocker->get('starttime'), $blocker->get('endtime'), false);
+        }
+
+        $starttimes = [];
+        $freemodegrid = get_config('mod_bookit', 'eventstartstepwidth') * 60;
+
+        foreach ($slots as $slot) {
+            if ($room->get('roommode') == room::MODE_FREE) {
+                $offset = $slot->starttime % $freemodegrid;
+                if ($offset != 0) {
+                    $slot->starttime += $freemodegrid - $offset;
+                }
+                for ($time = $slot->starttime; $time <= $slot->endtime; $time += $freemodegrid) {
+                    if ($timeline->does_complete_range_equal($time, $time + $duration * 60, true)) {
+                        $starttimes[$time] = (new DateTime())->setTimestamp($time)->format("H:i");
+                    }
+                }
+            } else {
+                if ($timeline->does_complete_range_equal($slot->starttime, $slot->starttime + $duration * 60, true)) {
+                    $starttimes[$slot->starttime] = (new DateTime())->setTimestamp($slot->starttime)->format("H:i");
+                }
+            }
+        }
+
+        return $starttimes;
+    }
+
+    /**
+     * Execution for get_possible_slots external api.
+     * @param int $blockerid
+     * @return array
+     */
+    public static function execute(int $year, int $month, int $day, int $duration, int $roomid): array {
+        [
+            'year' => $year,
+            'month' => $month,
+            'day' => $day,
+            'duration' => $duration,
+            'roomid' => $roomid,
+        ] = self::validate_parameters(self::execute_parameters(), [
+            'year' => $year,
+            'month' => $month,
+            'day' => $day,
+            'duration' => $duration,
+            'roomid' => $roomid,
+        ]);
+        $context = \context_system::instance();
+        self::validate_context($context);
+        require_capability('mod/bookit:addevent', $context);
+
+        $date = new \DateTime("now");
+        $date->setTime(0, 0);
+        $date->setDate($year, $month, $day);
+
+        $starttimes = self::list_possible_starttimes($date, $duration, $roomid);
+        $transformed = [];
+
+        foreach ($starttimes as $starttime => $starttimestring) {
+            $transformed[] = [
+                "timestamp" => $starttime,
+                "string" => $starttimestring,
+            ];
+        }
+
+        return $transformed;
+    }
+
+    /**
+     * Description of get_possible_slots return value.
+     * @return external_multiple_structure
+     */
+    public static function execute_returns(): external_multiple_structure {
+        return new external_multiple_structure(
+            new external_single_structure([
+                'timestamp' => new external_value(PARAM_INT),
+                'string' => new external_value(PARAM_TEXT),
+            ]),
+        );
+    }
+}
diff --git a/classes/form/edit_event_form.php b/classes/form/edit_event_form.php
index 5b84ce7..02969fe 100644
--- a/classes/form/edit_event_form.php
+++ b/classes/form/edit_event_form.php
@@ -29,10 +29,12 @@ use core\context;
 use core\context\module;
 use core\exception\moodle_exception;
 use core_form\dynamic_form;
+use mod_bookit\external\get_possible_starttimes;
 use mod_bookit\local\entity\bookit_event;
-use mod_bookit\local\manager\categories_manager;
 use mod_bookit\local\manager\event_manager;
 use mod_bookit\local\manager\resource_manager;
+use mod_bookit\local\persistent\institution;
+use mod_bookit\local\persistent\room;
 use moodle_url;
 use stdClass;
 
@@ -50,6 +52,9 @@ class edit_event_form extends dynamic_form {
      */
     public const BOOKINGSTATUS_NEW = 0;
 
+    /** @var bookit_event|null An event, if an existing one is getting edited. */
+    private $event = null;
+
     /**
      * Define the form
      */
@@ -70,9 +75,6 @@ class edit_event_form extends dynamic_form {
         $course = get_course_and_cm_from_cmid($cmid);
         $contextcourse = context_course::instance($course[0]->id);
 
-        // ...@TODO: remove debug output field.
-        // $mform->addElement('static', 'dummy', "<pre>".print_r(usertimezone(), true)."</pre>");
-
         // Set hidden field course module id.
         $mform->addElement('hidden', 'cmid');
         $mform->setType('cmid', PARAM_INT);
@@ -100,12 +102,11 @@ class edit_event_form extends dynamic_form {
         $mform->addHelpButton('name', 'event_name', 'mod_bookit');
 
         // Semester.
-        $currentyear = date('Y');
+        $currentyear = (int) date('Y');
         // Generate semesters dynamically.
         $semesters = [];
         // ...@TODO: Make range of semester terms an admin option.
         for ($i = -1; $i < 2; $i++) {
-
             $semesters[($currentyear + $i) * 10 + 1] = get_string('summer_semester', 'mod_bookit') . " " . ($currentyear + $i);
             $semesters[($currentyear + $i) * 10 + 2] = get_string('winter_semester', 'mod_bookit') . " " . ($currentyear + $i);
         }
@@ -114,61 +115,26 @@ class edit_event_form extends dynamic_form {
         $mform->addRule('semester', null, 'required', null, 'client');
         $mform->addHelpButton('semester', 'select_semester', 'mod_bookit');
 
-        // Add the "department" field.
-        $mform->addElement('text', 'department', get_string('event_department', 'mod_bookit'), ['size' => '64']);
-        $mform->disabledIf('department', 'editevent', 'neq');
-        $mform->setType('department', PARAM_TEXT);
-        $mform->addRule('department', null, 'required', null, 'client');
-        $mform->addRule('department', null, 'maxlength', 255, 'client');
-        $mform->addHelpButton('department', 'event_department', 'mod_bookit');
-
-        // Add the "room" field.
-        $rooms = [];
-        foreach ($catresourceslist as $category => $value) {
-            if ($category === 'Rooms') {
-                foreach ($value['resources'] as $rid => $catresource) {
-                    $rooms[$rid] = $catresource['name'];
-                }
-            }
+        // Add the "institutionid" field.
+        $institutions = institution::get_records(['active' => true]);
+        $institutionoptions = [];
+        foreach ($institutions as $institution) {
+            $institutionoptions[$institution->get('id')] = $institution->get('name');
         }
-        $mform->addElement('select', 'room', get_string('event_room', 'mod_bookit'), $rooms);
-        $mform->disabledIf('room', 'editevent', 'neq');
-        $mform->addHelpButton('room', 'event_room', 'mod_bookit');
-
-        // Add the "bookingtimes" fields.
-        $startdate = $this->optional_param('startdate', null, PARAM_TEXT);
-        $curdate = new \DateTimeImmutable('+ 1 hour');
-        $starttimearray = [
-                'defaulttime' => ($startdate ? strtotime($startdate) : $curdate->getTimestamp()),
-                'step' => 15, // Step to increment minutes by.
-                'optional' => false, // Setting 'optional' to true adds an 'enable' checkbox to the selector.
-        ];
-        // Set time restrictions based on "editinternal" capability.
-        if ($caneditinternal) {
-            $starttimearray['startyear'] = $config->eventminyears;
-        } else {
-            $starttimearray['startyear'] = date("Y");
-
+        $mform->addElement('select', 'institutionid', get_string('event_department', 'mod_bookit'), $institutionoptions);
+        $mform->addRule('institutionid', null, 'required', null, 'client');
+        $mform->addHelpButton('institutionid', 'event_department', 'mod_bookit');
+
+        // Add the "roomid" field.
+        $rooms = room::get_records(['active' => true]);
+        $roomoptions = [];
+        foreach ($rooms as $room) {
+            $roomoptions[$room->get('id')] = $room->get('name');
         }
-        $starttimearray['stopyear'] = $config->eventmaxyears;
 
-        // Closure function to check that no date in the past is selected.
-        $checkmindate = function($val) use ($curdate) {
-            $checkdate = mktime($val['hour'], $val['minute'], '00', $val['month'], $val['day'], $val['year']);
-            if ($checkdate < $curdate->getTimestamp()) {
-                return false;
-            }
-            return true;
-        };
-
-        $mform->addElement('date_time_selector', 'starttime', get_string('event_start', 'mod_bookit'), $starttimearray);
-        $mform->disabledIf('starttime', 'editevent', 'neq');
-        $mform->addRule('starttime', null, 'required', null, 'client');
-        if (!$caneditinternal) {
-            $mform->addRule('starttime', get_string('event_error_mintime', 'mod_bookit'), 'callback', $checkmindate, 'server',
-                    false, true);
-        }
-        $mform->addHelpButton('starttime', 'event_start', 'mod_bookit');
+        $mform->addElement('select', 'roomid', get_string('event_room', 'mod_bookit'), $roomoptions);
+        $mform->disabledIf('roomid', 'editevent', 'neq');
+        $mform->addHelpButton('roomid', 'event_room', 'mod_bookit');
 
         // Add the "duration" field.
         $duration = [];
@@ -184,6 +150,25 @@ class edit_event_form extends dynamic_form {
         $mform->disabledIf('duration', 'editevent', 'neq');
         $mform->addHelpButton('duration', 'event_duration', 'mod_bookit');
 
+        // Add the "bookingtimes" fields.
+        $starttimearray = [
+                'optional' => false, // Setting 'optional' to true adds an 'enable' checkbox to the selector.
+        ];
+        // Set time restrictions based on "editinternal" capability.
+        if ($caneditinternal) {
+            $starttimearray['startyear'] = $config->eventminyears;
+        } else {
+            $starttimearray['startyear'] = date("Y");
+
+        }
+        $starttimearray['stopyear'] = $config->eventmaxyears;
+
+        $mform->addElement('date_selector', 'startdate', get_string('event_start', 'mod_bookit'), $starttimearray);
+        $mform->addRule('startdate', null, 'required', null, 'client');
+        $mform->addHelpButton('startdate', 'event_start', 'mod_bookit');
+
+        $mform->addElement('select', 'starttime');
+
         // Add a static field to explain extra time.
         $mform->addElement('static', 'extratime_label', get_string('event_extratime_label', 'mod_bookit'),
                 get_string('event_extratime_description', 'mod_bookit', $config->extratime));
@@ -345,6 +330,36 @@ class edit_event_form extends dynamic_form {
                         false);
             }
         }
+
+        $timeclicked = $this->optional_param('timeclicked', null, PARAM_TEXT);
+        if ($timeclicked) {
+            $timeclicked = new \DateTimeImmutable($timeclicked);
+            $timeclickedstamp = $timeclicked->getTimestamp();
+            $startdate = $timeclicked->setTime(0, 0);
+            $this->_form->setDefault('startdate', $timeclicked->getTimestamp());
+
+            $possiblestarttimes = get_possible_starttimes::list_possible_starttimes(
+                \DateTime::createFromImmutable($startdate),
+                $eventdefaultduration,
+                array_key_first($roomoptions),
+            );
+
+            $smallestdiff = 1e9;
+            $selectedtime = null;
+
+            foreach ($possiblestarttimes as $possiblestarttime => $str) {
+                if (abs($possiblestarttime - $timeclickedstamp) < $smallestdiff) {
+                    $smallestdiff = abs($possiblestarttime - $timeclickedstamp);
+                    $selectedtime = $possiblestarttime;
+                }
+            }
+
+            /** @var \MoodleQuickForm_select $starttimeel */
+            $starttimeel = $mform->getElement('starttime');
+            $starttimeel->removeOptions();
+            $starttimeel->loadArray($possiblestarttimes);
+            $mform->setDefault('starttime', $selectedtime);
+        }
     }
 
     /**
@@ -356,6 +371,7 @@ class edit_event_form extends dynamic_form {
     public function definition_after_data() {
         global $DB, $USER;
         $mform =& $this->_form;
+        $data = $this->get_submitted_data() ?? $this->event;
 
         $context = $this->get_context_for_dynamic_submission();
         $id = $this->_form->getElementValue('id');
@@ -368,7 +384,7 @@ class edit_event_form extends dynamic_form {
         // Show the user who created the entry.
         $user = $DB->get_record('user', ['id' => $usermodified]);
         $mform->getElement('usermodified')->setValue(
-                fullname($user, has_capability('moodle/site:viewfullnames', $context)) // ...@TODO: ???
+                fullname($user, has_capability('moodle/site:viewfullnames', $context)) // TODO: ???
         );
 
         // Get context and capabilities.
@@ -388,6 +404,15 @@ class edit_event_form extends dynamic_form {
         $e2 = $this->_form->createElement('hidden', 'editinternal', $caneditinternal);
         $this->_form->setType('editinternal', PARAM_BOOL);
         $mform->insertElementBefore($e2, 'name');
+
+        if ($data) {
+            /** @var \MoodleQuickForm_select $starttimeel */
+            $starttimeel = $mform->getElement('starttime');
+            $starttimeel->removeOptions();
+            $starttimeel->loadArray(get_possible_starttimes::list_possible_starttimes(
+                (new \DateTime())->setTimestamp($data->startdate), $data->duration, $data->roomid
+            ));
+        }
     }
 
     /**
@@ -398,6 +423,10 @@ class edit_event_form extends dynamic_form {
         $id = $this->optional_param('id', null, PARAM_INT);
         if (!empty($id)) {
             $event = event_manager::get_event($id);
+            $date = (new \DateTime())->setTimestamp($event->starttime);
+            $date->setTime(0, 0);
+            $event->startdate = $date->getTimestamp();
+            $this->event = $event;
         }
         $event->cmid = $this->optional_param('cmid', null, PARAM_INT);
 
@@ -418,7 +447,7 @@ class edit_event_form extends dynamic_form {
      * Checks if current user has access to this form, otherwise throws exception
      */
     protected function check_access_for_dynamic_submission(): void {
-        // ...@TODO.
+        // TODO.
     }
 
     /**
diff --git a/classes/local/bool_timeline.php b/classes/local/bool_timeline.php
new file mode 100644
index 0000000..921b31c
--- /dev/null
+++ b/classes/local/bool_timeline.php
@@ -0,0 +1,180 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Data structure for a timeline.
+ *
+ * @package    mod_bookit
+ * @copyright  2022 Justus Dieckmann University of Mnster
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local;
+/**
+ * A data structure to save and edit values over ranges of time.
+ *
+ * @package    mod_bookit
+ * @copyright  2022 Justus Dieckmann University of Mnster
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class bool_timeline {
+    /**
+     * @var array[] Array of pairs [time, value]. Every value is valid from the specified time until the next value
+     * is defined.
+     */
+    private array $array;
+
+    /**
+     * Creates a timeline.
+     * @param bool $initvalue Every timestamp starts initialized with this value
+     */
+    public function __construct($initvalue) {
+        $this->array = [[PHP_INT_MIN, $initvalue]];
+    }
+    /**
+     * Set $value at $time.
+     * @param int $time
+     * @param bool $value
+     * @return int index where the time can be found.
+     */
+    public function set(int $time, $value): int {
+        $index = $this->get_index_for($time);
+        if ($this->array[$index][1] === $value) {
+            return $index;
+        }
+        if ($this->array[$index][0] === $time) {
+            $this->array[$index][1] = $value;
+            return $index;
+        } else {
+            array_splice($this->array, $index + 1, 0, [[$time, $value]]);
+            return $index + 1;
+        }
+    }
+
+    /**
+     * Set $value at the specified $index.
+     * @param int $index
+     * @param bool $value
+     */
+    public function set_at_index(int $index, $value): void {
+        $this->array[$index][1] = $value;
+    }
+
+    /**
+     * Get the index for the specified $time.
+     * @param int $time timestamp
+     * @return int index
+     */
+    public function get_index_for(int $time): int {
+        $min = 0;
+        $max = count($this->array) - 1;
+        while ($min < $max) {
+            $i = (int) ceil(($min + $max) / 2);
+            $v = $this->array[$i][0];
+            if ($time === $v) {
+                return $i;
+            } else if ($time > $v) {
+                $min = $i;
+            } else {
+                $max = $i - 1;
+            }
+        }
+        return $min;
+    }
+
+    /**
+     * Get the value at the specified $index.
+     * @param int $index
+     * @return bool value
+     */
+    public function get_value_at_index(int $index) {
+        return $this->array[$index][1];
+    }
+
+    /**
+     * Set the $value for the specified range.
+     * @param int $starttime timestamp, inclusive
+     * @param int $endtime timestamp, exclusive
+     * @param mixed $value value
+     */
+    public function set_range(int $starttime, int $endtime, $value): void {
+        if ($starttime >= $endtime) {
+            return;
+        }
+        $oldstartindex = $this->get_index_for($starttime);
+        $startvalue = $this->get_value_at_index($oldstartindex);
+        $endindex = $this->get_index_for($endtime);
+        $endvalue = $this->get_value_at_index($endindex);
+        if ($startvalue === $value) {
+            // Current value at $starttime already equals $value.
+            $startindex = $oldstartindex;
+        } else {
+            $startindex = $this->set($starttime, $value);
+        }
+        // Update endindex, because start time was inserted.
+        $endindex += $startindex - $oldstartindex;
+
+        for ($i = $startindex + 1; $i < $endindex; $i++) {
+            $this->set_at_index($i, $value);
+        }
+        $this->set($endtime, $endvalue);
+        $this->normalize_index_range(max($startindex - 1, 0), min($endindex + 1, count($this->array) - 1));
+    }
+
+    /**
+     * Returns whether the complete time range equals $value.
+     * @param int $starttime timestamp, inclusive
+     * @param int $endtime timestamp, exclusive
+     * @param $value
+     * @return bool
+     */
+    public function does_complete_range_equal(int $starttime, int $endtime, $value): bool {
+        $startindex = $this->get_index_for($starttime);
+        $endindex = $this->get_index_for($endtime - 1);
+        for ($i = $startindex; $i <= $endindex; $i++) {
+            if ($this->get_value_at_index($i) !== $value) {
+                return false;
+            }
+        }
+        return true;
+    }
+
+    /**
+     * "Normalizes" the array in the specified range, meaning duplicate entries get removed.
+     * @param $startindex
+     * @param $endindex
+     */
+    private function normalize_index_range($startindex, $endindex) {
+        $deletedamount = 0;
+        for ($i = $startindex; $i < $endindex; $i++) {
+            if ($this->array[$i - $deletedamount][1] === $this->array[$i - $deletedamount + 1][1]) {
+                array_splice($this->array, $i - $deletedamount + 1, 1);
+                $deletedamount++;
+            }
+        }
+    }
+
+    /**
+     * Returns timeline as array.
+     * @return array
+     */
+    public function export(): array {
+        $obj = [];
+        foreach ($this->array as $k => $v) {
+            $obj[$k] = $v;
+        }
+        return $obj;
+    }
+}
diff --git a/classes/local/entity/bookit_event.php b/classes/local/entity/bookit_event.php
index 1c9bf39..4cf1b9f 100644
--- a/classes/local/entity/bookit_event.php
+++ b/classes/local/entity/bookit_event.php
@@ -41,7 +41,7 @@ class bookit_event {
      * @param int $id
      * @param string $name
      * @param string|null $semester
-     * @param string $department
+     * @param string $institutionid
      * @param int $starttime
      * @param int $endtime
      * @param int|null $duration
@@ -68,8 +68,10 @@ class bookit_event {
         public string $name,
         /** @var ?string semester */
         public ?string $semester,
-        /** @var string department */
-        public string $department,
+        /** @var int institutionid */
+        public int $institutionid,
+        /** @var int roomid */
+        public int $roomid,
         /** @var int starttime */
         public int $starttime,
         /** @var int endtime */
@@ -143,7 +145,8 @@ class bookit_event {
                 $record->id ?? null,
                 $record->name,
                 $record->semester,
-                $record->department,
+                $record->institutionid,
+                $record->roomid,
                 $record->starttime,
                 $record->endtime,
                 $record->duration,
diff --git a/classes/local/form/edit_blocker_form.php b/classes/local/form/edit_blocker_form.php
new file mode 100644
index 0000000..da6247f
--- /dev/null
+++ b/classes/local/form/edit_blocker_form.php
@@ -0,0 +1,149 @@
+<?php
+// This file is part of Moodle - https://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
+
+/**
+ * Form for creating and editing a blocker.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann RUB
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+namespace mod_bookit\local\form;
+
+use core\context;
+use core_form\dynamic_form;
+use mod_bookit\local\persistent\blocker;
+use mod_bookit\local\persistent\room;
+use moodle_url;
+
+/**
+ * Form for creating and editing a blocker.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann RUB
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class edit_blocker_form extends dynamic_form {
+    /**
+     * Define the form
+     */
+    public function definition(): void {
+        $mform =& $this->_form;
+
+        $mform->addElement('hidden', 'id');
+        $mform->setType('id', PARAM_INT);
+
+        $mform->addElement('text', 'name', get_string('name'));
+        $mform->setType('name', PARAM_TEXT);
+
+        $rooms = room::get_records();
+        $options = [0 => get_string('globally', 'mod_bookit')];
+        foreach ($rooms as $room) {
+            $options[$room->get('id')] = $room->get('name');
+        }
+        $mform->addElement('select', 'roomid', get_string('room', 'mod_bookit'), $options);
+
+        $mform->addElement('date_time_selector', 'starttime', get_string('start', 'mod_bookit'));
+        $mform->setType('starttime', PARAM_TEXT);
+
+        $mform->addElement('date_time_selector', 'endtime', get_string('end', 'mod_bookit'));
+        $mform->setType('endtime', PARAM_TEXT);
+    }
+
+    /**
+     * Extra validation.
+     * @param array $data
+     * @param array $files
+     * @return array
+     */
+    public function validation($data, $files) {
+        $errors = [];
+        if ($data['endtime'] < $data['starttime']) {
+            $errors['endtime'] = get_string('end_before_start', 'mod_bookit');
+        }
+        return $errors;
+    }
+
+    /**
+     * Load in existing data as form defaults
+     */
+    public function set_data_for_dynamic_submission(): void {
+        $id = $this->optional_param('id', null, PARAM_INT);
+        $blocker = new blocker($id);
+        if ($id) {
+            $this->set_data([
+                'id' => $blocker->get('id'),
+                'name' => $blocker->get('name'),
+                'roomid' => $blocker->get('roomid'),
+                'starttime' => $blocker->get('starttime'),
+                'endtime' => $blocker->get('endtime'),
+            ]);
+        } else {
+            $startdate = $this->optional_param('startdate', null, PARAM_TEXT);
+            if ($startdate) {
+                $this->set_data([
+                    'starttime' => strtotime($startdate),
+                    'endtime' => strtotime($startdate) + 60 * 60,
+                ]);
+            }
+        }
+    }
+
+    /**
+     * Returns context where this form is used
+     *
+     * @return context
+     */
+    protected function get_context_for_dynamic_submission(): context {
+        return \context_system::instance();
+    }
+
+    /**
+     * Checks if current user has access to this form, otherwise throws exception
+     */
+    protected function check_access_for_dynamic_submission(): void {
+        require_admin();
+    }
+
+    /**
+     * Process the form submission, used if form was submitted via AJAX
+     *
+     * @return array empty.
+     */
+    public function process_dynamic_submission(): array {
+        if ($formdata = $this->get_data()) {
+            // Set roomid to null if it is falsy (0).
+            $formdata->roomid = $formdata->roomid ?: null;
+
+            $blocker = new blocker($formdata->id ?? 0, $formdata);
+            $blocker->save();
+        }
+
+        return [];
+    }
+
+    /**
+     * Returns url to set in $PAGE->set_url() when form is being rendered or submitted via AJAX.
+     */
+    protected function get_page_url_for_dynamic_submission(): moodle_url {
+        $params = [
+                'id' => $this->optional_param('id', null, PARAM_INT),
+                'cmid' => $this->optional_param('cmid', null, PARAM_INT),
+        ];
+        return new moodle_url('/mod/bookit/view.php', $params);
+    }
+}
diff --git a/classes/local/form/edit_institution_form.php b/classes/local/form/edit_institution_form.php
new file mode 100644
index 0000000..61f1132
--- /dev/null
+++ b/classes/local/form/edit_institution_form.php
@@ -0,0 +1,73 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * A moodle form for institutions.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\form;
+
+defined('MOODLE_INTERNAL') || die();
+
+global $CFG;
+require_once($CFG->libdir . '/formslib.php');
+
+/**
+ * A moodle form for institutions.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class edit_institution_form extends \core\form\persistent {
+    /** @var string The related persistent class. */
+    protected static $persistentclass = 'mod_bookit\\local\\persistent\\institution';
+
+    /**
+     * Defines forms elements
+     */
+    public function definition() {
+        $mform = $this->_form;
+
+        $mform->addElement('text', 'name', get_string('institution_name', 'mod_bookit'));
+
+        $mform->addElement('textarea', 'internalnotes', get_string('internalnotes', 'mod_bookit'));
+        $mform->addHelpButton('internalnotes', 'internalnotes', 'mod_bookit');
+
+        $mform->addElement('checkbox', 'active', get_string('institution_active', 'mod_bookit'));
+        $mform->addHelpButton('active', 'institution_active', 'mod_bookit');
+
+        $this->add_action_buttons();
+    }
+
+    /**
+     * Return submitted data if properly submitted or returns NULL if validation fails or
+     * if there is no submitted data.
+     *
+     * @return \stdClass|null submitted data; NULL if not valid or not submitted or cancelled
+     */
+    public function get_data() {
+        $data = parent::get_data();
+        if ($data) {
+            // Unchecked checkboxes are not set at all by default.
+            $data->active = $data->active ?? false;
+        }
+        return $data;
+    }
+}
diff --git a/classes/local/form/edit_room_form.php b/classes/local/form/edit_room_form.php
new file mode 100644
index 0000000..6a9813f
--- /dev/null
+++ b/classes/local/form/edit_room_form.php
@@ -0,0 +1,74 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * A moodle form for rooms.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\form;
+
+use mod_bookit\local\formelement\colorpicker;
+use mod_bookit\local\formelement\colorpicker_rule;
+
+defined('MOODLE_INTERNAL') || die();
+
+global $CFG;
+require_once($CFG->libdir . '/formslib.php');
+
+/**
+ * A moodle form for rooms.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class edit_room_form extends \core\form\persistent {
+    /** @var string The related persistent class. */
+    protected static $persistentclass = 'mod_bookit\\local\\persistent\\room';
+
+    /**
+     * Defines forms elements
+     */
+    public function definition() {
+        $mform = $this->_form;
+
+        $mform->addElement('text', 'name', get_string('name'));
+        $mform->addRule('name', get_string('required'), 'required');
+
+        $mform->addElement('text', 'seats', get_string('seats', 'mod_bookit'));
+        $mform->addRule('seats', get_string('required'), 'required');
+        $mform->addRule('seats', get_string('err_numeric', 'form'), 'numeric', null, 'client');
+
+        $mform->addElement('textarea', 'description', get_string('description'));
+
+        colorpicker::register();
+        colorpicker_rule::register();
+        $mform->addElement('mod_bookit_colorpicker', 'eventcolor', get_string('color', 'mod_bookit'));
+        $mform->addRule('eventcolor', get_string('validateerror', 'admin'), 'mod_bookit_colorpicker_rule');
+
+        $mform->addElement('checkbox', 'active', get_string('room_active', 'mod_bookit'));
+
+        $mform->addElement('select', 'roommode', get_string('roommode', 'mod_bookit'), [
+            0 => get_string('roommode_free', 'mod_bookit'),
+            1 => get_string('roommode_slots', 'mod_bookit'),
+        ]);
+
+        $this->add_action_buttons();
+    }
+}
diff --git a/classes/local/form/edit_weekplan_form.php b/classes/local/form/edit_weekplan_form.php
new file mode 100644
index 0000000..429d3b7
--- /dev/null
+++ b/classes/local/form/edit_weekplan_form.php
@@ -0,0 +1,56 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * A moodle form for weekplans.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+namespace mod_bookit\local\form;
+
+defined('MOODLE_INTERNAL') || die();
+
+global $CFG;
+require_once($CFG->libdir . '/formslib.php');
+
+/**
+ * A moodle form for weekplans.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class edit_weekplan_form extends \moodleform {
+    /**
+     * Defines forms elements
+     */
+    public function definition() {
+        $mform = $this->_form;
+
+        $mform->addElement('text', 'name', get_string('name'));
+        $mform->setType('name', PARAM_TEXT);
+
+        $mform->addElement('textarea', 'weekplan', get_string('weekplan', 'mod_bookit'), [
+            'rows' => 7
+        ]);
+        $mform->addHelpButton('weekplan', 'weekplan', 'mod_bookit');
+
+        $this->add_action_buttons();
+    }
+}
diff --git a/classes/local/form/edit_weekplan_room_form.php b/classes/local/form/edit_weekplan_room_form.php
new file mode 100644
index 0000000..bd55d08
--- /dev/null
+++ b/classes/local/form/edit_weekplan_room_form.php
@@ -0,0 +1,93 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * A moodle form for weekplan assignments to rooms.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+namespace mod_bookit\local\form;
+
+use core\form\persistent;
+use mod_bookit\local\persistent\weekplan;
+use mod_bookit\local\persistent\weekplan_room;
+
+defined('MOODLE_INTERNAL') || die();
+
+global $CFG;
+require_once($CFG->libdir . '/formslib.php');
+
+/**
+ * A moodle form for weekplan assignments to rooms.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class edit_weekplan_room_form extends persistent {
+    /** @var string The related persistent class. */
+    protected static $persistentclass = 'mod_bookit\local\persistent\weekplan_room';
+
+    /**
+     * Defines forms elements
+     */
+    public function definition() {
+        $mform = $this->_form;
+
+        $mform->addElement('hidden', 'roomid');
+        $mform->setType('roomid', PARAM_INT);
+        $mform->setConstant('roomid', $this->_customdata['room']->get('id'));
+
+        $weekplans = weekplan::get_records();
+        $options = [];
+        foreach ($weekplans as $weekplan) {
+            $options[$weekplan->get('id')] = $weekplan->get('name');
+        }
+
+        $mform->addElement(
+            'select',
+            'weekplanid',
+            get_string('weekplan', 'mod_bookit'),
+            $options,
+        );
+
+        $mform->addElement('date_selector', 'starttime', get_string('start_of_period', 'mod_bookit'));
+
+        $mform->addElement('date_selector', 'endtime', get_string('end_of_period', 'mod_bookit'));
+
+        $this->add_action_buttons();
+    }
+
+    /**
+     * Extra validation for persistent form.
+     * @param $data
+     * @param $files
+     * @param array $errors
+     */
+    protected function extra_validation($data, $files, array &$errors) {
+        if ($data->endtime < $data->starttime) {
+            $errors['endtime'] = get_string('end_before_start', 'mod_bookit');
+        }
+
+        $collision = (new weekplan_room($this->get_persistent()?->get('id') ?? 0, $data))->check_for_collision();
+        if ($collision) {
+            $errors['endtime'] = get_string('weekplan_assignment_overlaps', 'mod_bookit');
+        }
+    }
+}
diff --git a/classes/local/formelement/colorpicker.php b/classes/local/formelement/colorpicker.php
new file mode 100644
index 0000000..3830c08
--- /dev/null
+++ b/classes/local/formelement/colorpicker.php
@@ -0,0 +1,114 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Form element for color picker, copied from boost union.
+ *
+ * @package    mod_bookit
+ * @copyright  2023 bdecent GmbH <https://bdecent.de>
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+namespace mod_bookit\local\formelement;
+
+use MoodleQuickForm_text;
+use renderer_base;
+
+defined('MOODLE_INTERNAL') || die();
+
+require_once($CFG->dirroot . '/lib/form/templatable_form_element.php');
+require_once($CFG->dirroot . '/lib/form/text.php');
+
+/**
+ * Form element for color picker, copied from boost union.
+ *
+ * @package    mod_bookit
+ * @copyright  2023 bdecent GmbH <https://bdecent.de>
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class colorpicker extends MoodleQuickForm_text implements \core\output\templatable {
+    use \templatable_form_element {
+        export_for_template as export_for_template_base;
+    }
+
+    /**
+     * Registers the element.
+     */
+    public static function register(): void {
+        global $CFG;
+
+        \MoodleQuickForm::registerElementType(
+            'mod_bookit_colorpicker',
+            $CFG->dirroot . '/mod/bookit/classes/local/formelement/colorpicker.php',
+            '\mod_bookit\local\formelement\colorpicker'
+        );
+    }
+
+    /**
+     * Constructor.
+     *
+     * @param string $elementname (optional) Name of the text field.
+     * @param string $elementlabel (optional) Text field label.
+     * @param string $attributes (optional) Either a typical HTML attribute string or an associative array.
+     */
+    public function __construct($elementname = null, $elementlabel = null, $attributes = null) {
+        parent::__construct($elementname, $elementlabel, $attributes);
+        $this->setType('text');
+
+        // Add a CSS class for styling the color picker.
+        $class = $this->getAttribute('class');
+        if (empty($class)) {
+            $class = '';
+        }
+        $this->updateAttributes(['class' => $class . ' mod_bookit-form-color-picker ']);
+    }
+
+    /**
+     * Export for template.
+     *
+     * @param renderer_base $output
+     * @return array|\stdClass
+     */
+    public function export_for_template(renderer_base $output) {
+        global $PAGE;
+
+        // Compose template context for the mform element.
+        $context = $this->export_for_template_base($output);
+
+        // Build loading icon.
+        $icon = new \core\output\pix_icon('i/loading', get_string('loading', 'admin'), 'moodle', ['class' => 'loadingicon']);
+        $icondata = $icon->export_for_template($output);
+        $iconoutput = $output->render_from_template('core/pix_icon', $icondata);
+
+        // Get ID of the element.
+        $id = $this->getAttribute('id');
+
+        // Add JS to append the color picker div before the element and initiate the color picker utility method.
+        $PAGE->requires->js_amd_inline("
+            var element = document.getElementById('$id');
+            var pickerDiv = document.createElement('div');
+            pickerDiv.classList.add('admin_colourpicker', 'clearfix');
+            pickerDiv.innerHTML = '$iconoutput'; // Add loading icon.
+            element.parentNode.prepend(pickerDiv);
+            element.parentNode.style.flexDirection = 'column'; // Helps to align the config text.
+
+            // Init color picker utility.
+            M.util.init_colour_picker(Y, '$id');
+        ");
+
+        return $context;
+    }
+}
diff --git a/classes/local/formelement/colorpicker_rule.php b/classes/local/formelement/colorpicker_rule.php
new file mode 100644
index 0000000..f2b5196
--- /dev/null
+++ b/classes/local/formelement/colorpicker_rule.php
@@ -0,0 +1,122 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Validation rule for color picker, directly copied from boost union.
+ *
+ * This class is copied and modified from admin_setting_configcolourpicker in /lib/adminlib.php.
+ *
+ * @package   mod_bookit
+ * @copyright 2023 Mario Wehr <m.wehr@fh-kaernten.at>
+ *            based on code 2010 by Sam Hemelryk
+ * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+namespace mod_bookit\local\formelement;
+
+use HTML_QuickForm_Rule;
+
+/**
+ * Validation rule for color picker, directly copied from boost union.
+ *
+ * This class is copied and modified from admin_setting_configcolourpicker in /lib/adminlib.php.
+ *
+ * @package   mod_bookit
+ * @copyright 2023 Mario Wehr <m.wehr@fh-kaernten.at>
+ *            based on code 2010 by Sam Hemelryk
+ * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class colorpicker_rule extends HTML_QuickForm_Rule {
+    /**
+     * Registers the rule.
+     */
+    public static function register(): void {
+        global $CFG;
+
+        \MoodleQuickForm::registerRule(
+            'mod_bookit_colorpicker_rule',
+            null,
+            '\mod_bookit\local\formelement\colorpicker_rule',
+            $CFG->dirroot . '/mod/bookit/classes/local/formelement/colorpicker_rule.php'
+        );
+    }
+
+    /**
+     * Validates the colour that was entered by the user.
+     *
+     * @param string $value Value to check
+     * @param int|string|array $options Not used yet
+     * @return bool true if value is not empty
+     */
+    public function validate($value, $options = null) {
+
+        // List of valid HTML colour names.
+        $colornames = [
+            'aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure',
+            'beige', 'bisque', 'black', 'blanchedalmond', 'blue',
+            'blueviolet', 'brown', 'burlywood', 'cadetblue', 'chartreuse',
+            'chocolate', 'coral', 'cornflowerblue', 'cornsilk', 'crimson',
+            'cyan', 'darkblue', 'darkcyan', 'darkgoldenrod', 'darkgray',
+            'darkgrey', 'darkgreen', 'darkkhaki', 'darkmagenta',
+            'darkolivegreen', 'darkorange', 'darkorchid', 'darkred',
+            'darksalmon', 'darkseagreen', 'darkslateblue', 'darkslategray',
+            'darkslategrey', 'darkturquoise', 'darkviolet', 'deeppink',
+            'deepskyblue', 'dimgray', 'dimgrey', 'dodgerblue', 'firebrick',
+            'floralwhite', 'forestgreen', 'fuchsia', 'gainsboro',
+            'ghostwhite', 'gold', 'goldenrod', 'gray', 'grey', 'green',
+            'greenyellow', 'honeydew', 'hotpink', 'indianred', 'indigo',
+            'ivory', 'khaki', 'lavender', 'lavenderblush', 'lawngreen',
+            'lemonchiffon', 'lightblue', 'lightcoral', 'lightcyan',
+            'lightgoldenrodyellow', 'lightgray', 'lightgrey', 'lightgreen',
+            'lightpink', 'lightsalmon', 'lightseagreen', 'lightskyblue',
+            'lightslategray', 'lightslategrey', 'lightsteelblue', 'lightyellow',
+            'lime', 'limegreen', 'linen', 'magenta', 'maroon',
+            'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',
+            'mediumseagreen', 'mediumslateblue', 'mediumspringgreen',
+            'mediumturquoise', 'mediumvioletred', 'midnightblue', 'mintcream',
+            'mistyrose', 'moccasin', 'navajowhite', 'navy', 'oldlace', 'olive',
+            'olivedrab', 'orange', 'orangered', 'orchid', 'palegoldenrod',
+            'palegreen', 'paleturquoise', 'palevioletred', 'papayawhip',
+            'peachpuff', 'peru', 'pink', 'plum', 'powderblue', 'purple', 'red',
+            'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown',
+            'seagreen', 'seashell', 'sienna', 'silver', 'skyblue', 'slateblue',
+            'slategray', 'slategrey', 'snow', 'springgreen', 'steelblue', 'tan',
+            'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat', 'white',
+            'whitesmoke', 'yellow', 'yellowgreen',
+        ];
+
+        if (preg_match('/^#?([[:xdigit:]]{3}){1,2}$/', $value)) {
+            if (strpos($value, '#') !== 0) {
+                $value = '#' . $value;
+            }
+            return $value;
+        } else if (in_array(strtolower($value), $colornames)) {
+            return $value;
+        } else if (preg_match('/rgb\(\d{0,3}%?, ?\d{0,3}%?, ?\d{0,3}%?\)/i', $value)) {
+            return $value;
+        } else if (preg_match('/rgba\(\d{0,3}%?, ?\d{0,3}%?, ?\d{0,3}%?, ?\d(\.\d)?\)/i', $value)) {
+            return $value;
+        } else if (preg_match('/hsl\(\d{0,3}, ?\d{0,3}%, ?\d{0,3}%\)/i', $value)) {
+            return $value;
+        } else if (preg_match('/hsla\(\d{0,3}, ?\d{0,3}%,\d{0,3}%, ?\d(\.\d)?\)/i', $value)) {
+            return $value;
+        } else if (($value == 'transparent') || ($value == 'currentColor') || ($value == 'inherit')) {
+            return $value;
+        } else {
+            return false;
+        }
+    }
+}
diff --git a/classes/local/manager/color_manager.php b/classes/local/manager/color_manager.php
new file mode 100644
index 0000000..a0745b6
--- /dev/null
+++ b/classes/local/manager/color_manager.php
@@ -0,0 +1,163 @@
+<?php
+// This file is part of Moodle - https://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
+
+/**
+ * Manager for accessing and fetching events.
+ *
+ * @package     mod_bookit
+ * @copyright   2024 Justus Dieckmann, Universitt Mnster
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+namespace mod_bookit\local\manager;
+
+/**
+ * Manager for accessing and fetching events.
+ *
+ * @package     mod_bookit
+ * @copyright   2024 Justus Dieckmann, Universitt Mnster
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class color_manager {
+    private static $colorcache = [];
+
+    public static function get_textcolor_for_background(string $color): string {
+        if (!isset(self::$colorcache[$color])) {
+            self::$colorcache[$color] = self::calculate_textcolor_for_background($color);
+        }
+        return self::$colorcache[$color];
+    }
+
+    private static function calculate_textcolor_for_background(string $color): string {
+        return self::calculate_luminosity_ratio($color, '#000') > self::calculate_luminosity_ratio($color, '#fff')
+            ? '#000' : '#fff';
+    }
+
+    /**
+     * Calculates the luminosity of a given RGB color.
+     * The color code must be in the format of RRGGBB.
+     * The luminosity equations are from the WCAG 2 requirements.
+     * https://www.w3.org/TR/WCAG22/#dfn-relative-luminance
+     *
+     * @copyright gdkraus https://github.com/gdkraus/wcag2-color-contrast
+     *
+     * @param string $color
+     * @return float
+     */
+    public static function calculate_luminosity(string $color): float {
+        if (str_starts_with($color, '#')) {
+            $color = substr($color, 1);
+        }
+        $r = hexdec(substr($color, 0, 2)) / 255; // Red value.
+        $g = hexdec(substr($color, 2, 2)) / 255; // Green value.
+        $b = hexdec(substr($color, 4, 2)) / 255; // Blue value.
+        if ($r <= 0.03928) {
+            $r = $r / 12.92;
+        } else {
+            $r = pow((($r + 0.055) / 1.055), 2.4);
+        }
+
+        if ($g <= 0.03928) {
+            $g = $g / 12.92;
+        } else {
+            $g = pow((($g + 0.055) / 1.055), 2.4);
+        }
+
+        if ($b <= 0.03928) {
+            $b = $b / 12.92;
+        } else {
+            $b = pow((($b + 0.055) / 1.055), 2.4);
+        }
+
+        return 0.2126 * $r + 0.7152 * $g + 0.0722 * $b;
+    }
+
+    /**
+     * Calculates the luminosity ratio of two colors.
+     * The luminosity ratio equations are from the WCAG 2 requirements.
+     * https://www.w3.org/TR/WCAG22/#dfn-contrast-ratio
+     *
+     * @copyright gdkraus https://github.com/gdkraus/wcag2-color-contrast
+     *
+     * @param string $color1
+     * @param string $color2
+     * @return float
+     */
+    public static function calculate_luminosity_ratio(string $color1, string $color2): float {
+        $l1 = self::calculate_luminosity($color1);
+        $l2 = self::calculate_luminosity($color2);
+
+        if ($l1 > $l2) {
+            $ratio = (($l1 + 0.05) / ($l2 + 0.05));
+        } else {
+            $ratio = (($l2 + 0.05) / ($l1 + 0.05));
+        }
+        return $ratio;
+    }
+
+    /**
+     * Returns an array with the results of the color contrast analysis
+     * It returns akey for each level (AA and AAA, both for normal and large or bold text).
+     * It also returns the calculated contrast ratio.
+     * The ratio levels are from the WCAG 2 requirements.
+     * https://www.w3.org/WAI/WCAG22/quickref/#contrast-minimum
+     * https://www.w3.org/WAI/WCAG22/quickref/#contrast-enhanced
+     *
+     * @copyright gdkraus https://github.com/gdkraus/wcag2-color-contrast
+     *
+     * @param string $color1
+     * @param string $color2
+     * @return array
+     */
+    public static function evaluate_color_contrast(string $color1, string $color2): array {
+        $ratio = self::calculate_luminosity_ratio($color1, $color2);
+
+        $colorevaluation["AA normal"] = ($ratio >= 4.5 ? 'pass' : 'fail');
+        $colorevaluation["AA large"] = ($ratio >= 3 ? 'pass' : 'fail');
+        $colorevaluation["AA medium bold"] = ($ratio >= 3 ? 'pass' : 'fail');
+        $colorevaluation["AAA normal"] = ($ratio >= 7 ? 'pass' : 'fail');
+        $colorevaluation["AAA large"] = ($ratio >= 4.5 ? 'pass' : 'fail');
+        $colorevaluation["AAA medium bold"] = ($ratio >= 4.5 ? 'pass' : 'fail');
+        $colorevaluation["Ratio"] = round($ratio, 2);
+
+        return $colorevaluation;
+    }
+
+    /**
+     * Print color evaluation for normal text.
+     * @param string $color
+     * @param string $color2
+     * @return string
+     */
+    public static function print_color_evaluation(string $color, string $color2): string {
+        $checkstring = '';
+        $check = self::evaluate_color_contrast($color, $color2);
+        foreach ($check as $key => $value) {
+            if (str_contains($key, 'normal') || 'Ratio' == $key) {
+                if ('pass' == $value) {
+                    $value = '<i class="fa fa-circle-check text-success" aria-hidden="true"></i> ';
+                } else if ('fail' == $value) {
+                    $value = '<i class="fa fa-circle-xmark text-danger" aria-hidden="true"></i> ';
+                }
+
+                $checkstring .= $key . ': <strong>' . $value . '</strong> ';
+            }
+        }
+        return $checkstring . ' <br>' . '<i class="fa fa-circle-info text-info"></i>
+            WCAG 2.2 <a href="https://www.w3.org/TR/WCAG22/#contrast-minimum">AA</a> /
+            <a href="https://www.w3.org/TR/WCAG22/#contrast-enhanced">AAA</a>.<br><br>';
+    }
+}
diff --git a/classes/local/manager/event_manager.php b/classes/local/manager/event_manager.php
index f7c4efe..ec6dbbe 100644
--- a/classes/local/manager/event_manager.php
+++ b/classes/local/manager/event_manager.php
@@ -36,7 +36,6 @@ use dml_exception;
  * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
  */
 class event_manager {
-
     /**
      * Get event from id.
      *
@@ -80,22 +79,26 @@ class event_manager {
         $context = context_module::instance($instanceid);
         $viewalldetailsofevent = has_capability('mod/bookit:viewalldetailsofevent', $context);
         $viewalldetailsofownevent = has_capability('mod/bookit:viewalldetailsofownevent', $context);
-        $color = ''; // Default background color of event.
-        $roomname = ''; // Default room name = empty.
 
-        $sqlreserved = 'SELECT id, NULL as name, starttime, endtime FROM {bookit_event} ' .
+        $sqlreserved = 'SELECT e.id, NULL as name, e.starttime, e.endtime, r.eventcolor, r.name as roomname ' .
+                'FROM {bookit_event} e ' .
+                'JOIN {bookit_room} r ON r.id = e.roomid ' .
                 'WHERE endtime >= :starttime AND starttime <= :endtime';
 
         // Service-Team: can view all events in detail.
         if ($viewalldetailsofevent) {
-            $sql = 'SELECT id, name, starttime, endtime FROM {bookit_event} ' .
-                    'WHERE endtime >= :starttime AND starttime <= :endtime';
+            $sql = 'SELECT e.id, e.name, e.starttime, e.endtime, r.eventcolor, r.name as roomname ' .
+                'FROM {bookit_event} e ' .
+                'JOIN {bookit_room} r ON r.id = e.roomid ' .
+                'WHERE endtime >= :starttime AND starttime <= :endtime';
             $params = ['starttime' => $starttimestamp, 'endtime' => $endtimestamp];
         } else if ($viewalldetailsofownevent) {
             $otherexaminers = $DB->sql_like('otherexaminers', ':otherexaminers');
             $otherexaminers1 = $DB->sql_like('otherexaminers', ':otherexaminers1');
             // Every user: can view own events in detail.
-            $sql = 'SELECT id, name, starttime, endtime FROM {bookit_event}
+            $sql = 'SELECT e.id, e.name, e.starttime, e.endtime, r.eventcolor, r.name as roomname
+                    FROM {bookit_event} e
+                    JOIN {bookit_room} r ON r.id = e.roomid
                     WHERE endtime >= :starttime1 AND starttime <= :endtime1
                     AND (usermodified = :usermodified1 OR personinchargeid = :personinchargeid1 OR ' . $otherexaminers1 . ')
                     UNION ' . $sqlreserved . '
@@ -113,34 +116,100 @@ class event_manager {
         $records = $DB->get_records_sql($sql, $params);
         $events = [];
 
-        // Get room colors from plugin config.
-        $config = get_config('mod_bookit');
-        $roomcolors = [];
-        foreach ($config as $key => $value) {
-            if (false !== preg_match('/roomcolor_/', $key)) {
-                $roomcolors[substr($key, 10)] = $value;
-            }
-        }
-
         foreach ($records as $record) {
-            $eventresources = resource_manager::get_resources_of_event($record->id);
-            foreach ($eventresources as $object) {
-                if (1 == $object->categoryid) {
-                    $color = $roomcolors[$object->resourceid] ?? '';
-                    $roomname = $object->name;
-                }
-            }
             $events[] = [
                 'id' => $record->id,
-                'title' => ($record->name ?? $reserved).' ('.$roomname.')',
+                'title' => ($record->name ?? $reserved) . ' (' . $record->roomname . ')',
                 'start' => date('Y-m-d H:i', $record->starttime),
                 'end' => date('Y-m-d H:i', $record->endtime),
-                'backgroundColor' => $color,
+                'backgroundColor' => $record->eventcolor,
+                'textColor' => color_manager::get_textcolor_for_background($record->eventcolor),
                 'extendedProps' => (object)['reserved' => !$record->name],
 
             ];
         }
         return $events;
     }
-}
 
+    /**
+     * Helper function to place a weekly time into a specific week.
+     * It is necessary so that sunday events are the correct time, even in a week with a time change (DST).
+     * @param int $weeklytime Timestamp relative to start of week.
+     * @param int $weektime Timestamp of the start of a week.
+     * @return int
+     */
+    public static function place_weekly_time_into_week(int $weeklytime, int $weektime): int {
+        $week = (new DateTime())->setTimestamp($weektime);
+        $actual = (new DateTime())->setTimestamp($weektime + $weeklytime);
+        return $actual->getTimestamp() + ($week->getOffset() - $actual->getOffset());
+    }
+
+    /**
+     * Returns all slots and blockers in timerange for the specified room.
+     *
+     * @param int $starttime
+     * @param int $endtime
+     * @param int $roomid
+     * @return array
+     */
+    public static function get_slots_in_timerange(int $starttime, int $endtime, int $roomid): array {
+        global $DB;
+
+        $events = [];
+
+        $blockers = $DB->get_records_sql(
+            'SELECT id, name, roomid, starttime, endtime FROM {bookit_blocker} ' .
+            'WHERE starttime < :endtime AND endtime > :starttime AND (roomid = :roomid OR roomid IS NULL)',
+            ['starttime' => $starttime, 'endtime' => $endtime, 'roomid' => $roomid],
+        );
+        foreach ($blockers as $blocker) {
+            $events[] = [
+                'id' => $blocker->id,
+                'title' => $blocker->name ?? '',
+                'start' => date('Y-m-d H:i', $blocker->starttime),
+                'end' => date('Y-m-d H:i', $blocker->endtime),
+                'extendedProps' => (object)['type' => 'blocker'],
+                'backgroundColor' => ($blocker->roomid ?? false) ? '#c78316' : '#a33',
+            ];
+        }
+
+        $records = $DB->get_records_sql(
+            'SELECT ws.id, ws.starttime as slotstart, ws.endtime as slotend,
+                wr.starttime as weekplanstart, wr.endtime as weekplanend
+            FROM {bookit_weekplan_room} wr
+            JOIN {bookit_weekplanslot} ws ON wr.weekplanid = ws.weekplanid
+            WHERE wr.starttime < :endtime AND wr.endtime > :starttime AND wr.roomid = :roomid',
+            [
+                'starttime' => $starttime,
+                'endtime' => $endtime,
+                'roomid' => $roomid,
+            ]
+        );
+
+        foreach ($records as $record) {
+            $weekplanstart = max($starttime, (int) $record->weekplanstart);
+            $weekplanend = min($endtime, (int) $record->weekplanend + weekplan_manager::SECONDS_PER_DAY);
+            [$yearstart, $weekstart] = explode('-', date('Y-W', $weekplanstart));
+
+            $weekstartdt = new DateTime("$yearstart-W$weekstart");
+
+            while ($weekstartdt->getTimestamp() < $weekplanend) {
+                $eventstart = self::place_weekly_time_into_week($record->slotstart, $weekstartdt->getTimestamp());
+                $eventend = self::place_weekly_time_into_week($record->slotend, $weekstartdt->getTimestamp());
+
+                if ($eventstart < $weekplanend && $eventend > $weekplanstart) {
+                    $events[] = [
+                        'id' => 0,
+                        'title' => '',
+                        'start' => date('Y-m-d H:i', $eventstart),
+                        'end' => date('Y-m-d H:i', $eventend),
+                        'extendedProps' => (object)['type' => 'slot'],
+                    ];
+                }
+
+                $weekstartdt->modify('+1 week');
+            }
+        }
+        return $events;
+    }
+}
diff --git a/classes/local/manager/weekplan_manager.php b/classes/local/manager/weekplan_manager.php
new file mode 100644
index 0000000..8ffefef
--- /dev/null
+++ b/classes/local/manager/weekplan_manager.php
@@ -0,0 +1,213 @@
+<?php
+// This file is part of Moodle - https://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
+
+/**
+ * Weekplan manager class.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann, RUB
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\manager;
+
+/**
+ * Weekplan manager class.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann, RUB
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class weekplan_manager {
+    /** @var string[] Array of Weekdays. */
+    const WEEKDAYS = ['Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa', 'So'];
+
+    /** @var int[] Like WEEKDAYS, but flipped. */
+    const INDEXED_WEEKDAYS = [
+        "mo" => 0,
+        "di" => 1,
+        "mi" => 2,
+        "do" => 3,
+        "fr" => 4,
+        "sa" => 5,
+        "so" => 6,
+    ];
+
+    /** @var int How many seconds there are in one day. */
+    const SECONDS_PER_DAY = 24 * 60 * 60;
+
+    /**
+     * Parses a string detailing a week plan into an array of slots (start and end time relative to start of week).
+     * @param string $weekplan
+     * @return array
+     */
+    private static function parse_weekplan(string $weekplan) {
+        $lines = explode("\n", strtolower($weekplan));
+        $parsedperiods = [];
+        foreach ($lines as $line) {
+            try {
+                $line = trim($line);
+                $dayofweek = substr($line, 0, 2);
+                if (!array_key_exists($dayofweek, self::INDEXED_WEEKDAYS)) {
+                    continue;
+                }
+                $dayofweekindex = self::INDEXED_WEEKDAYS[$dayofweek];
+
+                $timeperiods = trim(substr($line, 2));
+                $timeperiods = str_replace(' ', '', $timeperiods);
+
+                foreach (explode(",", $timeperiods) as $timeperiod) {
+                    try {
+                        [$starttime, $endtime] = explode('-', $timeperiod);
+                        $starttime = self::parse_time($starttime);
+                        $endtime = self::parse_time($endtime);
+                        if ($starttime <= $endtime) {
+                            $parsedperiods[] = [
+                                $starttime + self::SECONDS_PER_DAY * $dayofweekindex,
+                                $endtime + self::SECONDS_PER_DAY * $dayofweekindex,
+                            ];
+                        }
+                    } catch (\Exception $e) {
+                        $e;
+                        // That's ok, we'll just skip the period.
+                    }
+                }
+            } catch (\Exception $e) {
+                $e;
+                // That's ok, we'll just skip the line.
+            }
+        }
+        return $parsedperiods;
+    }
+
+    /**
+     * Parses a time string like 8:12, 13 or 09:25 into a daytimestamp (seconds since start of day).
+     * @param string $time
+     * @return int
+     */
+    private static function parse_time(string $time) {
+        if (str_contains($time, ':')) {
+            [$hour, $minute] = explode(':', $time);
+            $hour = intval($hour);
+            $minute = intval($minute);
+        } else {
+            $hour = intval($time);
+            $minute = 0;
+        }
+        if ($hour < 0 || $hour >= 24 || $minute < 0 || $minute >= 60) {
+            throw new \Exception('invalid time');
+        }
+        return $hour * 3600 + $minute * 60;
+    }
+
+    /**
+     * Returns a string representation (H:MM) for a given daytimestamp (seconds since start of day).
+     * @param int $time
+     * @return string
+     */
+    public static function daytime_to_str(int $time) {
+        $seconds = $time % 60;
+        $time = intdiv($time, 60);
+        $minutes = $time % 60;
+        $hours = intdiv($time, 60);
+        return sprintf("%d:%02d", $hours, $minutes);
+    }
+
+    /**
+     * Given an array of records of bookit_weekplanslot, this returns an array of strings (H:MM-H:MM) for each of the weekdays.
+     * @param array $weekplan
+     * @return array Array in the form of [weekdayindex => string[]].
+     */
+    public static function group_events_by_day(array $weekplan) {
+        $eventsbyday = [];
+        foreach ($weekplan as $event) {
+            $weekdayindex = intdiv($event->starttime, self::SECONDS_PER_DAY);
+            $daystarttime = $event->starttime % self::SECONDS_PER_DAY;
+            $dayendtime = $event->endtime % self::SECONDS_PER_DAY;
+            if (!isset($eventsbyday[$weekdayindex])) {
+                $eventsbyday[$weekdayindex] = [];
+            }
+            $eventsbyday[$weekdayindex][] = self::daytime_to_str($daystarttime) . "-" . self::daytime_to_str($dayendtime);
+        }
+        ksort($eventsbyday);
+        return $eventsbyday;
+    }
+
+    /**
+     * Transforms an array of records of bookit_weekplanslot into a string for human editing.
+     * @param array $weekplan
+     * @return string
+     */
+    private static function weekplan_to_string(array $weekplan) {
+        $eventsbyday = self::group_events_by_day($weekplan);
+        $result = "";
+        foreach ($eventsbyday as $weekdayindex => $events) {
+            $result .= self::WEEKDAYS[$weekdayindex] . ' ' . join(", ", $events) . "\n";
+        }
+        return $result;
+    }
+
+    /**
+     * Returns a textual representation for human editing of the weekplan with the specified id.
+     * @param int $weekplanid
+     * @return string
+     */
+    public static function create_string_weekplan_from_db(int $weekplanid) {
+        global $DB;
+        $records = $DB->get_records('bookit_weekplanslot', ['weekplanid' => $weekplanid]);
+        return self::weekplan_to_string($records);
+    }
+
+    /**
+     * Saves the weekplan to the DB based on the given textual representation.
+     * @param int $weekplanid
+     */
+    public static function save_string_weekplan_to_db(string $weekplan, int $weekplanid) {
+        global $DB;
+        $DB->delete_records('bookit_weekplanslot', ['weekplanid' => $weekplanid]); // Awful.
+
+        $weekplanevents = self::parse_weekplan($weekplan);
+        foreach ($weekplanevents as $weekplanevent) {
+            $DB->insert_record('bookit_weekplanslot', [
+                'weekplanid' => $weekplanid,
+                'starttime' => $weekplanevent[0],
+                'endtime' => $weekplanevent[1],
+            ]);
+        }
+    }
+
+    /**
+     * Returns all weekplanslots for a weekday.
+     * @param int $weekplanid
+     * @param int $dayofweek 0 for Monday through 6 for Sunday.
+     * @return array asdf
+     */
+    public static function get_weekplanslots_for_weekday(int $weekplanid, int $dayofweek): array {
+        global $DB;
+
+        $records = $DB->get_records_select(
+            'bookit_weekplanslot',
+            'weekplanid = :weekplanid AND starttime >= :daystart AND starttime < :dayend',
+            [
+                'weekplanid' => $weekplanid,
+                'daystart' => $dayofweek * self::SECONDS_PER_DAY,
+                'dayend' => ($dayofweek + 1) * self::SECONDS_PER_DAY,
+            ],
+            'starttime'
+        );
+
+        return $records;
+    }
+}
diff --git a/classes/local/persistent/blocker.php b/classes/local/persistent/blocker.php
new file mode 100644
index 0000000..9b885b8
--- /dev/null
+++ b/classes/local/persistent/blocker.php
@@ -0,0 +1,82 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Class for loading/storing blockers from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\persistent;
+
+use core\persistent;
+use mod_bookit\local\timeline;
+
+/**
+ * Class for loading/storing blockers from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class blocker extends persistent {
+    /** Table name for the persistent. */
+    const TABLE = 'bookit_blocker';
+
+    /**
+     * Return the definition of the properties of this model.
+     * @return array
+     */
+    protected static function define_properties() {
+        return [
+            'name' => [
+                'type' => PARAM_TEXT,
+                'null' => NULL_ALLOWED,
+                'default' => null,
+            ],
+            'starttime' => [
+                'type' => PARAM_INT,
+            ],
+            'endtime' => [
+                'type' => PARAM_INT,
+            ],
+            'roomid' => [
+                'type' => PARAM_INT,
+                'null' => NULL_ALLOWED,
+                'default' => null,
+            ],
+        ];
+    }
+
+    /**
+     * Returns all blockers for the room in the specified timeframe.
+     * @param int $roomid
+     * @param string $starttime
+     * @param string $endtime
+     * @return blocker[]
+     */
+    public static function get_blockers_for_room(int $roomid, string $starttime, string $endtime): array {
+        return self::get_records_select(
+            '(roomid = :roomid OR roomid IS NULL) AND endtime >= :starttime AND starttime <= :endtime',
+            [
+                'roomid' => $roomid,
+                'starttime' => $starttime,
+                'endtime' => $endtime,
+            ]
+        );
+    }
+}
diff --git a/classes/local/persistent/institution.php b/classes/local/persistent/institution.php
new file mode 100644
index 0000000..d301747
--- /dev/null
+++ b/classes/local/persistent/institution.php
@@ -0,0 +1,58 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Class for loading/storing institutions from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\persistent;
+
+use core\persistent;
+
+/**
+ * Class for loading/storing institutions from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class institution extends persistent {
+    /** Table name for the persistent. */
+    const TABLE = 'bookit_institution';
+
+    /**
+     * Return the definition of the properties of this model.
+     * @return array
+     */
+    protected static function define_properties() {
+        return [
+            'name' => [
+                'type' => PARAM_TEXT,
+            ],
+            'internalnotes' => [
+                'type' => PARAM_TEXT,
+                'null' => NULL_ALLOWED,
+            ],
+            'active' => [
+                'type' => PARAM_BOOL,
+                'default' => true,
+            ],
+        ];
+    }
+}
diff --git a/classes/local/persistent/room.php b/classes/local/persistent/room.php
new file mode 100644
index 0000000..c4617b9
--- /dev/null
+++ b/classes/local/persistent/room.php
@@ -0,0 +1,74 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Class for loading/storing institutions from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\persistent;
+
+use core\persistent;
+
+/**
+ * Class for loading/storing rooms from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class room extends persistent {
+    /** Table name for the persistent. */
+    const TABLE = 'bookit_room';
+
+    /** @var int Constant for allowing free placement inside slots. */
+    const MODE_FREE = 0;
+
+    /** @var int Constant for only allowing events to start at starts of slots. */
+    const MODE_SLOTS = 1;
+
+    /**
+     * Return the definition of the properties of this model.
+     * @return array
+     */
+    protected static function define_properties() {
+        return [
+            'name' => [
+                'type' => PARAM_TEXT,
+            ],
+            'description' => [
+                'type' => PARAM_TEXT,
+                'null' => NULL_ALLOWED,
+            ],
+            'eventcolor' => [
+                'type' => PARAM_TEXT,
+            ],
+            'active' => [
+                'type' => PARAM_BOOL,
+                'default' => false,
+            ],
+            'roommode' => [
+                'type' => PARAM_INT,
+                'choices' => [0, 1],
+            ],
+            'seats' => [
+                'type' => PARAM_INT,
+            ],
+        ];
+    }
+}
diff --git a/classes/local/persistent/weekplan.php b/classes/local/persistent/weekplan.php
new file mode 100644
index 0000000..1e5cf43
--- /dev/null
+++ b/classes/local/persistent/weekplan.php
@@ -0,0 +1,50 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Class for loading/storing institutions from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\persistent;
+
+use core\persistent;
+
+/**
+ * Class for loading/storing weekplans from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class weekplan extends persistent {
+    /** Table name for the persistent. */
+    const TABLE = 'bookit_weekplan';
+
+    /**
+     * Return the definition of the properties of this model.
+     * @return array
+     */
+    protected static function define_properties() {
+        return [
+            'name' => [
+                'type' => PARAM_TEXT,
+            ],
+        ];
+    }
+}
diff --git a/classes/local/persistent/weekplan_room.php b/classes/local/persistent/weekplan_room.php
new file mode 100644
index 0000000..21428e2
--- /dev/null
+++ b/classes/local/persistent/weekplan_room.php
@@ -0,0 +1,100 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Class for loading/storing weekplan assignments to rooms from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\persistent;
+
+use core\persistent;
+
+/**
+ * Class for loading/storing weekplan assignments to rooms from the DB.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class weekplan_room extends persistent {
+    /** Table name for the persistent. */
+    const TABLE = 'bookit_weekplan_room';
+
+    /**
+     * Return the definition of the properties of this model.
+     * @return array
+     */
+    protected static function define_properties() {
+        return [
+            'weekplanid' => [
+                'type' => PARAM_INT,
+            ],
+            'roomid' => [
+                'type' => PARAM_INT,
+            ],
+            'starttime' => [
+                'type' => PARAM_INT,
+            ],
+            'endtime' => [
+                'type' => PARAM_INT,
+            ],
+        ];
+    }
+
+    /**
+     * Check if this weekplan_room assignment collides with any other.
+     * @return bool
+     */
+    public function check_for_collision() {
+        global $DB;
+
+        $sql = 'SELECT * FROM {bookit_weekplan_room} ' .
+            'WHERE starttime <= :endtime AND endtime >= :starttime AND roomid = :roomid';
+        $params = [
+            'starttime' => $this->get('starttime'),
+            'endtime' => $this->get('endtime'),
+            'roomid' => $this->get('roomid'),
+        ];
+        if ($this->get('id')) {
+            $sql .= ' AND id != :id';
+            $params['id'] = $this->get('id');
+        }
+
+        return $DB->record_exists_sql($sql, $params);
+    }
+
+    /**
+     * Returns the applicable weekplanid, if any, for the given timestamp and room.
+     * @param int $timestamp
+     * @param int $roomid
+     * @return int|null
+     */
+    public static function get_applicable_weekplanid(int $timestamp, int $roomid): int|null {
+        $records = self::get_records_select('starttime <= :time1 AND endtime >= :time2 AND roomid = :roomid', [
+            'time1' => $timestamp,
+            'time2' => $timestamp,
+            'roomid' => $roomid,
+        ]);
+        if (count($records) == 0) {
+            return null;
+        }
+
+        return array_pop($records)->get('weekplanid');
+    }
+}
diff --git a/classes/local/table/institutions_table.php b/classes/local/table/institutions_table.php
new file mode 100644
index 0000000..2e2556f
--- /dev/null
+++ b/classes/local/table/institutions_table.php
@@ -0,0 +1,91 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Table listing all institutions
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\table;
+
+defined('MOODLE_INTERNAL') || die;
+
+require_once($CFG->libdir . '/tablelib.php');
+
+/**
+ * Table listing all institutions.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class institutions_table extends \table_sql {
+    /**
+     * Constructor.
+     */
+    public function __construct() {
+        global $PAGE;
+        parent::__construct('mod_bookit-institutions_table');
+        $this->define_baseurl($PAGE->url);
+        $this->set_sql('id, name, internalnotes, active', '{bookit_institution}', 'true');
+        $this->column_nosort = ['internalnotes', 'tools'];
+        $this->define_columns(['name', 'internalnotes', 'tools']);
+        $this->define_headers([
+            get_string('institution', 'mod_bookit'),
+            get_string('internalnotes', 'mod_bookit'),
+            get_string('tools', 'mod_bookit'),
+        ]);
+    }
+
+    /**
+     * Render tools column.
+     * @param object $row Row data.
+     * @return string action buttons for workflows
+     * @throws \coding_exception
+     * @throws \moodle_exception
+     */
+    public function col_tools($row) {
+        global $OUTPUT;
+        $output = '';
+
+        $alt = get_string('edit');
+        $icon = 't/edit';
+        $url = new \moodle_url('/mod/bookit/edit_institution.php', ['id' => $row->id]);
+        $output .= $OUTPUT->action_icon(
+            $url,
+            new \pix_icon($icon, $alt, 'moodle', ['title' => $alt]),
+            null,
+            ['title' => $alt]
+        );
+
+        return $output;
+    }
+
+    /**
+     * Get any extra classes names to add to this row in the HTML.
+     *
+     * @param \stdClass $row the data for this row.
+     * @return string added to the class="" attribute of the tr.
+     */
+    public function get_row_class($row) {
+        if (!$row->active) {
+            return 'text-muted';
+        }
+        return '';
+    }
+}
diff --git a/classes/local/table/rooms_table.php b/classes/local/table/rooms_table.php
new file mode 100644
index 0000000..0c8b586
--- /dev/null
+++ b/classes/local/table/rooms_table.php
@@ -0,0 +1,102 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Table listing all rooms.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\table;
+
+defined('MOODLE_INTERNAL') || die;
+
+global $CFG;
+require_once($CFG->libdir . '/tablelib.php');
+
+/**
+ * Table listing all rooms.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class rooms_table extends \table_sql {
+    /**
+     * Constructor.
+     */
+    public function __construct() {
+        global $PAGE;
+        parent::__construct('mod_bookit-rooms_table');
+        $this->define_baseurl($PAGE->url);
+        $this->set_sql('id, name, active, description, eventcolor', '{bookit_room}', 'true');
+        $this->column_nosort = ['internalnotes', 'tools'];
+        $this->define_columns(['name', 'description', 'tools']);
+        $this->define_headers([
+            get_string('name'),
+            get_string('description'),
+            get_string('tools', 'mod_bookit'),
+        ]);
+    }
+
+    /**
+     * Render name column.
+     * @param object $row Row data.
+     * @return string.
+     */
+    public function col_name($row) {
+        $url = new \moodle_url('/mod/bookit/view_room.php', ['id' => $row->id]);
+        return \html_writer::link($url, $row->name);
+    }
+
+    /**
+     * Render tools column.
+     * @param object $row Row data.
+     * @return string action buttons for workflows
+     * @throws \coding_exception
+     * @throws \moodle_exception
+     */
+    public function col_tools($row) {
+        global $OUTPUT;
+        $output = '';
+
+        $alt = get_string('edit');
+        $icon = 't/edit';
+        $url = new \moodle_url('/mod/bookit/view_room.php', ['id' => $row->id]);
+        $output .= $OUTPUT->action_icon(
+            $url,
+            new \pix_icon($icon, $alt, 'moodle', ['title' => $alt]),
+            null,
+            ['title' => $alt]
+        );
+
+        return $output;
+    }
+
+    /**
+     * Get any extra classes names to add to this row in the HTML.
+     *
+     * @param \stdClass $row the data for this row.
+     * @return string added to the class="" attribute of the tr.
+     */
+    public function get_row_class($row) {
+        if (!$row->active) {
+            return 'text-muted';
+        }
+        return '';
+    }
+}
diff --git a/classes/local/table/weekplan_room_table.php b/classes/local/table/weekplan_room_table.php
new file mode 100644
index 0000000..f1d0f4b
--- /dev/null
+++ b/classes/local/table/weekplan_room_table.php
@@ -0,0 +1,114 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Table listing all weekplan assignments of a room.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\table;
+
+use core\output\html_writer;
+
+defined('MOODLE_INTERNAL') || die;
+
+require_once($CFG->libdir . '/tablelib.php');
+
+/**
+ * Table listing all weekplan assignments of a room.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class weekplan_room_table extends \table_sql {
+    /**
+     * Constructor for weekplan_room_table.
+     * @param int $roomid ID of room to create table for.
+     */
+    public function __construct(
+        /** @var int ID of room to create table for. */
+        private int $roomid
+    ) {
+        global $PAGE;
+        parent::__construct('mod_bookit-room_weekplan_table');
+        $this->define_baseurl($PAGE->url);
+        $this->set_sql(
+            'wr.id, wr.weekplanid, w.name as weekplanname, wr.starttime, wr.endtime',
+            '{bookit_weekplan_room} wr ' .
+            'JOIN {bookit_weekplan} w ON wr.weekplanid = w.id ',
+            'wr.roomid = :roomid',
+            ['roomid' => $roomid]
+        );
+        $this->column_nosort = ['tools'];
+        $this->define_columns(['starttime', 'weekplanname', 'tools']);
+        $this->define_headers([
+            get_string('period', 'mod_bookit'),
+            get_string('weekplan', 'mod_bookit'),
+            get_string('tools', 'mod_bookit'),
+        ]);
+    }
+
+    /**
+     * Renders the starttime column.
+     * @param object $row
+     * @return string
+     */
+    public function col_starttime(object $row) {
+        return date('d.m.Y', $row->starttime) . ' - ' . date('d.m.Y', $row->endtime);
+    }
+
+    /**
+     * Renders the weekplanname column.
+     * @param object $row
+     * @return string
+     */
+    public function col_weekplanname(object $row) {
+        return html_writer::link(
+            new \moodle_url('/mod/bookit/weekplan.php', ['id' => $row->weekplanid]),
+            htmlentities($row->weekplanname)
+        );
+    }
+
+    /**
+     * Render tools column.
+     * @param object $row Row data.
+     * @return string action buttons for workflow.
+     */
+    public function col_tools($row) {
+        global $OUTPUT;
+        $output = '';
+
+        $alt = get_string('edit');
+        $icon = 't/edit';
+        $url = new \moodle_url('/mod/bookit/edit_weekplan_room.php', ['id' => $row->id, 'roomid' => $this->roomid]);
+        $output .= $OUTPUT->action_icon(
+            $url,
+            new \pix_icon($icon, $alt, 'moodle', ['title' => $alt]),
+            null,
+            ['title' => $alt]
+        );
+
+        $alt = get_string('delete');
+        $output .= $OUTPUT->action_icon(new \moodle_url('/mod/bookit/view_room.php', [
+            'id' => $this->roomid, 'action' => 'delete', 'weekplanroomid' => $row->id,
+        ]), new \pix_icon('t/delete', $alt));
+
+        return $output;
+    }
+}
diff --git a/classes/local/table/weekplans_table.php b/classes/local/table/weekplans_table.php
new file mode 100644
index 0000000..87780af
--- /dev/null
+++ b/classes/local/table/weekplans_table.php
@@ -0,0 +1,85 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Table listing all weekplans.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+namespace mod_bookit\local\table;
+
+defined('MOODLE_INTERNAL') || die;
+
+require_once($CFG->libdir . '/tablelib.php');
+
+/**
+ * Table listing all weekplans.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+class weekplans_table extends \table_sql {
+    /**
+     * Constructor.
+     */
+    public function __construct() {
+        global $PAGE;
+        parent::__construct('mod_bookit-weekplans_table');
+        $this->define_baseurl($PAGE->url);
+        $this->set_sql('id, name', '{bookit_weekplan}', 'true');
+        $this->column_nosort = ['tools'];
+        $this->define_columns(['name', 'tools']);
+        $this->define_headers([
+            get_string('name'),
+            get_string('tools', 'mod_bookit'),
+        ]);
+    }
+
+    /**
+     * Render name column.
+     * @param object $row Row data.
+     * @return string.
+     */
+    public function col_name($row) {
+        $url = new \moodle_url('/mod/bookit/weekplan.php', ['id' => $row->id]);
+        return \html_writer::link($url, $row->name);
+    }
+
+    /**
+     * Render tools column.
+     * @param object $row Row data.
+     * @return string action buttons for workflows.
+     */
+    public function col_tools($row) {
+        global $OUTPUT;
+        $output = '';
+
+        $alt = get_string('edit');
+        $icon = 't/edit';
+        $url = new \moodle_url('/mod/bookit/weekplan.php', ['id' => $row->id]);
+        $output .= $OUTPUT->action_icon(
+            $url,
+            new \pix_icon($icon, $alt, 'moodle', ['title' => $alt]),
+            null,
+            ['title' => $alt]
+        );
+
+        return $output;
+    }
+}
diff --git a/db/install.php b/db/install.php
index a0e5d81..5fcc3a7 100644
--- a/db/install.php
+++ b/db/install.php
@@ -63,55 +63,5 @@ function xmldb_bookit_install() {
     $resource = new bookit_resource('Fairy', 'For extra luck and glitter!', 199, $category->id);
     $resource->save(2);
 
-    $subjects = ['Mathematics', 'Physics', 'Chemistry', 'Biology', 'Computer Science', 'History', 'Geography', 'English Literature',
-            'Psychology', 'Sociology'];
-
-    // Create events.
-    for ($i = 1; $i <= 10; $i++) {
-        // Generate random date and time in the current week between 07:00 and 20:00.
-        // Changed from 0-6 to 0-5 to exclude Sundays.
-        $dayofweek = rand(0, 5);
-        $hour = rand(7, 20);
-        $minute = rand(0, 59);
-        $second = rand(0, 59);
-        $startdate = strtotime("last Monday +$dayofweek days $hour:$minute:$second");
-        // Add 2 hours to start date.
-        $enddate = $startdate + 7200;
-
-        // Select a random subject.
-        $subject = $subjects[array_rand($subjects)];
-        $tc = rand(2, 7);
-        $event = new bookit_event(
-                0,
-                'Exam ' . $subject,
-                20241,
-                'IT',
-                $startdate,
-                $enddate,
-                90,
-                rand(20, 250),
-                1,
-                $tc.' Zeitverlngerungen',
-                rand(0, 2),
-                2,
-                '',
-                0,
-                'External lorem ipsum',
-                'Internal Lorem Ipsum dolor...',
-                'Susi Support',
-                [
-                        (object) ['resourceid' => rand(1, 5), 'amount' => 1], // Rooms.
-                        (object) ['resourceid' => rand(6, 7), 'amount' => rand(2, 85)], // Other resources.
-                        (object) ['resourceid' => rand(8, 10), 'amount' => rand(2, 85)], // Other resources.
-                ],
-                null,
-                2,
-                time(),
-                time()
-        );
-
-        $event->save(2);
-    }
-
     set_config('installhelperfinished', 0, 'mod_bookit');
 }
diff --git a/db/install.xml b/db/install.xml
index 9a58372..202dda4 100644
--- a/db/install.xml
+++ b/db/install.xml
@@ -1,7 +1,7 @@
 <?xml version="1.0" encoding="UTF-8" ?>
-<XMLDB PATH="mod/bookit/db" VERSION="20240903" COMMENT="XMLDB file for Moodle mod_bookit"
-       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-       xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
+<XMLDB PATH="mod/bookit/db" VERSION="20250505" COMMENT="XMLDB file for Moodle mod_bookit"
+    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+    xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
 >
   <TABLES>
     <TABLE NAME="bookit" COMMENT="Stores the bookit activity module instances.">
@@ -19,38 +19,39 @@
         <KEY NAME="fk_course" TYPE="foreign" FIELDS="course" REFTABLE="course" REFFIELDS="id"/>
       </KEYS>
     </TABLE>
-<TABLE NAME="bookit_event" COMMENT="Stores the events of bookit">
-  <FIELDS>
-    <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
-    <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
-    <FIELD NAME="semester" TYPE="int" LENGTH="8" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="department" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
-    <FIELD NAME="starttime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false"/>
-    <FIELD NAME="endtime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false"/>
-    <FIELD NAME="duration" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="participantsamount" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false" COMMENT="Number of participants"/>
-    <FIELD NAME="timecompensation" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="compensationfordisadvantages" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="bookingstatus" TYPE="int" LENGTH="6" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
-    <FIELD NAME="personinchargeid" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="otherexaminers" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="coursetemplate" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="notes" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="internalnotes" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
-    <FIELD NAME="supportpersons" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Person(s) for technical support"/>
-    <FIELD NAME="refcourseid" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false" COMMENT="Courseid of the exam course"/>
-    <FIELD NAME="usermodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
-    <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
-    <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
-  </FIELDS>
-  <KEYS>
-    <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
-    <KEY NAME="usermodified" TYPE="foreign" FIELDS="usermodified" REFTABLE="user" REFFIELDS="id"/>
-    <KEY NAME="even_per_fk" TYPE="foreign" FIELDS="personinchargeid" REFTABLE="user" REFFIELDS="id"/>
-    <KEY NAME="even_cou_fk" TYPE="foreign" FIELDS="coursetemplate" REFTABLE="course" REFFIELDS="id"/>
-    <KEY NAME="even_ref_fk" TYPE="foreign" FIELDS="refcourseid" REFTABLE="course" REFFIELDS="id"/>
-  </KEYS>
-</TABLE>
+    <TABLE NAME="bookit_event" COMMENT="Stores the events of bookit">
+      <FIELDS>
+        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
+        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="semester" TYPE="int" LENGTH="8" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="institutionid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="starttime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="endtime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="duration" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="roomid" TYPE="int" LENGTH="10" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="participantsamount" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false" COMMENT="Number of participants"/>
+        <FIELD NAME="timecompensation" TYPE="int" LENGTH="1" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="compensationfordisadvantages" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="bookingstatus" TYPE="int" LENGTH="6" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="personinchargeid" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="otherexaminers" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="coursetemplate" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="notes" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="internalnotes" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="supportpersons" TYPE="text" NOTNULL="false" SEQUENCE="false" COMMENT="Person(s) for technical support"/>
+        <FIELD NAME="refcourseid" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false" COMMENT="Courseid of the exam course"/>
+        <FIELD NAME="usermodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+      </FIELDS>
+      <KEYS>
+        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
+        <KEY NAME="usermodified" TYPE="foreign" FIELDS="usermodified" REFTABLE="user" REFFIELDS="id"/>
+        <KEY NAME="even_per_fk" TYPE="foreign" FIELDS="personinchargeid" REFTABLE="user" REFFIELDS="id"/>
+        <KEY NAME="even_cou_fk" TYPE="foreign" FIELDS="coursetemplate" REFTABLE="course" REFFIELDS="id"/>
+        <KEY NAME="even_ref_fk" TYPE="foreign" FIELDS="refcourseid" REFTABLE="course" REFFIELDS="id"/>
+      </KEYS>
+    </TABLE>
     <TABLE NAME="bookit_resource_categories" COMMENT="Stores the categories of resources">
       <FIELDS>
         <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
@@ -98,6 +99,98 @@
         <KEY NAME="even_res_fk" TYPE="foreign" FIELDS="resourceid" REFTABLE="bookit_resource" REFFIELDS="id"/>
       </KEYS>
     </TABLE>
+    <TABLE NAME="bookit_institution" COMMENT="Institutions choosable in bookit">
+      <FIELDS>
+        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
+        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="internalnotes" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="active" TYPE="int" LENGTH="1" NOTNULL="true" DEFAULT="1" SEQUENCE="false" COMMENT="Whether the institution is active or hidden (not selectable for new events)."/>
+        <FIELD NAME="usermodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+      </FIELDS>
+      <KEYS>
+        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
+        <KEY NAME="usermodified" TYPE="foreign" FIELDS="usermodified" REFTABLE="user" REFFIELDS="id"/>
+      </KEYS>
+    </TABLE>
+    <TABLE NAME="bookit_room" COMMENT="Bookit room">
+      <FIELDS>
+        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
+        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="description" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="eventcolor" TYPE="char" LENGTH="255" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="active" TYPE="int" LENGTH="1" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="roommode" TYPE="int" LENGTH="1" NOTNULL="true" SEQUENCE="false" COMMENT="0 = choose freely inside slots, 1 = only use predetermined slots."/>
+        <FIELD NAME="usermodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+      </FIELDS>
+      <KEYS>
+        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
+        <KEY NAME="usermodified" TYPE="foreign" FIELDS="usermodified" REFTABLE="user" REFFIELDS="id"/>
+      </KEYS>
+    </TABLE>
+    <TABLE NAME="bookit_weekplan" COMMENT="Weekplan">
+      <FIELDS>
+        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
+        <FIELD NAME="name" TYPE="text" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="usermodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+      </FIELDS>
+      <KEYS>
+        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
+        <KEY NAME="usermodified" TYPE="foreign" FIELDS="usermodified" REFTABLE="user" REFFIELDS="id"/>
+      </KEYS>
+    </TABLE>
+    <TABLE NAME="bookit_weekplanslot" COMMENT="Weekplan slots">
+      <FIELDS>
+        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
+        <FIELD NAME="weekplanid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="starttime" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Starttime in seconds, counted from start of week."/>
+        <FIELD NAME="endtime" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false" COMMENT="Endtime in seconds, counted from start of week."/>
+      </FIELDS>
+      <KEYS>
+        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
+        <KEY NAME="week_wee_frk" TYPE="foreign" FIELDS="weekplanid" REFTABLE="bookit_weekplan" REFFIELDS="id"/>
+      </KEYS>
+    </TABLE>
+    <TABLE NAME="bookit_weekplan_room" COMMENT="Saves weekplan is used for which room in what timeframe.">
+      <FIELDS>
+        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
+        <FIELD NAME="weekplanid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="roomid" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="starttime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false" COMMENT="epoch"/>
+        <FIELD NAME="endtime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false" COMMENT="epoch"/>
+        <FIELD NAME="usermodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+      </FIELDS>
+      <KEYS>
+        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
+        <KEY NAME="usermodified" TYPE="foreign" FIELDS="usermodified" REFTABLE="user" REFFIELDS="id"/>
+        <KEY NAME="weekplanid" TYPE="foreign" FIELDS="weekplanid" REFTABLE="bookit_weekplan" REFFIELDS="id"/>
+        <KEY NAME="roomid" TYPE="foreign" FIELDS="roomid" REFTABLE="bookit_room" REFFIELDS="id"/>
+      </KEYS>
+    </TABLE>
+    <TABLE NAME="bookit_blocker" COMMENT="Stores blocked times for specific rooms or globally.">
+      <FIELDS>
+        <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
+        <FIELD NAME="name" TYPE="text" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="starttime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="endtime" TYPE="int" LENGTH="11" NOTNULL="true" SEQUENCE="false"/>
+        <FIELD NAME="roomid" TYPE="int" LENGTH="11" NOTNULL="false" SEQUENCE="false"/>
+        <FIELD NAME="usermodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timecreated" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+        <FIELD NAME="timemodified" TYPE="int" LENGTH="10" NOTNULL="true" DEFAULT="0" SEQUENCE="false"/>
+      </FIELDS>
+      <KEYS>
+        <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
+        <KEY NAME="roomid" TYPE="foreign" FIELDS="roomid" REFTABLE="bookit_room" REFFIELDS="id"/>
+        <KEY NAME="usermodified" TYPE="foreign" FIELDS="usermodified" REFTABLE="user" REFFIELDS="id"/>
+      </KEYS>
+    </TABLE>
     <TABLE NAME="bookit_checklist_master" COMMENT="Stores the master checklists">
       <FIELDS>
         <FIELD NAME="id" TYPE="int" LENGTH="10" NOTNULL="true" SEQUENCE="true"/>
diff --git a/db/services.php b/db/services.php
new file mode 100644
index 0000000..45e34d9
--- /dev/null
+++ b/db/services.php
@@ -0,0 +1,40 @@
+<?php
+// This file is part of Moodle - https://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
+
+/**
+ * Declaration of external services.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann, RUB
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+defined('MOODLE_INTERNAL') || die();
+
+$functions = [
+    'mod_bookit_delete_blocker' => [
+        'classname'   => 'mod_bookit\external\delete_blocker',
+        'description' => 'Deletes a blocker.',
+        'type'        => 'write',
+        'ajax'        => true,
+    ],
+    'mod_bookit_get_possible_starttimes' => [
+        'classname'   => 'mod_bookit\external\get_possible_starttimes',
+        'description' => 'Gets all possible start times.',
+        'type'        => 'read',
+        'ajax'        => true,
+    ],
+];
diff --git a/db/upgrade.php b/db/upgrade.php
index 1c9f4ec..232bf70 100644
--- a/db/upgrade.php
+++ b/db/upgrade.php
@@ -22,9 +22,6 @@
  * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
  */
 
-// @codingStandardsIgnoreLine
-defined('MOODLE_INTERNAL') || die(); // @codeCoverageIgnore
-
 /**
  * Upgrade script.
  *
@@ -36,6 +33,7 @@ defined('MOODLE_INTERNAL') || die(); // @codeCoverageIgnore
  */
 function xmldb_bookit_upgrade(int $oldversion): bool {
     global $DB;
+    $dbman = $DB->get_manager();
 
     if ($oldversion < 2024102204) {
         $dbman = $DB->get_manager();
@@ -74,6 +72,213 @@ function xmldb_bookit_upgrade(int $oldversion): bool {
         upgrade_mod_savepoint(true, 2024102204, 'bookit');
     }
 
+    if ($oldversion < 2025042200) {
+        $dbman = $DB->get_manager();
+
+        // Define table bookit_institution to be created.
+        $table = new xmldb_table('bookit_institution');
+
+        // Adding fields to table bookit_institution.
+        $table->add_field('id', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, XMLDB_SEQUENCE, null);
+        $table->add_field('name', XMLDB_TYPE_TEXT, null, null, XMLDB_NOTNULL, null, null);
+        $table->add_field('internalnotes', XMLDB_TYPE_TEXT, null, null, null, null, null);
+        $table->add_field('active', XMLDB_TYPE_INTEGER, '1', null, XMLDB_NOTNULL, null, '1');
+        $table->add_field('usermodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timecreated', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timemodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+
+        // Adding keys to table bookit_institution.
+        $table->add_key('primary', XMLDB_KEY_PRIMARY, ['id']);
+        $table->add_key('usermodified', XMLDB_KEY_FOREIGN, ['usermodified'], 'user', ['id']);
+
+        // Conditionally launch create table for bookit_institution.
+        if (!$dbman->table_exists($table)) {
+            $dbman->create_table($table);
+        }
+
+        // Define table bookit_room to be created.
+        $table = new xmldb_table('bookit_room');
+
+        // Adding fields to table bookit_room.
+        $table->add_field('id', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, XMLDB_SEQUENCE, null);
+        $table->add_field('name', XMLDB_TYPE_TEXT, null, null, XMLDB_NOTNULL, null, null);
+        $table->add_field('description', XMLDB_TYPE_TEXT, null, null, null, null, null);
+        $table->add_field('eventcolor', XMLDB_TYPE_CHAR, '255', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('usermodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timecreated', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timemodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+
+        // Adding keys to table bookit_room.
+        $table->add_key('primary', XMLDB_KEY_PRIMARY, ['id']);
+        $table->add_key('usermodified', XMLDB_KEY_FOREIGN, ['usermodified'], 'user', ['id']);
+
+        // Conditionally launch create table for bookit_room.
+        if (!$dbman->table_exists($table)) {
+            $dbman->create_table($table);
+        }
+
+        // Define table bookit_weekplan to be created.
+        $table = new xmldb_table('bookit_weekplan');
+
+        // Adding fields to table bookit_weekplan.
+        $table->add_field('id', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, XMLDB_SEQUENCE, null);
+        $table->add_field('name', XMLDB_TYPE_TEXT, null, null, XMLDB_NOTNULL, null, null);
+        $table->add_field('usermodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timecreated', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timemodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+
+        // Adding keys to table bookit_weekplan.
+        $table->add_key('primary', XMLDB_KEY_PRIMARY, ['id']);
+        $table->add_key('usermodified', XMLDB_KEY_FOREIGN, ['usermodified'], 'user', ['id']);
+
+        // Conditionally launch create table for bookit_weekplan.
+        if (!$dbman->table_exists($table)) {
+            $dbman->create_table($table);
+        }
+
+        // Define table bookit_weekplanslot to be created.
+        $table = new xmldb_table('bookit_weekplanslot');
+
+        // Adding fields to table bookit_weekplanslot.
+        $table->add_field('id', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, XMLDB_SEQUENCE, null);
+        $table->add_field('weekplanid', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('starttime', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('endtime', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, null);
+
+        // Adding keys to table bookit_weekplanslot.
+        $table->add_key('primary', XMLDB_KEY_PRIMARY, ['id']);
+        $table->add_key('week_wee_frk', XMLDB_KEY_FOREIGN, ['weekplanid'], 'bookit_weekplan', ['id']);
+
+        // Conditionally launch create table for bookit_weekplanslot.
+        if (!$dbman->table_exists($table)) {
+            $dbman->create_table($table);
+        }
+
+        // Define table bookit_weekplan_room to be created.
+        $table = new xmldb_table('bookit_weekplan_room');
+
+        // Adding fields to table bookit_weekplan_room.
+        $table->add_field('id', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, XMLDB_SEQUENCE, null);
+        $table->add_field('weekplanid', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('roomid', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('starttime', XMLDB_TYPE_INTEGER, '11', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('endtime', XMLDB_TYPE_INTEGER, '11', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('usermodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timecreated', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timemodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+
+        // Adding keys to table bookit_weekplan_room.
+        $table->add_key('primary', XMLDB_KEY_PRIMARY, ['id']);
+        $table->add_key('usermodified', XMLDB_KEY_FOREIGN, ['usermodified'], 'user', ['id']);
+        $table->add_key('weekplanid', XMLDB_KEY_FOREIGN, ['weekplanid'], 'bookit_weekplan', ['id']);
+        $table->add_key('roomid', XMLDB_KEY_FOREIGN, ['roomid'], 'bookit_room', ['id']);
+
+        // Conditionally launch create table for bookit_weekplan_room.
+        if (!$dbman->table_exists($table)) {
+            $dbman->create_table($table);
+        }
+
+        // Define table bookit_blocker to be created.
+        $table = new xmldb_table('bookit_blocker');
+
+        // Adding fields to table bookit_blocker.
+        $table->add_field('id', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, XMLDB_SEQUENCE, null);
+        $table->add_field('name', XMLDB_TYPE_TEXT, null, null, null, null, null);
+        $table->add_field('starttime', XMLDB_TYPE_INTEGER, '11', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('endtime', XMLDB_TYPE_INTEGER, '11', null, XMLDB_NOTNULL, null, null);
+        $table->add_field('roomid', XMLDB_TYPE_INTEGER, '11', null, null, null, null);
+        $table->add_field('usermodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timecreated', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+        $table->add_field('timemodified', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0');
+
+        // Adding keys to table bookit_blocker.
+        $table->add_key('primary', XMLDB_KEY_PRIMARY, ['id']);
+        $table->add_key('roomid', XMLDB_KEY_FOREIGN, ['roomid'], 'bookit_room', ['id']);
+        $table->add_key('usermodified', XMLDB_KEY_FOREIGN, ['usermodified'], 'user', ['id']);
+
+        // Conditionally launch create table for bookit_blocker.
+        if (!$dbman->table_exists($table)) {
+            $dbman->create_table($table);
+        }
+
+        // Bookit savepoint reached.
+        upgrade_mod_savepoint(true, 2025042200, 'bookit');
+    }
+
+    if ($oldversion < 2025042800) {
+        $dbman = $DB->get_manager();
+
+        // Define field active to be added to bookit_room.
+        $table = new xmldb_table('bookit_room');
+        $field = new xmldb_field('active', XMLDB_TYPE_INTEGER, '1', null, XMLDB_NOTNULL, null, 1, 'eventcolor');
+
+        // Conditionally launch add field active.
+        if (!$dbman->field_exists($table, $field)) {
+            $dbman->add_field($table, $field);
+        }
+
+        // Define field roommode to be added to bookit_room.
+        $table = new xmldb_table('bookit_room');
+        $field = new xmldb_field('roommode', XMLDB_TYPE_INTEGER, '1', null, XMLDB_NOTNULL, null, 0, 'active');
+
+        // Conditionally launch add field roommode.
+        if (!$dbman->field_exists($table, $field)) {
+            $dbman->add_field($table, $field);
+        }
+
+        // Define field department to be dropped from bookit_event.
+        $table = new xmldb_table('bookit_event');
+        $field = new xmldb_field('department');
+
+        // Conditionally launch drop field department.
+        if ($dbman->field_exists($table, $field)) {
+            $dbman->drop_field($table, $field);
+        }
+
+        // Define field institutionid to be added to bookit_event.
+        $table = new xmldb_table('bookit_event');
+        $field = new xmldb_field('institutionid', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, null, 'department');
+
+        // Conditionally launch add field institutionid.
+        if (!$dbman->field_exists($table, $field)) {
+            $dbman->add_field($table, $field);
+        }
+
+        // Bookit savepoint reached.
+        upgrade_mod_savepoint(true, 2025042800, 'bookit');
+    }
+
+    if ($oldversion < 2025050500) {
+        $dbman = $DB->get_manager();
+
+        // Define field room to be added to bookit_event.
+        $table = new xmldb_table('bookit_event');
+        $field = new xmldb_field('roomid', XMLDB_TYPE_INTEGER, '10', null, null, null, null, 'duration');
+
+        // Conditionally launch add field room.
+        if (!$dbman->field_exists($table, $field)) {
+            $dbman->add_field($table, $field);
+        }
+
+        // Bookit savepoint reached.
+        upgrade_mod_savepoint(true, 2025050500, 'bookit');
+    }
+
+    if ($oldversion < 2025081200) {
+        // Define field seats to be added to bookit_room.
+        $table = new xmldb_table('bookit_room');
+        $field = new xmldb_field('seats', XMLDB_TYPE_INTEGER, '10', null, XMLDB_NOTNULL, null, '0', 'roommode');
+
+        // Conditionally launch add field seats.
+        if (!$dbman->field_exists($table, $field)) {
+            $dbman->add_field($table, $field);
+        }
+
+        // Bookit savepoint reached.
+        upgrade_mod_savepoint(true, 2025081200, 'bookit');
+    }
+
+
     if ($oldversion < 2025050500) {
         $dbman = $DB->get_manager();
 
diff --git a/edit_institution.php b/edit_institution.php
new file mode 100644
index 0000000..66f4df2
--- /dev/null
+++ b/edit_institution.php
@@ -0,0 +1,74 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Edit an institution.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $DB, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+// Override active url for admin tree / breadcrumbs.
+navigation_node::override_active_url(new moodle_url('/mod/bookit/institutions.php'));
+admin_externalpage_setup('mod_bookit_institutions');
+
+$id = optional_param('id', null, PARAM_INT);
+
+$params = [];
+$institution = null;
+if ($id) {
+    $params['id'] = $id;
+    $institution = \mod_bookit\local\persistent\institution::get_record(['id' => $id], MUST_EXIST);
+}
+
+$PAGE->set_url(new moodle_url('/mod/bookit/edit_institution.php', $params));
+if ($id) {
+    $title = get_string('edit_institution', 'mod_bookit');
+} else {
+    $title = get_string('new_institution', 'mod_bookit');
+}
+
+$PAGE->set_heading($title);
+$PAGE->set_title($title);
+$PAGE->navbar->add($title, new moodle_url($PAGE->url));
+
+$returnurl = new moodle_url('/mod/bookit/institutions.php');
+
+$mform = new \mod_bookit\local\form\edit_institution_form($PAGE->url, [
+    'persistent' => $institution,
+]);
+
+if ($mform->is_cancelled()) {
+    redirect($returnurl);
+} else if ($data = $mform->get_data()) {
+    if ($data->id) {
+        $institution->from_record($data);
+        $institution->update();
+    } else {
+        $institution = new \mod_bookit\local\persistent\institution(0, $data);
+        $institution->create();
+    }
+    redirect($returnurl);
+} // Else display form.
+
+echo $OUTPUT->header();
+$mform->display();
+echo $OUTPUT->footer();
diff --git a/edit_room.php b/edit_room.php
new file mode 100644
index 0000000..fcf0e88
--- /dev/null
+++ b/edit_room.php
@@ -0,0 +1,78 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Edit an institution.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $DB, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+// Override active url for admin tree / breadcrumbs.
+navigation_node::override_active_url(new moodle_url('/mod/bookit/rooms.php'));
+admin_externalpage_setup('mod_bookit_rooms');
+
+$id = optional_param('id', null, PARAM_INT);
+
+$params = [];
+$room = null;
+if ($id) {
+    $params['id'] = $id;
+    $room = \mod_bookit\local\persistent\room::get_record(['id' => $id], MUST_EXIST);
+}
+
+$PAGE->set_url(new moodle_url('/mod/bookit/edit_room.php', $params));
+if ($id) {
+    $title = get_string('edit_room', 'mod_bookit');
+} else {
+    $title = get_string('new_room', 'mod_bookit');
+}
+$PAGE->set_heading($title);
+$PAGE->set_title($title);
+$PAGE->navbar->add($title, new moodle_url($PAGE->url));
+
+$returnurl = new moodle_url('/mod/bookit/view_room.php', ['id' => $id]);
+
+$mform = new \mod_bookit\local\form\edit_room_form($PAGE->url, [
+    'persistent' => $room,
+]);
+
+if ($mform->is_cancelled()) {
+    if ($id) {
+        redirect(new moodle_url('/mod/bookit/view_room.php', ['id' => $id]));
+    } else {
+        redirect(new moodle_url('/mod/bookit/rooms.php'));
+    }
+} else if ($data = $mform->get_data()) {
+    if ($data->id) {
+        $room->from_record($data);
+        $room->update();
+    } else {
+        $room = new \mod_bookit\local\persistent\room(0, $data);
+        $room->create();
+        $id = $room->get('id');
+    }
+    redirect(new moodle_url('/mod/bookit/view_room.php', ['id' => $id]));
+} // Else display form.
+
+echo $OUTPUT->header();
+$mform->display();
+echo $OUTPUT->footer();
diff --git a/edit_weekplan.php b/edit_weekplan.php
new file mode 100644
index 0000000..876204a
--- /dev/null
+++ b/edit_weekplan.php
@@ -0,0 +1,79 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Edit an institution.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+use mod_bookit\local\manager\weekplan_manager;
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $DB, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+// Override active url for admin tree / breadcrumbs.
+navigation_node::override_active_url(new moodle_url('/mod/bookit/weekplans.php'));
+admin_externalpage_setup('mod_bookit_weekplans');
+
+$id = optional_param('id', null, PARAM_INT);
+
+$params = [];
+$weekplan = null;
+if ($id) {
+    $params['id'] = $id;
+    $weekplan = $DB->get_record('bookit_weekplan', ['id' => $id], '*', MUST_EXIST);
+    $weekplan->weekplan = weekplan_manager::create_string_weekplan_from_db($id);
+}
+
+$PAGE->set_url(new moodle_url('/mod/bookit/edit_weekplan.php', $params));
+
+if ($id) {
+    $title = get_string('edit_weekplan', 'mod_bookit');
+    $PAGE->navbar->add($weekplan->name, new moodle_url('/mod/bookit/weekplan.php', ['id' => $id]));
+} else {
+    $title = get_string('new_weekplan', 'mod_bookit');
+}
+
+$PAGE->set_heading($title);
+$PAGE->set_title($title);
+$returnurl = new moodle_url('/mod/bookit/weekplans.php');
+$PAGE->navbar->add($title, new moodle_url($PAGE->url));
+
+$mform = new \mod_bookit\local\form\edit_weekplan_form($PAGE->url);
+if ($id) {
+    $mform->set_data($weekplan);
+}
+
+if ($mform->is_cancelled()) {
+    redirect($returnurl);
+} else if ($data = $mform->get_data()) {
+    if ($id ?? false) {
+        $data->id = $id;
+        $DB->update_record('bookit_weekplan', $data);
+    } else {
+        $id = $DB->insert_record('bookit_weekplan', $data);
+    }
+    weekplan_manager::save_string_weekplan_to_db($data->weekplan, $id);
+    redirect($returnurl);
+} // Else display form.
+
+echo $OUTPUT->header();
+$mform->display();
+echo $OUTPUT->footer();
diff --git a/edit_weekplan_room.php b/edit_weekplan_room.php
new file mode 100644
index 0000000..77ced68
--- /dev/null
+++ b/edit_weekplan_room.php
@@ -0,0 +1,77 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Edit an institution.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $DB, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+// Override active url for admin tree / breadcrumbs.
+navigation_node::override_active_url(new moodle_url('/mod/bookit/rooms.php'));
+admin_externalpage_setup('mod_bookit_rooms');
+
+$id = optional_param('id', null, PARAM_INT);
+$roomid = required_param('roomid', PARAM_INT);
+$room = \mod_bookit\local\persistent\room::get_record(['id' => $roomid], MUST_EXIST);
+
+$params = ['roomid' => $roomid];
+$weekplanroom = null;
+if ($id) {
+    $params['id'] = $id;
+    $weekplanroom = \mod_bookit\local\persistent\weekplan_room::get_record(['id' => $id], MUST_EXIST);
+}
+
+$PAGE->set_url(new moodle_url('/mod/bookit/edit_weekplan_room.php', $params));
+$returnurl = new moodle_url('/mod/bookit/view_room.php', ['id' => $roomid]);
+
+if ($id) {
+    $title = get_string('edit_weekplan_assignment', 'mod_bookit');
+} else {
+    $title = get_string('new_weekplan_assignment', 'mod_bookit');
+}
+$PAGE->set_heading($title);
+$PAGE->set_title($title);
+$PAGE->navbar->add($room->get('name'), $returnurl);
+$PAGE->navbar->add($title, new moodle_url($PAGE->url));
+
+$mform = new \mod_bookit\local\form\edit_weekplan_room_form($PAGE->url, [
+    'persistent' => $weekplanroom,
+    'room' => $room,
+]);
+
+if ($mform->is_cancelled()) {
+    redirect($returnurl);
+} else if ($data = $mform->get_data()) {
+    if ($data->id) {
+        $weekplanroom->from_record($data);
+        $weekplanroom->update();
+    } else {
+        $weekplanroom = new \mod_bookit\local\persistent\weekplan_room(0, $data);
+        $weekplanroom->create();
+    }
+    redirect($returnurl);
+} // Else display form.
+
+echo $OUTPUT->header();
+$mform->display();
+echo $OUTPUT->footer();
diff --git a/events.php b/events.php
index 7711ed4..6df625e 100644
--- a/events.php
+++ b/events.php
@@ -23,7 +23,6 @@
  */
 
 require_once('../../config.php');
-require_once('lib.php');
 
 use mod_bookit\local\manager\event_manager;
 
diff --git a/events_available.php b/events_available.php
new file mode 100644
index 0000000..5bdd04b
--- /dev/null
+++ b/events_available.php
@@ -0,0 +1,45 @@
+<?php
+// This file is part of Moodle - https://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.
+
+/**
+ * The endpoint for the event source request of the admin slot/blocker calendar.
+ *
+ * @package     mod_bookit
+ * @copyright   2025 Justus Dieckmann RUB
+ * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+
+use mod_bookit\local\manager\event_manager;
+
+require_admin();
+$roomid = optional_param('roomid', 0, PARAM_INT);
+$start = optional_param('start', '1970-01-01T00:00', PARAM_TEXT);
+$end = optional_param('end', '2100-01-01T00:00', PARAM_TEXT);
+
+$room = null;
+if ($roomid) {
+    $room = \mod_bookit\local\persistent\room::get_record(['id' => $roomid], MUST_EXIST);
+}
+
+$start = new DateTime($start);
+
+$end = new DateTime($end);
+
+$events = event_manager::get_slots_in_timerange($start->getTimestamp(), $end->getTimestamp(), $roomid);
+header('Content-Type: application/json');
+echo json_encode($events);
diff --git a/institutions.php b/institutions.php
new file mode 100644
index 0000000..fadb667
--- /dev/null
+++ b/institutions.php
@@ -0,0 +1,46 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * List nstitutions for mod_bookit.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+admin_externalpage_setup('mod_bookit_institutions');
+$PAGE->set_url(new moodle_url('/mod/bookit/institutions.php'));
+$PAGE->set_heading(get_string('institutions', 'mod_bookit'));
+
+$table = new \mod_bookit\local\table\institutions_table();
+
+echo $OUTPUT->header();
+
+echo $OUTPUT->render(new \core\output\single_button(
+    new moodle_url('/mod/bookit/edit_institution.php'),
+    get_string('new_institution', 'mod_bookit'),
+    'post',
+    single_button::BUTTON_PRIMARY
+)) . '<br><br>';
+
+$table->out(48, false);
+
+echo $OUTPUT->footer();
diff --git a/lang/de/bookit.php b/lang/de/bookit.php
index 9b25e97..a1e6bff 100644
--- a/lang/de/bookit.php
+++ b/lang/de/bookit.php
@@ -25,24 +25,15 @@
 
 defined('MOODLE_INTERNAL') || die();
 
+$string['add_blocker'] = 'Blocker hinzufgen';
 $string['addbooking'] = 'Termin buchen';
-// ...@TODO: translate.
-$string['bookit:addevent'] = 'Add an event';
 $string['bookit:addinstance'] = 'BookIt Instanz hinzufgen';
-// ...@TODO: translate.
-$string['bookit:addresource'] = 'Add a resource';
-// ...@TODO: translate.
-$string['bookit:editevent'] = 'Edit an event';
-// ...@TODO: translate.
-$string['bookit:editinternal'] = 'Edit an internal field';
-// ...@TODO: translate.
-$string['bookit:editresource'] = 'Edit a resource';
 $string['bookit:view'] = 'BookIt Instanz anzeigen';
-// ...@TODO: translate.
-$string['bookit:viewalldetailsofevent'] = 'View all details of event';
-// ...@TODO: translate.
-$string['bookit:viewalldetailsofownevent'] = 'View all details of own event';
 $string['bookitfieldset'] = 'PLATZHALTER';
+$string['calendar'] = 'Kalender';
+$string['color'] = 'Farbe';
+$string['define_institutions'] = 'Institutionen definieren';
+$string['edit_blocker'] = 'Blocker bearbeiten';
 $string['category_name'] = 'Kategoriename';
 $string['checklistcategory'] = 'Checklisten-Kategorie';
 $string['checklistcategorydeleted'] = 'Checklisten-Kategorie erfolgreich gelscht.';
@@ -101,6 +92,14 @@ $string['customtemplatedefaultmessage_when_done'] = 'Lorem ipsum factum ###RECIP
 .'Egestas diam in.</p>';
 $string['edit'] = 'Bearbeiten';
 $string['edit_event'] = "Termin bearbeiten";
+$string['edit_institution'] = 'Institution bearbeiten';
+$string['edit_room'] = 'Raum bearbeiten';
+$string['edit_room_data'] = 'Raumdaten bearbeiten';
+$string['edit_weekplan'] = 'Wochenplan bearbeiten';
+$string['edit_weekplan_assignment'] = 'Wochenplan-Zuweisung bearbeiten';
+$string['end'] = 'Ende';
+$string['end_before_start'] = 'Der Endzeitpunkt muss nach dem Anfangszeitpunkt liegen!';
+$string['end_of_period'] = 'Ende des Zeitraums';
 $string['event_bookingstatus'] = 'Buchungsstatus';
 $string['event_bookingstatus_list'] = 'Neu, In Bearbeitung, Besttigt, Storniert, Abgelehnt';
 $string['event_compensationfordisadvantages'] = 'Weitere Nachteilsausgleiche';
@@ -109,12 +108,6 @@ $string['event_department'] = 'Institution';
 $string['event_department_help'] = 'Tragen Sie die beantragende Institution ein.';
 $string['event_duration'] = 'Dauer des Termins (in Minuten)';
 $string['event_duration_help'] = 'Tragen Sie die Dauer des Events ein.';
-// ...@TODO: translate.
-$string['event_error_mintime'] = 'You cannot enter events in the past.';
-// ...@TODO: translate.
-$string['event_extratime_description'] = '<i>Note that an extra time of {$a} minutes is automatically added to each event to allow preparation and wrap-up works to be done.</i>';
-// ...@TODO: translate.
-$string['event_extratime_label'] = '<i>Extra time for the event</i>';
 $string['event_internalnotes'] = 'Interne Hinweise';
 $string['event_internalnotes_help'] = 'Diese Notizen sind nur fr den internen Gebrauch bestimmt und werden der buchenden Person nicht angezeigt.';
 $string['event_name'] = 'Termin Name';
@@ -135,19 +128,19 @@ $string['event_start'] = 'Beginn';
 $string['event_start_help'] = 'Whlen Sie das Startdatum und -uhrzeit des Termins.';
 $string['event_students'] = 'Anzahl der Teilnehmenden';
 $string['event_students_help'] = 'Tragen Sie die erwartete Anzahl der Teilnehmenden ein.';
-// ...@TODO: translate.
-$string['event_supportperson'] = 'Support persons';
-// ...@TODO: translate.
-$string['event_supportperson_help'] = 'Support persons assigned to this event.';
-// ...@TODO: translate.
-$string['event_timecompensation'] = 'Time compensation';
-// ...@TODO: translate.
-$string['event_timecompensation_help'] = 'Check if you have participants entitled to time compensation.';
-// ...@TODO: translate.
-$string['event_usermodified'] = 'Created by user';
-// ...@TODO: translate.
-$string['header_internal'] = 'Internal fields';
+$string['general_settings'] = 'Allgemeine Einstellungen';
+$string['global_blocker'] = 'Globaler Blocker';
+$string['globally'] = 'Global';
 $string['instancename'] = 'Name';
+$string['institution'] = 'Institution';
+$string['institution_active'] = 'Aktiv';
+$string['institution_active_help'] = 'Wenn ja, knnen buchende Personen diese Institution auswhlen.';
+$string['institution_name'] = 'Name der Institution';
+$string['institutions'] = 'Institutionen';
+$string['internalnotes'] = 'Interne Hinweise';
+$string['internalnotes_help'] = 'Diese Notizen sind nur fr den internen Gebrauch bestimmt und werden der buchenden Person nicht angezeigt.';
+$string['legend'] = 'Legende';
+$string['local_blocker'] = 'Lokaler Blocker (nur fr diesen Raum)';
 $string['item_state_done'] = 'Erledigt';
 $string['item_state_open'] = 'Offen';
 $string['item_state_processing'] = 'In Bearbeitung';
@@ -156,6 +149,13 @@ $string['master_checklist'] = 'Haupt-Checkliste';
 $string['modulename'] = 'BookIt';
 $string['modulename_help'] = 'BookIt ist ein PlugIn fr die Buchung von Services, Prfungsterminen, Rumen oder anderer Resscourcen.';
 $string['modulenameplural'] = 'BookIt Instanzen';
+$string['new_institution'] = 'Neue Institution';
+$string['new_room'] = 'Neuer Raum';
+$string['new_timeslot'] = 'Neue timeslot';
+$string['new_weekplan'] = 'Neuer Wochenplan';
+$string['new_weekplan_assignment'] = 'Neue Wochenplan-Zuweisung';
+$string['normal_slot'] = 'Normaler Slot';
+$string['period'] = 'Zeitraum';
 $string['new_checklistcategory'] = 'Neue Checklisten-Kategorie';
 $string['new_checklistitem'] = 'Neues Checklisten-Element';
 $string['please_select_and_enter'] = 'Anzahl auswhlen oder eintragen';
@@ -163,48 +163,42 @@ $string['pluginadministration'] = 'BookIt Administration';
 $string['pluginname'] = 'BookIt';
 $string['recipient'] = 'Empfnger';
 $string['resource_amount'] = 'Anzahl';
+$string['room'] = 'Raum';
+$string['room_active'] = 'Aktiv';
+$string['room_active_help'] = 'Wenn ja, knnen buchende Personen diesen Raum auswhlen..';
 $string['responsibility'] = 'Verantwortlichkeit';
 $string['role'] = 'Rolle';
 $string['room'] = 'Raum';
-$string['roomcolorheading'] = 'Room colors';
+$string['roommode'] = 'Raummodus';
+$string['roommode_free'] = 'Freie Auswahl innerhalb der Slots';
+$string['roommode_slots'] = 'Buchungen knnen nur an Anfngen von Slots starten';
+$string['rooms'] = 'Rume';
+$string['seats'] = 'Anzahl an Pltzen';
 $string['select_coursetemplate'] = 'Auswahl Prfungskursvorlage';
 $string['select_coursetemplate_help'] = 'Whlen Sie eine Kursvorlage fr den Kurs, in dem Ihre Prfung stattfindet.';
 $string['select_semester'] = 'Semester';
 $string['select_semester_help'] = 'Whlen Sie das Semester aus, in dem der Termin stattfindet';
-// ...@TODO: translate.
-$string['settings_eventmaxyears'] = 'Maxmum year to select for event';
-// ...@TODO: translate.
-$string['settings_eventmaxyears_desc'] = 'Set the maxmum year to select for event. Note: this only applies to roles with the capability <code>caneditinternal</code>.';
-// ...@TODO: translate.
-$string['settings_eventminyears'] = 'Minimum year to select for event';
-// ...@TODO: translate.
-$string['settings_eventminyears_desc'] = 'Set the minimum year to select for event. Note: this only applies to roles with the capability <code>caneditinternal</code>.';
-// ...@TODO: translate.
-$string['settings_extratime'] = 'Extra time for event';
-// ...@TODO: translate.
-$string['settings_extratime_desc'] = 'Extra time which will be added automatically to each event to allow preparation and wrap-up works to be done.';
-// ...@TODO: translate.
-$string['settings_roomcolor'] = 'Color for room {$a}';
-// ...@TODO: translate.
-$string['settings_roomcolor_desc'] = 'Select a color to be used for the calendar view.';
-// ...@TODO: translate.
-$string['settings_roomcolor_wcagcheck'] = 'Color contrast check for room {$a}';
-// ...@TODO: translate.
-$string['settings_roomcolor_wcagcheck_desc'] = 'Contrast check for color <i>#{$a->bcolor}</i> and text <i>#{$a->fcolor}</i>: ';
-// ...@TODO: translate.
-$string['settings_roomcolorheading'] = 'Room colors';
-// ...@TODO: translate.
-$string['settings_textcolor'] = 'Event text color';
-// ...@TODO: translate.
-$string['settings_textcolor_desc'] = 'Set the text color of the event in the calendar view.';
+$string['settings_eventdefaultduration'] = 'Voreingestellte Lnge eines Termins (min)';
+$string['settings_eventdurationstepwidth'] = 'Schrittweite fr die Lnge eines Termins (min)';
+$string['settings_eventmaxduration'] = 'Maximal mgliche Lnge eines Termins (min)';
+$string['settings_eventstartstepwidth'] = 'Schrittweite fr Terminstartzeitpunkte (min)';
+$string['start'] = 'Anfang';
+$string['start_of_period'] = 'Anfang des Zeitraums';
 $string['sort'] = 'Sortieren';
 $string['summer_semester'] = 'Sommersemester';
+$string['timeslots'] = 'Zeitslots';
+$string['tools'] = 'Werkzeuge';
+$string['weekplan'] = 'Wochenplan';
+$string['weekplan_assignment_overlaps'] = 'Der eingegebene Zeitraum berschneidet eine bereits existierende Wochenplanzuweisung.';
+$string['weekplan_assignments'] = 'Wochenplan-Zuweisungen';
+$string['weekplan_help'] = 'Hier knnen Wochenplne definiert werden. Jede Zeile startet mit einem abgekrzten Wochentag, gefolgt von einer kommagetrennten Liste von Zeitslots.<br>
+Dies sind Beispiele fr valide Zeilen:
+<pre>
+Di 8-11:30, 14:00-17
+Mi 09-16
+Do 07:45-10:00,10-12,13-15
+</pre>';
+$string['weekplan_room'] = 'Wochenplan-Zuweisungen zu Rumen';
+$string['weekplans'] = 'Wochenplne';
 $string['time'] = 'Zeit';
-$string['type_before_due'] = 'Vor Flligkeit';
-$string['type_before_due_date'] = 'Vor Flligkeitsdatum';
-$string['type_overdue'] = 'Erinnerung bei berflligkeit';
-$string['type_overdue_date'] = 'Nach berflligkeitsdatum';
-$string['type_when_done'] = 'Wenn erledigt';
-$string['type_when_due'] = 'Wenn fllig';
-$string['type_when_due'] = 'Wenn fllig';
 $string['winter_semester'] = 'Wintersemester';
diff --git a/lang/en/bookit.php b/lang/en/bookit.php
index 6ed1048..cf7238c 100644
--- a/lang/en/bookit.php
+++ b/lang/en/bookit.php
@@ -25,6 +25,7 @@
 
 defined('MOODLE_INTERNAL') || die();
 
+$string['add_blocker'] = 'Add blocker';
 $string['addbooking'] = 'Request booking';
 $string['afterexam'] = 'After exam';
 $string['before_due'] = 'Before due';
@@ -41,6 +42,10 @@ $string['bookit:view'] = 'View BookIt instance';
 $string['bookit:viewalldetailsofevent'] = 'View all details of event';
 $string['bookit:viewalldetailsofownevent'] = 'View all details of own event';
 $string['bookitfieldset'] = 'PLACEHOLDER';
+$string['calendar'] = 'Calendar';
+$string['color'] = 'Color';
+$string['define_institutions'] = 'Define institutions';
+$string['edit_blocker'] = 'Edit blocker';
 $string['category_name'] = 'Category name';
 $string['checklistcategory'] = 'Checklist category';
 $string['checklistcategory_help'] = 'The checklist category which the checklist item belongs to. New items will be appended to the category and can be moved afterwards.';
@@ -104,6 +109,14 @@ $string['duedate'] = 'Due date';
 $string['duedate_help'] = "The due date for the completion of the checklist item. Must be one of 'none', 'before' or 'after' the exam. An offset in days must be set if the options 'before' or 'after' are selected.";
 $string['edit'] = 'Edit';
 $string['edit_event'] = "Edit event";
+$string['edit_institution'] = 'Edit institution';
+$string['edit_room'] = 'Edit room';
+$string['edit_room_data'] = 'Edit room data';
+$string['edit_weekplan'] = 'Edit week plan';
+$string['edit_weekplan_assignment'] = 'Edit weekplan assignment';
+$string['end'] = 'End';
+$string['end_before_start'] = 'The end date has to be after the start date!';
+$string['end_of_period'] = 'End of period';
 $string['event_bookingstatus'] = 'Booking status';
 $string['event_bookingstatus_list'] = 'New, In progress, Accepted, Canceled, Rejeced';
 $string['event_compensationfordisadvantages'] = 'Other compensations of disadvantages';
@@ -140,8 +153,20 @@ $string['event_supportperson_help'] = 'Support persons assigned to this event.';
 $string['event_timecompensation'] = 'Time compensation';
 $string['event_timecompensation_help'] = 'Check if you have participants entitled to time compensation.';
 $string['event_usermodified'] = 'Created by user';
+$string['general_settings'] = 'General Settings';
+$string['global_blocker'] = 'Global blocker';
+$string['globally'] = 'Globally';
 $string['header_internal'] = 'Internal fields';
 $string['instancename'] = 'Name';
+$string['institution'] = 'Institution';
+$string['institution_active'] = 'Active';
+$string['institution_active_help'] = 'If this institution will be available to select in new events.';
+$string['institution_name'] = 'Institution name';
+$string['institutions'] = 'Institutions';
+$string['internalnotes'] = 'Internal notes';
+$string['internalnotes_help'] = 'These notes are just for internal use and not shown to the booking person.';
+$string['legend'] = 'Legend';
+$string['local_blocker'] = 'Local blocker (only for this room)';
 $string['item_state_done'] = 'Done';
 $string['item_state_open'] = 'Open';
 $string['item_state_processing'] = 'Processing';
@@ -150,6 +175,13 @@ $string['master_checklist'] = 'Master checklist';
 $string['modulename'] = 'BookIt';
 $string['modulename_help'] = 'BookIt is a tool to book services or items, e.g. exam dates, rooms and ressources.';
 $string['modulenameplural'] = 'BookIt instances';
+$string['new_institution'] = 'New institution';
+$string['new_room'] = 'New room';
+$string['new_timeslot'] = 'New time slot';
+$string['new_weekplan'] = 'New week plan';
+$string['new_weekplan_assignment'] = 'New weekplan assignment';
+$string['normal_slot'] = 'Normal slot';
+$string['period'] = 'Period';
 $string['new_checklistcategory'] = 'New checklist category';
 $string['new_checklistitem'] = 'New checklist item';
 $string['noduedate'] = 'No due date';
@@ -166,6 +198,14 @@ $string['recipient'] = 'Recipient';
 $string['recipient_help'] = 'The recipient of the notification.';
 $string['resetmessagetoconfirm'] = 'Are you sure you want to reset the message to the default template? Your changes will be deleted.';
 $string['resource_amount'] = 'Amount';
+$string['room'] = 'Room';
+$string['room_active'] = 'Active';
+$string['room_active_help'] = 'If this room will be available to select in new events.';
+$string['roommode'] = 'Room mode';
+$string['roommode_free'] = 'Free selection inside slots';
+$string['roommode_slots'] = 'Bookings can only start at beginnings of slots';
+$string['rooms'] = 'Rooms';
+$string['seats'] = 'Amount of seats';
 $string['responsibility'] = 'Responsibility';
 $string['role'] = 'Role';
 $string['role_help'] = 'These roles will be assigned to the checklist item and will be responsible for the execution. Multiple roles can be selected by holding CTRL.';
@@ -178,12 +218,16 @@ $string['select_coursetemplate'] = 'Select a course template';
 $string['select_coursetemplate_help'] = 'Select a course template for the course in which your exam will take place.';
 $string['select_semester'] = 'Term';
 $string['select_semester_help'] = 'Select term of event.';
-$string['settings_eventmaxyears'] = 'Maxmum year to select for event';
-$string['settings_eventmaxyears_desc'] = 'Set the maxmum year to select for event. Note: this only applies to roles with the capability <code>caneditinternal</code>.';
+$string['settings_eventdefaultduration'] = 'Default duration of an event (min)';
+$string['settings_eventdurationstepwidth'] = 'The step width for the duration of an event (min)';
+$string['settings_eventmaxduration'] = 'Maximum duration of an event (min)';
+$string['settings_eventmaxyears'] = 'Maximum year to select for event';
+$string['settings_eventmaxyears_desc'] = 'Set the maximum year to select for event.';
 $string['settings_eventminyears'] = 'Minimum year to select for event';
 $string['settings_eventminyears_desc'] = 'Set the minimum year to select for event. Note: this only applies to roles with the capability <code>caneditinternal</code>.';
-$string['settings_extratime'] = 'Extra time for event';
-$string['settings_extratime_desc'] = 'Extra time which will be added automatically to each event to allow preparation and wrap-up works to be done.';
+$string['settings_eventstartstepwidth'] = 'The step width for the event start time (min)';
+$string['settings_extratime'] = 'Extra time for event (min)';
+$string['settings_extratime_desc'] = 'Extra time in minutes which will be added automatically to each event to allow preparation and wrap-up works to be done.';
 $string['settings_roomcolor'] = 'Color for room {$a}';
 $string['settings_roomcolor_desc'] = 'Select a color to be used for the calendar view.';
 $string['settings_roomcolor_wcagcheck'] = 'Color contrast check for room {$a}';
@@ -191,8 +235,24 @@ $string['settings_roomcolor_wcagcheck_desc'] = 'Contrast check for color <i>#{$a
 $string['settings_roomcolorheading'] = 'Room colors';
 $string['settings_textcolor'] = 'Event text color';
 $string['settings_textcolor_desc'] = 'Set the text color of the event in the calendar view.';
+$string['start'] = 'Start';
+$string['start_of_period'] = 'Start of period';
 $string['sort'] = 'Sort';
 $string['summer_semester'] = 'Summer Term';
+$string['timeslots'] = 'Time slots';
+$string['tools'] = 'Tools';
+$string['weekplan'] = 'Week plan';
+$string['weekplan_assignment_overlaps'] = 'The entered period is overlapping an already existing weekplan assignment.';
+$string['weekplan_assignments'] = 'Weekplan assignments';
+$string['weekplan_help'] = 'Here, you can define week plans. Each line should start with a abbreviated day of the week, followed by a list of comma separated timeslots.<br>
+These are examples for valid lines:
+<pre>
+Di 8-11:30, 14:00-17
+Mi 09-16
+Do 07:45-10:00,10-12,13-15
+</pre>';
+$string['weekplan_room'] = 'Weekplan assignments to rooms';
+$string['weekplans'] = 'Week plans';
 $string['time'] = 'Time';
 $string['time_help'] = "If the due date for the checklist item is 'before' or 'after', this setting defines how many days before or after the exam the checklist item should be completed.";
 $string['when_done'] = 'When done';
diff --git a/lib.php b/lib.php
index 1468bc1..fa91603 100644
--- a/lib.php
+++ b/lib.php
@@ -95,116 +95,3 @@ function bookit_delete_instance(int $id): bool {
 
     return true;
 }
-
-/**
- * Calculates the luminosity of an given RGB color.
- * The color code must be in the format of RRGGBB.
- * The luminosity equations are from the WCAG 2 requirements.
- * https://www.w3.org/TR/WCAG22/#dfn-relative-luminance
- *
- * @copyright gdkraus https://github.com/gdkraus/wcag2-color-contrast
- *
- * @param string $color
- * @return float
- */
-function calculateluminosity(string $color): float {
-
-    $r = hexdec(substr($color, 0, 2)) / 255; // Red value.
-    $g = hexdec(substr($color, 2, 2)) / 255; // Green value.
-    $b = hexdec(substr($color, 4, 2)) / 255; // Blue value.
-    if ($r <= 0.03928) {
-        $r = $r / 12.92;
-    } else {
-        $r = pow((($r + 0.055) / 1.055), 2.4);
-    }
-
-    if ($g <= 0.03928) {
-        $g = $g / 12.92;
-    } else {
-        $g = pow((($g + 0.055) / 1.055), 2.4);
-    }
-
-    if ($b <= 0.03928) {
-        $b = $b / 12.92;
-    } else {
-        $b = pow((($b + 0.055) / 1.055), 2.4);
-    }
-
-    return 0.2126 * $r + 0.7152 * $g + 0.0722 * $b;
-}
-
-/**
- * Calculates the luminosity ratio of two colors.
- * The luminosity ratio equations are from the WCAG 2 requirements.
- * https://www.w3.org/TR/WCAG22/#dfn-contrast-ratio
- *
- * @copyright gdkraus https://github.com/gdkraus/wcag2-color-contrast
- *
- * @param string $color1
- * @param string $color2
- * @return float
- */
-function calculateluminosityratio(string $color1, string $color2): float {
-    $l1 = calculateluminosity($color1);
-    $l2 = calculateluminosity($color2);
-
-    if ($l1 > $l2) {
-        $ratio = (($l1 + 0.05) / ($l2 + 0.05));
-    } else {
-        $ratio = (($l2 + 0.05) / ($l1 + 0.05));
-    }
-    return $ratio;
-}
-
-/**
- * Returns an array with the results of the color contrast analysis
- * It returns akey for each level (AA and AAA, both for normal and large or bold text).
- * It also returns the calculated contrast ratio.
- * The ratio levels are from the WCAG 2 requirements.
- * https://www.w3.org/WAI/WCAG22/quickref/#contrast-minimum
- * https://www.w3.org/WAI/WCAG22/quickref/#contrast-enhanced
- *
- * @copyright gdkraus https://github.com/gdkraus/wcag2-color-contrast
- *
- * @param string $color1
- * @param string $color2
- * @return array
- */
-function evaluatecolorcontrast(string $color1, string $color2): array {
-    $ratio = calculateluminosityratio($color1, $color2);
-
-    $colorevaluation["AA normal"] = ($ratio >= 4.5 ? 'pass' : 'fail');
-    $colorevaluation["AA large"] = ($ratio >= 3 ? 'pass' : 'fail');
-    $colorevaluation["AA medium bold"] = ($ratio >= 3 ? 'pass' : 'fail');
-    $colorevaluation["AAA normal"] = ($ratio >= 7 ? 'pass' : 'fail');
-    $colorevaluation["AAA large"] = ($ratio >= 4.5 ? 'pass' : 'fail');
-    $colorevaluation["AAA medium bold"] = ($ratio >= 4.5 ? 'pass' : 'fail');
-    $colorevaluation["Ratio"] = round($ratio, 2);
-
-    return $colorevaluation;
-}
-
-/**
- * Print color evaluation for normal text.
- * @param string $color
- * @param string $color2
- * @return string
- */
-function printcolorevaluation(string $color, string $color2): string {
-    $checkstring = '';
-    $check = evaluatecolorcontrast($color, $color2);
-    foreach ($check as $key => $value) {
-        if (str_contains($key, 'normal') || 'Ratio' == $key) {
-            if ('pass' == $value) {
-                $value = '<i class="fa fa-circle-check text-success" aria-hidden="true"></i> ';
-            } else if ('fail' == $value) {
-                $value = '<i class="fa fa-circle-xmark text-danger" aria-hidden="true"></i> ';
-            }
-
-            $checkstring .= $key . ': <strong>' . $value . '</strong> ';
-        }
-    }
-    return $checkstring . ' <br>' . '<i class="fa fa-circle-info text-info"></i>
-            WCAG 2.2 <a href="https://www.w3.org/TR/WCAG22/#contrast-minimum">AA</a> /
-            <a href="https://www.w3.org/TR/WCAG22/#contrast-enhanced">AAA</a>.<br><br>';
-}
diff --git a/rooms.php b/rooms.php
new file mode 100644
index 0000000..a92b7f9
--- /dev/null
+++ b/rooms.php
@@ -0,0 +1,46 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Admin-Backend concerning rooms for mod_bookit.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $OUTPUT;
+require_once($CFG->libdir . '/adminlib.php');
+
+admin_externalpage_setup('mod_bookit_rooms');
+$PAGE->set_url(new moodle_url('/mod/bookit/rooms.php'));
+$PAGE->set_heading(get_string('rooms', 'mod_bookit'));
+
+$table = new \mod_bookit\local\table\rooms_table();
+
+echo $OUTPUT->header();
+
+echo $OUTPUT->render(new \core\output\single_button(
+    new moodle_url('/mod/bookit/edit_room.php'),
+    get_string('new_room', 'mod_bookit'),
+    'post',
+    single_button::BUTTON_PRIMARY
+)) . '<br><br>';
+
+$table->out(48, false);
+
+echo $OUTPUT->footer();
diff --git a/settings.php b/settings.php
index f12b63a..b15fca9 100644
--- a/settings.php
+++ b/settings.php
@@ -31,12 +31,56 @@ require_once($CFG->dirroot . '/mod/bookit/lib.php');
 
 if ($hassiteconfig) {
     $ADMIN->add('modsettings', new admin_category('mod_bookit_category', new lang_string('pluginname', 'mod_bookit')));
-    $settings = new admin_settingpage('mod_bookit_settings', new lang_string('pluginname', 'mod_bookit'));
+    $settings = new admin_settingpage('mod_bookit_settings', new lang_string('general_settings', 'mod_bookit'));
 
     // phpcs:ignore Generic.CodeAnalysis.EmptyStatement.DetectedIf
     if ($ADMIN->fulltree) {
         // ...TODO: Define actual plugin settings page and add it to the tree - {@link https://docs.moodle.org/dev/Admin_settings}.
 
+        $settings->add(new admin_setting_configtext(
+            'mod_bookit/eventdefaultduration',
+            get_string('settings_eventdefaultduration', 'mod_bookit'),
+            null,
+            60,
+            PARAM_INT
+        ));
+
+        $settings->add(new admin_setting_configtext(
+            'mod_bookit/eventmaxduration',
+            get_string('settings_eventmaxduration', 'mod_bookit'),
+            null,
+            480,
+            PARAM_INT
+        ));
+
+        $settings->add(new admin_setting_configselect(
+            'mod_bookit/eventdurationstepwidth',
+            get_string('settings_eventdurationstepwidth', 'mod_bookit'),
+            null,
+            15,
+            [
+                5 => '5',
+                10 => '10',
+                15 => '15',
+                30 => '30',
+                60 => '60',
+            ],
+        ));
+
+        $settings->add(new admin_setting_configselect(
+            'mod_bookit/eventstartstepwidth',
+            get_string('settings_eventstartstepwidth', 'mod_bookit'),
+            null,
+            15,
+            [
+                5 => '5',
+                10 => '10',
+                15 => '15',
+                30 => '30',
+                60 => '60',
+            ],
+        ));
+
         // Event setting extra time.
         $name = 'mod_bookit/extratime';
         $title = get_string('settings_extratime', 'mod_bookit');
@@ -65,88 +109,65 @@ if ($hassiteconfig) {
         }
         $setting = new admin_setting_configselect($name, $title, $description, date('Y', strtotime('+1 year')), $minyearlist);
         $settings->add($setting);
+    }
 
-        // Room colors heading.
-        $name = 'mod_bookit/roomcolorheading';
-        $title = get_string('settings_roomcolorheading', 'mod_bookit', null, true);
-        $setting = new admin_setting_heading($name, $title, null);
-        $settings->add($setting);
-
-        // Set text color to black or white (default).
-        $name = 'mod_bookit/textcolor';
-        $title = get_string('settings_textcolor', 'mod_bookit');
-        $description = get_string('settings_textcolor_desc', 'mod_bookit');
-        $choices = ['#ffffff' => 'white', '#000000' => 'black'];
-        $setting = new admin_setting_configselect($name, $title, $description, '#ffffff', $choices);
-        $settings->add($setting);
+    $ADMIN->add('mod_bookit_category', new admin_externalpage(
+        'mod_bookit_institutions',
+        get_string('institutions', 'mod_bookit'),
+        new moodle_url('/mod/bookit/institutions.php'),
+        // TODO specify required capability.
+    ));
+
+    $ADMIN->add('mod_bookit_category', new admin_externalpage(
+        'mod_bookit_rooms',
+        get_string('rooms', 'mod_bookit'),
+        new moodle_url('/mod/bookit/rooms.php'),
+        // TODO specify required capability.
+    ));
+
+    $ADMIN->add('mod_bookit_category', new admin_externalpage(
+        'mod_bookit_weekplans',
+        get_string('weekplans', 'mod_bookit'),
+        new moodle_url('/mod/bookit/weekplans.php'),
+        // TODO specify required capability.
+    ));
 
-        // Set a color for each room defined in resources - at least one.
-        // Get the ressources.
-        $catresourceslist = resource_manager::get_resources();
-        foreach ($catresourceslist as $category => $value) {
-            if ($category === 'Rooms') {
-                foreach ($value['resources'] as $rid => $catresource) {
-                    $name = 'mod_bookit/roomcolor_' . $rid;
-                    $title = get_string('settings_roomcolor', 'mod_bookit', $catresource['name'], true);
-                    $description = get_string('settings_roomcolor_desc', 'mod_bookit', null, true);
-                    $setting = new admin_setting_configcolourpicker($name, $title, $description, '');
-                    $settings->add($setting);
-
-                    // Add color contrast check.
-                    $fcolor = get_config('mod_bookit', 'textcolor');
-                    $fcolor = (!empty($fcolor) ? substr($fcolor, 1) : 'FFFFFF');
-                    $bcolor = get_config('mod_bookit', 'roomcolor_' . $rid);
-                    $bcolor = (!empty($bcolor) ? substr($bcolor, 1) : false);
-                    if (!empty($bcolor)) {
-                        $check = printcolorevaluation($fcolor, $bcolor);
-                        $a = new StdClass();
-                        $a->fcolor = $fcolor;
-                        $a->bcolor = $bcolor;
-                        $setting = new admin_setting_description(
-                            $name . '_wcag',
-                            get_string('settings_roomcolor_wcagcheck', 'mod_bookit', $rid),
-                            get_string('settings_roomcolor_wcagcheck_desc', 'mod_bookit', $a) . $check
-                        );
-                        $settings->add($setting);
-                    }
-                }
-            }
-        }
+    $ADMIN->add('mod_bookit_category', $settings);
 
-        $installhelperfinished = get_config('mod_bookit', 'installhelperfinished');
+    $installhelperfinished = get_config('mod_bookit', 'installhelperfinished');
 
-        if (empty($installhelperfinished)) {
-            $runinstallhelper = new admin_setting_configcheckbox(
-                'mod_bookit/runinstallhelper',
-                new lang_string('runinstallhelper', 'mod_bookit'),
-                new lang_string('runinstallhelperinfo', 'mod_bookit'),
-                1
-            );
+    if (empty($installhelperfinished)) {
+        $runinstallhelper = new admin_setting_configcheckbox(
+            'mod_bookit/runinstallhelper',
+            new lang_string('runinstallhelper', 'mod_bookit'),
+            new lang_string('runinstallhelperinfo', 'mod_bookit'),
+            1
+        );
 
-                $runinstallhelper->set_updatedcallback(function () {
+        $runinstallhelper->set_updatedcallback(function () {
 
-                    $settingstate = get_config('mod_bookit', 'runinstallhelper');
+            $settingstate = get_config('mod_bookit', 'runinstallhelper');
 
-                    if (!empty($settingstate)) {
-                        debugging('Importing default roles for BookIt...');
-                        $rolesimported = install_helper::import_default_roles(false, false);
+            if (!empty($settingstate)) {
+                debugging('Importing default roles for BookIt...');
+                $rolesimported = install_helper::import_default_roles(false, false);
 
-                        if ($rolesimported) {
-                            debugging('Default roles were imported successfully.');
-                        } else {
-                            debugging('No default roles were imported (may already exist).');
-                        }
+                if ($rolesimported) {
+                    debugging('Default roles were imported successfully.');
+                } else {
+                    debugging('No default roles were imported (may already exist).');
+                }
 
-                        debugging('Setting up default checklist data for BookIt...');
-                        $result = install_helper::create_default_checklists(false, false);
+                debugging('Setting up default checklist data for BookIt...');
+                $result = install_helper::create_default_checklists(false, false);
 
-                        if ($result) {
-                            debugging('Default checklist data was created successfully.');
-                        } else {
-                            debugging('Default checklist data was not created (may already exist).');
+                if ($result) {
+                    debugging('Default checklist data was created successfully.');
+                } else {
+                    debugging('Default checklist data was not created (may already exist).');
+                }
+                set_config('installhelperfinished', 1, 'mod_bookit');
                         }
-                        set_config('installhelperfinished', 1, 'mod_bookit');
-                    }
                 });
 
             $settings->add($runinstallhelper);
@@ -164,4 +185,3 @@ if ($hassiteconfig) {
 
     $ADMIN->add('mod_bookit_category', $settings);
     $settings = null;
-}
diff --git a/templates/admin_calendar_legend.mustache b/templates/admin_calendar_legend.mustache
new file mode 100644
index 0000000..9aad51d
--- /dev/null
+++ b/templates/admin_calendar_legend.mustache
@@ -0,0 +1,44 @@
+{{!
+    This file is part of Moodle - http://moodle.org/
+
+    Moodle is free software: you can redistribute it and/or modify
+    it under the terms of the GNU General Public License as published by
+    the Free Software Foundation, either version 3 of the License, or
+    (at your option) any later version.
+
+    Moodle is distributed in the hope that it will be useful,
+    but WITHOUT ANY WARRANTY; without even the implied warranty of
+    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+    GNU General Public License for more details.
+
+    You should have received a copy of the GNU General Public License
+    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+}}
+{{!
+    @template mod_bookit/delete_save_cancel_modal
+
+    Moodle modal template with save and cancel buttons.
+
+    The purpose of this template is to render a modal.
+
+    Classes required for JS:
+    * none
+
+    Data attributes required for JS:
+    * none
+
+    Context variables required for this template:
+    * title A cleaned string (use clean_text()) to display.
+    * body HTML content for the body
+
+    Example context (json):
+    {
+        "title": "Example delete event seriesmodal",
+        "body": "Do you want to delete this event, or all events in the series?"
+    }
+}}
+
+{{#str}} legend, mod_bookit {{/str}}: <br>
+<span style="display: inline-block; background: #035AA3; width: 12px; height: 12px"></span> {{#str}}normal_slot, mod_bookit{{/str}} <br>
+<span style="display: inline-block; background: #A33; width: 12px; height: 12px"></span> {{#str}}global_blocker, mod_bookit{{/str}} <br>
+<span style="display: inline-block; background: #C78316; width: 12px; height: 12px"></span> {{#str}}local_blocker, mod_bookit{{/str}} <br>
\ No newline at end of file
diff --git a/templates/modal_delete_save_cancel.mustache b/templates/modal_delete_save_cancel.mustache
index a576341..348666f 100644
--- a/templates/modal_delete_save_cancel.mustache
+++ b/templates/modal_delete_save_cancel.mustache
@@ -15,7 +15,7 @@
     along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
 }}
 {{!
-    @template mod_bookit/modal_delete_save_cancel
+    @template mod_bookit/delete_save_cancel_modal
 
     Moodle modal template with save and cancel buttons.
 
diff --git a/thirdpartylibs.xml b/thirdpartylibs.xml
new file mode 100644
index 0000000..88d37fa
--- /dev/null
+++ b/thirdpartylibs.xml
@@ -0,0 +1,11 @@
+<?xml version="1.0"?>
+<libraries>
+    <library>
+        <location>thirdpartylibs/event-calendar</location>
+        <name>EventCalendar</name>
+        <description>Event Calendar</description>
+        <version>3.12.0</version>
+        <license>MIT</license>
+        <repository>https://github.com/vkurko/calendar</repository>
+    </library>
+</libraries>
diff --git a/assets/custom-calendar.min.css b/thirdpartylibs/event-calendar/custom-calendar.min.css
similarity index 100%
rename from assets/custom-calendar.min.css
rename to thirdpartylibs/event-calendar/custom-calendar.min.css
diff --git a/thirdpartylibs/event-calendar/event-calendar.min.css b/thirdpartylibs/event-calendar/event-calendar.min.css
new file mode 100644
index 0000000..65a2197
--- /dev/null
+++ b/thirdpartylibs/event-calendar/event-calendar.min.css
@@ -0,0 +1 @@
+.ec{color-scheme:light;--ec-h:0;--ec-s:0%;--ec-l-300:91.00%;--ec-l-500:83.50%;--ec-l-600:78.40%;--ec-l-700:71.40%;--ec-bg-fallback-color:#fff;--ec-hs:var(--ec-h),var(--ec-s);--ec-color-300:hsl(var(--ec-hs),var(--ec-l-300));--ec-color-500:hsl(var(--ec-hs),var(--ec-l-500));--ec-color-600:hsl(var(--ec-hs),var(--ec-l-600));--ec-color-700:hsl(var(--ec-hs),var(--ec-l-700));--ec-border-color:var(--ec-color-500);--ec-accent-color:var(--ec-color-600);--ec-button-bg-color:var(--ec-bg-color);--ec-button-border-color:var(--ec-color-600);--ec-button-text-color:var(--ec-text-color);--ec-button-active-bg-color:var(--ec-color-300);--ec-button-active-border-color:var(--ec-color-700);--ec-button-active-text-color:var(--ec-button-text-color);--ec-event-bg-color:#039be5;--ec-event-text-color:#fff;--ec-bg-event-color:var(--ec-color-500);--ec-bg-event-opacity:0.3;--ec-list-day-bg-color:var(--ec-bg-color,var(--ec-bg-fallback-color));--ec-today-bg-color:rgba(255,220,40,.15);--ec-highlight-color:rgba(188,232,241,.3);--ec-popup-bg-color:var(--ec-bg-color,var(--ec-bg-fallback-color));--ec-now-indicator-color:#ea4335}.ec-dark .ec{color-scheme:dark;--ec-h:215;--ec-s:15%;--ec-l-300:25.50%;--ec-l-500:42.40%;--ec-l-600:49.80%;--ec-l-700:57.30%;--ec-bg-fallback-color:#22272e}@media(prefers-color-scheme:dark){.ec-auto-dark .ec{color-scheme:dark;--ec-h:215;--ec-s:15%;--ec-l-300:25.50%;--ec-l-500:42.40%;--ec-l-600:49.80%;--ec-l-700:57.30%;--ec-bg-fallback-color:#22272e}}.ec-timeline .ec-container{display:flex;flex:1 1 0%;min-height:0}.ec-timeline .ec-main{display:flex;flex-direction:column;min-width:0}.ec-timeline .ec-content{flex-direction:column}.ec-timeline .ec-body{flex:1 1 auto;overflow:auto}.ec-timeline .ec-body .ec-content{min-height:100%;min-width:-moz-max-content;min-width:max-content;position:relative}.ec-timeline .ec-body .ec-days{flex-shrink:0}.ec-timeline .ec-body .ec-days:not(:last-child){flex-grow:0}.ec-timeline .ec-header{overflow:hidden}.ec-timeline .ec-header .ec-days{min-width:-moz-max-content;min-width:max-content}.ec-timeline .ec-header .ec-day{display:flex;flex-basis:auto;flex-direction:column}.ec-timeline .ec-day,.ec-timeline .ec-header .ec-day:first-child .ec-day-head,.ec-timeline .ec-header .ec-day:first-child .ec-time:first-child{border:none}.ec-timeline .ec-day-head{border-style:none none none solid}.ec-timeline .ec-times{border-top:1px solid var(--ec-border-color);display:flex}.ec-timeline .ec-time{border-left:1px solid var(--ec-border-color);box-sizing:border-box;font-size:.95em;min-height:24px;overflow:hidden;text-overflow:ellipsis}.ec-timeline .ec-line,.ec-timeline .ec-time{width:72px}.ec-timeline .ec-events{height:100%;margin:0;position:relative}.ec-timeline .ec-event{position:absolute}.ec-timeline .ec-bg-event{height:100%;z-index:auto}.ec-timeline .ec-lines{display:flex}.ec-timeline .ec-line:not(:first-child):after{border-left:1px solid var(--ec-border-color);content:"";height:100%;pointer-events:none;position:absolute}.ec-timeline .ec-sidebar{border-right-style:solid;border:1px solid var(--ec-border-color);border-right:1px var(--ec-border-color);padding:0}.ec-timeline .ec-sidebar .ec-sidebar-title{border-bottom:1px solid var(--ec-border-color);box-sizing:initial;flex-shrink:0}.ec-timeline .ec-sidebar .ec-content{flex:1;overflow:hidden}.ec-timeline .ec-sidebar .ec-resource{flex-shrink:0;padding:0 8px}.ec-timeline .ec-sidebar .ec-resource:not(:last-child){border-bottom:1px solid var(--ec-border-color);flex-grow:0}.ec-timeline .ec-sidebar .ec-resource:last-child{flex-basis:100%!important}.ec-timeline .ec-sidebar .ec-resource span{padding-top:8px}.ec-time-grid .ec-body .ec-event{position:absolute}.ec-time-grid .ec-body .ec-event-title{position:sticky;top:0}.ec-time-grid .ec-body .ec-resizer{bottom:0;cursor:ns-resize;height:50%;left:0;max-height:8px;right:0}.ec-time-grid .ec-body .ec-resizer.ec-start{bottom:auto;top:0}.ec-time-grid .ec-bg-event{width:100%;z-index:1}.ec-time-grid .ec-time{line-height:24px;position:relative;text-align:right;top:-12px}.ec-time-grid .ec-all-day .ec-time,.ec-time-grid .ec-header .ec-time{height:0;overflow-y:hidden;visibility:hidden}.ec-time-grid .ec-line,.ec-time-grid .ec-time{height:24px}.ec-time-grid .ec-lines{width:8px}.ec-time-grid .ec-line:not(:first-child):after{border-bottom:1px solid var(--ec-border-color);content:"";pointer-events:none;position:absolute;width:100%}.ec-time-grid .ec-body:not(.ec-compact) .ec-line:nth-child(2n):after{border-bottom-style:dotted}.ec-time-grid .ec-sidebar-title{height:0;overflow-y:hidden;text-align:right;visibility:hidden}.ec-time-grid .ec-all-day .ec-sidebar-title{height:auto;padding:8px 0;visibility:visible}.ec-day-grid .ec-body{flex:1 1 auto}.ec-day-grid .ec-body .ec-day{min-height:5em;position:relative}.ec-day-grid .ec-content{flex-direction:column;height:100%}.ec-day-grid .ec-uniform .ec-content{overflow:hidden}.ec-day-grid .ec-uniform .ec-days{flex:1 1 0%;min-height:0}.ec-day-grid .ec-uniform .ec-day{min-height:0}.ec-day-grid .ec-day:first-child{border-left:none}.ec-day-grid .ec-day-head{border:none;display:flex;flex-direction:row-reverse;justify-content:space-between;padding:4px 4px 3px}.ec-day-grid .ec-day-foot{bottom:0;font-size:.85em;padding:2px;position:absolute}.ec-day-grid .ec-day-foot a{cursor:pointer}.ec-day,.ec-days,.ec-resource{flex:1 1 0;max-width:100%;min-width:0}.ec{background-color:var(--ec-bg-color);color:var(--ec-text-color);display:flex;flex-direction:column;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ec ::-webkit-scrollbar{background-color:transparent}.ec ::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:var(--ec-border-color);border:4px solid transparent;border-radius:8px;box-shadow:none;min-height:40px}.ec :hover::-webkit-scrollbar-thumb{background-color:var(--ec-accent-color)}.ec-hidden-scroll{display:none;flex-shrink:0;overflow-y:scroll;visibility:hidden}.ec-with-scroll .ec-hidden-scroll{display:block}.ec-toolbar{align-items:center;display:flex;flex:0 0 auto;justify-content:space-between;margin-bottom:1em}.ec-toolbar>*{margin-bottom:-.5em}.ec-toolbar>*>*{margin-bottom:.5em}.ec-toolbar>*>:not(:last-child){margin-right:.75em}.ec-title{margin:0}.ec-button{background-color:var(--ec-button-bg-color);border:1px solid var(--ec-button-border-color);border-radius:.25rem;font-size:1rem;line-height:1.5;padding:.375rem .75rem}.ec-button:not(:disabled){color:var(--ec-button-text-color);cursor:pointer}.ec-button.ec-active,.ec-button:not(:disabled):hover{background-color:var(--ec-button-active-bg-color);border-color:var(--ec-button-active-border-color);color:var(--ec-button-active-text-color);z-index:1}.ec-expander{margin-right:.25em;width:1.25em}.ec-expander .ec-button{aspect-ratio:1;height:1.25em;line-height:normal;padding:0}.ec-button-group{display:inline-flex}.ec-button-group .ec-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.ec-button-group .ec-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.ec-icon{display:inline-block;width:1em}.ec-icon.ec-next:after,.ec-icon.ec-prev:after{border-right:2px solid;border-top:2px solid;content:"";display:inline-block;height:.5em;position:relative;width:.5em}.ec-icon.ec-prev:after{transform:rotate(-135deg) translate(-2px,2px)}.ec-icon.ec-next:after{transform:rotate(45deg) translate(-2px,2px)}.ec-all-day,.ec-body,.ec-day,.ec-day-head,.ec-days,.ec-header{border:1px solid var(--ec-border-color)}.ec-header{display:flex;flex-shrink:0}.ec-header .ec-resource{flex-direction:column}.ec-header .ec-resource .ec-days{border-top-style:solid}.ec-header .ec-days{border-bottom:none}.ec-header .ec-day{line-height:24px;min-height:24px;overflow:hidden;text-align:center;text-overflow:ellipsis}.ec-all-day{border-top:none;flex-shrink:0}.ec-all-day .ec-days{border-bottom:none}.ec-all-day .ec-day{padding-bottom:4px;position:relative}.ec-body{overflow-x:hidden;overflow-y:auto;position:relative}.ec:not(.ec-list) .ec-body{border-top:none}.ec-sidebar{flex:0 0 auto;flex-direction:column;max-width:100%;padding:0 4px 0 8px;width:auto}.ec-content,.ec-sidebar{display:flex}.ec-list .ec-content{flex-direction:column}.ec-days,.ec-resource{display:flex}.ec-days{border-style:none none solid}.ec-days:last-child{border-bottom:none}.ec-day-grid .ec-days,.ec-resource .ec-days{flex:1 0 auto}.ec-day{border-style:none none none solid}.ec-day.ec-today{background-color:var(--ec-today-bg-color)}.ec-day.ec-highlight{background-color:var(--ec-highlight-color)}.ec-day.ec-disabled{position:relative}.ec-day.ec-disabled:after{background-color:var(--ec-bg-event-color);content:"";inset:0 0 0 0;opacity:.3;position:absolute}.ec-day.ec-other-month .ec-day-head time{opacity:.3}.ec-list .ec-day{border:none}.ec-list .ec-day-head{background-color:var(--ec-list-day-bg-color);border-style:solid none;margin:-1px 0 0;padding:8px 14px;position:sticky;top:0;z-index:2}.ec-list .ec-day:first-child .ec-day-head{border-top:none}.ec-list .ec-day-side{float:right}.ec-list .ec-no-events{padding:5em 0;text-align:center}.ec-events{margin:0 6px 0 0}.ec-events.ec-preview,.ec-time-grid .ec-events{position:relative}.ec-all-day .ec-events,.ec-day-grid .ec-events{display:flow-root}.ec-event{background-color:var(--ec-event-bg-color);border-radius:3px;box-shadow:0 0 1px 0 var(--ec-border-color);box-sizing:border-box;color:var(--ec-event-text-color);display:flex;font-size:.85em;line-height:1.5;padding:2px;z-index:1}.ec-all-day .ec-event,.ec-day-grid .ec-event{position:relative}.ec-list .ec-event{background-color:transparent;border-radius:0;color:inherit;flex-direction:row;padding:8px 14px}.ec-event.ec-preview{opacity:.8;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;z-index:1000}.ec-event.ec-pointer{box-shadow:none;color:inherit;display:flex;pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:0}.ec-event-body{display:flex;flex-direction:column;width:100%}.ec-all-day .ec-event-body,.ec-day-grid .ec-event-body,.ec-timeline .ec-event-body{flex-direction:row}.ec-event-tag{border-radius:2px;margin-right:8px;width:4px}.ec-event-time{flex-shrink:0;margin:0 0 1px;max-height:100%;overflow:hidden;white-space:nowrap}.ec-day-grid .ec-event-time,.ec-timeline .ec-event-time{margin:0 3px 0 0;max-width:100%;text-overflow:ellipsis}.ec-event-title{font-weight:inherit;margin:unset;overflow:hidden}.ec-all-day .ec-event-title,.ec-day-grid .ec-event-title,.ec-timeline .ec-event-title{min-height:1.5em;text-overflow:ellipsis;white-space:nowrap}.ec-list .ec-event-title{font-size:1rem}.ec-draggable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-ghost{opacity:.5;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-bg-events{position:relative}.ec-all-day .ec-bg-events,.ec-day-grid .ec-bg-events{inset:0;position:absolute}.ec-bg-event{background-color:var(--ec-bg-event-color);opacity:var(--ec-bg-event-opacity);position:absolute}.ec-all-day .ec-bg-event,.ec-day-grid .ec-bg-event{height:100%;z-index:auto}.ec-time{white-space:nowrap}.ec-popup{background-color:var(--ec-popup-bg-color);border:1px solid var(--ec-border-color);border-radius:6px;box-shadow:0 1px 3px 0 hsla(var(--ec-hs),50%,.15),0 4px 8px 3px hsla(var(--ec-hs),50%,.15);display:flex;flex-direction:column;min-width:180px;outline:1px solid transparent;padding:8px 10px 14px;position:absolute;top:0;width:110%;z-index:1010}.ec-popup .ec-day-head{display:flex;justify-content:space-between;text-align:left}.ec-popup .ec-day-head a{cursor:pointer;font-size:1.5em;line-height:.8}.ec-popup .ec-events{margin:0;min-height:0;overflow:auto}.ec-extra{height:100%;margin-left:-6.5px;overflow:hidden;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-now-indicator{border-top:2px solid var(--ec-now-indicator-color);pointer-events:none;position:absolute;width:100%;z-index:1005}.ec-now-indicator:before{background:var(--ec-now-indicator-color);border-radius:50%;content:"";height:12px;margin-top:-7px;pointer-events:none;position:absolute;width:12px}.ec-resizer{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ec-all-day .ec-resizer,.ec-day-grid .ec-resizer,.ec-timeline .ec-resizer{bottom:0;cursor:ew-resize;max-width:8px;right:0;top:0;width:50%}.ec-all-day .ec-resizer.ec-start,.ec-day-grid .ec-resizer.ec-start,.ec-timeline .ec-resizer.ec-start{left:0;right:auto}.ec-dragging,.ec-dragging *{cursor:pointer!important}.ec-resizing-y,.ec-resizing-y *{cursor:ns-resize!important}.ec-resizing-x,.ec-resizing-x *{cursor:ew-resize!important}
\ No newline at end of file
diff --git a/thirdpartylibs/event-calendar/event-calendar.min.js b/thirdpartylibs/event-calendar/event-calendar.min.js
new file mode 100644
index 0000000..df18f4b
--- /dev/null
+++ b/thirdpartylibs/event-calendar/event-calendar.min.js
@@ -0,0 +1,6 @@
+/*!
+EventCalendar v3.12.0
+https://github.com/vkurko/calendar
+*/
+var EventCalendar=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function l(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];if(null==e){for(const t of r)t(void 0);return t}const o=e.subscribe(...r);return o.unsubscribe?()=>o.unsubscribe():o}function s(t){let e;return i(t,(t=>e=t))(),e}function a(t,e,n){t.$$.on_destroy.push(i(e,n))}function c(t,e,n,r){if(t){const l=u(t,e,n,r);return t[0](l)}}function u(t,e,n,r){return t[1]&&r?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](r(e))):n.ctx}function d(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|l[r];return t}return e.dirty|l}return e.dirty}function f(t,e,n,r,l,o){if(l){const i=u(e,n,r,o);t.p(i,l)}}function h(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function m(t,e,n){return t.set(n),e}function p(e){return e&&l(e.destroy)?e.destroy:t}const $="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function g(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function w(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function x(){return k(" ")}function C(){return k("")}function _(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function D(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e){e=""+e,t.data!==e&&(t.data=e)}function S(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function M(t,e){return new t(e)}let U;function N(t){U=t}function L(){if(!U)throw new Error("Function called outside component initialization");return U}function R(t){L().$$.on_mount.push(t)}function z(t){L().$$.after_update.push(t)}function H(){const t=L();return function(e,n){let{cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=t.$$.callbacks[e];if(l){const o=function(t,e){let{bubbles:n=!1,cancelable:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}(e,n,{cancelable:r});return l.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function B(t){return L().$$.context.get(t)}function F(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const A=[],P=[];let I=[];const j=[],W=Promise.resolve();let O=!1;function G(){O||(O=!0,W.then(J))}function Y(){return G(),W}function q(t){I.push(t)}const X=new Set;let V=0;function J(){if(0!==V)return;const t=U;do{try{for(;V<A.length;){const t=A[V];V++,N(t),K(t.$$)}}catch(t){throw A.length=0,V=0,t}for(N(null),A.length=0,V=0;P.length;)P.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];X.has(e)||(X.add(e),e())}I.length=0}while(A.length);for(;j.length;)j.pop()();O=!1,X.clear(),N(t)}function K(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}const Q=new Set;let Z;function tt(){Z={r:0,c:[],p:Z}}function et(){Z.r||r(Z.c),Z=Z.p}function nt(t,e){t&&t.i&&(Q.delete(t),t.i(e))}function rt(t,e,n,r){if(t&&t.o){if(Q.has(t))return;Q.add(t),Z.c.push((()=>{Q.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}function lt(t){return void 0!==t?.length?t:Array.from(t)}function ot(t,e){rt(t,1,1,(()=>{e.delete(t.key)}))}function it(t,e,n,l,o,i,s,a,c,u,d,f){let h=t.length,m=i.length,p=h;const $={};for(;p--;)$[t[p].key]=p;const g=[],v=new Map,y=new Map,w=[];for(p=m;p--;){const t=f(o,i,p),r=n(t);let l=s.get(r);l?w.push((()=>l.p(t,e))):(l=u(r,t),l.c()),v.set(r,g[p]=l),r in $&&y.set(r,Math.abs(p-$[r]))}const b=new Set,k=new Set;function x(t){nt(t,1),t.m(a,d),s.set(t.key,t),d=t.first,m--}for(;h&&m;){const e=g[m-1],n=t[h-1],r=e.key,l=n.key;e===n?(d=e.first,h--,m--):v.has(l)?!s.has(r)||b.has(r)?x(e):k.has(l)?h--:y.get(r)>y.get(l)?(k.add(r),x(e)):(b.add(l),h--):(c(n,s),h--)}for(;h--;){const e=t[h];v.has(e.key)||c(e,s)}for(;m;)x(g[m-1]);return r(w),g}function st(t){t&&t.c()}function at(t,n,o){const{fragment:i,after_update:s}=t.$$;i&&i.m(n,o),q((()=>{const n=t.$$.on_mount.map(e).filter(l);t.$$.on_destroy?t.$$.on_destroy.push(...n):r(n),t.$$.on_mount=[]})),s.forEach(q)}function ct(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];I.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),I=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(e,l,o,i,s,a){let c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1];const d=U;N(e);const f=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l.context||(d?d.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:l.target||d.$$.root};c&&c(f.root);let h=!1;if(f.ctx=o?o(e,l.props||{},(function(t,n){const r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),h&&function(t,e){-1===t.$$.dirty[0]&&(A.push(t),G(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),h=!0,r(f.before_update),f.fragment=!!i&&i(f.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);f.fragment&&f.fragment.l(t),t.forEach(y)}else f.fragment&&f.fragment.c();l.intro&&nt(e.$$.fragment),at(e,l.target,l.anchor),J()}N(d)}class dt{$$=void 0;$$set=void 0;$destroy(){ct(this,1),this.$destroy=t}$on(e,n){if(!l(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ft=[];function ht(t,e){return{subscribe:mt(t,e).subscribe}}function mt(e){let n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;const l=new Set;function i(t){if(o(e,t)&&(e=t,n)){const t=!ft.length;for(const t of l)t[1](),ft.push(t,e);if(t){for(let t=0;t<ft.length;t+=2)ft[t][0](ft[t+1]);ft.length=0}}}function s(t){i(t(e))}return{set:i,update:s,subscribe:function(o){const a=[o,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t];return l.add(a),1===l.size&&(n=r(i,s)||t),o(e),()=>{l.delete(a),0===l.size&&n&&(n(),n=null)}}}}function pt(e,n,o){const s=!Array.isArray(e),a=s?[e]:e;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=n.length<2;return ht(o,((e,o)=>{let u=!1;const d=[];let f=0,h=t;const m=()=>{if(f)return;h();const r=n(s?d[0]:d,e,o);c?e(r):h=l(r)?r:t},p=a.map(((t,e)=>i(t,(t=>{d[e]=t,f&=~(1<<e),u&&m()}),(()=>{f|=1<<e}))));return u=!0,m(),function(){r(p),h(),u=!1}}))}function $t(t){return function(e){return"Enter"===e.key||" "===e.key&&!e.preventDefault()?t.call(this,e):void 0}}function gt(t,e){let n={update(e){"string"==typeof e?t.innerText=e:e?.domNodes?t.replaceChildren(...e.domNodes):e?.html&&(t.innerHTML=e.html)}};return n.update(e),n}function vt(t,e){const n=n=>{t&&!t.contains(n.target)&&t.dispatchEvent(new CustomEvent(e+"outside",{detail:{jsEvent:n}}))};return document.addEventListener(e,n,!0),{destroy(){document.removeEventListener(e,n,!0)}}}const yt=86400;function wt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return void 0!==t?t instanceof Date?Bt(t):function(t){const e=t.match(/\d+/g);return new Date(Date.UTC(Number(e[0]),Number(e[1])-1,Number(e[2]),Number(e[3]||0),Number(e[4]||0),Number(e[5]||0)))}(t):Bt(new Date)}function bt(t){if("number"==typeof t)t={seconds:t};else if("string"==typeof t){let e=0,n=2;for(let r of t.split(":",3))e+=parseInt(r,10)*Math.pow(60,n--);t={seconds:e}}else t instanceof Date&&(t={hours:t.getUTCHours(),minutes:t.getUTCMinutes(),seconds:t.getUTCSeconds()});let e=t.weeks||t.week||0;return{years:t.years||t.year||0,months:t.months||t.month||0,days:7*e+(t.days||t.day||0),seconds:60*(t.hours||t.hour||0)*60+60*(t.minutes||t.minute||0)+(t.seconds||t.second||0),inWeeks:!!e}}function kt(t){return new Date(t.getTime())}function xt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.setUTCFullYear(t.getUTCFullYear()+n*e.years);let r=t.getUTCMonth()+n*e.months;for(t.setUTCMonth(r),r%=12,r<0&&(r+=12);t.getUTCMonth()!==r;)Dt(t);return t.setUTCDate(t.getUTCDate()+n*e.days),t.setUTCSeconds(t.getUTCSeconds()+n*e.seconds),t}function Ct(t,e){return xt(t,e,-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1))}function _t(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.setUTCDate(t.getUTCDate()+e),t}function Dt(t){return _t(t,-(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1))}function Tt(t){return t.setUTCHours(0,0,0,0),t}function Et(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}function St(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:19;return t.toISOString().substring(0,e)}function Mt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.every((e=>t.getTime()===e.getTime()))}function Ut(t,e){let n=e-t.getUTCDay();return t.setUTCDate(t.getUTCDate()+(n<=0?n:n-7)),t}function Nt(t){return"string"==typeof t&&t.length<=10}function Lt(t,e){return t.setUTCHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0),t}function Rt(t){return t.seconds}function zt(t,e){return xt(t,e),t}function Ht(t,e,n){if(Ct(t,e),n.length&&n.length<7)for(;n.includes(t.getUTCDay());)Dt(t);return t}function Bt(t){return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()))}function Ft(){return Object.assign(...arguments)}function At(t){return Object.keys(t)}function Pt(t){return Math.floor(t)}function It(t){return Math.ceil(t)}function jt(){return Math.min(...arguments)}function Wt(){return Math.max(...arguments)}function Ot(t){return Array.isArray(t)}function Gt(t){return"function"==typeof t}function Yt(t){return t()}function qt(t){t.forEach(Yt)}function Xt(){}const Vt=t=>t;function Jt(t,e,n){n.update((n=>n.set(e,t)))}function Kt(t){qt(t),t.clear()}function Qt(t,e,n){e??=t,n.has(e)||n.set(e,setTimeout((()=>{n.delete(e),t()})))}let Zt=Symbol("ec");function te(t,e){t[Zt]=e}function ee(t){return t[Zt]}function ne(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=document.createElement(t);l.className=e,"string"==typeof n?l.innerText=n:n.domNodes?l.replaceChildren(...n.domNodes):n.html&&(l.innerHTML=n.html);for(let t of r)l.setAttribute(...t);return l}function re(t){return t.getBoundingClientRect()}function le(t,e){for(;e--;)t=t.parentElement;return t}function oe(t){return re(t).height}function ie(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;for(let l of n.elementsFromPoint(t,e)){if(r=l,r?.[Zt])return l;if(l.shadowRoot){let n=ie(t,e,l.shadowRoot);if(n)return n}}var r;return null}function se(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function ae(t){return(t=Ft({},t)).currentStart=Et(t.currentStart),t.currentEnd=Et(t.currentEnd),t.activeStart=Et(t.activeStart),t.activeEnd=Et(t.activeEnd),t}function ce(t){return t.startsWith("list")}function ue(t){return t.includes("Timeline")}let de=1;function fe(t){return t.map((t=>{let e={id:"id"in t?String(t.id):`{generated-${de++}}`,resourceIds:he(t,"resourceId").map(String),allDay:t.allDay??(Nt(t.start)&&Nt(t.end)),start:wt(t.start),end:wt(t.end),title:t.title??"",editable:t.editable,startEditable:t.startEditable,durationEditable:t.durationEditable,display:t.display??"auto",extendedProps:t.extendedProps??{},backgroundColor:t.backgroundColor??t.color,textColor:t.textColor,classNames:he(t,"className"),styles:he(t,"style")};if(e.allDay){Tt(e.start);let t=kt(e.end);Tt(e.end),Mt(e.end,t)&&!Mt(e.end,e.start)||_t(e.end)}return e}))}function he(t,e){let n=t[e+"s"]??t[e]??[];return Ot(n)?n:[n]}function me(t){return t.map((t=>({events:t.events,url:t.url&&t.url.trimEnd("&")||"",method:t.method&&t.method.toUpperCase()||"GET",extraParams:t.extraParams||{}})))}function pe(t,e,n){let r={start:t.start>e?t.start:e,end:t.end<n?t.end:n,event:t};return r.zeroDuration=Mt(r.start,r.end),r}function $e(t){t.sort(((t,e)=>t.start-e.start||e.event.allDay-t.event.allDay))}function ge(t,e,n,r,l,o){let i,s=l.formatRange(t.start,e&&"pointer"!==t.event.display&&!t.zeroDuration?Lt(kt(t.start),t.end):t.start);if(n&&(i=Gt(n)?n({event:we(t.event),timeText:s,view:ae(o)}):n),void 0===i){let e;switch(t.event.display){case"background":e=[];break;case"pointer":e=[ve(s,t,r)];break;default:e=[...t.event.allDay?[]:[ve(s,t,r)],ne("h4",r.eventTitle,t.event.title)]}i={domNodes:e}}return[s,i]}function ve(t,e,n){return ne("time",n.eventTime,t,[["datetime",St(e.start)]])}function ye(t,e,n){let r=e.classNames;return t&&(Gt(t)&&(t=t({event:we(e),view:ae(n)})),r=[...Ot(t)?t:[t],...r]),r}function we(t){return ke(t,Et)}function be(t){return ke(t,kt)}function ke(t,e){return(t=Ft({},t)).start=e(t.start),t.end=e(t.end),t}function xe(t,e){let n={};if(t.length){let r;$e(t);for(let l of t){let t=[],o=Tt(kt(l.start));for(;l.end>o;){if(!e.includes(o.getUTCDay())&&(t.push(kt(o)),t.length>1)){let t=o.getTime();n[t]?n[t].chunks.push(l):n[t]={sorted:!1,chunks:[l]}}_t(o)}if(t.length){l.date=t[0],l.days=t.length,l.dates=t,l.start<t[0]&&(l.start=t[0]);let e=_t(kt(t.at(-1)));l.end>e&&(l.end=e)}else l.date=Tt(kt(l.start)),l.days=1,l.dates=[l.date];r&&Mt(r.date,l.date)&&(l.prev=r),r=l}}return n}function Ce(t,e,n){t.top=0,t.prev&&(t.top=t.prev.bottom+1),t.bottom=t.top+n;let r=1,l=t.date.getTime();if(e[l]){e[l].sorted||(e[l].chunks.sort(((t,e)=>t.top-e.top)),e[l].sorted=!0);for(let n of e[l].chunks)if(t.top<n.bottom&&t.bottom>n.top){let e=n.bottom-t.top+1;r+=e,t.top+=e,t.bottom+=e}}return r}function _e(t,e){t.length=e.length;let n=[];for(let e of t)n.push(e?.reposition?.());return n}function De(t,e,n,r){return t.start<n&&t.end>e&&(!r||(Ot(r)||(r=[r]),r.some((e=>t.resourceIds.includes(e.id)))))}function Te(t){return function(t){return"preview"===t}(t)||Se(t)||function(t){return"pointer"===t}(t)}function Ee(t){return"background"===t}function Se(t){return"ghost"===t}function Me(t){return Re(t,"day")}function Ue(t){return Re(t,"week")}function Ne(t){return Re(t,"month")}function Le(t){return Re(t,"year")}function Re(t,e){return{...t,next:"Next "+e,prev:"Previous "+e}}function ze(t){return e=>({...e,view:t})}function He(t){let e,n;return t&&(({start:e,end:n}=t),e&&(e=Tt(wt(e))),n&&(n=Tt(wt(n)))),{start:e,end:n}}function Be(t,e){return e.start&&t<e.start||e.end&&t>e.end}function Fe(t,e){return e.start&&t<e.start&&(t=e.start),e.end&&t>e.end&&(t=e.end),t}function Ae(t){let e=[];return Pe(t,0,e),e}function Pe(t,e,n){let r=[];for(let l of t){let t=Ie(l);r.push(t),n.push(t);let o={level:e,children:[],expanded:!0,hidden:!1};te(t,o),l.children&&(o.children=Pe(l.children,e+1,n))}return r}function Ie(t){return{id:String(t.id),title:t.title||"",eventBackgroundColor:t.eventBackgroundColor,eventTextColor:t.eventTextColor,extendedProps:t.extendedProps??{}}}function je(t,e){return Oe(t,e)?.eventBackgroundColor}function We(t,e){return Oe(t,e)?.eventTextColor}function Oe(t,e){return e.find((e=>t.resourceIds.includes(e.id)))}function Ge(t,e){return pt([t,e],(t=>{let[e,n]=t,r=Gt(n)?{format:n}:new Intl.DateTimeFormat(e,n);return{format:t=>r.format(Et(t))}}))}function Ye(t,e){return pt([t,e],(t=>{let e,[n,r]=t;if(Gt(r))e=r;else{let t=new Intl.DateTimeFormat(n,r);e=(e,n)=>{if(e<=n)return t.formatRange(e,n);{let r=t.formatRangeToParts(n,e),l="",o=["startRange","endRange"],i=[!1,!1];for(let t of r){let e=o.indexOf(t.source);e>=0?i[e]||(l+=qe(o[1-e],r),i[e]=!0):l+=t.value}return l}}}return{formatRange:(t,n)=>e(Et(t),Et(n))}}))}function qe(t,e){let n="";for(let r of e)r.source==t&&(n+=r.value);return n}function Xe(t){return pt([t.resources,t.filterResourcesWithEvents,t._events,t._activeRange],(t=>{let[e,n,r,l]=t,o=e.filter((t=>!ee(t).hidden));return n&&(o=e.filter((t=>{for(let e of r)if("background"!==e.display&&e.resourceIds.includes(t.id)&&e.start<l.end&&e.end>l.start)return!0;return!1}))),o.length||(o=Ae([{}])),o}))}function Ve(t,e,n,r,l){t=kt(t);let o=[],i=kt(t);xt(t,r.min),xt(i,r.max),void 0===n&&(n=e.seconds<3600?bt(2*e.seconds):e);let s,a=n.seconds<=0;for(a||(s=kt(t));t<i;){for(o.push([St(t),l.format(t),a||o.length&&t>=s]);!a&&t>=s;)xt(s,n);xt(t,e)}return o}function Je(t,e,n,r,l){let o=bt(t),i=bt(e);if(n){let t=bt(jt(Rt(o),Wt(0,Rt(i)-yt))),e=bt(Wt(Rt(i),Rt(t)+yt)),s=Gt(n?.eventFilter)?n.eventFilter:t=>!Ee(t.display);t:for(let n of r){let r=xt(kt(n),o),a=xt(kt(n),i),c=xt(kt(n),t),u=xt(kt(n),e);for(let d of l)if(!d.allDay&&s(d)&&d.start<u&&d.end>c){if(d.start<r){let e=Wt((d.start-n)/1e3,Rt(t));e<Rt(o)&&(o.seconds=e)}if(d.end>a){let t=jt((d.end-n)/1e3,Rt(e));t>Rt(i)&&(i.seconds=t)}if(Rt(o)===Rt(t)&&Rt(i)===Rt(e))break t}}}return{min:o,max:i}}class Ke{constructor(t,e){let n=function(t){let e={allDayContent:void 0,allDaySlot:!0,buttonText:{today:"today"},customButtons:{},date:new Date,datesSet:void 0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},dayHeaderAriaLabelFormat:{dateStyle:"full"},displayEventEnd:!0,duration:{weeks:1},events:[],eventAllUpdated:void 0,eventBackgroundColor:void 0,eventTextColor:void 0,eventClassNames:void 0,eventClick:void 0,eventColor:void 0,eventContent:void 0,eventDidMount:void 0,eventMouseEnter:void 0,eventMouseLeave:void 0,eventSources:[],eventTimeFormat:{hour:"numeric",minute:"2-digit"},filterEventsWithResources:!1,filterResourcesWithEvents:!1,firstDay:0,flexibleSlotTimeLimits:!1,headerToolbar:{start:"title",center:"",end:"today prev,next"},height:void 0,hiddenDays:[],highlightedDates:[],lazyFetching:!0,loading:void 0,locale:void 0,nowIndicator:!1,resourceLabelContent:void 0,resourceLabelDidMount:void 0,resources:[],selectable:!1,scrollTime:"06:00:00",slotDuration:"00:30:00",slotEventOverlap:!0,slotHeight:24,slotLabelInterval:void 0,slotLabelFormat:{hour:"numeric",minute:"2-digit"},slotMaxTime:"24:00:00",slotMinTime:"00:00:00",slotWidth:72,theme:{allDay:"ec-all-day",active:"ec-active",bgEvent:"ec-bg-event",bgEvents:"ec-bg-events",body:"ec-body",button:"ec-button",buttonGroup:"ec-button-group",calendar:"ec",compact:"ec-compact",content:"ec-content",day:"ec-day",dayHead:"ec-day-head",days:"ec-days",disabled:"ec-disabled",event:"ec-event",eventBody:"ec-event-body",eventTime:"ec-event-time",eventTitle:"ec-event-title",events:"ec-events",extra:"ec-extra",handle:"ec-handle",header:"ec-header",hiddenScroll:"ec-hidden-scroll",highlight:"ec-highlight",icon:"ec-icon",line:"ec-line",lines:"ec-lines",nowIndicator:"ec-now-indicator",otherMonth:"ec-other-month",resource:"ec-resource",sidebar:"ec-sidebar",sidebarTitle:"ec-sidebar-title",today:"ec-today",time:"ec-time",title:"ec-title",toolbar:"ec-toolbar",view:"",weekdays:["ec-sun","ec-mon","ec-tue","ec-wed","ec-thu","ec-fri","ec-sat"],withScroll:"ec-with-scroll"},titleFormat:{year:"numeric",month:"short",day:"numeric"},validRange:void 0,view:void 0,viewDidMount:void 0,views:{}};for(let n of t)n.createOptions?.(e);return e}(t=t||[]),r=function(t){let e={date:t=>Tt(wt(t)),duration:bt,events:fe,eventSources:me,hiddenDays:t=>[...new Set(t)],highlightedDates:t=>t.map((t=>Tt(wt(t)))),resources:Ae,scrollTime:bt,slotDuration:bt,slotLabelInterval:t=>void 0!==t?bt(t):void 0,slotMaxTime:bt,slotMinTime:bt,validRange:He};for(let n of t)n.createParsers?.(e);return e}(t);n=Qe(n,r),e=Qe(e,r);for(let[t,e]of Object.entries(n))this[t]=mt(e);this._queue=mt(new Map),this._queue2=mt(new Map),this._tasks=new Map,this._auxiliary=mt([]),this._dayGrid=pt(this.view,(t=>t?.startsWith("dayGrid"))),this._currentRange=function(t){return pt([t.date,t.duration,t.firstDay],(t=>{let e,[n,r,l]=t,o=kt(n);return r.months?o.setUTCDate(1):r.inWeeks&&Ut(o,l),e=xt(kt(o),r),{start:o,end:e}}))}(this),this._activeRange=function(t){return pt([t._currentRange,t.firstDay,t.slotMaxTime,t._dayGrid],(t=>{let[e,n,r,l]=t,o=kt(e.start),i=kt(e.end);if(l)Ut(o,n),function(t,e){let n=e-t.getUTCDay();t.setUTCDate(t.getUTCDate()+(n>=0?n:n+7))}(i,n);else if(r.days||r.seconds>yt){xt(Dt(i),r);let t=Dt(kt(i));t<o&&(o=t)}return{start:o,end:i}}))}(this),this._fetchedRange=mt({start:void 0,end:void 0}),this._events=function(t){let e,n=mt([]),r=0,l={};return pt([t.events,t.eventSources,t._activeRange,t._fetchedRange,t.lazyFetching,t.loading],((n,o)=>Jt((()=>{let[t,l,i,s,a,c]=n;if(l.length){if(!s.start||s.start>i.start||s.end<i.end||!a){e&&e.abort(),e=new AbortController,Gt(c)&&!r&&c(!0);let t=()=>{0==--r&&Gt(c)&&c(!1)},n=[],a=e=>t(),u=e=>{n=n.concat(fe(e)),o(n),t()},d=St(i.start),f=St(i.end);for(let t of l){if(Gt(t.events)){let e=t.events({start:Et(i.start),end:Et(i.end),startStr:d,endStr:f},u,a);void 0!==e&&Promise.resolve(e).then(u,a)}else{let n=Gt(t.extraParams)?t.extraParams():Ft({},t.extraParams);n.start=d,n.end=f,n=new URLSearchParams(n);let r,l=t.url,o={};["GET","HEAD"].includes(t.method)?l+=(l.includes("?")?"&":"?")+n:(o["content-type"]="application/x-www-form-urlencoded;charset=UTF-8",r=String(n)),fetch(l,{method:t.method,headers:o,body:r,signal:e.signal,credentials:"same-origin"}).then((t=>t.json())).then(u).catch(a)}++r}s.start=i.start,s.end=i.end}}else o(t)}),l,t._queue)),[]).subscribe(n.set),n}(this),this._now=ht(wt(),(t=>{let e=setInterval((()=>{t(wt())}),1e3);return()=>clearInterval(e)})),this._today=function(t){return pt(t._now,(t=>Tt(kt(t))))}(this),this._intlEventTime=Ye(this.locale,this.eventTimeFormat),this._intlSlotLabel=Ge(this.locale,this.slotLabelFormat),this._intlDayHeader=Ge(this.locale,this.dayHeaderFormat),this._intlDayHeaderAL=Ge(this.locale,this.dayHeaderAriaLabelFormat),this._intlTitle=Ye(this.locale,this.titleFormat),this._bodyEl=mt(void 0),this._scrollable=mt(!1),this._viewTitle=function(t){return pt([t.date,t._activeRange,t._intlTitle,t._dayGrid],(t=>{let[e,n,r,l]=t;return l?r.formatRange(e,e):r.formatRange(n.start,Dt(kt(n.end)))}))}(this),this._viewDates=function(t){return pt([t._activeRange,t.hiddenDays],(e=>{let[n,r]=e,l=[],o=Tt(kt(n.start)),i=Tt(kt(n.end));for(;o<i;)r.includes(o.getUTCDay())||l.push(kt(o)),_t(o);return!l.length&&r.length&&r.length<7&&(t.date.update((t=>{for(;r.includes(t.getUTCDay());)_t(t);return t})),l=s(t._viewDates)),l}))}(this),this._view=function(t){return pt([t.view,t._viewTitle,t._currentRange,t._activeRange],(t=>function(t,e,n,r){return{type:t,title:e,currentStart:n.start,currentEnd:n.end,activeStart:r.start,activeEnd:r.end,calendar:void 0}}(...t)))}(this),this._viewComponent=mt(void 0),this._interaction=mt({}),this._iEvents=mt([null,null]),this._iClasses=mt(Vt),this._iClass=mt(void 0),this._set=(t,e)=>{en(t,this)&&(r[t]&&(e=r[t](e)),this[t].set(e))},this._get=t=>en(t,this)?s(this[t]):void 0;for(let e of t)e.createStores?.(this);e.view&&this.view.set(e.view);let l=new Set([...At(n.views),...At(e.views??{})]);for(let t of l){let r=Ze(n,n.views[t]??{}),l=Ze(r,e,e.views?.[t]??{}),o=l.component;tn(l,this);for(let t of At(l)){let{set:e,_set:n=e,...o}=this[t];this[t]={set:["buttonText","theme"].includes(t)?o=>{if(Gt(o)){let i=o(r[t]);l[t]=i,e(e===n?i:o)}else l[t]=o,e(o)}:n=>{l[t]=n,e(n)},_set:n,...o}}this.view.subscribe((e=>{if(e===t){this._viewComponent.set(o),Gt(l.viewDidMount)&&Y().then((()=>l.viewDidMount(s(this._view))));for(let t of At(l))this[t]._set(l[t])}}))}}}function Qe(t,e){let n={...t};for(let t of At(e))t in n&&(n[t]=e[t](n[t]));if(t.views){n.views={};for(let r of At(t.views))n.views[r]=Qe(t.views[r],e)}return n}function Ze(){let t={};for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(let e of n){let n={};for(let r of["buttonText","theme"])Gt(e[r])&&(n[r]=e[r](t[r]));t={...t,...e,...n}}return t}function tn(t,e){At(t).filter((t=>!en(t,e)||"view"==t)).forEach((e=>delete t[e]))}function en(t,e){return e.hasOwnProperty(t)&&"_"!==t[0]}function nn(t,e,n){const r=t.slice();return r[34]=e[n],r}function rn(t){let e,n,r,l,o,i=t[7][t[34]]+"";function s(){return t[29](t[34])}return{c(){e=b("button"),n=k(i),T(e,"class",r=t[5].button+(t[9]===t[34]?" "+t[5].active:"")+" ec-"+t[34])},m(t,r){v(t,e,r),g(e,n),l||(o=_(e,"click",s),l=!0)},p(l,o){t=l,129&o[0]&&i!==(i=t[7][t[34]]+"")&&E(n,i),545&o[0]&&r!==(r=t[5].button+(t[9]===t[34]?" "+t[5].active:"")+" ec-"+t[34])&&T(e,"class",r)},d(t){t&&y(e),l=!1,o()}}}function ln(t){let e,n,o,i,s;return{c(){e=b("button"),T(e,"class",n=t[5].button+" ec-"+t[34]+(t[8][t[34]].active?" "+t[5].active:""))},m(n,r){v(n,e,r),i||(s=[_(e,"click",(function(){l(t[8][t[34]].click)&&t[8][t[34]].click.apply(this,arguments)})),p(o=gt.call(null,e,t[8][t[34]].text))],i=!0)},p(r,i){t=r,289&i[0]&&n!==(n=t[5].button+" ec-"+t[34]+(t[8][t[34]].active?" "+t[5].active:""))&&T(e,"class",n),o&&l(o.update)&&257&i[0]&&o.update.call(null,t[8][t[34]].text)},d(t){t&&y(e),i=!1,r(s)}}}function on(t){let e,n,r,l,o,i=t[7][t[34]]+"";return{c(){e=b("button"),n=k(i),T(e,"class",r=t[5].button+" ec-"+t[34]),e.disabled=t[1]},m(r,i){v(r,e,i),g(e,n),l||(o=_(e,"click",t[28]),l=!0)},p(t,l){129&l[0]&&i!==(i=t[7][t[34]]+"")&&E(n,i),33&l[0]&&r!==(r=t[5].button+" ec-"+t[34])&&T(e,"class",r),2&l[0]&&(e.disabled=t[1])},d(t){t&&y(e),l=!1,o()}}}function sn(t){let e,n,r,l,o,i,s,a;return{c(){e=b("button"),n=b("i"),T(n,"class",r=t[5].icon+" ec-"+t[34]),T(e,"class",l=t[5].button+" ec-"+t[34]),T(e,"aria-label",o=t[7].next),T(e,"title",i=t[7].next),e.disabled=t[4]},m(r,l){v(r,e,l),g(e,n),s||(a=_(e,"click",t[23]),s=!0)},p(t,s){33&s[0]&&r!==(r=t[5].icon+" ec-"+t[34])&&T(n,"class",r),33&s[0]&&l!==(l=t[5].button+" ec-"+t[34])&&T(e,"class",l),128&s[0]&&o!==(o=t[7].next)&&T(e,"aria-label",o),128&s[0]&&i!==(i=t[7].next)&&T(e,"title",i),16&s[0]&&(e.disabled=t[4])},d(t){t&&y(e),s=!1,a()}}}function an(t){let e,n,r,l,o,i,s,a;return{c(){e=b("button"),n=b("i"),T(n,"class",r=t[5].icon+" ec-"+t[34]),T(e,"class",l=t[5].button+" ec-"+t[34]),T(e,"aria-label",o=t[7].prev),T(e,"title",i=t[7].prev),e.disabled=t[3]},m(r,l){v(r,e,l),g(e,n),s||(a=_(e,"click",t[22]),s=!0)},p(t,s){33&s[0]&&r!==(r=t[5].icon+" ec-"+t[34])&&T(n,"class",r),33&s[0]&&l!==(l=t[5].button+" ec-"+t[34])&&T(e,"class",l),128&s[0]&&o!==(o=t[7].prev)&&T(e,"aria-label",o),128&s[0]&&i!==(i=t[7].prev)&&T(e,"title",i),8&s[0]&&(e.disabled=t[3])},d(t){t&&y(e),s=!1,a()}}}function cn(t){let e,n,r,o,i;return{c(){e=b("h2"),T(e,"class",n=t[5].title)},m(n,l){v(n,e,l),o||(i=p(r=gt.call(null,e,t[6])),o=!0)},p(t,o){32&o[0]&&n!==(n=t[5].title)&&T(e,"class",n),r&&l(r.update)&&64&o[0]&&r.update.call(null,t[6])},d(t){t&&y(e),o=!1,i()}}}function un(t){let e;function n(t,e){return"title"==t[34]?cn:"prev"==t[34]?an:"next"==t[34]?sn:"today"==t[34]?on:t[8][t[34]]?ln:""!=t[34]?rn:void 0}let r=n(t),l=r&&r(t);return{c(){l&&l.c(),e=C()},m(t,n){l&&l.m(t,n),v(t,e,n)},p(t,o){r===(r=n(t))&&l?l.p(t,o):(l&&l.d(1),l=r&&r(t),l&&(l.c(),l.m(e.parentNode,e)))},d(t){t&&y(e),l&&l.d(t)}}}function dn(e){let n,r=lt(e[0]),l=[];for(let t=0;t<r.length;t+=1)l[t]=un(nn(e,r,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();n=C()},m(t,e){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(t,e);v(t,n,e)},p(t,e){if(14681087&e[0]){let o;for(r=lt(t[0]),o=0;o<r.length;o+=1){const i=nn(t,r,o);l[o]?l[o].p(i,e):(l[o]=un(i),l[o].c(),l[o].m(n.parentNode,n))}for(;o<l.length;o+=1)l[o].d(1);l.length=r.length}},i:t,o:t,d(t){t&&y(n),w(l,t)}}}function fn(t,e,n){let r,l,o,i,s,c,u,d,f,h,p,{buttons:$}=e,{_currentRange:g,_viewTitle:v,_viewDates:y,buttonText:w,customButtons:b,date:k,duration:x,hiddenDays:C,theme:_,validRange:D,view:T}=B("state");a(t,g,(t=>n(27,c=t))),a(t,v,(t=>n(6,d=t))),a(t,y,(t=>n(31,s=t))),a(t,w,(t=>n(7,f=t))),a(t,b,(t=>n(8,h=t))),a(t,k,(t=>n(2,l=t))),a(t,x,(t=>n(24,r=t))),a(t,C,(t=>n(25,o=t))),a(t,_,(t=>n(5,u=t))),a(t,D,(t=>n(26,i=t))),a(t,T,(t=>n(9,p=t)));let E,S,M,U=Tt(wt()),N=!1;function L(){return s.every((t=>Be(t,i)))}return t.$$set=t=>{"buttons"in t&&n(0,$=t.buttons)},t.$$.update=()=>{if(251658246&t.$$.dirty[0]&&!N){if(N=!0,n(3,E=!1),n(4,S=!1),i.start){let t=kt(l);m(k,l=Ht(l,r,o),l),n(3,E=L()),m(k,l=t,l)}if(i.end){let t=kt(l);m(k,l=zt(l,r),l),n(4,S=L()),m(k,l=t,l)}if(n(1,M=U>=c.start&&U<c.end),!M&&(i.start||i.end)){let t=kt(l);m(k,l=kt(U),l),n(1,M=L()),m(k,l=t,l)}Y().then((()=>N=!1))}},[$,M,l,E,S,u,d,f,h,p,g,v,y,w,b,k,x,C,_,D,T,U,function(){m(k,l=Ht(l,r,o),l)},function(){m(k,l=zt(l,r),l)},r,o,i,c,()=>m(k,l=kt(U),l),t=>m(T,p=t,p)]}class hn extends dt{constructor(t){super(),ut(this,t,fn,dn,o,{buttons:0},null,[-1,-1])}}function mn(t,e,n){const r=t.slice();return r[5]=e[n],r}function pn(t,e,n){const r=t.slice();return r[8]=e[n],r}function $n(t){let e,n;return e=new hn({props:{buttons:t[8]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.buttons=t[8]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function gn(t){let e,n,r,l;return n=new hn({props:{buttons:t[8]}}),{c(){e=b("div"),st(n.$$.fragment),T(e,"class",r=t[1].buttonGroup)},m(t,r){v(t,e,r),at(n,e,null),l=!0},p(t,o){const i={};1&o&&(i.buttons=t[8]),n.$set(i),(!l||2&o&&r!==(r=t[1].buttonGroup))&&T(e,"class",r)},i(t){l||(nt(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){t&&y(e),ct(n)}}}function vn(t){let e,n,r,l;const o=[gn,$n],i=[];function s(t,e){return t[8].length>1?0:1}return e=s(t),n=i[e]=o[e](t),{c(){n.c(),r=C()},m(t,n){i[e].m(t,n),v(t,r,n),l=!0},p(t,l){let a=e;e=s(t),e===a?i[e].p(t,l):(tt(),rt(i[a],1,1,(()=>{i[a]=null})),et(),n=i[e],n?n.p(t,l):(n=i[e]=o[e](t),n.c()),nt(n,1),n.m(r.parentNode,r))},i(t){l||(nt(n),l=!0)},o(t){rt(n),l=!1},d(t){t&&y(r),i[e].d(t)}}}function yn(t){let e,n,r,l,o=lt(t[0][t[5]]),i=[];for(let e=0;e<o.length;e+=1)i[e]=vn(pn(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=b("div");for(let t=0;t<i.length;t+=1)i[t].c();n=x(),T(e,"class",r="ec-"+t[5])},m(t,r){v(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);g(e,n),l=!0},p(t,a){if(3&a){let r;for(o=lt(t[0][t[5]]),r=0;r<o.length;r+=1){const l=pn(t,o,r);i[r]?(i[r].p(l,a),nt(i[r],1)):(i[r]=vn(l),i[r].c(),nt(i[r],1),i[r].m(e,n))}for(tt(),r=o.length;r<i.length;r+=1)s(r);et()}(!l||1&a&&r!==(r="ec-"+t[5]))&&T(e,"class",r)},i(t){if(!l){for(let t=0;t<o.length;t+=1)nt(i[t]);l=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);l=!1},d(t){t&&y(e),w(i,t)}}}function wn(t){let e,n,r,l=lt(At(t[0])),o=[];for(let e=0;e<l.length;e+=1)o[e]=yn(mn(t,l,e));const i=t=>rt(o[t],1,1,(()=>{o[t]=null}));return{c(){e=b("nav");for(let t=0;t<o.length;t+=1)o[t].c();T(e,"class",n=t[1].toolbar)},m(t,n){v(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);r=!0},p(t,s){let[a]=s;if(3&a){let n;for(l=lt(At(t[0])),n=0;n<l.length;n+=1){const r=mn(t,l,n);o[n]?(o[n].p(r,a),nt(o[n],1)):(o[n]=yn(r),o[n].c(),nt(o[n],1),o[n].m(e,null))}for(tt(),n=l.length;n<o.length;n+=1)i(n);et()}(!r||2&a&&n!==(n=t[1].toolbar))&&T(e,"class",n)},i(t){if(!r){for(let t=0;t<l.length;t+=1)nt(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)rt(o[t]);r=!1},d(t){t&&y(e),w(o,t)}}}function bn(t,e,n){let r,l,{headerToolbar:o,theme:i}=B("state");a(t,o,(t=>n(4,r=t))),a(t,i,(t=>n(1,l=t)));let s={start:[],center:[],end:[]};return t.$$.update=()=>{if(17&t.$$.dirty)for(let t of At(s))n(0,s[t]=r[t].split(" ").map((t=>t.split(","))),s)},[s,l,o,i,r]}class kn extends dt{constructor(t){super(),ut(this,t,bn,wn,o,{})}}function xn(t,e,n){const r=t.slice();return r[11]=e[n],r}function Cn(t){let e,n,r;var l=t[11];return l&&(e=M(l,{})),{c(){e&&st(e.$$.fragment),n=C()},m(t,l){e&&at(e,t,l),v(t,n,l),r=!0},p(t,r){if(1&r&&l!==(l=t[11])){if(e){tt();const t=e;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}l?(e=M(l,{}),st(e.$$.fragment),nt(e.$$.fragment,1),at(e,n.parentNode,n)):e=null}},i(t){r||(e&&nt(e.$$.fragment,t),r=!0)},o(t){e&&rt(e.$$.fragment,t),r=!1},d(t){t&&y(n),e&&ct(e,t)}}}function _n(t){let e,n,r=lt(t[0]),l=[];for(let e=0;e<r.length;e+=1)l[e]=Cn(xn(t,r,e));const o=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,r){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);v(t,e,r),n=!0},p(t,n){let[i]=n;if(1&i){let n;for(r=lt(t[0]),n=0;n<r.length;n+=1){const o=xn(t,r,n);l[n]?(l[n].p(o,i),nt(l[n],1)):(l[n]=Cn(o),l[n].c(),nt(l[n],1),l[n].m(e.parentNode,e))}for(tt(),n=r.length;n<l.length;n+=1)o(n);et()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)nt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){t&&y(e),w(l,t)}}}function Dn(t,e,n){let r,l,o,i,{datesSet:s,_auxiliary:c,_activeRange:u,_queue:d,_view:f}=B("state");a(t,s,(t=>n(7,l=t))),a(t,c,(t=>n(0,i=t))),a(t,u,(t=>n(5,o=t))),a(t,f,(t=>n(6,r=t)));let h={};return t.$$.update=()=>{32&t.$$.dirty&&function(t){Gt(l)&&Jt((()=>l({start:Et(t.start),end:Et(t.end),startStr:St(t.start),endStr:St(t.end),view:ae(r)})),h,d)}(o)},[i,s,c,u,f,o]}let Tn=class extends dt{constructor(t){super(),ut(this,t,Dn,_n,o,{})}};function En(t){let e,n,r,l,o,i,s,a,c,u,d;n=new kn({});var f=t[5];return f&&(l=M(f,{})),a=new Tn({}),{c(){e=b("div"),st(n.$$.fragment),r=x(),l&&st(l.$$.fragment),s=x(),st(a.$$.fragment),T(e,"class",o=t[1].calendar+" "+t[1].view+(t[0]?" "+t[1].withScroll:"")+(t[2]?" "+t[1][t[2]]:"")),T(e,"role",i=ce(t[4])?"list":"table"),S(e,"height",t[3])},m(o,i){v(o,e,i),at(n,e,null),g(e,r),l&&at(l,e,null),v(o,s,i),at(a,o,i),c=!0,u||(d=_(window,"resize",t[20]),u=!0)},p(t,n){if(32&n[0]&&f!==(f=t[5])){if(l){tt();const t=l;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}f?(l=M(f,{}),st(l.$$.fragment),nt(l.$$.fragment,1),at(l,e,null)):l=null}(!c||7&n[0]&&o!==(o=t[1].calendar+" "+t[1].view+(t[0]?" "+t[1].withScroll:"")+(t[2]?" "+t[1][t[2]]:"")))&&T(e,"class",o),(!c||16&n[0]&&i!==(i=ce(t[4])?"list":"table"))&&T(e,"role",i),8&n[0]&&S(e,"height",t[3])},i(t){c||(nt(n.$$.fragment,t),l&&nt(l.$$.fragment,t),nt(a.$$.fragment,t),c=!0)},o(t){rt(n.$$.fragment,t),l&&rt(l.$$.fragment,t),rt(a.$$.fragment,t),c=!1},d(t){t&&(y(e),y(s)),ct(n),l&&ct(l),ct(a,t),u=!1,d()}}}function Sn(t,e,n){let r,l,o,i,c,u,d,f,h,p,$,g,v,y,{plugins:w=[]}=e,{options:b={}}=e,k=new Ke(w,b);var x,C;x="state",C=k,L().$$.context.set(x,C);let{_viewComponent:_,_bodyEl:D,_interaction:T,_iClass:E,_events:S,_queue:M,_queue2:U,_tasks:N,_scrollable:R,date:H,duration:B,hiddenDays:F,height:A,theme:P,view:I}=k;a(t,_,(t=>n(5,y=t))),a(t,D,(t=>n(36,r=t))),a(t,T,(t=>n(42,f=t))),a(t,E,(t=>n(2,$=t))),a(t,S,(t=>n(43,h=t))),a(t,M,(t=>n(38,i=t))),a(t,U,(t=>n(37,o=t))),a(t,R,(t=>n(0,l=t))),a(t,H,(t=>n(41,d=t))),a(t,B,(t=>n(40,u=t))),a(t,F,(t=>n(39,c=t))),a(t,A,(t=>n(3,g=t))),a(t,P,(t=>n(1,p=t))),a(t,I,(t=>n(4,v=t)));let j={...b};function W(t,e){return k._set(t,e),this}var O;function G(){var t;r&&m(R,l=(t=r).scrollHeight>t.clientHeight,l)}return O=()=>{Kt(i)},L().$$.before_update.push(O),z((()=>{Kt(o),Qt(G,null,N)})),t.$$set=t=>{"plugins"in t&&n(21,w=t.plugins),"options"in t&&n(22,b=t.options)},t.$$.update=()=>{if(4194304&t.$$.dirty[0])for(let[t,e]of function(t,e){let n=[];for(let r of At(t))t[r]!==e[r]&&n.push([r,t[r]]);return Ft(e,t),n}(b,j))W(t,e)},[l,p,$,g,v,y,_,D,T,E,S,M,U,R,H,B,F,A,P,I,G,w,b,W,function(t){let e=k._get(t);return e instanceof Date?Et(e):e},function(){return k._fetchedRange.set({start:void 0,end:void 0}),this},function(){return h.map(we)},function(t){for(let e of h)if(e.id==t)return we(e);return null},function(t){return t=fe([t])[0],h.push(t),S.set(h),we(t)},function(t){for(let e of h)if(e.id==t.id)return Ft(e,t=fe([t])[0]),S.set(h),we(t);return null},function(t){let e=h.findIndex((e=>e.id==t));return e>=0&&(h.splice(e,1),S.set(h)),this},function(){return ae(s(k._view))},function(){return f.action?.unselect(),this},function(t,e){let n=ie(t,e);if(n){let r=ee(n)(t,e);return r.date=Et(r.date),r}return null},function(){return m(H,d=zt(d,u),d),this},function(){return m(H,d=Ht(d,u,c),d),this}]}class Mn extends dt{constructor(t){super(),ut(this,t,Sn,En,o,{plugins:21,options:22,setOption:23,getOption:24,refetchEvents:25,getEvents:26,getEventById:27,addEvent:28,updateEvent:29,removeEventById:30,getView:31,unselect:32,dateFromPoint:33,next:34,prev:35},null,[-1,-1])}get setOption(){return this.$$.ctx[23]}get getOption(){return this.$$.ctx[24]}get refetchEvents(){return this.$$.ctx[25]}get getEvents(){return this.$$.ctx[26]}get getEventById(){return this.$$.ctx[27]}get addEvent(){return this.$$.ctx[28]}get updateEvent(){return this.$$.ctx[29]}get removeEventById(){return this.$$.ctx[30]}get getView(){return this.$$.ctx[31]}get unselect(){return this.$$.ctx[32]}get dateFromPoint(){return this.$$.ctx[33]}get next(){return this.$$.ctx[34]}get prev(){return this.$$.ctx[35]}}let Un=class extends Mn{destroy(){this.$destroy()}get view(){return this.getView()}};function Nn(t,e,n){const r=t.slice();return r[8]=e[n],r}function Ln(t){let e,n,r,o,i,s,a,c;return{c(){e=b("div"),n=b("span"),i=x(),T(n,"aria-label",r=t[2].format(t[8])),T(e,"class",s=t[0].day+" "+t[0].weekdays?.[t[8].getUTCDay()]),T(e,"role","columnheader")},m(r,l){v(r,e,l),g(e,n),g(e,i),a||(c=p(o=gt.call(null,n,t[3].format(t[8]))),a=!0)},p(i,a){t=i,6&a&&r!==(r=t[2].format(t[8]))&&T(n,"aria-label",r),o&&l(o.update)&&10&a&&o.update.call(null,t[3].format(t[8])),3&a&&s!==(s=t[0].day+" "+t[0].weekdays?.[t[8].getUTCDay()])&&T(e,"class",s)},d(t){t&&y(e),a=!1,c()}}}function Rn(e){let n,r,l,o,i,s,a,c=lt(e[1]),u=[];for(let t=0;t<c.length;t+=1)u[t]=Ln(Nn(e,c,t));return{c(){n=b("div"),r=b("div");for(let t=0;t<u.length;t+=1)u[t].c();o=x(),i=b("div"),T(r,"class",l=e[0].days),T(r,"role","row"),T(i,"class",s=e[0].hiddenScroll),T(n,"class",a=e[0].header)},m(t,e){v(t,n,e),g(n,r);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(r,null);g(n,o),g(n,i)},p(t,e){let[o]=e;if(15&o){let e;for(c=lt(t[1]),e=0;e<c.length;e+=1){const n=Nn(t,c,e);u[e]?u[e].p(n,o):(u[e]=Ln(n),u[e].c(),u[e].m(r,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=c.length}1&o&&l!==(l=t[0].days)&&T(r,"class",l),1&o&&s!==(s=t[0].hiddenScroll)&&T(i,"class",s),1&o&&a!==(a=t[0].header)&&T(n,"class",a)},i:t,o:t,d(t){t&&y(n),w(u,t)}}}function zn(t,e,n){let r,l,o,i,{theme:s,_intlDayHeader:c,_intlDayHeaderAL:u,_days:d}=B("state");return a(t,s,(t=>n(0,r=t))),a(t,c,(t=>n(3,i=t))),a(t,u,(t=>n(2,o=t))),a(t,d,(t=>n(1,l=t))),[r,l,o,i,s,c,u,d]}let Hn=class extends dt{constructor(t){super(),ut(this,t,zn,Rn,o,{})}};function Bn(t){let e,n,o,i,s,a,c,u,d,f,h,m,$;var w=t[8].resizer;function k(t,e){return{props:{start:!0,event:t[0]}}}w&&(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[32](t[8],["x","start"]))&&t[32](t[8],["x","start"]).apply(this,arguments)})));var C=t[8].resizer;function D(t,e){return{props:{event:t[0]}}}return C&&(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[32](t[8],["x","end"]))&&t[32](t[8],["x","end"]).apply(this,arguments)}))),{c(){e=b("article"),n&&st(n.$$.fragment),o=x(),i=b("div"),c=x(),u&&st(u.$$.fragment),T(i,"class",s=t[2].eventBody),T(e,"class",t[4]),T(e,"style",t[5]),T(e,"role",d=t[7]?"button":void 0),T(e,"tabindex",f=t[7]?0:void 0)},m(r,s){v(r,e,s),n&&at(n,e,null),g(e,o),g(e,i),g(e,c),u&&at(u,e,null),t[51](e),h=!0,m||($=[p(a=gt.call(null,i,t[6])),_(e,"click",(function(){l(t[7]||void 0)&&(t[7]||void 0).apply(this,arguments)})),_(e,"keydown",(function(){l(t[7]&&$t(t[7]))&&(t[7]&&$t(t[7])).apply(this,arguments)})),_(e,"mouseenter",(function(){l(t[31](t[9],t[1]))&&t[31](t[9],t[1]).apply(this,arguments)})),_(e,"mouseleave",(function(){l(t[31](t[10],t[1]))&&t[31](t[10],t[1]).apply(this,arguments)})),_(e,"pointerdown",(function(){l(!Te(t[1])&&t[32](t[8]))&&(!Te(t[1])&&t[32](t[8])).apply(this,arguments)}))],m=!0)},p(r,c){if(t=r,256&c[0]&&w!==(w=t[8].resizer)){if(n){tt();const t=n;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}w?(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[32](t[8],["x","start"]))&&t[32](t[8],["x","start"]).apply(this,arguments)})),st(n.$$.fragment),nt(n.$$.fragment,1),at(n,e,o)):n=null}else if(w){const e={};1&c[0]&&(e.event=t[0]),n.$set(e)}if((!h||4&c[0]&&s!==(s=t[2].eventBody))&&T(i,"class",s),a&&l(a.update)&&64&c[0]&&a.update.call(null,t[6]),256&c[0]&&C!==(C=t[8].resizer)){if(u){tt();const t=u;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}C?(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[32](t[8],["x","end"]))&&t[32](t[8],["x","end"]).apply(this,arguments)})),st(u.$$.fragment),nt(u.$$.fragment,1),at(u,e,null)):u=null}else if(C){const e={};1&c[0]&&(e.event=t[0]),u.$set(e)}(!h||16&c[0])&&T(e,"class",t[4]),(!h||32&c[0])&&T(e,"style",t[5]),(!h||128&c[0]&&d!==(d=t[7]?"button":void 0))&&T(e,"role",d),(!h||128&c[0]&&f!==(f=t[7]?0:void 0))&&T(e,"tabindex",f)},i(t){h||(n&&nt(n.$$.fragment,t),u&&nt(u.$$.fragment,t),h=!0)},o(t){n&&rt(n.$$.fragment,t),u&&rt(u.$$.fragment,t),h=!1},d(l){l&&y(e),n&&ct(n),u&&ct(u),t[51](null),m=!1,r($)}}}function Fn(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,p,$,g,v,y,w,b,k,x,C,_,D,T,E,S,{chunk:M}=e,{longChunks:U={}}=e,{inPopup:N=!1}=e,{dates:L=[]}=e,{dayMaxEvents:H,displayEventEnd:F,eventAllUpdated:A,eventBackgroundColor:I,eventTextColor:j,eventClick:W,eventColor:O,eventContent:G,eventClassNames:Y,eventDidMount:q,eventMouseEnter:X,eventMouseLeave:V,resources:J,theme:K,_view:Q,_intlEventTime:Z,_interaction:tt,_iClasses:et,_hiddenEvents:nt,_popupDate:rt,_tasks:lt}=B("state");a(t,H,(t=>n(54,o=t))),a(t,F,(t=>n(44,p=t))),a(t,A,(t=>n(56,u=t))),a(t,I,(t=>n(50,b=t))),a(t,j,(t=>n(47,v=t))),a(t,W,(t=>n(40,r=t))),a(t,O,(t=>n(49,w=t))),a(t,G,(t=>n(43,m=t))),a(t,Y,(t=>n(45,$=t))),a(t,q,(t=>n(57,d=t))),a(t,X,(t=>n(9,k=t))),a(t,V,(t=>n(10,x=t))),a(t,J,(t=>n(48,y=t))),a(t,K,(t=>n(2,h=t))),a(t,Q,(t=>n(41,c=t))),a(t,Z,(t=>n(42,f=t))),a(t,tt,(t=>n(8,s=t))),a(t,et,(t=>n(46,g=t))),a(t,nt,(t=>n(53,l=t))),a(t,rt,(t=>n(55,i=t)));let ot,it,st=1,at=!1;function ct(t,e){return!Te(e)&&Gt(t)?e=>t({event:we(_),el:C,jsEvent:e,view:ae(c)}):void 0}return R((()=>{Gt(d)&&d({event:we(_),timeText:S,el:C,view:ae(c)})})),z((()=>{Gt(u)&&!Te(ot)&&Qt((()=>u({view:ae(c)})),"eau",lt)})),t.$$set=t=>{"chunk"in t&&n(33,M=t.chunk),"longChunks"in t&&n(34,U=t.longChunks),"inPopup"in t&&n(35,N=t.inPopup),"dates"in t&&n(36,L=t.dates)},t.$$.update=()=>{if(4&t.$$.dirty[1]&&n(0,_=M.event),39&t.$$.dirty[0]|1033604&t.$$.dirty[1]){n(1,ot=_.display);let t=_.backgroundColor||je(_,y)||b||w,e=_.textColor||We(_,y)||v;if(Ee(ot))n(5,T=`width:calc(${100*M.days}% + ${M.days-1}px);`);else{let t=st;if(_._margin){let[e,n]=_._margin;M.date>=n[0]&&M.date<=n.at(-1)&&(t=e)}n(5,T=`width:calc(${100*M.days}% + ${7*(M.days-1)}px);margin-top:${t}px;`)}t&&n(5,T+=`background-color:${t};`),e&&n(5,T+=`color:${e};`),at&&n(5,T+="visibility:hidden;"),n(5,T+=_.styles.join(";")),n(4,D=[Ee(ot)?h.bgEvent:h.event,...g([],_),...ye($,_,c)].join(" "))}4&t.$$.dirty[0]|15364&t.$$.dirty[1]&&n(6,[S,E]=ge(M,p,m,h,f,c),E),2&t.$$.dirty[0]|512&t.$$.dirty[1]&&n(7,it=ct(r,ot))},[_,ot,h,C,D,T,E,it,s,k,x,H,F,A,I,j,W,O,G,Y,q,X,V,J,K,Q,Z,tt,et,nt,rt,ct,function(t,e){return t.action?t=>s.action.drag(_,t,e,N?i:null,[re(C).top-re(le(C,1)).top,L],M.zeroDuration):void 0},M,U,N,L,function(){C&&(n(38,st=Ce(M,U,oe(C))),!0===o?function(){let t=le(C,2),e=oe(t)-oe(t.firstElementChild)-function(t){let e=0;for(let n=0;n<M.days&&(e=Wt(e,oe(t.lastElementChild)),t=t.nextElementSibling);++n);return e}(t);n(39,at=M.bottom>e);let r=!1;for(let t of M.dates){let e=l[t.getTime()];if(e){let t=e.size;at?e.add(M.event):e.delete(M.event),t!==e.size&&(r=!0)}}r&&nt.set(l)}():n(39,at=!1))},st,at,r,c,f,m,p,$,g,v,y,w,b,function(t){P[t?"unshift":"push"]((()=>{C=t,n(3,C)}))}]}let An=class extends dt{constructor(t){super(),ut(this,t,Fn,Bn,o,{chunk:33,longChunks:34,inPopup:35,dates:36,reposition:37},null,[-1,-1])}get reposition(){return this.$$.ctx[37]}};function Pn(t,e,n){const r=t.slice();return r[20]=e[n],r}function In(t,e){let n,r,l;return r=new An({props:{chunk:e[20],inPopup:!0}}),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){e=t;const l={};1&n&&(l.chunk=e[20]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),ct(r,t)}}}function jn(t){let e,n,o,i,s,a,c,u,d,f,h,m,$,w,C,E,S,M=[],U=new Map,N=lt(t[0]);const L=t=>t[20].event;for(let e=0;e<N.length;e+=1){let n=Pn(t,N,e),r=L(n);U.set(r,M[e]=In(r,n))}return{c(){e=b("div"),n=b("div"),o=b("time"),a=x(),c=b("a"),u=k(""),h=x(),m=b("div");for(let t=0;t<M.length;t+=1)M[t].c();T(o,"datetime",i=St(t[3],10)),T(c,"role","button"),T(c,"tabindex","0"),T(c,"aria-label",d=t[6].close),T(n,"class",f=t[4].dayHead),T(m,"class",$=t[4].events),T(e,"class",w=t[4].popup),T(e,"style",t[2])},m(r,l){v(r,e,l),g(e,n),g(n,o),g(n,a),g(n,c),g(c,u),g(e,h),g(e,m);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(m,null);t[16](e),C=!0,E||(S=[p(s=gt.call(null,o,t[5].format(t[3]))),_(c,"click",D(t[13])),_(c,"keydown",$t(t[13])),p(vt.call(null,e,"pointerdown")),_(e,"pointerdown",D(t[15])),_(e,"pointerdownoutside",t[14])],E=!0)},p(t,r){let[a]=r;(!C||8&a&&i!==(i=St(t[3],10)))&&T(o,"datetime",i),s&&l(s.update)&&40&a&&s.update.call(null,t[5].format(t[3])),(!C||64&a&&d!==(d=t[6].close))&&T(c,"aria-label",d),(!C||16&a&&f!==(f=t[4].dayHead))&&T(n,"class",f),1&a&&(N=lt(t[0]),tt(),M=it(M,a,L,0,t,N,U,m,ot,In,null,Pn),et()),(!C||16&a&&$!==($=t[4].events))&&T(m,"class",$),(!C||16&a&&w!==(w=t[4].popup))&&T(e,"class",w),(!C||4&a)&&T(e,"style",t[2])},i(t){if(!C){for(let t=0;t<N.length;t+=1)nt(M[t]);C=!0}},o(t){for(let t=0;t<M.length;t+=1)rt(M[t]);C=!1},d(n){n&&y(e);for(let t=0;t<M.length;t+=1)M[t].d();t[16](null),E=!1,r(S)}}}function Wn(t,e,n){let r,l,o,i,s,c,u,{buttonText:d,theme:f,_interaction:h,_intlDayPopover:p,_popupDate:$,_popupChunks:g}=B("state");a(t,d,(t=>n(6,c=t))),a(t,f,(t=>n(4,i=t))),a(t,h,(t=>n(17,r=t))),a(t,p,(t=>n(5,s=t))),a(t,$,(t=>n(3,l=t))),a(t,g,(t=>n(0,o=t)));let v="";function y(){u&&(n(2,v=""),Y().then((()=>{o.length?function(){let t,e,r=le(u,1),l=le(r,3),o=re(u),i=re(r),s=re(l);if(n(2,v=""),o.width>=s.width){t=s.left-i.left;let e=i.right-s.right;n(2,v+=`right:${e}px;`)}else t=(i.width-o.width)/2,i.left+t<s.left?t=s.left-i.left:i.left+t+o.width>s.right&&(t=s.right-i.left-o.width);if(n(2,v+=`left:${t}px;`),o.height>=s.height){e=s.top-i.top;let t=i.bottom-s.bottom;n(2,v+=`bottom:${t}px;`)}else e=(i.height-o.height)/2,i.top+e<s.top?e=s.top-i.top:i.top+e+o.height>s.bottom&&(e=s.bottom-i.top-o.height);n(2,v+=`top:${e}px;`)}():w()})))}function w(t){m($,l=null,l)}return t.$$.update=()=>{1&t.$$.dirty&&o&&y()},[o,u,v,l,i,s,c,d,f,h,p,$,g,w,function(t){w(),r.action?.noClick()},function(e){F.call(this,t,e)},function(t){P[t?"unshift":"push"]((()=>{u=t,n(1,u)}))}]}class On extends dt{constructor(t){super(),ut(this,t,Wn,jn,o,{})}}function Gn(t,e,n){const r=t.slice();return r[54]=e[n],r[55]=e,r[56]=n,r}function Yn(t,e,n){const r=t.slice();return r[54]=e[n],r}function qn(t){let e,n,r,o,i;return{c(){e=b("span"),T(e,"class",n=t[17].weekNumber)},m(n,l){v(n,e,l),o||(i=p(r=gt.call(null,e,t[15])),o=!0)},p(t,o){131072&o[0]&&n!==(n=t[17].weekNumber)&&T(e,"class",n),r&&l(r.update)&&32768&o[0]&&r.update.call(null,t[15])},d(t){t&&y(e),o=!1,i()}}}function Xn(t){let e,n,r=[],l=new Map,o=lt(t[10]);const i=t=>t[54].event;for(let e=0;e<o.length;e+=1){let n=Yn(t,o,e),s=i(n);l.set(s,r[e]=Vn(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);v(t,e,l),n=!0},p(t,n){1024&n[0]&&(o=lt(t[10]),tt(),r=it(r,n,i,0,t,o,l,e.parentNode,ot,Vn,e,Yn),et())},i(t){if(!n){for(let t=0;t<o.length;t+=1)nt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&y(e);for(let e=0;e<r.length;e+=1)r[e].d(t)}}}function Vn(t,e){let n,r,l;return r=new An({props:{chunk:e[54]}}),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){e=t;const l={};1024&n[0]&&(l.chunk=e[54]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),ct(r,t)}}}function Jn(t){let e,n,r,l=t[2][2]&&Mt(t[2][2].date,t[0]),o=t[2][0]&&Mt(t[2][0].date,t[0]),i=l&&Kn(t),s=o&&Qn(t);return{c(){i&&i.c(),e=x(),s&&s.c(),n=C()},m(t,l){i&&i.m(t,l),v(t,e,l),s&&s.m(t,l),v(t,n,l),r=!0},p(t,r){5&r[0]&&(l=t[2][2]&&Mt(t[2][2].date,t[0])),l?i?(i.p(t,r),5&r[0]&&nt(i,1)):(i=Kn(t),i.c(),nt(i,1),i.m(e.parentNode,e)):i&&(tt(),rt(i,1,1,(()=>{i=null})),et()),5&r[0]&&(o=t[2][0]&&Mt(t[2][0].date,t[0])),o?s?(s.p(t,r),5&r[0]&&nt(s,1)):(s=Qn(t),s.c(),nt(s,1),s.m(n.parentNode,n)):s&&(tt(),rt(s,1,1,(()=>{s=null})),et())},i(t){r||(nt(i),nt(s),r=!0)},o(t){rt(i),rt(s),r=!1},d(t){t&&(y(e),y(n)),i&&i.d(t),s&&s.d(t)}}}function Kn(t){let e,n,r,l;return n=new An({props:{chunk:t[2][2]}}),{c(){e=b("div"),st(n.$$.fragment),T(e,"class",r=t[17].events)},m(t,r){v(t,e,r),at(n,e,null),l=!0},p(t,o){const i={};4&o[0]&&(i.chunk=t[2][2]),n.$set(i),(!l||131072&o[0]&&r!==(r=t[17].events))&&T(e,"class",r)},i(t){l||(nt(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){t&&y(e),ct(n)}}}function Qn(t){let e,n,r,l;return n=new An({props:{chunk:t[2][0]}}),{c(){e=b("div"),st(n.$$.fragment),T(e,"class",r=t[17].events+" "+t[17].preview)},m(t,r){v(t,e,r),at(n,e,null),l=!0},p(t,o){const i={};4&o[0]&&(i.chunk=t[2][0]),n.$set(i),(!l||131072&o[0]&&r!==(r=t[17].events+" "+t[17].preview))&&T(e,"class",r)},i(t){l||(nt(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){t&&y(e),ct(n)}}}function Zn(t){let e,n,r=[],l=new Map,o=lt(t[5]);const i=t=>t[54].event;for(let e=0;e<o.length;e+=1){let n=Gn(t,o,e),s=i(n);l.set(s,r[e]=tr(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);v(t,e,l),n=!0},p(t,n){65578&n[0]&&(o=lt(t[5]),tt(),r=it(r,n,i,0,t,o,l,e.parentNode,ot,tr,e,Gn),et())},i(t){if(!n){for(let t=0;t<o.length;t+=1)nt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&y(e);for(let e=0;e<r.length;e+=1)r[e].d(t)}}}function tr(t,e){let n,r,l,o=e[56];const i=()=>e[49](r,o),s=()=>e[49](null,o);let a={chunk:e[54],longChunks:e[1],dates:e[3]};return r=new An({props:a}),i(),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){o!==(e=t)[56]&&(s(),o=e[56],i());const l={};32&n[0]&&(l.chunk=e[54]),2&n[0]&&(l.longChunks=e[1]),8&n[0]&&(l.dates=e[3]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),s(),ct(r,t)}}}function er(t){let e,n;return e=new On({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function nr(t){let e,n,o,i;return{c(){e=b("a"),T(e,"role","button"),T(e,"tabindex","0"),T(e,"aria-haspopup","true")},m(r,l){v(r,e,l),o||(i=[_(e,"click",D(t[34])),_(e,"keydown",$t(t[34])),_(e,"pointerdown",D(t[48])),p(n=gt.call(null,e,t[14]))],o=!0)},p(t,e){n&&l(n.update)&&16384&e[0]&&n.update.call(null,t[14])},d(t){t&&y(e),o=!1,r(i)}}}function rr(t){let e,n,o,i,s,a,c,u,d,f,h,m,$,w,k,C,D,E,S,M,U,N,L=t[9]&&qn(t),R=!t[6]&&Xn(t),z=!t[6]&&Jn(t),H=!t[6]&&Zn(t),B=t[8]&&er(),F=!t[6]&&t[7].size&&nr(t);return{c(){e=b("div"),n=b("div"),o=b("time"),a=x(),L&&L.c(),u=x(),d=b("div"),R&&R.c(),h=x(),z&&z.c(),m=x(),$=b("div"),H&&H.c(),k=x(),B&&B.c(),C=x(),D=b("div"),F&&F.c(),T(o,"datetime",i=St(t[0],10)),T(n,"class",c=t[17].dayHead),T(d,"class",f=t[17].bgEvents),T($,"class",w=t[17].events),T(D,"class",E=t[17].dayFoot),T(e,"class",S=t[17].day+" "+t[17].weekdays?.[t[0].getUTCDay()]+(t[11]?" "+t[17].today:"")+(t[12]?" "+t[17].otherMonth:"")+(t[13]?" "+t[17].highlight:"")+(t[6]?" "+t[17].disabled:"")),T(e,"role","cell")},m(r,i){v(r,e,i),g(e,n),g(n,o),g(n,a),L&&L.m(n,null),g(e,u),g(e,d),R&&R.m(d,null),g(e,h),z&&z.m(e,null),g(e,m),g(e,$),H&&H.m($,null),g(e,k),B&&B.m(e,null),g(e,C),g(e,D),F&&F.m(D,null),t[50](e),M=!0,U||(N=[p(s=gt.call(null,o,t[19].format(t[0]))),_(e,"pointerdown",(function(){l(t[18].action?.select)&&t[18].action?.select.apply(this,arguments)}))],U=!0)},p(r,a){t=r,(!M||1&a[0]&&i!==(i=St(t[0],10)))&&T(o,"datetime",i),s&&l(s.update)&&524289&a[0]&&s.update.call(null,t[19].format(t[0])),t[9]?L?L.p(t,a):(L=qn(t),L.c(),L.m(n,null)):L&&(L.d(1),L=null),(!M||131072&a[0]&&c!==(c=t[17].dayHead))&&T(n,"class",c),t[6]?R&&(tt(),rt(R,1,1,(()=>{R=null})),et()):R?(R.p(t,a),64&a[0]&&nt(R,1)):(R=Xn(t),R.c(),nt(R,1),R.m(d,null)),(!M||131072&a[0]&&f!==(f=t[17].bgEvents))&&T(d,"class",f),t[6]?z&&(tt(),rt(z,1,1,(()=>{z=null})),et()):z?(z.p(t,a),64&a[0]&&nt(z,1)):(z=Jn(t),z.c(),nt(z,1),z.m(e,m)),t[6]?H&&(tt(),rt(H,1,1,(()=>{H=null})),et()):H?(H.p(t,a),64&a[0]&&nt(H,1)):(H=Zn(t),H.c(),nt(H,1),H.m($,null)),(!M||131072&a[0]&&w!==(w=t[17].events))&&T($,"class",w),t[8]?B?256&a[0]&&nt(B,1):(B=er(),B.c(),nt(B,1),B.m(e,C)):B&&(tt(),rt(B,1,1,(()=>{B=null})),et()),!t[6]&&t[7].size?F?F.p(t,a):(F=nr(t),F.c(),F.m(D,null)):F&&(F.d(1),F=null),(!M||131072&a[0]&&E!==(E=t[17].dayFoot))&&T(D,"class",E),(!M||145473&a[0]&&S!==(S=t[17].day+" "+t[17].weekdays?.[t[0].getUTCDay()]+(t[11]?" "+t[17].today:"")+(t[12]?" "+t[17].otherMonth:"")+(t[13]?" "+t[17].highlight:"")+(t[6]?" "+t[17].disabled:"")))&&T(e,"class",S)},i(t){M||(nt(R),nt(z),nt(H),nt(B),M=!0)},o(t){rt(R),rt(z),rt(H),rt(B),M=!1},d(n){n&&y(e),L&&L.d(),R&&R.d(),z&&z.d(),H&&H.d(),B&&B.d(),F&&F.d(),t[50](null),U=!1,r(N)}}}function lr(t,e,n){let r,l,o,i,s,c,u,d,f,h,p,$,g,v,y,w,b,k,x,C,_,{date:D}=e,{chunks:T}=e,{bgChunks:E}=e,{longChunks:S}=e,{iChunks:M=[]}=e,{dates:U}=e,{date:N,dayMaxEvents:L,highlightedDates:R,firstDay:z,moreLinkContent:H,theme:A,validRange:I,weekNumbers:j,weekNumberContent:W,_hiddenEvents:O,_intlDayCell:G,_popupDate:q,_popupChunks:X,_today:V,_interaction:J}=B("state");a(t,N,(t=>n(46,h=t))),a(t,R,(t=>n(45,f=t))),a(t,z,(t=>n(39,l=t))),a(t,H,(t=>n(42,c=t))),a(t,A,(t=>n(17,$=t))),a(t,I,(t=>n(44,d=t))),a(t,j,(t=>n(40,o=t))),a(t,W,(t=>n(38,r=t))),a(t,O,(t=>n(43,u=t))),a(t,G,(t=>n(19,v=t))),a(t,q,(t=>n(41,s=t))),a(t,X,(t=>n(51,i=t))),a(t,V,(t=>n(47,p=t))),a(t,J,(t=>n(18,g=t)));let K,Q,Z,tt=new Set,et="",nt=[];function rt(){let t=_t(kt(D)),e=w.concat(S[D.getTime()]?.chunks||[]);m(X,i=e.map((e=>Ft({},e,pe(e.event,D,t),{days:1,dates:[D]}))).sort(((t,e)=>t.top-e.top)),i)}return t.$$set=t=>{"date"in t&&n(0,D=t.date),"chunks"in t&&n(35,T=t.chunks),"bgChunks"in t&&n(36,E=t.bgChunks),"longChunks"in t&&n(1,S=t.longChunks),"iChunks"in t&&n(2,M=t.iChunks),"dates"in t&&n(3,U=t.dates)},t.$$.update=()=>{if(1&t.$$.dirty[0]|8192&t.$$.dirty[1]&&n(6,_=Be(D,d)),225&t.$$.dirty[0]|48&t.$$.dirty[1]&&!_){n(5,w=[]),n(10,b=E.filter((t=>Mt(t.date,D)))),tt.clear(),n(7,tt),n(6,_),n(36,E),n(0,D),n(35,T),n(5,w),n(44,d);for(let t of T)Mt(t.date,D)&&w.push(t)}if(129&t.$$.dirty[0]&&m(O,u[D.getTime()]=tt,u),1&t.$$.dirty[0]|65536&t.$$.dirty[1]&&n(11,k=Mt(D,p)),1&t.$$.dirty[0]|32768&t.$$.dirty[1]&&n(12,x=D.getUTCMonth()!==h.getUTCMonth()),1&t.$$.dirty[0]|16384&t.$$.dirty[1]&&n(13,C=f.some((t=>Mt(t,D)))),192&t.$$.dirty[0]|6144&t.$$.dirty[1]&&!_&&u&&tt.size){let t="+"+tt.size+" more";n(14,et=c?Gt(c)?c({num:tt.size,text:t}):c:t)}if(1&t.$$.dirty[0]|1024&t.$$.dirty[1]&&n(8,K=s&&Mt(D,s)),290&t.$$.dirty[0]&&K&&S&&w&&Y().then(rt),81&t.$$.dirty[0]&&y&&te(y,(()=>({allDay:!0,date:D,resource:void 0,dayEl:y,disabled:_}))),513&t.$$.dirty[0]|896&t.$$.dirty[1]&&(n(9,Q=o&&D.getUTCDay()==(l?1:0)),Q)){let t=function(t,e){t=kt(t),0==e?t.setUTCDate(t.getUTCDate()+6-t.getUTCDay()):t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));let n=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-n)/1e3/yt+1)/7)}(D,l);n(15,Z=r?Gt(r)?r({date:Et(D),week:t}):r:"W"+String(t).padStart(2,"0"))}},[D,S,M,U,y,w,_,tt,K,Q,b,k,x,C,et,Z,nt,$,g,v,N,R,z,H,A,I,j,W,O,G,q,X,V,J,function(){m(q,s=D,s)},T,E,function(){_||_e(nt,w)},r,l,o,s,c,u,d,f,h,p,function(e){F.call(this,t,e)},function(t,e){P[t?"unshift":"push"]((()=>{nt[e]=t,n(16,nt)}))},function(t){P[t?"unshift":"push"]((()=>{y=t,n(4,y)}))}]}let or=class extends dt{constructor(t){super(),ut(this,t,lr,rr,o,{date:0,chunks:35,bgChunks:36,longChunks:1,iChunks:2,dates:3,reposition:37},null,[-1,-1])}get reposition(){return this.$$.ctx[37]}};function ir(t,e,n){const r=t.slice();return r[28]=e[n],r[29]=e,r[30]=n,r}function sr(t){let e,n,r=t[30];const l=()=>t[25](e,r),o=()=>t[25](null,r);let i={date:t[28],chunks:t[1],bgChunks:t[2],longChunks:t[3],iChunks:t[4],dates:t[0]};return e=new or({props:i}),l(),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){r!==t[30]&&(o(),r=t[30],l());const i={};1&n&&(i.date=t[28]),2&n&&(i.chunks=t[1]),4&n&&(i.bgChunks=t[2]),8&n&&(i.longChunks=t[3]),16&n&&(i.iChunks=t[4]),1&n&&(i.dates=t[0]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){o(),ct(e,t)}}}function ar(t){let e,n,r,l,o,i=lt(t[0]),s=[];for(let e=0;e<i.length;e+=1)s[e]=sr(ir(t,i,e));const a=t=>rt(s[t],1,1,(()=>{s[t]=null}));return{c(){e=b("div");for(let t=0;t<s.length;t+=1)s[t].c();T(e,"class",n=t[6].days),T(e,"role","row")},m(n,i){v(n,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);r=!0,l||(o=_(window,"resize",t[15]),l=!0)},p(t,l){let[o]=l;if(63&o){let n;for(i=lt(t[0]),n=0;n<i.length;n+=1){const r=ir(t,i,n);s[n]?(s[n].p(r,o),nt(s[n],1)):(s[n]=sr(r),s[n].c(),nt(s[n],1),s[n].m(e,null))}for(tt(),n=i.length;n<s.length;n+=1)a(n);et()}(!r||64&o&&n!==(n=t[6].days))&&T(e,"class",n)},i(t){if(!r){for(let t=0;t<i.length;t+=1)nt(s[t]);r=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)rt(s[t]);r=!1},d(t){t&&y(e),w(s,t),l=!1,o()}}}function cr(t,e,n){let r,l,o,i,s,c,u,d,{dates:f}=e,{_events:h,_iEvents:m,_queue2:p,_hiddenEvents:$,resources:g,filterEventsWithResources:v,hiddenDays:y,theme:w,validRange:b}=B("state");a(t,h,(t=>n(23,c=t))),a(t,m,(t=>n(20,o=t))),a(t,$,(t=>n(18,r=t))),a(t,g,(t=>n(21,i=t))),a(t,v,(t=>n(22,s=t))),a(t,y,(t=>n(19,l=t))),a(t,w,(t=>n(6,d=t))),a(t,b,(t=>n(24,u=t)));let k,x,C,_,D,T=[],E=[],S={};function M(){Jt((()=>_e(E,f)),S,p)}return t.$$set=t=>{"dates"in t&&n(0,f=t.dates)},t.$$.update=()=>{if(16777217&t.$$.dirty&&(n(16,_=Fe(f[0],u)),n(17,D=_t(kt(Fe(f.at(-1),u))))),15400966&t.$$.dirty){n(1,k=[]),n(2,x=[]);for(let t of c)if(De(t,_,D,s?i:void 0)){let e=pe(t,_,D);Ee(t.display)?t.allDay&&x.push(e):k.push(e)}xe(x,l),n(3,C=xe(k,l)),M()}1769472&t.$$.dirty&&n(4,T=o.map((t=>{let e;return t&&De(t,_,D)?(e=pe(t,_,D),xe([e],l)):e=null,e}))),262144&t.$$.dirty&&r&&Y().then(M)},[f,k,x,C,T,E,d,h,m,$,g,v,y,w,b,M,_,D,r,l,o,i,s,c,u,function(t,e){P[t?"unshift":"push"]((()=>{E[e]=t,n(5,E)}))}]}let ur=class extends dt{constructor(t){super(),ut(this,t,cr,ar,o,{dates:0})}};function dr(t,e,n){const r=t.slice();return r[15]=e[n],r}function fr(t){let e,n;return e=new ur({props:{dates:t[15]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.dates=t[15]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function hr(t){let e,n,r,l,o,i=lt(t[0]),s=[];for(let e=0;e<i.length;e+=1)s[e]=fr(dr(t,i,e));const a=t=>rt(s[t],1,1,(()=>{s[t]=null}));return{c(){e=b("div"),n=b("div");for(let t=0;t<s.length;t+=1)s[t].c();T(n,"class",r=t[2].content),T(e,"class",l=t[2].body+(!0===t[1]?" "+t[2].uniform:""))},m(r,l){v(r,e,l),g(e,n);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(n,null);t[13](e),o=!0},p(t,c){let[u]=c;if(1&u){let e;for(i=lt(t[0]),e=0;e<i.length;e+=1){const r=dr(t,i,e);s[e]?(s[e].p(r,u),nt(s[e],1)):(s[e]=fr(r),s[e].c(),nt(s[e],1),s[e].m(n,null))}for(tt(),e=i.length;e<s.length;e+=1)a(e);et()}(!o||4&u&&r!==(r=t[2].content))&&T(n,"class",r),(!o||6&u&&l!==(l=t[2].body+(!0===t[1]?" "+t[2].uniform:"")))&&T(e,"class",l)},i(t){if(!o){for(let t=0;t<i.length;t+=1)nt(s[t]);o=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)rt(s[t]);o=!1},d(n){n&&y(e),w(s,n),t[13](null)}}}function mr(t,e,n){let r,l,o,i,s,c,u,d,{_bodyEl:f,_viewDates:h,_hiddenEvents:p,dayMaxEvents:$,hiddenDays:g,theme:v}=B("state");return a(t,f,(t=>n(3,c=t))),a(t,h,(t=>n(11,r=t))),a(t,p,(t=>n(14,o=t))),a(t,$,(t=>n(1,l=t))),a(t,g,(t=>n(12,i=t))),a(t,v,(t=>n(2,s=t))),t.$$.update=()=>{if(7171&t.$$.dirty){n(0,u=[]),n(10,d=7-i.length),m(p,o={},o);for(let t=0;t<r.length/d;++t){let e=[];for(let n=0;n<d;++n)e.push(r[t*d+n]);u.push(e)}}},[u,l,s,c,f,h,p,$,g,v,d,r,i,function(t){P[t?"unshift":"push"]((()=>{c=t,f.set(c)}))}]}let pr=class extends dt{constructor(t){super(),ut(this,t,mr,hr,o,{})}};function $r(e){let n,r,l,o;return n=new Hn({}),l=new pr({}),{c(){st(n.$$.fragment),r=x(),st(l.$$.fragment)},m(t,e){at(n,t,e),v(t,r,e),at(l,t,e),o=!0},p:t,i(t){o||(nt(n.$$.fragment,t),nt(l.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),rt(l.$$.fragment,t),o=!1},d(t){t&&y(r),ct(n,t),ct(l,t)}}}let gr=class extends dt{constructor(t){super(),ut(this,t,null,$r,o,{})}};var vr={createOptions(t){t.dayMaxEvents=!1,t.dayCellFormat={day:"numeric"},t.dayPopoverFormat={month:"long",day:"numeric",year:"numeric"},t.moreLinkContent=void 0,t.buttonText.dayGridMonth="month",t.buttonText.close="Close",t.theme.uniform="ec-uniform",t.theme.dayFoot="ec-day-foot",t.theme.popup="ec-popup",t.theme.weekNumber="ec-week-number",t.view="dayGridMonth",t.weekNumbers=!1,t.weekNumberContent=void 0,t.views.dayGridMonth={buttonText:Ne,component:gr,dayHeaderFormat:{weekday:"short"},dayHeaderAriaLabelFormat:{weekday:"long"},displayEventEnd:!1,duration:{months:1},theme:ze("ec-day-grid ec-month-view"),titleFormat:{year:"numeric",month:"long"}}},createStores(t){t._days=function(t){return pt([t.date,t.firstDay,t.hiddenDays],(t=>{let[e,n,r]=t,l=[],o=kt(e),i=7;for(;o.getUTCDay()!==n&&i;)Dt(o),--i;for(let t=0;t<7;++t)r.includes(o.getUTCDay())||l.push(kt(o)),_t(o);return l}))}(t),t._intlDayCell=Ge(t.locale,t.dayCellFormat),t._intlDayPopover=Ge(t.locale,t.dayPopoverFormat),t._hiddenEvents=mt({}),t._popupDate=mt(null),t._popupChunks=mt([])}};function yr(e){let n,o,i,s,a,c,u,d,f,h,m;return{c(){n=b("article"),o=b("div"),s=x(),a=b("div"),T(o,"class",i=e[0].eventTag),T(o,"style",e[3]),T(a,"class",c=e[0].eventBody),T(n,"class",e[2]),T(n,"role",d=e[5]?"button":void 0),T(n,"tabindex",f=e[5]?0:void 0)},m(t,r){v(t,n,r),g(n,o),g(n,s),g(n,a),e[38](n),h||(m=[p(u=gt.call(null,a,e[4])),_(n,"click",(function(){l(e[5])&&e[5].apply(this,arguments)})),_(n,"keydown",(function(){l(e[5]&&$t(e[5]))&&(e[5]&&$t(e[5])).apply(this,arguments)})),_(n,"mouseenter",(function(){l(e[25](e[6]))&&e[25](e[6]).apply(this,arguments)})),_(n,"mouseleave",(function(){l(e[25](e[7]))&&e[25](e[7]).apply(this,arguments)})),_(n,"pointerdown",(function(){l(e[8].action?.noAction)&&e[8].action?.noAction.apply(this,arguments)}))],h=!0)},p(t,r){e=t,1&r[0]&&i!==(i=e[0].eventTag)&&T(o,"class",i),8&r[0]&&T(o,"style",e[3]),1&r[0]&&c!==(c=e[0].eventBody)&&T(a,"class",c),u&&l(u.update)&&16&r[0]&&u.update.call(null,e[4]),4&r[0]&&T(n,"class",e[2]),32&r[0]&&d!==(d=e[5]?"button":void 0)&&T(n,"role",d),32&r[0]&&f!==(f=e[5]?0:void 0)&&T(n,"tabindex",f)},i:t,o:t,d(t){t&&y(n),e[38](null),h=!1,r(m)}}}function wr(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,p,$,g,v,y,w,b,k,x,C,_,D,{chunk:T}=e,{displayEventEnd:E,eventAllUpdated:S,eventBackgroundColor:M,eventTextColor:U,eventColor:N,eventContent:L,eventClassNames:H,eventClick:F,eventDidMount:A,eventMouseEnter:I,eventMouseLeave:j,resources:W,theme:O,_view:G,_intlEventTime:Y,_interaction:q,_tasks:X}=B("state");function V(t){return Gt(t)?e=>t({event:we(b),el:w,jsEvent:e,view:ae(l)}):void 0}return a(t,E,(t=>n(32,d=t))),a(t,S,(t=>n(40,o=t))),a(t,M,(t=>n(37,$=t))),a(t,U,(t=>n(34,h=t))),a(t,N,(t=>n(36,p=t))),a(t,L,(t=>n(31,u=t))),a(t,H,(t=>n(33,f=t))),a(t,F,(t=>n(28,r=t))),a(t,A,(t=>n(41,i=t))),a(t,I,(t=>n(6,g=t))),a(t,j,(t=>n(7,v=t))),a(t,W,(t=>n(35,m=t))),a(t,O,(t=>n(0,c=t))),a(t,G,(t=>n(29,l=t))),a(t,Y,(t=>n(30,s=t))),a(t,q,(t=>n(8,y=t))),R((()=>{Gt(i)&&i({event:we(b),timeText:_,el:w,view:ae(l)})})),z((()=>{Gt(o)&&Qt((()=>o({view:ae(l)})),"eau",X)})),t.$$set=t=>{"chunk"in t&&n(26,T=t.chunk)},t.$$.update=()=>{if(67108864&t.$$.dirty[0]&&n(27,b=T.event),671088649&t.$$.dirty[0]|124&t.$$.dirty[1]){n(3,x="");let t=b.backgroundColor||je(b,m)||$||p;t&&n(3,x=`background-color:${t};`);let e=b.textColor||We(b,m)||h;e&&n(3,x+=`color:${e};`),n(3,x+=b.styles.join(";")),n(2,k=[c.event,...ye(f,b,l)].join(" "))}1677721601&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(4,[_,C]=ge(T,d,u,c,s,l),C),268435456&t.$$.dirty[0]&&n(5,D=V(r))},[c,w,k,x,C,D,g,v,y,E,S,M,U,N,L,H,F,A,I,j,W,O,G,Y,q,V,T,b,r,l,s,u,d,f,h,m,p,$,function(t){P[t?"unshift":"push"]((()=>{w=t,n(1,w)}))}]}let br=class extends dt{constructor(t){super(),ut(this,t,wr,yr,o,{chunk:26},null,[-1,-1])}};function kr(t,e,n){const r=t.slice();return r[28]=e[n],r}function xr(t){let e,n,o,i,s,a,c,u,d,f,h,m,$,w,k=[],C=new Map,D=lt(t[2]);const E=t=>t[28].event;for(let e=0;e<D.length;e+=1){let n=kr(t,D,e),r=E(n);C.set(r,k[e]=Cr(r,n))}return{c(){e=b("div"),n=b("h4"),o=b("time"),s=x(),a=b("time"),f=x();for(let t=0;t<k.length;t+=1)k[t].c();T(o,"datetime",t[5]),T(a,"class",c=t[6].daySide),T(a,"datetime",t[5]),T(n,"class",d=t[6].dayHead),T(e,"class",h=t[6].day+" "+t[6].weekdays?.[t[0].getUTCDay()]+(t[3]?" "+t[6].today:"")+(t[4]?" "+t[6].highlight:"")),T(e,"role","listitem")},m(r,c){v(r,e,c),g(e,n),g(n,o),g(n,s),g(n,a),g(e,f);for(let t=0;t<k.length;t+=1)k[t]&&k[t].m(e,null);t[27](e),m=!0,$||(w=[p(i=gt.call(null,o,t[8].format(t[0]))),p(u=gt.call(null,a,t[9].format(t[0]))),_(e,"pointerdown",(function(){l(t[7].action?.select)&&t[7].action?.select.apply(this,arguments)}))],$=!0)},p(r,s){t=r,(!m||32&s)&&T(o,"datetime",t[5]),i&&l(i.update)&&257&s&&i.update.call(null,t[8].format(t[0])),(!m||64&s&&c!==(c=t[6].daySide))&&T(a,"class",c),(!m||32&s)&&T(a,"datetime",t[5]),u&&l(u.update)&&513&s&&u.update.call(null,t[9].format(t[0])),(!m||64&s&&d!==(d=t[6].dayHead))&&T(n,"class",d),4&s&&(D=lt(t[2]),tt(),k=it(k,s,E,0,t,D,C,e,ot,Cr,null,kr),et()),(!m||89&s&&h!==(h=t[6].day+" "+t[6].weekdays?.[t[0].getUTCDay()]+(t[3]?" "+t[6].today:"")+(t[4]?" "+t[6].highlight:"")))&&T(e,"class",h)},i(t){if(!m){for(let t=0;t<D.length;t+=1)nt(k[t]);m=!0}},o(t){for(let t=0;t<k.length;t+=1)rt(k[t]);m=!1},d(n){n&&y(e);for(let t=0;t<k.length;t+=1)k[t].d();t[27](null),$=!1,r(w)}}}function Cr(t,e){let n,r,l;return r=new br({props:{chunk:e[28]}}),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){e=t;const l={};4&n&&(l.chunk=e[28]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),ct(r,t)}}}function _r(t){let e,n,r=t[2].length&&xr(t);return{c(){r&&r.c(),e=C()},m(t,l){r&&r.m(t,l),v(t,e,l),n=!0},p(t,n){let[l]=n;t[2].length?r?(r.p(t,l),4&l&&nt(r,1)):(r=xr(t),r.c(),nt(r,1),r.m(e.parentNode,e)):r&&(tt(),rt(r,1,1,(()=>{r=null})),et())},i(t){n||(nt(r),n=!0)},o(t){rt(r),n=!1},d(t){t&&y(e),r&&r.d(t)}}}function Dr(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,{date:p}=e,{_events:$,_interaction:g,_intlListDay:v,_intlListDaySide:y,_today:w,resources:b,filterEventsWithResources:k,highlightedDates:x,theme:C,validRange:_}=B("state");a(t,$,(t=>n(23,o=t))),a(t,g,(t=>n(7,d=t))),a(t,v,(t=>n(8,f=t))),a(t,y,(t=>n(9,h=t))),a(t,w,(t=>n(26,c=t))),a(t,b,(t=>n(21,r=t))),a(t,k,(t=>n(22,l=t))),a(t,x,(t=>n(25,s=t))),a(t,C,(t=>n(6,u=t))),a(t,_,(t=>n(24,i=t)));let D,T,E,S,M=[];return t.$$set=t=>{"date"in t&&n(0,p=t.date)},t.$$.update=()=>{if(67108865&t.$$.dirty&&n(3,D=Mt(p,c)),33554433&t.$$.dirty&&n(4,T=s.some((t=>Mt(t,p)))),16777217&t.$$.dirty&&n(20,E=Be(p,i)),1&t.$$.dirty&&n(5,S=St(p,10)),15728645&t.$$.dirty&&!E){n(2,M=[]);let t=p,e=_t(kt(p));for(let n of o)if(!Ee(n.display)&&De(n,t,e,l?r:void 0)){let r=pe(n,t,e);M.push(r)}$e(M)}1048579&t.$$.dirty&&m&&te(m,(()=>({allDay:!0,date:p,resource:void 0,dayEl:m,disabled:E})))},[p,m,M,D,T,S,u,d,f,h,$,g,v,y,w,b,k,x,C,_,E,r,l,o,i,s,c,function(t){P[t?"unshift":"push"]((()=>{m=t,n(1,m)}))}]}let Tr=class extends dt{constructor(t){super(),ut(this,t,Dr,_r,o,{date:0})}};function Er(t,e,n){const r=t.slice();return r[18]=e[n],r}function Sr(t){let e,n,r=lt(t[1]),l=[];for(let e=0;e<r.length;e+=1)l[e]=Ur(Er(t,r,e));const o=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,r){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);v(t,e,r),n=!0},p(t,n){if(2&n){let i;for(r=lt(t[1]),i=0;i<r.length;i+=1){const o=Er(t,r,i);l[i]?(l[i].p(o,n),nt(l[i],1)):(l[i]=Ur(o),l[i].c(),nt(l[i],1),l[i].m(e.parentNode,e))}for(tt(),i=r.length;i<l.length;i+=1)o(i);et()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)nt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){t&&y(e),w(l,t)}}}function Mr(e){let n,o,i,s,a;return{c(){n=b("div"),T(n,"class",o=e[3].noEvents)},m(t,r){v(t,n,r),s||(a=[p(i=gt.call(null,n,e[0])),_(n,"click",e[12])],s=!0)},p(t,e){8&e&&o!==(o=t[3].noEvents)&&T(n,"class",o),i&&l(i.update)&&1&e&&i.update.call(null,t[0])},i:t,o:t,d(t){t&&y(n),s=!1,r(a)}}}function Ur(t){let e,n;return e=new Tr({props:{date:t[18]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.date=t[18]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Nr(t){let e,n,r,l,o,i,s;const a=[Mr,Sr],c=[];function u(t,e){return t[2]?0:1}return r=u(t),l=c[r]=a[r](t),{c(){e=b("div"),n=b("div"),l.c(),T(n,"class",o=t[3].content),T(e,"class",i=t[3].body)},m(l,o){v(l,e,o),g(e,n),c[r].m(n,null),t[15](e),s=!0},p(t,d){let[f]=d,h=r;r=u(t),r===h?c[r].p(t,f):(tt(),rt(c[h],1,1,(()=>{c[h]=null})),et(),l=c[r],l?l.p(t,f):(l=c[r]=a[r](t),l.c()),nt(l,1),l.m(n,null)),(!s||8&f&&o!==(o=t[3].content))&&T(n,"class",o),(!s||8&f&&i!==(i=t[3].body))&&T(e,"class",i)},i(t){s||(nt(l),s=!0)},o(t){rt(l),s=!1},d(n){n&&y(e),c[r].d(),t[15](null)}}}function Lr(t,e,n){let r,l,o,i,s,c,u,d,f,{_bodyEl:h,_events:m,_view:p,_viewDates:$,noEventsClick:g,noEventsContent:v,theme:y}=B("state");return a(t,h,(t=>n(4,u=t))),a(t,m,(t=>n(14,i=t))),a(t,p,(t=>n(16,r=t))),a(t,$,(t=>n(1,s=t))),a(t,g,(t=>n(17,l=t))),a(t,v,(t=>n(13,o=t))),a(t,y,(t=>n(3,c=t))),t.$$.update=()=>{if(16386&t.$$.dirty&&(n(2,d=!0),s.length)){let t=s[0],e=_t(kt(s.at(-1)));for(let r of i)if(!Ee(r.display)&&r.start<e&&r.end>t){n(2,d=!1);break}}8193&t.$$.dirty&&(n(0,f=Gt(o)?o():o),"string"==typeof f&&n(0,f={html:f}))},[f,s,d,c,u,h,m,p,$,g,v,y,function(t){Gt(l)&&l({jsEvent:t,view:ae(r)})},o,i,function(t){P[t?"unshift":"push"]((()=>{u=t,h.set(u)}))}]}let Rr=class extends dt{constructor(t){super(),ut(this,t,Lr,Nr,o,{})}};function zr(e){let n,r;return n=new Rr({}),{c(){st(n.$$.fragment)},m(t,e){at(n,t,e),r=!0},p:t,i(t){r||(nt(n.$$.fragment,t),r=!0)},o(t){rt(n.$$.fragment,t),r=!1},d(t){ct(n,t)}}}let Hr=class extends dt{constructor(t){super(),ut(this,t,null,zr,o,{})}};var Br={createOptions(t){t.buttonText.listDay="list",t.buttonText.listWeek="list",t.buttonText.listMonth="list",t.buttonText.listYear="list",t.listDayFormat={weekday:"long"},t.listDaySideFormat={year:"numeric",month:"long",day:"numeric"},t.noEventsClick=void 0,t.noEventsContent="No events",t.theme.daySide="ec-day-side",t.theme.eventTag="ec-event-tag",t.theme.noEvents="ec-no-events",t.view="listWeek",t.views.listDay={buttonText:Me,component:Hr,duration:{days:1},theme:ze("ec-list ec-day-view")},t.views.listWeek={buttonText:Ue,component:Hr,duration:{weeks:1},theme:ze("ec-list ec-week-view")},t.views.listMonth={buttonText:Ne,component:Hr,duration:{months:1},theme:ze("ec-list ec-month-view")},t.views.listYear={buttonText:Le,component:Hr,duration:{years:1},theme:ze("ec-list ec-year-view")}},createStores(t){t._intlListDay=Ge(t.locale,t.listDayFormat),t._intlListDaySide=Ge(t.locale,t.listDaySideFormat)}};const Fr=t=>({}),Ar=t=>({});function Pr(t,e,n){const r=t.slice();return r[9]=e[n],r}function Ir(t){let e,n,r,o,i,s;return{c(){e=b("time"),T(e,"class",n=t[1].time),T(e,"datetime",r=t[9][0])},m(n,r){v(n,e,r),i||(s=p(o=gt.call(null,e,t[9][2]?t[9][1]:"")),i=!0)},p(i,s){t=i,2&s&&n!==(n=t[1].time)&&T(e,"class",n),4&s&&r!==(r=t[9][0])&&T(e,"datetime",r),o&&l(o.update)&&4&s&&o.update.call(null,t[9][2]?t[9][1]:"")},d(t){t&&y(e),i=!1,s()}}}function jr(t){let e,n,r,o,i,s,a,u,m,$,k,C,_,D,E,S=lt(t[2]),M=[];for(let e=0;e<S.length;e+=1)M[e]=Ir(Pr(t,S,e));const U=t[8].lines,N=c(U,t,t[7],Ar),L=t[8].default,R=c(L,t,t[7],null);return{c(){e=b("div"),n=b("div"),i=x();for(let t=0;t<M.length;t+=1)M[t].c();a=x(),u=b("div"),m=b("div"),N&&N.c(),k=x(),R&&R.c(),T(n,"class",r=t[1].sidebarTitle),T(e,"class",s=t[1].sidebar),T(m,"class",$=t[1].lines),T(u,"class",C=t[1].days),T(u,"role","row")},m(r,l){v(r,e,l),g(e,n),g(e,i);for(let t=0;t<M.length;t+=1)M[t]&&M[t].m(e,null);v(r,a,l),v(r,u,l),g(u,m),N&&N.m(m,null),g(u,k),R&&R.m(u,null),_=!0,D||(E=p(o=gt.call(null,n,t[0])),D=!0)},p(t,i){let[a]=i;if((!_||2&a&&r!==(r=t[1].sidebarTitle))&&T(n,"class",r),o&&l(o.update)&&1&a&&o.update.call(null,t[0]),6&a){let n;for(S=lt(t[2]),n=0;n<S.length;n+=1){const r=Pr(t,S,n);M[n]?M[n].p(r,a):(M[n]=Ir(r),M[n].c(),M[n].m(e,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=S.length}(!_||2&a&&s!==(s=t[1].sidebar))&&T(e,"class",s),N&&N.p&&(!_||128&a)&&f(N,U,t,t[7],_?d(U,t[7],a,Fr):h(t[7]),Ar),(!_||2&a&&$!==($=t[1].lines))&&T(m,"class",$),R&&R.p&&(!_||128&a)&&f(R,L,t,t[7],_?d(L,t[7],a,null):h(t[7]),null),(!_||2&a&&C!==(C=t[1].days))&&T(u,"class",C)},i(t){_||(nt(N,t),nt(R,t),_=!0)},o(t){rt(N,t),rt(R,t),_=!1},d(t){t&&(y(e),y(a),y(u)),w(M,t),N&&N.d(t),R&&R.d(t),D=!1,E()}}}function Wr(t,e,n){let r,l,o,i,{$$slots:s={},$$scope:c}=e,{allDayContent:u,theme:d,_times:f}=B("state");return a(t,u,(t=>n(6,r=t))),a(t,d,(t=>n(1,l=t))),a(t,f,(t=>n(2,o=t))),t.$$set=t=>{"$$scope"in t&&n(7,c=t.$$scope)},t.$$.update=()=>{64&t.$$.dirty&&n(0,i=function(t){let e,n="all-day";return t?(e=Gt(t)?t({text:n}):t,"string"==typeof e&&(e={html:e})):e={html:n},e}(r))},[i,l,o,u,d,f,r,c,s]}class Or extends dt{constructor(t){super(),ut(this,t,Wr,jr,o,{})}}function Gr(t,e,n){const r=t.slice();return r[23]=e[n],r}function Yr(t){let e;const n=t[16].default,r=c(n,t,t[18],null);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,l){r&&r.p&&(!e||262144&l)&&f(r,n,t,t[18],e?d(n,t[18],l,null):h(t[18]),null)},i(t){e||(nt(r,t),e=!0)},o(t){rt(r,t),e=!1},d(t){r&&r.d(t)}}}function qr(t){let e,n;return{c(){e=b("div"),T(e,"class",n=t[3].line)},m(t,n){v(t,e,n)},p(t,r){8&r&&n!==(n=t[3].line)&&T(e,"class",n)},d(t){t&&y(e)}}}function Xr(t){let e,n=lt(t[2]),r=[];for(let e=0;e<n.length;e+=1)r[e]=qr(Gr(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);v(t,e,n)},p(t,l){if(12&l){let o;for(n=lt(t[2]),o=0;o<n.length;o+=1){const i=Gr(t,n,o);r[o]?r[o].p(i,l):(r[o]=qr(i),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&y(e),w(r,t)}}}function Vr(t){let e,n,r,l,o,i;return r=new Or({props:{$$slots:{lines:[Xr],default:[Yr]},$$scope:{ctx:t}}}),{c(){e=b("div"),n=b("div"),st(r.$$.fragment),T(n,"class",l=t[3].content),T(e,"class",o=t[3].body+(t[1]?" "+t[3].compact:""))},m(l,o){v(l,e,o),g(e,n),at(r,n,null),t[17](e),i=!0},p(t,s){let[a]=s;const c={};262156&a&&(c.$$scope={dirty:a,ctx:t}),r.$set(c),(!i||8&a&&l!==(l=t[3].content))&&T(n,"class",l),(!i||10&a&&o!==(o=t[3].body+(t[1]?" "+t[3].compact:"")))&&T(e,"class",o)},i(t){i||(nt(r.$$.fragment,t),i=!0)},o(t){rt(r.$$.fragment,t),i=!1},d(n){n&&y(e),ct(r),t[17](null)}}}function Jr(t,e,n){let r,l,o,i,s,c,u,d,f,h,{$$slots:p={},$$scope:$}=e,{_bodyEl:g,_viewDates:v,_slotTimeLimits:y,_times:w,scrollTime:b,slotDuration:k,slotHeight:x,theme:C}=B("state");a(t,g,(t=>n(21,u=t))),a(t,v,(t=>n(14,s=t))),a(t,y,(t=>n(20,o=t))),a(t,w,(t=>n(15,c=t))),a(t,b,(t=>n(13,i=t))),a(t,k,(t=>n(12,l=t))),a(t,x,(t=>n(19,r=t))),a(t,C,(t=>n(3,d=t)));let _=[];return t.$$set=t=>{"$$scope"in t&&n(18,$=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&m(g,u=f,u),36864&t.$$.dirty&&(n(1,h=l.seconds>=3600),n(2,_.length=c.length,_)),24577&t.$$.dirty&&f&&n(0,f.scrollTop=((i.seconds-o.min.seconds)/l.seconds-.5)*r,f)},[f,h,_,d,g,v,y,w,b,k,x,C,l,i,s,c,p,function(t){P[t?"unshift":"push"]((()=>{f=t,n(0,f)}))},$]}let Kr=class extends dt{constructor(t){super(),ut(this,t,Jr,Vr,o,{})}};function Qr(t){let e,n,o,i,s,a,c,u,d,f,h,m,$;var w=t[10].resizer;function k(t,e){return{props:{start:!0,event:t[0]}}}w&&(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[33](t[10],["y","start"]))&&t[33](t[10],["y","start"]).apply(this,arguments)})));var C=t[10].resizer;function D(t,e){return{props:{event:t[0]}}}return C&&(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[33](t[10],["y","end"]))&&t[33](t[10],["y","end"]).apply(this,arguments)}))),{c(){e=b("article"),n&&st(n.$$.fragment),o=x(),i=b("div"),c=x(),u&&st(u.$$.fragment),T(i,"class",s=t[2].eventBody),T(e,"class",t[4]),T(e,"style",t[5]),T(e,"role",d=t[7]?"button":void 0),T(e,"tabindex",f=t[7]?0:void 0)},m(r,s){v(r,e,s),n&&at(n,e,null),g(e,o),g(e,i),g(e,c),u&&at(u,e,null),t[51](e),h=!0,m||($=[p(a=gt.call(null,i,t[6])),_(e,"click",(function(){l(t[7])&&t[7].apply(this,arguments)})),_(e,"keydown",(function(){l(t[7]&&$t(t[7]))&&(t[7]&&$t(t[7])).apply(this,arguments)})),_(e,"mouseenter",(function(){l(t[32](t[8],t[1]))&&t[32](t[8],t[1]).apply(this,arguments)})),_(e,"mouseleave",(function(){l(t[32](t[9],t[1]))&&t[32](t[9],t[1]).apply(this,arguments)})),_(e,"pointerdown",(function(){l(!Ee(t[1])&&!Te(t[1])&&t[33](t[10]))&&(!Ee(t[1])&&!Te(t[1])&&t[33](t[10])).apply(this,arguments)}))],m=!0)},p(r,c){if(t=r,1024&c[0]&&w!==(w=t[10].resizer)){if(n){tt();const t=n;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}w?(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[33](t[10],["y","start"]))&&t[33](t[10],["y","start"]).apply(this,arguments)})),st(n.$$.fragment),nt(n.$$.fragment,1),at(n,e,o)):n=null}else if(w){const e={};1&c[0]&&(e.event=t[0]),n.$set(e)}if((!h||4&c[0]&&s!==(s=t[2].eventBody))&&T(i,"class",s),a&&l(a.update)&&64&c[0]&&a.update.call(null,t[6]),1024&c[0]&&C!==(C=t[10].resizer)){if(u){tt();const t=u;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}C?(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[33](t[10],["y","end"]))&&t[33](t[10],["y","end"]).apply(this,arguments)})),st(u.$$.fragment),nt(u.$$.fragment,1),at(u,e,null)):u=null}else if(C){const e={};1&c[0]&&(e.event=t[0]),u.$set(e)}(!h||16&c[0])&&T(e,"class",t[4]),(!h||32&c[0])&&T(e,"style",t[5]),(!h||128&c[0]&&d!==(d=t[7]?"button":void 0))&&T(e,"role",d),(!h||128&c[0]&&f!==(f=t[7]?0:void 0))&&T(e,"tabindex",f)},i(t){h||(n&&nt(n.$$.fragment,t),u&&nt(u.$$.fragment,t),h=!0)},o(t){n&&rt(n.$$.fragment,t),u&&rt(u.$$.fragment,t),h=!1},d(l){l&&y(e),n&&ct(n),u&&ct(u),t[51](null),m=!1,r($)}}}function Zr(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,p,$,g,v,y,w,b,k,x,C,_,D,T,E,S,M,U,N,{date:L}=e,{chunk:H}=e,{displayEventEnd:F,eventAllUpdated:A,eventBackgroundColor:I,eventTextColor:j,eventColor:W,eventContent:O,eventClick:G,eventDidMount:Y,eventClassNames:q,eventMouseEnter:X,eventMouseLeave:V,slotEventOverlap:J,slotDuration:K,slotHeight:Q,resources:Z,theme:tt,_view:et,_intlEventTime:nt,_interaction:rt,_iClasses:lt,_slotTimeLimits:ot,_tasks:it}=B("state");function st(t,e){return!Te(e)&&Gt(t)?e=>t({event:we(D),el:_,jsEvent:e,view:ae(l)}):void 0}return a(t,F,(t=>n(40,d=t))),a(t,A,(t=>n(53,o=t))),a(t,I,(t=>n(47,v=t))),a(t,j,(t=>n(44,p=t))),a(t,W,(t=>n(46,g=t))),a(t,O,(t=>n(39,u=t))),a(t,G,(t=>n(36,r=t))),a(t,Y,(t=>n(54,i=t))),a(t,q,(t=>n(41,f=t))),a(t,X,(t=>n(8,k=t))),a(t,V,(t=>n(9,x=t))),a(t,J,(t=>n(43,m=t))),a(t,K,(t=>n(50,b=t))),a(t,Q,(t=>n(48,y=t))),a(t,Z,(t=>n(45,$=t))),a(t,tt,(t=>n(2,c=t))),a(t,et,(t=>n(37,l=t))),a(t,nt,(t=>n(38,s=t))),a(t,rt,(t=>n(10,C=t))),a(t,lt,(t=>n(42,h=t))),a(t,ot,(t=>n(49,w=t))),R((()=>{Gt(i)&&i({event:we(D),timeText:U,el:_,view:ae(l)})})),z((()=>{Gt(o)&&!Te(T)&&Qt((()=>o({view:ae(l)})),"eau",it)})),t.$$set=t=>{"date"in t&&n(34,L=t.date),"chunk"in t&&n(35,H=t.chunk)},t.$$.update=()=>{if(16&t.$$.dirty[1]&&n(0,D=H.event),39&t.$$.dirty[0]|1047640&t.$$.dirty[1]){n(1,T=D.display);let t=b.seconds,e=w.min.seconds,r=(H.start-L)/1e3,o=(H.end-L)/1e3,i=(r-e)/t*y,s=(o-r)/t*y||y,a=(w.max.seconds-r)/t*y,u=D.backgroundColor||je(D,$)||v||g,d=D.textColor||We(D,$)||p;n(5,S=`top:${i}px;min-height:${s}px;height:${s}px;max-height:${a}px;`),u&&n(5,S+=`background-color:${u};`),d&&n(5,S+=`color:${d};`),(!Ee(T)&&!Te(T)||Se(T))&&n(5,S+=`z-index:${H.column+1};left:${100/H.group.columns.length*H.column}%;width:${100/H.group.columns.length*(m?.5*(1+H.group.columns.length-H.column):1)}%;`),n(5,S+=D.styles.join(";")),n(4,E=[Ee(T)?c.bgEvent:c.event,...h([],D),...ye(f,D,l)].join(" "))}4&t.$$.dirty[0]|976&t.$$.dirty[1]&&n(6,[U,M]=ge(H,d,u,c,s,l),M),2&t.$$.dirty[0]|32&t.$$.dirty[1]&&n(7,N=!Ee(T)&&st(r,T))},[D,T,c,_,E,S,M,N,k,x,C,F,A,I,j,W,O,G,Y,q,X,V,J,K,Q,Z,tt,et,nt,rt,lt,ot,st,function(t,e){return t.action?n=>t.action.drag(D,n,e,void 0,void 0,H.zeroDuration):void 0},L,H,r,l,s,u,d,f,h,m,p,$,g,v,y,w,b,function(t){P[t?"unshift":"push"]((()=>{_=t,n(3,_)}))}]}let tl=class extends dt{constructor(t){super(),ut(this,t,Zr,Qr,o,{date:34,chunk:35},null,[-1,-1])}};function el(e){let n,r;return{c(){n=b("div"),T(n,"class",r=e[1].nowIndicator),S(n,"top",e[0]+"px")},m(t,e){v(t,n,e)},p(t,e){let[l]=e;2&l&&r!==(r=t[1].nowIndicator)&&T(n,"class",r),1&l&&S(n,"top",t[0]+"px")},i:t,o:t,d(t){t&&y(n)}}}function nl(t,e,n){let r,l,o,i,s,c,u,{slotDuration:d,slotHeight:f,theme:h,_now:m,_today:p,_slotTimeLimits:$}=B("state");a(t,d,(t=>n(11,o=t))),a(t,f,(t=>n(9,r=t))),a(t,h,(t=>n(1,c=t))),a(t,m,(t=>n(13,s=t))),a(t,p,(t=>n(12,i=t))),a(t,$,(t=>n(10,l=t)));let g=0;return t.$$.update=()=>{if(12288&t.$$.dirty&&n(8,u=(s-i)/1e3/60),3840&t.$$.dirty){let t=o.seconds/60,e=l.min.seconds/60;n(0,g=(u-e)/t*r)}},[g,c,d,f,h,m,p,$,u,r,l,o,i,s]}class rl extends dt{constructor(t){super(),ut(this,t,nl,el,o,{})}}function ll(t,e,n){const r=t.slice();return r[40]=e[n],r}function ol(t,e,n){const r=t.slice();return r[40]=e[n],r}function il(t){let e,n,r=[],l=new Map,o=lt(t[3]);const i=t=>t[40].event;for(let e=0;e<o.length;e+=1){let n=ol(t,o,e),s=i(n);l.set(s,r[e]=sl(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);v(t,e,l),n=!0},p(t,n){9&n[0]&&(o=lt(t[3]),tt(),r=it(r,n,i,0,t,o,l,e.parentNode,ot,sl,e,ol),et())},i(t){if(!n){for(let t=0;t<o.length;t+=1)nt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&y(e);for(let e=0;e<r.length;e+=1)r[e].d(t)}}}function sl(t,e){let n,r,l;return r=new tl({props:{date:e[0],chunk:e[40]}}),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){e=t;const l={};1&n[0]&&(l.date=e[0]),8&n[0]&&(l.chunk=e[40]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),ct(r,t)}}}function al(t){let e,n,r,l,o=[],i=new Map,s=t[5][1]&&cl(t),a=lt(t[2]);const c=t=>t[40].event;for(let e=0;e<a.length;e+=1){let n=ll(t,a,e),r=c(n);i.set(r,o[e]=ul(r,n))}let u=t[5][0]&&!t[5][0].event.allDay&&dl(t);return{c(){s&&s.c(),e=x();for(let t=0;t<o.length;t+=1)o[t].c();n=x(),u&&u.c(),r=C()},m(t,i){s&&s.m(t,i),v(t,e,i);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(t,i);v(t,n,i),u&&u.m(t,i),v(t,r,i),l=!0},p(t,l){t[5][1]?s?(s.p(t,l),32&l[0]&&nt(s,1)):(s=cl(t),s.c(),nt(s,1),s.m(e.parentNode,e)):s&&(tt(),rt(s,1,1,(()=>{s=null})),et()),5&l[0]&&(a=lt(t[2]),tt(),o=it(o,l,c,0,t,a,i,n.parentNode,ot,ul,n,ll),et()),t[5][0]&&!t[5][0].event.allDay?u?(u.p(t,l),32&l[0]&&nt(u,1)):(u=dl(t),u.c(),nt(u,1),u.m(r.parentNode,r)):u&&(tt(),rt(u,1,1,(()=>{u=null})),et())},i(t){if(!l){nt(s);for(let t=0;t<a.length;t+=1)nt(o[t]);nt(u),l=!0}},o(t){rt(s);for(let t=0;t<o.length;t+=1)rt(o[t]);rt(u),l=!1},d(t){t&&(y(e),y(n),y(r)),s&&s.d(t);for(let e=0;e<o.length;e+=1)o[e].d(t);u&&u.d(t)}}}function cl(t){let e,n;return e=new tl({props:{date:t[0],chunk:t[5][1]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.date=t[0]),32&n[0]&&(r.chunk=t[5][1]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function ul(t,e){let n,r,l;return r=new tl({props:{date:e[0],chunk:e[40]}}),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){e=t;const l={};1&n[0]&&(l.date=e[0]),4&n[0]&&(l.chunk=e[40]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),ct(r,t)}}}function dl(t){let e,n;return e=new tl({props:{date:t[0],chunk:t[5][0]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.date=t[0]),32&n[0]&&(r.chunk=t[5][0]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function fl(t){let e,n;return e=new rl({}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function hl(t){let e,n,r,o,i,s,a,c,u,d,f,h,m,p=!t[4]&&il(t),$=!t[4]&&al(t),w=t[10]&&t[6]&&!t[4]&&fl();return{c(){e=b("div"),n=b("div"),p&&p.c(),o=x(),i=b("div"),$&&$.c(),a=x(),c=b("div"),w&&w.c(),T(n,"class",r=t[8].bgEvents),T(i,"class",s=t[8].events),T(c,"class",u=t[8].extra),T(e,"class",d=t[8].day+" "+t[8].weekdays?.[t[0].getUTCDay()]+(t[6]?" "+t[8].today:"")+(t[7]?" "+t[8].highlight:"")+(t[4]?" "+t[8].disabled:"")),T(e,"role","cell")},m(r,s){v(r,e,s),g(e,n),p&&p.m(n,null),g(e,o),g(e,i),$&&$.m(i,null),g(e,a),g(e,c),w&&w.m(c,null),t[36](e),f=!0,h||(m=_(e,"pointerdown",(function(){l(t[4]?void 0:t[9].action?.select)&&(t[4]?void 0:t[9].action?.select).apply(this,arguments)})),h=!0)},p(l,o){(t=l)[4]?p&&(tt(),rt(p,1,1,(()=>{p=null})),et()):p?(p.p(t,o),16&o[0]&&nt(p,1)):(p=il(t),p.c(),nt(p,1),p.m(n,null)),(!f||256&o[0]&&r!==(r=t[8].bgEvents))&&T(n,"class",r),t[4]?$&&(tt(),rt($,1,1,(()=>{$=null})),et()):$?($.p(t,o),16&o[0]&&nt($,1)):($=al(t),$.c(),nt($,1),$.m(i,null)),(!f||256&o[0]&&s!==(s=t[8].events))&&T(i,"class",s),t[10]&&t[6]&&!t[4]?w?1104&o[0]&&nt(w,1):(w=fl(),w.c(),nt(w,1),w.m(c,null)):w&&(tt(),rt(w,1,1,(()=>{w=null})),et()),(!f||256&o[0]&&u!==(u=t[8].extra))&&T(c,"class",u),(!f||465&o[0]&&d!==(d=t[8].day+" "+t[8].weekdays?.[t[0].getUTCDay()]+(t[6]?" "+t[8].today:"")+(t[7]?" "+t[8].highlight:"")+(t[4]?" "+t[8].disabled:"")))&&T(e,"class",d)},i(t){f||(nt(p),nt($),nt(w),f=!0)},o(t){rt(p),rt($),rt(w),f=!1},d(n){n&&y(e),p&&p.d(),$&&$.d(),w&&w.d(),t[36](null),h=!1,m()}}}function ml(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,p,$,g,{date:v}=e,{resource:y}=e,{_events:w,_iEvents:b,highlightedDates:k,nowIndicator:x,slotDuration:C,slotHeight:_,filterEventsWithResources:D,theme:T,resources:E,validRange:S,_interaction:M,_today:U,_slotTimeLimits:N}=B("state");a(t,w,(t=>n(30,s=t))),a(t,b,(t=>n(29,i=t))),a(t,k,(t=>n(34,f=t))),a(t,x,(t=>n(10,$=t))),a(t,C,(t=>n(38,l=t))),a(t,_,(t=>n(37,r=t))),a(t,D,(t=>n(32,u=t))),a(t,T,(t=>n(8,m=t))),a(t,E,(t=>n(31,c=t))),a(t,S,(t=>n(33,d=t))),a(t,M,(t=>n(9,p=t))),a(t,U,(t=>n(35,h=t))),a(t,N,(t=>n(28,o=t)));let L,R,z,H,F,A,I,j,W=[];function O(t,e){return e-=re(g).top,{allDay:!1,date:xt(xt(kt(v),o.min),l,Pt(e/r)),resource:y,dayEl:g,disabled:F}}return t.$$set=t=>{"date"in t&&n(0,v=t.date),"resource"in t&&n(24,y=t.resource)},t.$$.update=()=>{if(1&t.$$.dirty[0]|16&t.$$.dirty[1]&&n(6,z=Mt(v,h)),1&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(7,H=f.some((t=>Mt(t,v)))),1&t.$$.dirty[0]|4&t.$$.dirty[1]&&n(4,F=Be(v,d)),268435473&t.$$.dirty[0]&&(F||(n(26,I=xt(kt(v),o.min)),n(27,j=xt(kt(v),o.max)))),16777216&t.$$.dirty[0]|3&t.$$.dirty[1]&&n(25,A=y??(u?c:void 0)),1308622876&t.$$.dirty[0]&&!F){n(2,L=[]),n(3,R=[]);for(let t of s)if((!t.allDay||Ee(t.display))&&De(t,I,j,A)){let e=pe(t,I,j);if("background"===t.display)R.push(e);else L.push(e)}!function(t){if(!t.length)return;$e(t);let e={columns:[],end:t[0].end};for(let n of t){let t=0;if(n.start<e.end){for(;t<e.columns.length&&!(e.columns[t].at(-1).end<=n.start);++t);n.end>e.end&&(e.end=n.end)}else e={columns:[],end:n.end};e.columns.length<t+1&&e.columns.push([]),e.columns[t].push(n),n.group=e,n.column=t}}(L)}754974736&t.$$.dirty[0]&&(F||n(5,W=i.map((t=>t&&De(t,I,j,y)?pe(t,I,j):null)))),2&t.$$.dirty[0]&&g&&te(g,O)},[v,g,L,R,F,W,z,H,m,p,$,w,b,k,x,C,_,D,T,E,S,M,U,N,y,A,I,j,o,i,s,c,u,d,f,h,function(t){P[t?"unshift":"push"]((()=>{g=t,n(1,g)}))}]}let pl=class extends dt{constructor(t){super(),ut(this,t,ml,hl,o,{date:0,resource:24},null,[-1,-1])}};function $l(t){let e,n,o,i,s,a,c,u,d,f,h,m,$;var w=t[10].resizer;function k(t,e){return{props:{start:!0,event:t[0]}}}w&&(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[29](t[10],["x","start"]))&&t[29](t[10],["x","start"]).apply(this,arguments)})));var C=t[10].resizer;function D(t,e){return{props:{event:t[0]}}}return C&&(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[29](t[10],["x","end"]))&&t[29](t[10],["x","end"]).apply(this,arguments)}))),{c(){e=b("article"),n&&st(n.$$.fragment),o=x(),i=b("div"),c=x(),u&&st(u.$$.fragment),T(i,"class",s=t[2].eventBody),T(e,"class",t[4]),T(e,"style",t[5]),T(e,"role",d=t[7]?"button":void 0),T(e,"tabindex",f=t[7]?0:void 0)},m(r,s){v(r,e,s),n&&at(n,e,null),g(e,o),g(e,i),g(e,c),u&&at(u,e,null),t[45](e),h=!0,m||($=[p(a=gt.call(null,i,t[6])),_(e,"click",(function(){l(t[7])&&t[7].apply(this,arguments)})),_(e,"keydown",(function(){l(t[7]&&$t(t[7]))&&(t[7]&&$t(t[7])).apply(this,arguments)})),_(e,"mouseenter",(function(){l(t[28](t[8],t[1]))&&t[28](t[8],t[1]).apply(this,arguments)})),_(e,"mouseleave",(function(){l(t[28](t[9],t[1]))&&t[28](t[9],t[1]).apply(this,arguments)})),_(e,"pointerdown",(function(){l(!Te(t[1])&&t[29](t[10]))&&(!Te(t[1])&&t[29](t[10])).apply(this,arguments)}))],m=!0)},p(r,c){if(t=r,1024&c[0]&&w!==(w=t[10].resizer)){if(n){tt();const t=n;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}w?(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[29](t[10],["x","start"]))&&t[29](t[10],["x","start"]).apply(this,arguments)})),st(n.$$.fragment),nt(n.$$.fragment,1),at(n,e,o)):n=null}else if(w){const e={};1&c[0]&&(e.event=t[0]),n.$set(e)}if((!h||4&c[0]&&s!==(s=t[2].eventBody))&&T(i,"class",s),a&&l(a.update)&&64&c[0]&&a.update.call(null,t[6]),1024&c[0]&&C!==(C=t[10].resizer)){if(u){tt();const t=u;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}C?(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[29](t[10],["x","end"]))&&t[29](t[10],["x","end"]).apply(this,arguments)})),st(u.$$.fragment),nt(u.$$.fragment,1),at(u,e,null)):u=null}else if(C){const e={};1&c[0]&&(e.event=t[0]),u.$set(e)}(!h||16&c[0])&&T(e,"class",t[4]),(!h||32&c[0])&&T(e,"style",t[5]),(!h||128&c[0]&&d!==(d=t[7]?"button":void 0))&&T(e,"role",d),(!h||128&c[0]&&f!==(f=t[7]?0:void 0))&&T(e,"tabindex",f)},i(t){h||(n&&nt(n.$$.fragment,t),u&&nt(u.$$.fragment,t),h=!0)},o(t){n&&rt(n.$$.fragment,t),u&&rt(u.$$.fragment,t),h=!1},d(l){l&&y(e),n&&ct(n),u&&ct(u),t[45](null),m=!1,r($)}}}function gl(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,p,$,g,v,y,w,b,k,x,C,_,D,{chunk:T}=e,{longChunks:E={}}=e,{displayEventEnd:S,eventAllUpdated:M,eventBackgroundColor:U,eventTextColor:N,eventClick:L,eventColor:H,eventContent:F,eventClassNames:A,eventDidMount:I,eventMouseEnter:j,eventMouseLeave:W,resources:O,theme:G,_view:Y,_intlEventTime:q,_interaction:X,_iClasses:V,_tasks:J}=B("state");a(t,S,(t=>n(38,d=t))),a(t,M,(t=>n(47,o=t))),a(t,U,(t=>n(44,g=t))),a(t,N,(t=>n(41,m=t))),a(t,L,(t=>n(34,r=t))),a(t,H,(t=>n(43,$=t))),a(t,F,(t=>n(37,u=t))),a(t,A,(t=>n(39,f=t))),a(t,I,(t=>n(48,i=t))),a(t,j,(t=>n(8,v=t))),a(t,W,(t=>n(9,y=t))),a(t,O,(t=>n(42,p=t))),a(t,G,(t=>n(2,c=t))),a(t,Y,(t=>n(35,l=t))),a(t,q,(t=>n(36,s=t))),a(t,X,(t=>n(10,w=t))),a(t,V,(t=>n(40,h=t)));let K,Q,Z=1;function tt(t,e){return!Te(e)&&Gt(t)?e=>t({event:we(k),el:b,jsEvent:e,view:ae(l)}):void 0}return R((()=>{Gt(i)&&i({event:we(k),timeText:D,el:b,view:ae(l)})})),z((()=>{Gt(o)&&!Te(K)&&Qt((()=>o({view:ae(l)})),"eau",J)})),t.$$set=t=>{"chunk"in t&&n(30,T=t.chunk),"longChunks"in t&&n(31,E=t.longChunks)},t.$$.update=()=>{if(1073741824&t.$$.dirty[0]&&n(0,k=T.event),1073741863&t.$$.dirty[0]|16148&t.$$.dirty[1]){n(1,K=k.display);let t=k.backgroundColor||je(k,p)||g||$,e=k.textColor||We(k,p)||m;Ee(K)?n(5,C=`width:calc(${100*T.days}% + ${T.days-1}px);`):n(5,C=`width:calc(${100*T.days}% + ${7*(T.days-1)}px);margin-top:${k._margin??Z}px;`),t&&n(5,C+=`background-color:${t};`),e&&n(5,C+=`color:${e};`),n(5,C+=k.styles.join(";")),n(4,x=[Ee(K)?c.bgEvent:c.event,...h([],k),...ye(f,k,l)].join(" "))}1073741828&t.$$.dirty[0]|240&t.$$.dirty[1]&&n(6,[D,_]=ge(T,d,u,c,s,l),_),2&t.$$.dirty[0]|8&t.$$.dirty[1]&&n(7,Q=tt(r,K))},[k,K,c,b,x,C,_,Q,v,y,w,S,M,U,N,L,H,F,A,I,j,W,O,G,Y,q,X,V,tt,function(t,e){return t.action?n=>t.action.drag(k,n,e,null,re(b).top-re(le(b,1)).top,T.zeroDuration):void 0},T,E,function(){b&&n(33,Z=Ce(T,E,oe(b)))},Z,r,l,s,u,d,f,h,m,p,$,g,function(t){P[t?"unshift":"push"]((()=>{b=t,n(3,b)}))}]}let vl=class extends dt{constructor(t){super(),ut(this,t,gl,$l,o,{chunk:30,longChunks:31,reposition:32},null,[-1,-1])}get reposition(){return this.$$.ctx[32]}};function yl(t,e,n){const r=t.slice();return r[26]=e[n],r[27]=e,r[28]=n,r}function wl(t,e,n){const r=t.slice();return r[26]=e[n],r}function bl(t){let e,n,r=[],l=new Map,o=lt(t[6]);const i=t=>t[26].event;for(let e=0;e<o.length;e+=1){let n=wl(t,o,e),s=i(n);l.set(s,r[e]=kl(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);v(t,e,l),n=!0},p(t,n){64&n&&(o=lt(t[6]),tt(),r=it(r,n,i,0,t,o,l,e.parentNode,ot,kl,e,wl),et())},i(t){if(!n){for(let t=0;t<o.length;t+=1)nt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&y(e);for(let e=0;e<r.length;e+=1)r[e].d(t)}}}function kl(t,e){let n,r,l;return r=new vl({props:{chunk:e[26]}}),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){e=t;const l={};64&n&&(l.chunk=e[26]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),ct(r,t)}}}function xl(t){let e,n,r,l;return n=new vl({props:{chunk:t[2][0]}}),{c(){e=b("div"),st(n.$$.fragment),T(e,"class",r=t[10].events+" "+t[10].preview)},m(t,r){v(t,e,r),at(n,e,null),l=!0},p(t,o){const i={};4&o&&(i.chunk=t[2][0]),n.$set(i),(!l||1024&o&&r!==(r=t[10].events+" "+t[10].preview))&&T(e,"class",r)},i(t){l||(nt(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){t&&y(e),ct(n)}}}function Cl(t){let e,n,r=[],l=new Map,o=lt(t[5]);const i=t=>t[26].event;for(let e=0;e<o.length;e+=1){let n=yl(t,o,e),s=i(n);l.set(s,r[e]=_l(s,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,l){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,l);v(t,e,l),n=!0},p(t,n){546&n&&(o=lt(t[5]),tt(),r=it(r,n,i,0,t,o,l,e.parentNode,ot,_l,e,yl),et())},i(t){if(!n){for(let t=0;t<o.length;t+=1)nt(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)rt(r[t]);n=!1},d(t){t&&y(e);for(let e=0;e<r.length;e+=1)r[e].d(t)}}}function _l(t,e){let n,r,l,o=e[28];const i=()=>e[24](r,o),s=()=>e[24](null,o);let a={chunk:e[26],longChunks:e[1]};return r=new vl({props:a}),i(),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){o!==(e=t)[28]&&(s(),o=e[28],i());const l={};32&n&&(l.chunk=e[26]),2&n&&(l.longChunks=e[1]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),s(),ct(r,t)}}}function Dl(t){let e,n,r,o,i,s,a,c,u,d,f,h=t[2][0]&&Mt(t[2][0].date,t[0])&&!t[4],m=!t[4]&&bl(t),p=h&&xl(t),$=!t[4]&&Cl(t);return{c(){e=b("div"),n=b("div"),m&&m.c(),o=x(),p&&p.c(),i=x(),s=b("div"),$&&$.c(),T(n,"class",r=t[10].bgEvents),T(s,"class",a=t[10].events),T(e,"class",c=t[10].day+" "+t[10].weekdays?.[t[0].getUTCDay()]+(t[7]?" "+t[10].today:"")+(t[8]?" "+t[10].highlight:"")+(t[4]?" "+t[10].disabled:"")),T(e,"role","cell")},m(r,a){v(r,e,a),g(e,n),m&&m.m(n,null),g(e,o),p&&p.m(e,null),g(e,i),g(e,s),$&&$.m(s,null),t[25](e),u=!0,d||(f=_(e,"pointerdown",(function(){l(t[4]?void 0:t[11].action?.select)&&(t[4]?void 0:t[11].action?.select).apply(this,arguments)})),d=!0)},p(l,o){let[d]=o;(t=l)[4]?m&&(tt(),rt(m,1,1,(()=>{m=null})),et()):m?(m.p(t,d),16&d&&nt(m,1)):(m=bl(t),m.c(),nt(m,1),m.m(n,null)),(!u||1024&d&&r!==(r=t[10].bgEvents))&&T(n,"class",r),21&d&&(h=t[2][0]&&Mt(t[2][0].date,t[0])&&!t[4]),h?p?(p.p(t,d),21&d&&nt(p,1)):(p=xl(t),p.c(),nt(p,1),p.m(e,i)):p&&(tt(),rt(p,1,1,(()=>{p=null})),et()),t[4]?$&&(tt(),rt($,1,1,(()=>{$=null})),et()):$?($.p(t,d),16&d&&nt($,1)):($=Cl(t),$.c(),nt($,1),$.m(s,null)),(!u||1024&d&&a!==(a=t[10].events))&&T(s,"class",a),(!u||1425&d&&c!==(c=t[10].day+" "+t[10].weekdays?.[t[0].getUTCDay()]+(t[7]?" "+t[10].today:"")+(t[8]?" "+t[10].highlight:"")+(t[4]?" "+t[10].disabled:"")))&&T(e,"class",c)},i(t){u||(nt(m),nt(p),nt($),u=!0)},o(t){rt(m),rt(p),rt($),u=!1},d(n){n&&y(e),m&&m.d(),p&&p.d(),$&&$.d(),t[25](null),d=!1,f()}}}function Tl(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,{date:p}=e,{chunks:$}=e,{bgChunks:g}=e,{longChunks:v}=e,{iChunks:y=[]}=e,{resource:w}=e,{highlightedDates:b,theme:k,validRange:x,_interaction:C,_today:_}=B("state");a(t,b,(t=>n(22,l=t))),a(t,k,(t=>n(10,i=t))),a(t,x,(t=>n(21,r=t))),a(t,C,(t=>n(11,s=t))),a(t,_,(t=>n(23,o=t)));let D=[];return t.$$set=t=>{"date"in t&&n(0,p=t.date),"chunks"in t&&n(17,$=t.chunks),"bgChunks"in t&&n(18,g=t.bgChunks),"longChunks"in t&&n(1,v=t.longChunks),"iChunks"in t&&n(2,y=t.iChunks),"resource"in t&&n(19,w=t.resource)},t.$$.update=()=>{131073&t.$$.dirty&&n(5,u=$.filter((t=>Mt(t.date,p)))),262145&t.$$.dirty&&n(6,d=g.filter((t=>Mt(t.date,p)))),8388609&t.$$.dirty&&n(7,f=Mt(p,o)),4194305&t.$$.dirty&&n(8,h=l.some((t=>Mt(t,p)))),2097153&t.$$.dirty&&n(4,m=Be(p,r)),524313&t.$$.dirty&&c&&te(c,(()=>({allDay:!0,date:p,resource:w,dayEl:c,disabled:m})))},[p,v,y,c,m,u,d,f,h,D,i,s,b,k,x,C,_,$,g,w,function(){m||_e(D,u)},r,l,o,function(t,e){P[t?"unshift":"push"]((()=>{D[e]=t,n(9,D)}))},function(t){P[t?"unshift":"push"]((()=>{c=t,n(3,c)}))}]}let El=class extends dt{constructor(t){super(),ut(this,t,Tl,Dl,o,{date:0,chunks:17,bgChunks:18,longChunks:1,iChunks:2,resource:19,reposition:20})}get reposition(){return this.$$.ctx[20]}};function Sl(t,e,n){const r=t.slice();return r[26]=e[n],r[27]=e,r[28]=n,r}function Ml(t){let e,n,r=t[28];const l=()=>t[23](e,r),o=()=>t[23](null,r);let i={date:t[26],chunks:t[2],bgChunks:t[3],longChunks:t[4],iChunks:t[5],resource:t[1]};return e=new El({props:i}),l(),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){r!==t[28]&&(o(),r=t[28],l());const i={};1&n&&(i.date=t[26]),4&n&&(i.chunks=t[2]),8&n&&(i.bgChunks=t[3]),16&n&&(i.longChunks=t[4]),32&n&&(i.iChunks=t[5]),2&n&&(i.resource=t[1]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){o(),ct(e,t)}}}function Ul(t){let e,n,r,l,o=lt(t[0]),i=[];for(let e=0;e<o.length;e+=1)i[e]=Ml(Sl(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=C()},m(o,s){for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(o,s);v(o,e,s),n=!0,r||(l=_(window,"resize",t[13]),r=!0)},p(t,n){let[r]=n;if(127&r){let n;for(o=lt(t[0]),n=0;n<o.length;n+=1){const l=Sl(t,o,n);i[n]?(i[n].p(l,r),nt(i[n],1)):(i[n]=Ml(l),i[n].c(),nt(i[n],1),i[n].m(e.parentNode,e))}for(tt(),n=o.length;n<i.length;n+=1)s(n);et()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)nt(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);n=!1},d(t){t&&y(e),w(i,t),r=!1,l()}}}function Nl(t,e,n){let r,l,o,i,s,c,{dates:u}=e,{resource:d}=e,{_events:f,_iEvents:h,_queue2:m,hiddenDays:p,resources:$,filterEventsWithResources:g,validRange:v}=B("state");a(t,f,(t=>n(19,o=t))),a(t,h,(t=>n(18,l=t))),a(t,p,(t=>n(17,r=t))),a(t,$,(t=>n(20,i=t))),a(t,g,(t=>n(21,s=t))),a(t,v,(t=>n(22,c=t)));let y,w,b,k,x,C,_=[],D=[],T={};function E(){Jt((()=>_e(D,u)),T,m)}return t.$$set=t=>{"dates"in t&&n(0,u=t.dates),"resource"in t&&n(1,d=t.resource)},t.$$.update=()=>{if(4194305&t.$$.dirty&&(n(14,k=Fe(u[0],c)),n(15,x=_t(kt(Fe(u.at(-1),c))))),3145730&t.$$.dirty&&n(16,C=d??(s?i:void 0)),770060&t.$$.dirty){n(2,y=[]),n(3,w=[]);for(let t of o)if(t.allDay&&De(t,k,x,C)){let e=pe(t,k,x);Ee(t.display)?w.push(e):y.push(e)}xe(w,r),n(4,b=xe(y,r)),E()}442370&t.$$.dirty&&n(5,_=l.map((t=>{let e;return t&&t.allDay&&De(t,k,x,d)?(e=pe(t,k,x),xe([e],r)):e=null,e})))},[u,d,y,w,b,_,D,f,h,p,$,g,v,E,k,x,C,r,l,o,i,s,c,function(t,e){P[t?"unshift":"push"]((()=>{D[e]=t,n(6,D)}))}]}class Ll extends dt{constructor(t){super(),ut(this,t,Nl,Ul,o,{dates:0,resource:1})}}function Rl(t,e,n){const r=t.slice();return r[10]=e[n],r}function zl(t,e,n){const r=t.slice();return r[10]=e[n],r}function Hl(t){let e,n,r,o,i,s,a,c,u;return{c(){e=b("div"),n=b("time"),s=x(),T(n,"datetime",r=St(t[10],10)),T(n,"aria-label",o=t[2].format(t[10])),T(e,"class",a=t[0].day+" "+t[0].weekdays?.[t[10].getUTCDay()]),T(e,"role","columnheader")},m(r,l){v(r,e,l),g(e,n),g(e,s),c||(u=p(i=gt.call(null,n,t[3].format(t[10]))),c=!0)},p(s,c){t=s,2&c&&r!==(r=St(t[10],10))&&T(n,"datetime",r),6&c&&o!==(o=t[2].format(t[10]))&&T(n,"aria-label",o),i&&l(i.update)&&10&c&&i.update.call(null,t[3].format(t[10])),3&c&&a!==(a=t[0].day+" "+t[0].weekdays?.[t[10].getUTCDay()])&&T(e,"class",a)},d(t){t&&y(e),c=!1,u()}}}function Bl(t){let e,n=lt(t[1]),r=[];for(let e=0;e<n.length;e+=1)r[e]=Hl(zl(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);v(t,e,n)},p(t,l){if(15&l){let o;for(n=lt(t[1]),o=0;o<n.length;o+=1){const i=zl(t,n,o);r[o]?r[o].p(i,l):(r[o]=Hl(i),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&y(e),w(r,t)}}}function Fl(t){let e,n,r,l,o,i,s,a,c;return r=new Or({props:{$$slots:{default:[Al]},$$scope:{ctx:t}}}),{c(){e=b("div"),n=b("div"),st(r.$$.fragment),l=x(),o=b("div"),T(o,"class",i=t[0].hiddenScroll),T(n,"class",s=t[0].content),T(e,"class",a=t[0].allDay)},m(t,i){v(t,e,i),g(e,n),at(r,n,null),g(n,l),g(n,o),c=!0},p(t,l){const u={};32770&l&&(u.$$scope={dirty:l,ctx:t}),r.$set(u),(!c||1&l&&i!==(i=t[0].hiddenScroll))&&T(o,"class",i),(!c||1&l&&s!==(s=t[0].content))&&T(n,"class",s),(!c||1&l&&a!==(a=t[0].allDay))&&T(e,"class",a)},i(t){c||(nt(r.$$.fragment,t),c=!0)},o(t){rt(r.$$.fragment,t),c=!1},d(t){t&&y(e),ct(r)}}}function Al(t){let e,n;return e=new Ll({props:{dates:t[1]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.dates=t[1]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Pl(t){let e,n;return e=new pl({props:{date:t[10]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.date=t[10]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Il(t){let e,n,r=lt(t[1]),l=[];for(let e=0;e<r.length;e+=1)l[e]=Pl(Rl(t,r,e));const o=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,r){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);v(t,e,r),n=!0},p(t,n){if(2&n){let i;for(r=lt(t[1]),i=0;i<r.length;i+=1){const o=Rl(t,r,i);l[i]?(l[i].p(o,n),nt(l[i],1)):(l[i]=Pl(o),l[i].c(),nt(l[i],1),l[i].m(e.parentNode,e))}for(tt(),i=r.length;i<l.length;i+=1)o(i);et()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)nt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){t&&y(e),w(l,t)}}}function jl(t){let e,n,r,l,o,i,s,a,c,u;n=new Or({props:{$$slots:{default:[Bl]},$$scope:{ctx:t}}});let d=t[4]&&Fl(t);return c=new Kr({props:{$$slots:{default:[Il]},$$scope:{ctx:t}}}),{c(){e=b("div"),st(n.$$.fragment),r=x(),l=b("div"),s=x(),d&&d.c(),a=x(),st(c.$$.fragment),T(l,"class",o=t[0].hiddenScroll),T(e,"class",i=t[0].header)},m(t,o){v(t,e,o),at(n,e,null),g(e,r),g(e,l),v(t,s,o),d&&d.m(t,o),v(t,a,o),at(c,t,o),u=!0},p(t,r){let[s]=r;const f={};32783&s&&(f.$$scope={dirty:s,ctx:t}),n.$set(f),(!u||1&s&&o!==(o=t[0].hiddenScroll))&&T(l,"class",o),(!u||1&s&&i!==(i=t[0].header))&&T(e,"class",i),t[4]?d?(d.p(t,s),16&s&&nt(d,1)):(d=Fl(t),d.c(),nt(d,1),d.m(a.parentNode,a)):d&&(tt(),rt(d,1,1,(()=>{d=null})),et());const h={};32770&s&&(h.$$scope={dirty:s,ctx:t}),c.$set(h)},i(t){u||(nt(n.$$.fragment,t),nt(d),nt(c.$$.fragment,t),u=!0)},o(t){rt(n.$$.fragment,t),rt(d),rt(c.$$.fragment,t),u=!1},d(t){t&&(y(e),y(s),y(a)),ct(n),d&&d.d(t),ct(c,t)}}}function Wl(t,e,n){let r,l,o,i,s,{_viewDates:c,_intlDayHeader:u,_intlDayHeaderAL:d,allDaySlot:f,theme:h}=B("state");return a(t,c,(t=>n(1,l=t))),a(t,u,(t=>n(3,i=t))),a(t,d,(t=>n(2,o=t))),a(t,f,(t=>n(4,s=t))),a(t,h,(t=>n(0,r=t))),[r,l,o,i,s,c,u,d,f,h]}let Ol=class extends dt{constructor(t){super(),ut(this,t,Wl,jl,o,{})}};var Gl={createOptions(t){t.buttonText.timeGridDay="day",t.buttonText.timeGridWeek="week",t.view="timeGridWeek",t.views.timeGridDay={buttonText:Me,component:Ol,dayHeaderFormat:{weekday:"long"},duration:{days:1},theme:ze("ec-time-grid ec-day-view"),titleFormat:{year:"numeric",month:"long",day:"numeric"}},t.views.timeGridWeek={buttonText:Ue,component:Ol,duration:{weeks:1},theme:ze("ec-time-grid ec-week-view")}},createStores(t){t._slotTimeLimits=function(t){return pt([t.slotMinTime,t.slotMaxTime,t.flexibleSlotTimeLimits,t._viewDates,t._events],(t=>Je(...t)))}(t),t._times=function(t){return pt([t.slotDuration,t.slotLabelInterval,t._slotTimeLimits,t._intlSlotLabel],(t=>Ve(Tt(wt()),...t)))}(t)}};function Yl(e){let n,r,o,i;return{c(){n=b("span"),T(n,"aria-label",e[2])},m(t,l){v(t,n,l),e[9](n),o||(i=p(r=gt.call(null,n,e[1])),o=!0)},p(t,e){let[o]=e;4&o&&T(n,"aria-label",t[2]),r&&l(r.update)&&2&o&&r.update.call(null,t[1])},i:t,o:t,d(t){t&&y(n),e[9](null),o=!1,i()}}}function ql(t,e,n){let r,l,o,{resource:i}=e,{date:s}=e,{resourceLabelContent:c,resourceLabelDidMount:u,_intlDayHeaderAL:d}=B("state");a(t,c,(t=>n(8,o=t))),a(t,u,(t=>n(11,l=t))),a(t,d,(t=>n(10,r=t)));const f=H();let h,m,p;return R((()=>{Gt(l)&&l({resource:i,date:s?Et(s):void 0,el:h})})),z((()=>{s?n(2,p=r.format(s)+", "+h.innerText):(n(2,p=void 0),f("text",h.innerText))})),t.$$set=t=>{"resource"in t&&n(6,i=t.resource),"date"in t&&n(7,s=t.date)},t.$$.update=()=>{448&t.$$.dirty&&n(1,m=o?Gt(o)?o({resource:i,date:s?Et(s):void 0}):o:i.title)},[h,m,p,c,u,d,i,s,o,function(t){P[t?"unshift":"push"]((()=>{h=t,n(0,h)}))}]}let Xl=class extends dt{constructor(t){super(),ut(this,t,ql,Yl,o,{resource:6,date:7})}};function Vl(t,e,n){const r=t.slice();return r[17]=e[n],r}function Jl(t,e,n){const r=t.slice();return r[20]=e[n],r}function Kl(t,e,n){const r=t.slice();return r[26]=e[n],r}function Ql(t,e,n){const r=t.slice();return r[23]=e[n],r}function Zl(t,e,n){const r=t.slice();return r[26]=e[n],r}function to(t,e,n){const r=t.slice();return r[17]=e[n],r[32]=n,r}function eo(t,e,n){const r=t.slice();return r[20]=e[n],r}function no(t){let e,n,r,l;return n=new Xl({props:{resource:t[17]}}),n.$on("text",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t[16](t[32],...n)})),{c(){e=b("div"),st(n.$$.fragment),T(e,"class",r=t[5].day)},m(t,r){v(t,e,r),at(n,e,null),l=!0},p(o,i){t=o;const s={};8&i[0]&&(s.resource=t[17]),n.$set(s),(!l||32&i[0]&&r!==(r=t[5].day))&&T(e,"class",r)},i(t){l||(nt(n.$$.fragment,t),l=!0)},o(t){rt(n.$$.fragment,t),l=!1},d(t){t&&y(e),ct(n)}}}function ro(e){let n,r,o,i,s,a,c,u;return{c(){n=b("div"),r=b("time"),T(r,"datetime",o=St(e[17],10)),T(r,"aria-label",i=e[6].format(e[17])),T(n,"class",a=e[5].day+" "+e[5].weekdays?.[e[17].getUTCDay()])},m(t,l){v(t,n,l),g(n,r),c||(u=p(s=gt.call(null,r,e[7].format(e[17]))),c=!0)},p(t,c){e=t,8&c[0]&&o!==(o=St(e[17],10))&&T(r,"datetime",o),72&c[0]&&i!==(i=e[6].format(e[17]))&&T(r,"aria-label",i),s&&l(s.update)&&136&c[0]&&s.update.call(null,e[7].format(e[17])),40&c[0]&&a!==(a=e[5].day+" "+e[5].weekdays?.[e[17].getUTCDay()])&&T(n,"class",a)},i:t,o:t,d(t){t&&y(n),c=!1,u()}}}function lo(t){let e,n,r,l=lt(t[3][1]),o=[];for(let e=0;e<l.length;e+=1)o[e]=so(eo(t,l,e));const i=t=>rt(o[t],1,1,(()=>{o[t]=null}));return{c(){e=b("div");for(let t=0;t<o.length;t+=1)o[t].c();T(e,"class",n=t[5].days)},m(t,n){v(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);r=!0},p(t,s){if(252&s[0]){let n;for(l=lt(t[3][1]),n=0;n<l.length;n+=1){const r=eo(t,l,n);o[n]?(o[n].p(r,s),nt(o[n],1)):(o[n]=so(r),o[n].c(),nt(o[n],1),o[n].m(e,null))}for(tt(),n=l.length;n<o.length;n+=1)i(n);et()}(!r||32&s[0]&&n!==(n=t[5].days))&&T(e,"class",n)},i(t){if(!r){for(let t=0;t<l.length;t+=1)nt(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)rt(o[t]);r=!1},d(t){t&&y(e),w(o,t)}}}function oo(e){let n,r,o,i,s,a,c,u,d;return{c(){n=b("div"),r=b("time"),a=x(),T(r,"datetime",o=St(e[20],10)),T(r,"aria-label",i=""+(e[4][e[32]]+e[6].format(e[20]))),T(n,"class",c=e[5].day+" "+e[5].weekdays?.[e[20].getUTCDay()]),T(n,"role","columnheader")},m(t,l){v(t,n,l),g(n,r),g(n,a),u||(d=p(s=gt.call(null,r,e[7].format(e[20]))),u=!0)},p(t,a){e=t,8&a[0]&&o!==(o=St(e[20],10))&&T(r,"datetime",o),88&a[0]&&i!==(i=""+(e[4][e[32]]+e[6].format(e[20])))&&T(r,"aria-label",i),s&&l(s.update)&&136&a[0]&&s.update.call(null,e[7].format(e[20])),40&a[0]&&c!==(c=e[5].day+" "+e[5].weekdays?.[e[20].getUTCDay()])&&T(n,"class",c)},i:t,o:t,d(t){t&&y(n),u=!1,d()}}}function io(t){let e,n,r,l,o;return n=new Xl({props:{resource:t[20],date:t[17]}}),{c(){e=b("div"),st(n.$$.fragment),r=x(),T(e,"class",l=t[5].day),T(e,"role","columnheader")},m(t,l){v(t,e,l),at(n,e,null),g(e,r),o=!0},p(t,r){const i={};8&r[0]&&(i.resource=t[20]),8&r[0]&&(i.date=t[17]),n.$set(i),(!o||32&r[0]&&l!==(l=t[5].day))&&T(e,"class",l)},i(t){o||(nt(n.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),o=!1},d(t){t&&y(e),ct(n)}}}function so(t){let e,n,r,l;const o=[io,oo],i=[];function s(t,e){return t[2]?0:1}return e=s(t),n=i[e]=o[e](t),{c(){n.c(),r=C()},m(t,n){i[e].m(t,n),v(t,r,n),l=!0},p(t,l){let a=e;e=s(t),e===a?i[e].p(t,l):(tt(),rt(i[a],1,1,(()=>{i[a]=null})),et(),n=i[e],n?n.p(t,l):(n=i[e]=o[e](t),n.c()),nt(n,1),n.m(r.parentNode,r))},i(t){l||(nt(n),l=!0)},o(t){rt(n),l=!1},d(t){t&&y(r),i[e].d(t)}}}function ao(t){let e,n,r,l,o,i,s;const a=[ro,no],c=[];function u(t,e){return t[2]?0:1}n=u(t),r=c[n]=a[n](t);let d=t[3][1].length>1&&lo(t);return{c(){e=b("div"),r.c(),l=x(),d&&d.c(),o=x(),T(e,"class",i=t[5].resource)},m(t,r){v(t,e,r),c[n].m(e,null),g(e,l),d&&d.m(e,null),g(e,o),s=!0},p(t,f){let h=n;n=u(t),n===h?c[n].p(t,f):(tt(),rt(c[h],1,1,(()=>{c[h]=null})),et(),r=c[n],r?r.p(t,f):(r=c[n]=a[n](t),r.c()),nt(r,1),r.m(e,l)),t[3][1].length>1?d?(d.p(t,f),8&f[0]&&nt(d,1)):(d=lo(t),d.c(),nt(d,1),d.m(e,o)):d&&(tt(),rt(d,1,1,(()=>{d=null})),et()),(!s||32&f[0]&&i!==(i=t[5].resource))&&T(e,"class",i)},i(t){s||(nt(r),nt(d),s=!0)},o(t){rt(r),rt(d),s=!1},d(t){t&&y(e),c[n].d(),d&&d.d()}}}function co(t){let e,n,r=lt(t[3][0]),l=[];for(let e=0;e<r.length;e+=1)l[e]=ao(to(t,r,e));const o=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,r){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);v(t,e,r),n=!0},p(t,n){if(252&n[0]){let i;for(r=lt(t[3][0]),i=0;i<r.length;i+=1){const o=to(t,r,i);l[i]?(l[i].p(o,n),nt(l[i],1)):(l[i]=ao(o),l[i].c(),nt(l[i],1),l[i].m(e.parentNode,e))}for(tt(),i=r.length;i<l.length;i+=1)o(i);et()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)nt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){t&&y(e),w(l,t)}}}function uo(t){let e,n,r,l,o,i,s,a,c;return r=new Or({props:{$$slots:{default:[go]},$$scope:{ctx:t}}}),{c(){e=b("div"),n=b("div"),st(r.$$.fragment),l=x(),o=b("div"),T(o,"class",i=t[5].hiddenScroll),T(n,"class",s=t[5].content),T(e,"class",a=t[5].allDay)},m(t,i){v(t,e,i),g(e,n),at(r,n,null),g(n,l),g(n,o),c=!0},p(t,l){const u={};39&l[0]|16&l[1]&&(u.$$scope={dirty:l,ctx:t}),r.$set(u),(!c||32&l[0]&&i!==(i=t[5].hiddenScroll))&&T(o,"class",i),(!c||32&l[0]&&s!==(s=t[5].content))&&T(n,"class",s),(!c||32&l[0]&&a!==(a=t[5].allDay))&&T(e,"class",a)},i(t){c||(nt(r.$$.fragment,t),c=!0)},o(t){rt(r.$$.fragment,t),c=!1},d(t){t&&y(e),ct(r)}}}function fo(t){let e,n,r=lt(t[1]),l=[];for(let e=0;e<r.length;e+=1)l[e]=mo(Kl(t,r,e));const o=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,r){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);v(t,e,r),n=!0},p(t,n){if(35&n[0]){let i;for(r=lt(t[1]),i=0;i<r.length;i+=1){const o=Kl(t,r,i);l[i]?(l[i].p(o,n),nt(l[i],1)):(l[i]=mo(o),l[i].c(),nt(l[i],1),l[i].m(e.parentNode,e))}for(tt(),i=r.length;i<l.length;i+=1)o(i);et()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)nt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){t&&y(e),w(l,t)}}}function ho(t){let e,n,r=lt(t[0]),l=[];for(let e=0;e<r.length;e+=1)l[e]=$o(Ql(t,r,e));const o=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,r){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);v(t,e,r),n=!0},p(t,n){if(35&n[0]){let i;for(r=lt(t[0]),i=0;i<r.length;i+=1){const o=Ql(t,r,i);l[i]?(l[i].p(o,n),nt(l[i],1)):(l[i]=$o(o),l[i].c(),nt(l[i],1),l[i].m(e.parentNode,e))}for(tt(),i=r.length;i<l.length;i+=1)o(i);et()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)nt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){t&&y(e),w(l,t)}}}function mo(t){let e,n,r,l,o;return n=new Ll({props:{dates:t[0],resource:t[26]}}),{c(){e=b("div"),st(n.$$.fragment),r=x(),T(e,"class",l=t[5].resource)},m(t,l){v(t,e,l),at(n,e,null),g(e,r),o=!0},p(t,r){const i={};1&r[0]&&(i.dates=t[0]),2&r[0]&&(i.resource=t[26]),n.$set(i),(!o||32&r[0]&&l!==(l=t[5].resource))&&T(e,"class",l)},i(t){o||(nt(n.$$.fragment,t),o=!0)},o(t){rt(n.$$.fragment,t),o=!1},d(t){t&&y(e),ct(n)}}}function po(t){let e,n;return e=new Ll({props:{dates:[t[23]],resource:t[26]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};1&n[0]&&(r.dates=[t[23]]),2&n[0]&&(r.resource=t[26]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function $o(t){let e,n,r,l,o=lt(t[1]),i=[];for(let e=0;e<o.length;e+=1)i[e]=po(Zl(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=b("div");for(let t=0;t<i.length;t+=1)i[t].c();n=x(),T(e,"class",r=t[5].resource)},m(t,r){v(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);g(e,n),l=!0},p(t,a){if(3&a[0]){let r;for(o=lt(t[1]),r=0;r<o.length;r+=1){const l=Zl(t,o,r);i[r]?(i[r].p(l,a),nt(i[r],1)):(i[r]=po(l),i[r].c(),nt(i[r],1),i[r].m(e,n))}for(tt(),r=o.length;r<i.length;r+=1)s(r);et()}(!l||32&a[0]&&r!==(r=t[5].resource))&&T(e,"class",r)},i(t){if(!l){for(let t=0;t<o.length;t+=1)nt(i[t]);l=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);l=!1},d(t){t&&y(e),w(i,t)}}}function go(t){let e,n,r,l;const o=[ho,fo],i=[];function s(t,e){return t[2]?0:1}return e=s(t),n=i[e]=o[e](t),{c(){n.c(),r=C()},m(t,n){i[e].m(t,n),v(t,r,n),l=!0},p(t,l){let a=e;e=s(t),e===a?i[e].p(t,l):(tt(),rt(i[a],1,1,(()=>{i[a]=null})),et(),n=i[e],n?n.p(t,l):(n=i[e]=o[e](t),n.c()),nt(n,1),n.m(r.parentNode,r))},i(t){l||(nt(n),l=!0)},o(t){rt(n),l=!1},d(t){t&&y(r),i[e].d(t)}}}function vo(t){let e,n;return e=new pl({props:{date:t[2]?t[17]:t[20],resource:t[2]?t[20]:t[17]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};12&n[0]&&(r.date=t[2]?t[17]:t[20]),12&n[0]&&(r.resource=t[2]?t[20]:t[17]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function yo(t){let e,n,r,l,o=lt(t[3][1]),i=[];for(let e=0;e<o.length;e+=1)i[e]=vo(Jl(t,o,e));const s=t=>rt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=b("div");for(let t=0;t<i.length;t+=1)i[t].c();n=x(),T(e,"class",r=t[5].resource)},m(t,r){v(t,e,r);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(e,null);g(e,n),l=!0},p(t,a){if(12&a[0]){let r;for(o=lt(t[3][1]),r=0;r<o.length;r+=1){const l=Jl(t,o,r);i[r]?(i[r].p(l,a),nt(i[r],1)):(i[r]=vo(l),i[r].c(),nt(i[r],1),i[r].m(e,n))}for(tt(),r=o.length;r<i.length;r+=1)s(r);et()}(!l||32&a[0]&&r!==(r=t[5].resource))&&T(e,"class",r)},i(t){if(!l){for(let t=0;t<o.length;t+=1)nt(i[t]);l=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)rt(i[t]);l=!1},d(t){t&&y(e),w(i,t)}}}function wo(t){let e,n,r=lt(t[3][0]),l=[];for(let e=0;e<r.length;e+=1)l[e]=yo(Vl(t,r,e));const o=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,r){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,r);v(t,e,r),n=!0},p(t,n){if(44&n[0]){let i;for(r=lt(t[3][0]),i=0;i<r.length;i+=1){const o=Vl(t,r,i);l[i]?(l[i].p(o,n),nt(l[i],1)):(l[i]=yo(o),l[i].c(),nt(l[i],1),l[i].m(e.parentNode,e))}for(tt(),i=r.length;i<l.length;i+=1)o(i);et()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)nt(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){t&&y(e),w(l,t)}}}function bo(t){let e,n,r,l,o,i,s,a,c,u;n=new Or({props:{$$slots:{default:[co]},$$scope:{ctx:t}}});let d=t[8]&&uo(t);return c=new Kr({props:{$$slots:{default:[wo]},$$scope:{ctx:t}}}),{c(){e=b("div"),st(n.$$.fragment),r=x(),l=b("div"),s=x(),d&&d.c(),a=x(),st(c.$$.fragment),T(l,"class",o=t[5].hiddenScroll),T(e,"class",i=t[5].header)},m(t,o){v(t,e,o),at(n,e,null),g(e,r),g(e,l),v(t,s,o),d&&d.m(t,o),v(t,a,o),at(c,t,o),u=!0},p(t,r){const s={};252&r[0]|16&r[1]&&(s.$$scope={dirty:r,ctx:t}),n.$set(s),(!u||32&r[0]&&o!==(o=t[5].hiddenScroll))&&T(l,"class",o),(!u||32&r[0]&&i!==(i=t[5].header))&&T(e,"class",i),t[8]?d?(d.p(t,r),256&r[0]&&nt(d,1)):(d=uo(t),d.c(),nt(d,1),d.m(a.parentNode,a)):d&&(tt(),rt(d,1,1,(()=>{d=null})),et());const f={};44&r[0]|16&r[1]&&(f.$$scope={dirty:r,ctx:t}),c.$set(f)},i(t){u||(nt(n.$$.fragment,t),nt(d),nt(c.$$.fragment,t),u=!0)},o(t){rt(n.$$.fragment,t),rt(d),rt(c.$$.fragment,t),u=!1},d(t){t&&(y(e),y(s),y(a)),ct(n),d&&d.d(t),ct(c,t)}}}function ko(t,e,n){let r,l,o,i,s,c,u,d,{datesAboveResources:f,_viewDates:h,_viewResources:m,_intlDayHeader:p,_intlDayHeaderAL:$,allDaySlot:g,theme:v}=B("state");a(t,f,(t=>n(2,o=t))),a(t,h,(t=>n(0,r=t))),a(t,m,(t=>n(1,l=t))),a(t,p,(t=>n(7,c=t))),a(t,$,(t=>n(6,s=t))),a(t,g,(t=>n(8,u=t))),a(t,v,(t=>n(5,i=t)));let y=[];return t.$$.update=()=>{7&t.$$.dirty[0]&&n(3,d=o?[r,l]:[l,r])},[r,l,o,d,y,i,s,c,u,f,h,m,p,$,g,v,(t,e)=>n(4,y[t]=e.detail+", ",y)]}let xo=class extends dt{constructor(t){super(),ut(this,t,ko,bo,o,{},null,[-1,-1])}};var Co={createOptions(t){t.datesAboveResources=!1,t.buttonText.resourceTimeGridDay="resources",t.buttonText.resourceTimeGridWeek="resources",t.view="resourceTimeGridWeek",t.views.resourceTimeGridDay={buttonText:Me,component:xo,duration:{days:1},theme:ze("ec-time-grid ec-resource-day-view")},t.views.resourceTimeGridWeek={buttonText:Ue,component:xo,duration:{weeks:1},theme:ze("ec-time-grid ec-resource-week-view")}},createStores(t){"_times"in t||Gl.createStores(t),"_viewResources"in t||(t._viewResources=Xe(t))}};function _o(e){let n,r,o,i;return{c(){n=b("span")},m(t,l){v(t,n,l),e[7](n),o||(i=p(r=gt.call(null,n,e[1])),o=!0)},p(t,e){let[n]=e;r&&l(r.update)&&2&n&&r.update.call(null,t[1])},i:t,o:t,d(t){t&&y(n),e[7](null),o=!1,i()}}}function Do(t,e,n){let r,l,o,i,{resource:s}=e,{date:c}=e,{resourceLabelContent:u,resourceLabelDidMount:d}=B("state");return a(t,u,(t=>n(6,l=t))),a(t,d,(t=>n(8,r=t))),R((()=>{Gt(r)&&r({resource:s,date:c?Et(c):void 0,el:o})})),t.$$set=t=>{"resource"in t&&n(4,s=t.resource),"date"in t&&n(5,c=t.date)},t.$$.update=()=>{112&t.$$.dirty&&n(1,i=l?Gt(l)?l({resource:s,date:c?Et(c):void 0}):l:s.title)},[o,i,u,d,s,c,l,function(t){P[t?"unshift":"push"]((()=>{o=t,n(0,o)}))}]}class To extends dt{constructor(t){super(),ut(this,t,Do,_o,o,{resource:4,date:5})}}function Eo(t,e,n){const r=t.slice();return r[7]=e[n],r}function So(t){let e,n;return{c(){e=b("span"),T(e,"class",n=t[1].expander)},m(t,n){v(t,e,n)},p(t,r){2&r&&n!==(n=t[1].expander)&&T(e,"class",n)},d(t){t&&y(e)}}}function Mo(t){let e,n,r,l;function o(t,e){return t[0].expanded?No:Uo}let i=o(t),s=i(t);return{c(){e=b("button"),s.c(),T(e,"class",n=t[1].button)},m(n,o){v(n,e,o),s.m(e,null),r||(l=_(e,"click",t[3]),r=!0)},p(t,r){i!==(i=o(t))&&(s.d(1),s=i(t),s&&(s.c(),s.m(e,null))),2&r&&n!==(n=t[1].button)&&T(e,"class",n)},d(t){t&&y(e),s.d(),r=!1,l()}}}function Uo(t){let e;return{c(){e=k("+")},m(t,n){v(t,e,n)},d(t){t&&y(e)}}}function No(t){let e;return{c(){e=k("")},m(t,n){v(t,e,n)},d(t){t&&y(e)}}}function Lo(e){let n,r,l,o=lt(Array(e[0].level)),i=[];for(let t=0;t<o.length;t+=1)i[t]=So(Eo(e,o,t));let s=e[0].children.length&&Mo(e);return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=x(),r=b("span"),s&&s.c(),T(r,"class",l=e[1].expander)},m(t,e){for(let n=0;n<i.length;n+=1)i[n]&&i[n].m(t,e);v(t,n,e),v(t,r,e),s&&s.m(r,null)},p(t,e){let[a]=e;if(3&a){let e;for(o=lt(Array(t[0].level)),e=0;e<o.length;e+=1){const r=Eo(t,o,e);i[e]?i[e].p(r,a):(i[e]=So(r),i[e].c(),i[e].m(n.parentNode,n))}for(;e<i.length;e+=1)i[e].d(1);i.length=o.length}t[0].children.length?s?s.p(t,a):(s=Mo(t),s.c(),s.m(r,null)):s&&(s.d(1),s=null),2&a&&l!==(l=t[1].expander)&&T(r,"class",l)},i:t,o:t,d(t){t&&(y(n),y(r)),w(i,t),s&&s.d()}}}function Ro(t,e,n){let r,{resource:l}=e,{resources:o,theme:i}=B("state");a(t,i,(t=>n(1,r=t)));let s={};function c(t,e){for(let n of t){let t=ee(n);t.hidden=!e,t.expanded&&c(t.children,e)}}return t.$$set=t=>{"resource"in t&&n(4,l=t.resource)},t.$$.update=()=>{16&t.$$.dirty&&n(0,s=ee(l))},[s,r,i,function(){n(0,s.expanded=!s.expanded,s),c(s.children,s.expanded),o.update(Vt)},l]}class zo extends dt{constructor(t){super(),ut(this,t,Ro,Lo,o,{resource:4})}}function Ho(t,e,n){const r=t.slice();return r[14]=e[n],r}function Bo(t){let e,n;return e=new zo({props:{resource:t[14]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.resource=t[14]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Fo(t){let e,n,r,l,o,i,s=t[5]&&Bo(t);return r=new To({props:{resource:t[14]}}),{c(){e=b("div"),s&&s.c(),n=x(),st(r.$$.fragment),l=x(),T(e,"class",o=t[1].resource),S(e,"flex-basis",Wt(t[4].get(t[14])??0,34)+"px"),T(e,"role","rowheader")},m(t,o){v(t,e,o),s&&s.m(e,null),g(e,n),at(r,e,null),g(e,l),i=!0},p(t,l){t[5]?s?(s.p(t,l),32&l&&nt(s,1)):(s=Bo(t),s.c(),nt(s,1),s.m(e,n)):s&&(tt(),rt(s,1,1,(()=>{s=null})),et());const a={};8&l&&(a.resource=t[14]),r.$set(a),(!i||2&l&&o!==(o=t[1].resource))&&T(e,"class",o),(!i||24&l)&&S(e,"flex-basis",Wt(t[4].get(t[14])??0,34)+"px")},i(t){i||(nt(s),nt(r.$$.fragment,t),i=!0)},o(t){rt(s),rt(r.$$.fragment,t),i=!1},d(t){t&&y(e),s&&s.d(),ct(r)}}}function Ao(t){let e,n,r,l,o,i,s,a,c=lt(t[3]),u=[];for(let e=0;e<c.length;e+=1)u[e]=Fo(Ho(t,c,e));const d=t=>rt(u[t],1,1,(()=>{u[t]=null}));return{c(){e=b("div"),n=b("div"),l=x(),o=b("div");for(let t=0;t<u.length;t+=1)u[t].c();T(n,"class",r=t[1].sidebarTitle),S(n,"flex-basis",t[0]+"px"),T(o,"class",i=t[1].content),T(e,"class",s=t[1].sidebar)},m(r,i){v(r,e,i),g(e,n),g(e,l),g(e,o);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(o,null);t[12](o),a=!0},p(t,l){let[f]=l;if((!a||2&f&&r!==(r=t[1].sidebarTitle))&&T(n,"class",r),(!a||1&f)&&S(n,"flex-basis",t[0]+"px"),58&f){let e;for(c=lt(t[3]),e=0;e<c.length;e+=1){const n=Ho(t,c,e);u[e]?(u[e].p(n,f),nt(u[e],1)):(u[e]=Fo(n),u[e].c(),nt(u[e],1),u[e].m(o,null))}for(tt(),e=c.length;e<u.length;e+=1)d(e);et()}(!a||2&f&&i!==(i=t[1].content))&&T(o,"class",i),(!a||2&f&&s!==(s=t[1].sidebar))&&T(e,"class",s)},i(t){if(!a){for(let t=0;t<c.length;t+=1)nt(u[t]);a=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)rt(u[t]);a=!1},d(n){n&&y(e),w(u,n),t[12](null)}}}function Po(t,e,n){let r,l,o,i,s,c,{_viewResources:u,_headerEl:d,_resHs:f,_sidebarEl:h,_nestedResources:m,theme:p}=B("state");a(t,u,(t=>n(3,i=t))),a(t,d,(t=>n(13,r=t))),a(t,f,(t=>n(4,s=t))),a(t,h,(t=>n(2,o=t))),a(t,m,(t=>n(5,c=t))),a(t,p,(t=>n(1,l=t)));let $=0;return z((()=>{n(0,$=r.clientHeight)})),[$,l,o,i,s,c,u,d,f,h,m,p,function(t){P[t?"unshift":"push"]((()=>{o=t,h.set(o)}))}]}class Io extends dt{constructor(t){super(),ut(this,t,Po,Ao,o,{})}}function jo(t,e,n){const r=t.slice();return r[15]=e[n],r}function Wo(t,e,n){const r=t.slice();return r[18]=e[n],r}function Oo(t){let e,n,r,o,i,s,a,c;return{c(){e=b("div"),n=b("time"),T(n,"datetime",r=St(t[15],10)),T(n,"aria-label",o=t[4].format(t[15])),T(e,"class",s=t[0].time),T(e,"role","columnheader")},m(r,l){v(r,e,l),g(e,n),a||(c=p(i=gt.call(null,n,t[5].format(t[15]))),a=!0)},p(a,c){t=a,4&c&&r!==(r=St(t[15],10))&&T(n,"datetime",r),20&c&&o!==(o=t[4].format(t[15]))&&T(n,"aria-label",o),i&&l(i.update)&&36&c&&i.update.call(null,t[5].format(t[15])),1&c&&s!==(s=t[0].time)&&T(e,"class",s)},d(t){t&&y(e),a=!1,c()}}}function Go(t){let e,n,r,o,i,s,a,c,u,d,f,h=lt(t[6][t[15].getTime()]),m=[];for(let e=0;e<h.length;e+=1)m[e]=Yo(Wo(t,h,e));return{c(){e=b("div"),n=b("time"),a=x(),c=b("div");for(let t=0;t<m.length;t+=1)m[t].c();T(n,"datetime",r=St(t[15],10)),T(n,"aria-label",o=t[4].format(t[15])),T(e,"class",s=t[0].dayHead),T(c,"class",u=t[0].times)},m(r,l){v(r,e,l),g(e,n),v(r,a,l),v(r,c,l);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(c,null);d||(f=p(i=gt.call(null,n,t[5].format(t[15]))),d=!0)},p(a,d){if(t=a,4&d&&r!==(r=St(t[15],10))&&T(n,"datetime",r),20&d&&o!==(o=t[4].format(t[15]))&&T(n,"aria-label",o),i&&l(i.update)&&36&d&&i.update.call(null,t[5].format(t[15])),1&d&&s!==(s=t[0].dayHead)&&T(e,"class",s),69&d){let e;for(h=lt(t[6][t[15].getTime()]),e=0;e<h.length;e+=1){const n=Wo(t,h,e);m[e]?m[e].p(n,d):(m[e]=Yo(n),m[e].c(),m[e].m(c,null))}for(;e<m.length;e+=1)m[e].d(1);m.length=h.length}1&d&&u!==(u=t[0].times)&&T(c,"class",u)},d(t){t&&(y(e),y(a),y(c)),w(m,t),d=!1,f()}}}function Yo(t){let e,n,r,o,i,s,a,c;return{c(){e=b("div"),n=b("time"),i=x(),T(n,"datetime",r=t[18][0]),T(e,"class",s=t[0].time),T(e,"role","columnheader")},m(r,l){v(r,e,l),g(e,n),g(e,i),a||(c=p(o=gt.call(null,n,t[18][1])),a=!0)},p(i,a){t=i,68&a&&r!==(r=t[18][0])&&T(n,"datetime",r),o&&l(o.update)&&68&a&&o.update.call(null,t[18][1]),1&a&&s!==(s=t[0].time)&&T(e,"class",s)},d(t){t&&y(e),a=!1,c()}}}function qo(t){let e,n,r,l;function o(t,e){return 8&e&&(n=null),null==n&&(n=!!Rt(t[3])),n?Go:Oo}let i=o(t,-1),s=i(t);return{c(){e=b("div"),s.c(),r=x(),T(e,"class",l=t[0].day+" "+t[0].weekdays?.[t[15].getUTCDay()])},m(t,n){v(t,e,n),s.m(e,null),g(e,r)},p(t,n){i===(i=o(t,n))&&s?s.p(t,n):(s.d(1),s=i(t),s&&(s.c(),s.m(e,r))),5&n&&l!==(l=t[0].day+" "+t[0].weekdays?.[t[15].getUTCDay()])&&T(e,"class",l)},d(t){t&&y(e),s.d()}}}function Xo(e){let n,r,l,o,i,s,a,c=lt(e[2]),u=[];for(let t=0;t<c.length;t+=1)u[t]=qo(jo(e,c,t));return{c(){n=b("div"),r=b("div");for(let t=0;t<u.length;t+=1)u[t].c();o=x(),i=b("div"),T(r,"class",l=e[0].days),T(r,"role","row"),T(i,"class",s=e[0].hiddenScroll),T(n,"class",a=e[0].header)},m(t,l){v(t,n,l),g(n,r);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(r,null);g(n,o),g(n,i),e[14](n)},p(t,e){let[o]=e;if(125&o){let e;for(c=lt(t[2]),e=0;e<c.length;e+=1){const n=jo(t,c,e);u[e]?u[e].p(n,o):(u[e]=qo(n),u[e].c(),u[e].m(r,null))}for(;e<u.length;e+=1)u[e].d(1);u.length=c.length}1&o&&l!==(l=t[0].days)&&T(r,"class",l),1&o&&s!==(s=t[0].hiddenScroll)&&T(i,"class",s),1&o&&a!==(a=t[0].header)&&T(n,"class",a)},i:t,o:t,d(t){t&&y(n),w(u,t),e[14](null)}}}function Vo(t,e,n){let r,l,o,i,s,c,u,{_headerEl:d,_intlDayHeader:f,_intlDayHeaderAL:h,_dayTimes:m,_viewDates:p,slotDuration:$,theme:g}=B("state");return a(t,d,(t=>n(1,l=t))),a(t,f,(t=>n(5,c=t))),a(t,h,(t=>n(4,s=t))),a(t,m,(t=>n(6,u=t))),a(t,p,(t=>n(2,o=t))),a(t,$,(t=>n(3,i=t))),a(t,g,(t=>n(0,r=t))),[r,l,o,i,s,c,u,d,f,h,m,p,$,g,function(t){P[t?"unshift":"push"]((()=>{l=t,d.set(l)}))}]}class Jo extends dt{constructor(t){super(),ut(this,t,Vo,Xo,o,{})}}function Ko(t,e,n,r){let l={},o=[];if(t.length){$e(t);let i,s=Rt(r);for(let r of t){let t;if(s){let o=0;for(let i=0;i<e.length;++i){let a=Qo(n,e[i]),c=xt(kt(e[i]),a.min),u=xt(kt(e[i]),a.max);if(r.date){if(r.end<=c){r.end=t;break}let n=e[i].getTime();if(l[n]?l[n].push(r):l[n]=[r],!(r.end>u)){o+=r.end-c;break}o+=u-c}else if(r.start<u&&r.end>c){if(r.date=e[i],r.start<c&&(r.start=c),r.offset=(r.start-c)/1e3/s,!(r.end>u)){o+=r.end-r.start||1e3*s;break}o+=u-r.start}t=u}r.slots=o/1e3/s}else{let n=0;for(let o=0;o<e.length;++o){let i=e[o],s=_t(kt(i));if(r.date){if(r.end<=i){r.end=t;break}let e=i.getTime();l[e]?l[e].push(r):l[e]=[r],++n}else r.start<s&&(r.date=i,r.start<i&&(r.start=i),++n);t=s}r.days=n}r.date&&(i&&Mt(i.date,r.date)&&(r.prev=i),i=r,o.push(r))}}return[o,l]}function Qo(t,e){return t[e.getTime()]??{min:bt(0),max:bt(0)}}function Zo(t){let e,n,o,i,s,a,c,u,d,f,h,m,$;var w=t[11].resizer;function k(t,e){return{props:{start:!0,event:t[0]}}}w&&(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[32](t[11],["x","start"]))&&t[32](t[11],["x","start"]).apply(this,arguments)})));var C=t[11].resizer;function D(t,e){return{props:{event:t[0]}}}return C&&(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[32](t[11],["x","end"]))&&t[32](t[11],["x","end"]).apply(this,arguments)}))),{c(){e=b("article"),n&&st(n.$$.fragment),o=x(),i=b("div"),c=x(),u&&st(u.$$.fragment),T(i,"class",s=t[3].eventBody),T(e,"class",t[5]),T(e,"style",t[6]),T(e,"role",d=t[8]?"button":void 0),T(e,"tabindex",f=t[8]?0:void 0)},m(r,s){v(r,e,s),n&&at(n,e,null),g(e,o),g(e,i),g(e,c),u&&at(u,e,null),t[51](e),h=!0,m||($=[p(a=gt.call(null,i,t[7])),_(e,"click",(function(){l(t[8])&&t[8].apply(this,arguments)})),_(e,"keydown",(function(){l(t[8]&&$t(t[8]))&&(t[8]&&$t(t[8])).apply(this,arguments)})),_(e,"mouseenter",(function(){l(t[31](t[9],t[1]))&&t[31](t[9],t[1]).apply(this,arguments)})),_(e,"mouseleave",(function(){l(t[31](t[10],t[1]))&&t[31](t[10],t[1]).apply(this,arguments)})),_(e,"pointerdown",(function(){l(!Ee(t[1])&&!Te(t[1])&&t[32](t[11]))&&(!Ee(t[1])&&!Te(t[1])&&t[32](t[11])).apply(this,arguments)}))],m=!0)},p(r,c){if(t=r,2048&c[0]&&w!==(w=t[11].resizer)){if(n){tt();const t=n;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}w?(n=M(w,k(t)),n.$on("pointerdown",(function(){l(t[32](t[11],["x","start"]))&&t[32](t[11],["x","start"]).apply(this,arguments)})),st(n.$$.fragment),nt(n.$$.fragment,1),at(n,e,o)):n=null}else if(w){const e={};1&c[0]&&(e.event=t[0]),n.$set(e)}if((!h||8&c[0]&&s!==(s=t[3].eventBody))&&T(i,"class",s),a&&l(a.update)&&128&c[0]&&a.update.call(null,t[7]),2048&c[0]&&C!==(C=t[11].resizer)){if(u){tt();const t=u;rt(t.$$.fragment,1,0,(()=>{ct(t,1)})),et()}C?(u=M(C,D(t)),u.$on("pointerdown",(function(){l(t[32](t[11],["x","end"]))&&t[32](t[11],["x","end"]).apply(this,arguments)})),st(u.$$.fragment),nt(u.$$.fragment,1),at(u,e,null)):u=null}else if(C){const e={};1&c[0]&&(e.event=t[0]),u.$set(e)}(!h||32&c[0])&&T(e,"class",t[5]),(!h||64&c[0])&&T(e,"style",t[6]),(!h||256&c[0]&&d!==(d=t[8]?"button":void 0))&&T(e,"role",d),(!h||256&c[0]&&f!==(f=t[8]?0:void 0))&&T(e,"tabindex",f)},i(t){h||(n&&nt(n.$$.fragment,t),u&&nt(u.$$.fragment,t),h=!0)},o(t){n&&rt(n.$$.fragment,t),u&&rt(u.$$.fragment,t),h=!1},d(l){l&&y(e),n&&ct(n),u&&ct(u),t[51](null),m=!1,r($)}}}function ti(t){let e,n,r=t[2]>0&&Zo(t);return{c(){r&&r.c(),e=C()},m(t,l){r&&r.m(t,l),v(t,e,l),n=!0},p(t,n){t[2]>0?r?(r.p(t,n),4&n[0]&&nt(r,1)):(r=Zo(t),r.c(),nt(r,1),r.m(e.parentNode,e)):r&&(tt(),rt(r,1,1,(()=>{r=null})),et())},i(t){n||(nt(r),n=!0)},o(t){rt(r),n=!1},d(t){t&&y(e),r&&r.d(t)}}}function ei(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,p,$,g,v,y,w,b,k,x,C,_,D,T,E,S,M,{chunk:U}=e,{dayChunks:N=[]}=e,{longChunks:L={}}=e,{resource:H}=e,{displayEventEnd:F,eventAllUpdated:A,eventBackgroundColor:I,eventTextColor:j,eventColor:W,eventContent:O,eventClick:G,eventDidMount:Y,eventClassNames:q,eventMouseEnter:X,eventMouseLeave:V,resources:J,slotDuration:K,slotWidth:Q,theme:Z,_view:tt,_intlEventTime:et,_interaction:nt,_iClasses:rt,_tasks:lt}=B("state");a(t,F,(t=>n(43,f=t))),a(t,A,(t=>n(54,i=t))),a(t,I,(t=>n(49,v=t))),a(t,j,(t=>n(46,p=t))),a(t,W,(t=>n(48,g=t))),a(t,O,(t=>n(42,d=t))),a(t,G,(t=>n(39,l=t))),a(t,Y,(t=>n(55,s=t))),a(t,q,(t=>n(44,h=t))),a(t,X,(t=>n(9,w=t))),a(t,V,(t=>n(10,b=t))),a(t,J,(t=>n(47,$=t))),a(t,K,(t=>n(53,r=t))),a(t,Q,(t=>n(50,y=t))),a(t,Z,(t=>n(3,u=t))),a(t,tt,(t=>n(40,o=t))),a(t,et,(t=>n(41,c=t))),a(t,nt,(t=>n(11,k=t))),a(t,rt,(t=>n(45,m=t)));let ot=Te(U.event.display)?1:0,it=0;function st(t,e){return!Te(e)&&Gt(t)?e=>t({event:we(C),el:x,jsEvent:e,view:ae(o)}):void 0}return R((()=>{Gt(s)&&s({event:we(C),timeText:S,el:x,view:ae(o)})})),z((()=>{Gt(i)&&!Te(_)&&Qt((()=>i({view:ae(o)})),"eau",lt)})),t.$$set=t=>{"chunk"in t&&n(33,U=t.chunk),"dayChunks"in t&&n(34,N=t.dayChunks),"longChunks"in t&&n(35,L=t.longChunks),"resource"in t&&n(36,H=t.resource)},t.$$.update=()=>{if(4&t.$$.dirty[1]&&n(0,C=U.event),79&t.$$.dirty[0]|1041060&t.$$.dirty[1]){if(n(1,_=C.display),"slots"in U){let t=U.offset*y;n(2,it=U.slots*y),n(6,T=`left:${t}px;width:${it}px;`)}else n(2,it=100*U.days),n(6,T=`width:${it}%;`);let t=C.backgroundColor||je(C,$)||v||g,e=C.textColor||We(C,$)||p,r=ot;if(C._margin){let[t,e]=C._margin;H===e&&(r=t)}n(6,T+=`margin-top:${r}px;`),t&&n(6,T+=`background-color:${t};`),e&&n(6,T+=`color:${e};`),n(6,T+=C.styles.join(";")),n(5,D=[Ee(_)?u.bgEvent:u.event,...m([],C),...ye(h,C,o)].join(" "))}8&t.$$.dirty[0]|7684&t.$$.dirty[1]&&n(7,[S,E]=ge(U,f,d,u,c,o),E),2&t.$$.dirty[0]|256&t.$$.dirty[1]&&n(8,M=!Ee(_)&&st(l,_))},[C,_,it,u,x,D,T,E,M,w,b,k,F,A,I,j,W,O,G,Y,q,X,V,J,K,Q,Z,tt,et,nt,rt,st,function(t,e){return t.action?n=>t.action.drag(C,n,e,void 0,[ot,H],U.zeroDuration):void 0},U,N,L,H,function(){if(!x)return 0;let t=oe(x);return n(38,ot=function(t,e,n,r,l){t.top=0,t.bottom=r;let o=1,i=t.date.getTime();n=n?.[i]??[];let s=[...e,...n];s.sort(((t,e)=>(t.top??0)-(e.top??0)||t.start-e.start||e.event.allDay-t.event.allDay));for(let e of s)if(e!==t&&(l||t.start<e.end&&t.end>e.start)&&t.top<e.bottom&&t.bottom>e.top){let n=e.bottom-t.top+1;o+=n,t.top+=n,t.bottom+=n}return o}(U,N,L,t,!Rt(r))),ot+t},ot,l,o,c,d,f,h,m,p,$,g,v,y,function(t){P[t?"unshift":"push"]((()=>{x=t,n(4,x)}))}]}class ni extends dt{constructor(t){super(),ut(this,t,ei,ti,o,{chunk:33,dayChunks:34,longChunks:35,resource:36,reposition:37},null,[-1,-1])}get reposition(){return this.$$.ctx[37]}}function ri(t,e,n){const r=t.slice();return r[37]=e[n],r[38]=e,r[39]=n,r}function li(t,e,n){const r=t.slice();return r[37]=e[n],r}function oi(t){let e,n,r,l,o,i=[],s=new Map,a=t[3][t[14]]&&t[25](t[3][t[14]]),c=[],u=new Map,d=t[3][0]&&t[25](t[3][0]),f=lt(t[8]);const h=t=>t[37].event;for(let e=0;e<f.length;e+=1){let n=li(t,f,e),r=h(n);s.set(r,i[e]=ii(r,n))}let m=a&&si(t),p=lt(t[7]);const $=t=>t[37].event;for(let e=0;e<p.length;e+=1){let n=ri(t,p,e),r=$(n);u.set(r,c[e]=ai(r,n))}let g=d&&ci(t);return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=x(),m&&m.c(),n=x();for(let t=0;t<c.length;t+=1)c[t].c();r=x(),g&&g.c(),l=C()},m(t,s){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,s);v(t,e,s),m&&m.m(t,s),v(t,n,s);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(t,s);v(t,r,s),g&&g.m(t,s),v(t,l,s),o=!0},p(t,o){256&o[0]&&(f=lt(t[8]),tt(),i=it(i,o,h,0,t,f,s,e.parentNode,ot,ii,e,li),et()),16392&o[0]&&(a=t[3][t[14]]&&t[25](t[3][t[14]])),a?m?(m.p(t,o),16392&o[0]&&nt(m,1)):(m=si(t),m.c(),nt(m,1),m.m(n.parentNode,n)):m&&(tt(),rt(m,1,1,(()=>{m=null})),et()),4230&o[0]&&(p=lt(t[7]),tt(),c=it(c,o,$,0,t,p,u,r.parentNode,ot,ai,r,ri),et()),8&o[0]&&(d=t[3][0]&&t[25](t[3][0])),d?g?(g.p(t,o),8&o[0]&&nt(g,1)):(g=ci(t),g.c(),nt(g,1),g.m(l.parentNode,l)):g&&(tt(),rt(g,1,1,(()=>{g=null})),et())},i(t){if(!o){for(let t=0;t<f.length;t+=1)nt(i[t]);nt(m);for(let t=0;t<p.length;t+=1)nt(c[t]);nt(g),o=!0}},o(t){for(let t=0;t<i.length;t+=1)rt(i[t]);rt(m);for(let t=0;t<c.length;t+=1)rt(c[t]);rt(g),o=!1},d(t){t&&(y(e),y(n),y(r),y(l));for(let e=0;e<i.length;e+=1)i[e].d(t);m&&m.d(t);for(let e=0;e<c.length;e+=1)c[e].d(t);g&&g.d(t)}}}function ii(t,e){let n,r,l;return r=new ni({props:{chunk:e[37]}}),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){e=t;const l={};256&n[0]&&(l.chunk=e[37]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),ct(r,t)}}}function si(t){let e,n;return e=new ni({props:{chunk:t[3][t[14]]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};16392&n[0]&&(r.chunk=t[3][t[14]]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function ai(t,e){let n,r,l,o=e[39];const i=()=>e[33](r,o),s=()=>e[33](null,o);let a={chunk:e[37],dayChunks:e[7],longChunks:e[2],resource:e[1]};return r=new ni({props:a}),i(),{key:t,first:null,c(){n=C(),st(r.$$.fragment),this.first=n},m(t,e){v(t,n,e),at(r,t,e),l=!0},p(t,n){o!==(e=t)[39]&&(s(),o=e[39],i());const l={};128&n[0]&&(l.chunk=e[37]),128&n[0]&&(l.dayChunks=e[7]),4&n[0]&&(l.longChunks=e[2]),2&n[0]&&(l.resource=e[1]),r.$set(l)},i(t){l||(nt(r.$$.fragment,t),l=!0)},o(t){rt(r.$$.fragment,t),l=!1},d(t){t&&y(n),s(),ct(r,t)}}}function ci(t){let e,n;return e=new ni({props:{chunk:t[3][0],resource:t[1]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};8&n[0]&&(r.chunk=t[3][0]),2&n[0]&&(r.resource=t[1]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function ui(t){let e,n,r,o,i,s,a,c=!t[11]&&oi(t);return{c(){e=b("div"),n=b("div"),c&&c.c(),T(n,"class",r=t[15].events),T(e,"class",o=t[15].day+" "+t[15].weekdays?.[t[0].getUTCDay()]+(t[9]?" "+t[15].today:"")+(t[10]?" "+t[15].highlight:"")+(t[11]?" "+t[15].disabled:"")),S(e,"flex-grow",t[5]?null:It((Rt(t[13].max)-Rt(t[13].min))/Rt(t[6]))),T(e,"role","cell")},m(r,o){v(r,e,o),g(e,n),c&&c.m(n,null),t[34](e),i=!0,s||(a=_(e,"pointerdown",(function(){l(t[16].action?.select)&&t[16].action?.select.apply(this,arguments)})),s=!0)},p(l,s){(t=l)[11]?c&&(tt(),rt(c,1,1,(()=>{c=null})),et()):c?(c.p(t,s),2048&s[0]&&nt(c,1)):(c=oi(t),c.c(),nt(c,1),c.m(n,null)),(!i||32768&s[0]&&r!==(r=t[15].events))&&T(n,"class",r),(!i||36353&s[0]&&o!==(o=t[15].day+" "+t[15].weekdays?.[t[0].getUTCDay()]+(t[9]?" "+t[15].today:"")+(t[10]?" "+t[15].highlight:"")+(t[11]?" "+t[15].disabled:"")))&&T(e,"class",o),(!i||8288&s[0])&&S(e,"flex-grow",t[5]?null:It((Rt(t[13].max)-Rt(t[13].min))/Rt(t[6])))},i(t){i||(nt(c),i=!0)},o(t){rt(c),i=!1},d(n){n&&y(e),c&&c.d(),t[34](null),s=!1,a()}}}function di(t,e,n){let r,l,o,i,s,c,u,d,f,h,m,p,$,g,{date:v}=e,{resource:y}=e,{chunks:w}=e,{bgChunks:b}=e,{longChunks:k}=e,{iChunks:x=[]}=e,{highlightedDates:C,slotDuration:_,slotWidth:D,theme:T,validRange:E,_interaction:S,_today:M,_dayTimeLimits:U}=B("state");a(t,C,(t=>n(31,s=t))),a(t,_,(t=>n(6,l=t))),a(t,D,(t=>n(35,r=t))),a(t,T,(t=>n(15,u=t))),a(t,E,(t=>n(30,i=t))),a(t,S,(t=>n(16,d=t))),a(t,M,(t=>n(32,c=t))),a(t,U,(t=>n(29,o=t)));let N,L,R=[],z=1;function H(t){return Mt(t.date,v)}function F(t,e){return t-=re(f).left,{allDay:L,date:L?kt(v):xt(xt(kt(v),N.min),l,Pt(t/r)),resource:y,dayEl:f,disabled:g}}return t.$$set=t=>{"date"in t&&n(0,v=t.date),"resource"in t&&n(1,y=t.resource),"chunks"in t&&n(26,w=t.chunks),"bgChunks"in t&&n(27,b=t.bgChunks),"longChunks"in t&&n(2,k=t.longChunks),"iChunks"in t&&n(3,x=t.iChunks)},t.$$.update=()=>{1&t.$$.dirty[0]|2&t.$$.dirty[1]&&n(9,p=Mt(v,c)),1&t.$$.dirty[0]|1&t.$$.dirty[1]&&n(10,$=s.some((t=>Mt(t,v)))),1073741825&t.$$.dirty[0]&&n(11,g=Be(v,i)),536870913&t.$$.dirty[0]&&n(13,N=Qo(o,v)),96&t.$$.dirty[0]&&(n(5,L=!Rt(l)),n(14,z=L?2:1)),67108864&t.$$.dirty[0]&&n(7,h=w.filter(H)),134217760&t.$$.dirty[0]&&n(8,m=b.filter((t=>(!L||t.event.allDay)&&H(t)))),16&t.$$.dirty[0]&&f&&te(f,F)},[v,y,k,x,f,L,l,h,m,p,$,g,R,N,z,u,d,C,_,D,T,E,S,M,U,H,w,b,function(){return Wt(..._e(R,h))},o,i,s,c,function(t,e){P[t?"unshift":"push"]((()=>{R[e]=t,n(12,R)}))},function(t){P[t?"unshift":"push"]((()=>{f=t,n(4,f)}))}]}class fi extends dt{constructor(t){super(),ut(this,t,di,ui,o,{date:0,resource:1,chunks:26,bgChunks:27,longChunks:2,iChunks:3,reposition:28},null,[-1,-1])}get reposition(){return this.$$.ctx[28]}}function hi(t,e,n){const r=t.slice();return r[29]=e[n],r[30]=e,r[31]=n,r}function mi(t){let e,n,r=t[31];const l=()=>t[25](e,r),o=()=>t[25](null,r);let i={date:t[29],resource:t[0],chunks:t[1],bgChunks:t[2],longChunks:t[4],iChunks:t[5]};return e=new fi({props:i}),l(),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){r!==t[31]&&(o(),r=t[31],l());const i={};8&n[0]&&(i.date=t[29]),1&n[0]&&(i.resource=t[0]),2&n[0]&&(i.chunks=t[1]),4&n[0]&&(i.bgChunks=t[2]),16&n[0]&&(i.longChunks=t[4]),32&n[0]&&(i.iChunks=t[5]),e.$set(i)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){o(),ct(e,t)}}}function pi(t){let e,n,r,l,o,i=lt(t[3]),s=[];for(let e=0;e<i.length;e+=1)s[e]=mi(hi(t,i,e));const a=t=>rt(s[t],1,1,(()=>{s[t]=null}));return{c(){e=b("div");for(let t=0;t<s.length;t+=1)s[t].c();T(e,"class",n=t[8].days),S(e,"flex-basis",Wt(t[7],34)+"px"),T(e,"role","row")},m(n,i){v(n,e,i);for(let t=0;t<s.length;t+=1)s[t]&&s[t].m(e,null);r=!0,l||(o=_(window,"resize",t[17]),l=!0)},p(t,l){if(127&l[0]){let n;for(i=lt(t[3]),n=0;n<i.length;n+=1){const r=hi(t,i,n);s[n]?(s[n].p(r,l),nt(s[n],1)):(s[n]=mi(r),s[n].c(),nt(s[n],1),s[n].m(e,null))}for(tt(),n=i.length;n<s.length;n+=1)a(n);et()}(!r||256&l[0]&&n!==(n=t[8].days))&&T(e,"class",n),(!r||128&l[0])&&S(e,"flex-basis",Wt(t[7],34)+"px")},i(t){if(!r){for(let t=0;t<i.length;t+=1)nt(s[t]);r=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)rt(s[t]);r=!1},d(t){t&&y(e),w(s,t),l=!1,o()}}}function $i(t,e,n){let r,l,o,i,s,c,u,d,{resource:f}=e,{_viewDates:h,_events:m,_iEvents:p,_queue2:$,_resHs:g,_dayTimeLimits:v,slotDuration:y,theme:w,validRange:b}=B("state");a(t,h,(t=>n(3,o=t))),a(t,m,(t=>n(23,s=t))),a(t,p,(t=>n(22,i=t))),a(t,g,(t=>n(26,c=t))),a(t,v,(t=>n(21,l=t))),a(t,y,(t=>n(20,r=t))),a(t,w,(t=>n(8,d=t))),a(t,b,(t=>n(24,u=t)));let k,x,C,_,D,T=[],E=[],S=0,M={};function U(){Jt((()=>{n(7,S=It(Wt(..._e(E,o)))+10),c.set(f,S),g.set(c)}),M,$)}return t.$$set=t=>{"resource"in t&&n(0,f=t.resource)},t.$$.update=()=>{if(19660808&t.$$.dirty[0]){n(18,_=kt(Fe(o[0],u))),n(19,D=kt(Fe(o.at(-1),u)));let t=Qo(l,_);xt(_,t.min),t=Qo(l,D),t.max.seconds>yt?xt(D,t.max):_t(D)}if(12320783&t.$$.dirty[0]){n(1,k=[]),n(2,x=[]);for(let t of s)if(De(t,_,D,f)){let e=pe(t,_,D);Ee(t.display)?x.push(e):k.push(e)}n(2,[x]=Ko(x,o,l,r),x),n(1,[k,C]=Ko(k,o,l,r),k,(n(4,C),n(23,s),n(18,_),n(19,D),n(0,f),n(2,x),n(1,k),n(3,o),n(21,l),n(20,r),n(24,u))),U()}8126473&t.$$.dirty[0]&&n(5,T=i.map((t=>{let e;return t&&De(t,_,D,f)?(e=pe(t,_,D),[[e]]=Ko([e],o,l,r)):e=null,e})))},[f,k,x,o,C,T,E,S,d,h,m,p,g,v,y,w,b,U,_,D,r,l,i,s,u,function(t,e){P[t?"unshift":"push"]((()=>{E[e]=t,n(6,E)}))}]}class gi extends dt{constructor(t){super(),ut(this,t,$i,pi,o,{resource:0},null,[-1,-1])}}function vi(t,e,n){const r=t.slice();return r[26]=e[n],r}function yi(t,e,n){const r=t.slice();return r[29]=e[n],r}function wi(t,e,n){const r=t.slice();return r[32]=e[n],r}function bi(t){let e,n;return{c(){e=b("div"),T(e,"class",n=t[2].line)},m(t,n){v(t,e,n)},p(t,r){4&r[0]&&n!==(n=t[2].line)&&T(e,"class",n)},d(t){t&&y(e)}}}function ki(t){let e,n=lt(t[3][t[29].getTime()]),r=[];for(let e=0;e<n.length;e+=1)r[e]=bi(wi(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=C()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);v(t,e,n)},p(t,l){if(14&l[0]){let o;for(n=lt(t[3][t[29].getTime()]),o=0;o<n.length;o+=1){const i=wi(t,n,o);r[o]?r[o].p(i,l):(r[o]=bi(i),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){t&&y(e),w(r,t)}}}function xi(t){let e,n;return e=new gi({props:{resource:t[26]}}),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){const r={};16&n[0]&&(r.resource=t[26]),e.$set(r)},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ct(e,t)}}}function Ci(t){let e,n,r,l,o,i,s,a,c,u,d=lt(t[1]),f=[];for(let e=0;e<d.length;e+=1)f[e]=ki(yi(t,d,e));let h=lt(t[4]),m=[];for(let e=0;e<h.length;e+=1)m[e]=xi(vi(t,h,e));const p=t=>rt(m[t],1,1,(()=>{m[t]=null}));return{c(){e=b("div"),n=b("div"),r=b("div");for(let t=0;t<f.length;t+=1)f[t].c();o=x();for(let t=0;t<m.length;t+=1)m[t].c();T(r,"class",l=t[2].lines),T(n,"class",i=t[2].content),T(e,"class",s=t[2].body)},m(l,i){v(l,e,i),g(e,n),g(n,r);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(r,null);g(n,o);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(n,null);t[18](e),a=!0,c||(u=_(e,"scroll",t[16]),c=!0)},p(t,o){if(14&o[0]){let e;for(d=lt(t[1]),e=0;e<d.length;e+=1){const n=yi(t,d,e);f[e]?f[e].p(n,o):(f[e]=ki(n),f[e].c(),f[e].m(r,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=d.length}if((!a||4&o[0]&&l!==(l=t[2].lines))&&T(r,"class",l),16&o[0]){let e;for(h=lt(t[4]),e=0;e<h.length;e+=1){const r=vi(t,h,e);m[e]?(m[e].p(r,o),nt(m[e],1)):(m[e]=xi(r),m[e].c(),nt(m[e],1),m[e].m(n,null))}for(tt(),e=h.length;e<m.length;e+=1)p(e);et()}(!a||4&o[0]&&i!==(i=t[2].content))&&T(n,"class",i),(!a||4&o[0]&&s!==(s=t[2].body))&&T(e,"class",s)},i(t){if(!a){for(let t=0;t<h.length;t+=1)nt(m[t]);a=!0}},o(t){m=m.filter(Boolean);for(let t=0;t<m.length;t+=1)rt(m[t]);a=!1},d(n){n&&y(e),w(f,n),w(m,n),t[18](null),c=!1,u()}}}function _i(t,e,n){let r,l,o,i,s,c,u,d,f,h,p,$,{_bodyEl:g,_headerEl:v,_sidebarEl:y,_dayTimes:w,_dayTimeLimits:b,_viewResources:k,_viewDates:x,scrollTime:C,slotDuration:_,slotWidth:D,theme:T}=B("state");return a(t,g,(t=>n(22,c=t))),a(t,v,(t=>n(24,d=t))),a(t,y,(t=>n(23,u=t))),a(t,w,(t=>n(3,h=t))),a(t,b,(t=>n(21,s=t))),a(t,k,(t=>n(4,p=t))),a(t,x,(t=>n(1,i=t))),a(t,C,(t=>n(17,o=t))),a(t,_,(t=>n(20,l=t))),a(t,D,(t=>n(19,r=t))),a(t,T,(t=>n(2,f=t))),t.$$.update=()=>{1&t.$$.dirty[0]&&m(g,c=$,c),131075&t.$$.dirty[0]&&$&&function(){let t=Qo(s,i[0]);n(0,$.scrollLeft=(Rt(o)-Rt(t.min))/Rt(l)*r,$)}()},[$,i,f,h,p,g,v,y,w,b,k,x,C,_,D,T,function(){m(v,d.scrollLeft=c.scrollLeft,d),m(y,u.scrollTop=c.scrollTop,u)},o,function(t){P[t?"unshift":"push"]((()=>{$=t,n(0,$)}))}]}class Di extends dt{constructor(t){super(),ut(this,t,_i,Ci,o,{},null,[-1,-1])}}function Ti(t){let e,n,r,l,o,i,s,a,c,u;return n=new Io({}),o=new Jo({}),s=new Di({}),{c(){e=b("div"),st(n.$$.fragment),r=x(),l=b("div"),st(o.$$.fragment),i=x(),st(s.$$.fragment),T(l,"class",a=t[0].main),T(e,"class",c=t[0].container)},m(t,a){v(t,e,a),at(n,e,null),g(e,r),g(e,l),at(o,l,null),g(l,i),at(s,l,null),u=!0},p(t,n){let[r]=n;(!u||1&r&&a!==(a=t[0].main))&&T(l,"class",a),(!u||1&r&&c!==(c=t[0].container))&&T(e,"class",c)},i(t){u||(nt(n.$$.fragment,t),nt(o.$$.fragment,t),nt(s.$$.fragment,t),u=!0)},o(t){rt(n.$$.fragment,t),rt(o.$$.fragment,t),rt(s.$$.fragment,t),u=!1},d(t){t&&y(e),ct(n),ct(o),ct(s)}}}function Ei(t,e,n){let r,{theme:l}=B("state");return a(t,l,(t=>n(0,r=t))),[r,l]}class Si extends dt{constructor(t){super(),ut(this,t,Ei,Ti,o,{})}}var Mi={createOptions(t){t.buttonText.resourceTimelineDay="timeline",t.buttonText.resourceTimelineWeek="timeline",t.buttonText.resourceTimelineMonth="timeline",t.theme.expander="ec-expander",t.theme.main="ec-main",t.theme.times="ec-times",t.theme.container="ec-container",t.view="resourceTimelineWeek",t.views.resourceTimelineDay={buttonText:Me,component:Si,displayEventEnd:!1,dayHeaderFormat:{weekday:"long"},duration:{days:1},slotDuration:"01:00",theme:ze("ec-timeline ec-resource-day-view"),titleFormat:{year:"numeric",month:"long",day:"numeric"}},t.views.resourceTimelineWeek={buttonText:Ue,component:Si,displayEventEnd:!1,duration:{weeks:1},slotDuration:"01:00",theme:ze("ec-timeline ec-resource-week-view")},t.views.resourceTimelineMonth={buttonText:Ne,component:Si,displayEventEnd:!1,dayHeaderFormat:{weekday:"short",day:"numeric"},duration:{months:1},slotDuration:{days:1},theme:ze("ec-timeline ec-resource-month-view"),titleFormat:{year:"numeric",month:"long"}}},createStores(t){"_viewResources"in t||(t._viewResources=Xe(t)),t._headerEl=mt(void 0),t._dayTimeLimits=function(t){return pt([t.slotMinTime,t.slotMaxTime,t.flexibleSlotTimeLimits,t._viewDates,t._events],(t=>{let[e,n,r,l,o]=t,i={};for(let t of l)i[t.getTime()]=Je(e,n,r,[t],o);return i}))}(t),t._dayTimes=function(t){return pt([t._viewDates,t.slotDuration,t.slotLabelInterval,t._dayTimeLimits,t._intlSlotLabel],(t=>{let[e,n,r,l,o]=t,i={};for(let t of e){let e=t.getTime();i[e]=e in l?Ve(t,n,r,l[e],o):[]}return i}))}(t),t._nestedResources=function(t){return pt(t.resources,(t=>t.some((t=>ee(t).children.length))))}(t),t._resHs=mt(new Map),t._sidebarEl=mt(void 0)}};let Ui=!1;function Ni(t,e,n){return Wt(e,jt(n,t))}const{window:Li}=$;function Ri(e){let n,o;return{c:t,m(t,r){n||(o=[_(Li,"pointermove",e[37]),_(Li,"pointerup",e[38]),_(Li,"pointercancel",e[38]),_(Li,"scroll",e[0]),_(Li,"selectstart",Bi(e[39])),_(Li,"contextmenu",(function(){l(Bi(e[47]))&&Bi(e[47]).apply(this,arguments)})),_(Li,"touchstart",e[40]),_(Li,"touchmove",e[46],{passive:!1})],n=!0)},p(t,n){e=t},i:t,o:t,d(t){n=!1,r(o)}}}function zi(t,e){return t.start=e.start,t.end=e.end,t.resourceIds=e.resourceIds,t}function Hi(t){return t.isPrimary&&("mouse"!==t.pointerType||1&t.buttons)}function Bi(t){return e=>{t()&&e.preventDefault()}}function Fi(t,e,n){let r,l,o,i,s,c,u,d,f,h,p,$,g,v,y,w,b,k,x,C,_,D,T,E,S,M,U,N,L,R,z,H,A,P,I,j,W,O,G,Y,q,X,V,J,K,Q,Z,tt,et,nt,rt,lt,ot,it,st,at,ct,ut,dt,ft,ht,mt,{_iEvents:pt,_iClass:$t,_events:gt,_view:vt,_dayGrid:yt,_draggable:wt,_bodyEl:Tt,datesAboveResources:Mt,dateClick:Ut,dragConstraint:Nt,dragScroll:Rt,eventDragMinDistance:zt,eventDragStart:Ht,eventDragStop:Bt,eventDrop:At,eventLongPressDelay:Pt,eventResizeStart:It,eventResizeStop:Ot,eventResize:Yt,longPressDelay:Xt,resizeConstraint:Vt,selectable:Jt,select:Kt,selectBackgroundColor:Qt,selectConstraint:Zt,selectLongPressDelay:te,selectMinDistance:ne,slotDuration:oe,slotHeight:de,slotWidth:fe,unselect:he,unselectAuto:me,unselectCancel:pe,validRange:$e,view:ge}=B("state");function ve(t){window.getSelection().removeAllRanges(),J=Q=t.clientX,K=Z=t.clientY;let e=ie(Q,Z);({allDay:ot,date:Y,resource:X}=ee(e)(Q,Z)),ue(u)?tt=nt=H:(tt=le(e,X?4:3),nt=le(e,X&&(1===j||z)?2:1)),xe(),"mouse"!==t.pointerType&&n(1,dt=setTimeout((()=>{j&&(W=!0,ye(t))}),(Me()?R:L)??N))}function ye(t){if(W||t&&"mouse"===t.pointerType&&Math.sqrt(Math.pow(Q-J,2)+Math.pow(Z-K,2))>=(Me()?U:M)){W=!0,Ne(t),m($t,f=it,f),i[0]||(Me()?m(pt,i[0]={id:"{select}",allDay:O.allDay,start:O.start,title:"",display:"preview",extendedProps:{},backgroundColor:s,resourceIds:O.resourceIds,classNames:[],styles:[]},i):function(t,e){Gt(e)&&e({event:we(O),jsEvent:t,view:ae(r)});G=O.display,O.display="preview",m(pt,i[0]=be(O),i),void 0!==ht&&m(pt,i[0]._margin=ht,i);mt&&xt(i[0].end,mt);O.display="ghost",gt.set(o)}(t,Ee()?S:E));let e=ke(ie(Ni(Q,ft[0],ft[1]),Ni(Z,ft[2],ft[3])));if(e){let n;if(({allDay:n,date:q,resource:V}=e),n===ot){let e=zi({},i[0]),n=T;lt=bt((q-Y)/1e3),Se()?(e.start=xt(kt(O.start),lt),e.start>st&&(e.start=st,lt=bt((st-O.start)/1e3))):(e.end=xt(kt(O.end),lt),mt&&xt(e.end,mt),Ee()?e.end<st&&(e.end=st,lt=bt((st-O.end)/1e3)):Me()?(e.end<O.end?(e.start=Ct(e.end,at),e.end=O.end):e.start=O.start,n=D):(e.start=xt(kt(O.start),lt),X&&(e.resourceIds=O.resourceIds.filter((t=>t!==X.id)),e.resourceIds.push(V.id)),n=_));do{if(void 0!==n){if(e=zi(be(O),e),!1===n(Me()?De(e,t):Te(e,O,t))){m(pt,i[0]=zi(i[0],O),i);break}}m(pt,i[0]=zi(i[0],e),i)}while(0)}}}if(C){let t=2*x,n=k;e=()=>{tt&&(Z<t&&window.scrollBy(0,Wt(-10,(Z-t)/3)),Z<et.top+t&&(tt.scrollTop+=Wt(-10,(Z-et.top-t)/3)),Z>window.innerHeight-t&&window.scrollBy(0,jt(10,(Z-window.innerHeight+t)/3)),Z>et.bottom-t&&(tt.scrollTop+=jt(10,(Z-et.bottom+t)/3)),ue(u)&&(Q<et.left+n&&(tt.scrollLeft+=Wt(-10,(Q-et.left-n)/3)),Q>et.right-n&&(tt.scrollLeft+=jt(10,(Q-et.right+n)/3))))},Ui||(Ui=!0,window.requestAnimationFrame((()=>{e(),Ui=!1})))}var e}function ke(t){if(t){let e=ee(t)(Q,Z);if(!e.disabled)return e;if(!d.end||e.date<d.end)return ke(t.nextElementSibling);if(!d.start||e.date>d.start)return ke(t.previousElementSibling)}return null}function xe(){et=re(tt),rt=re(nt),ft=[Wt(0,rt.left+(ue(u)?1:c?0:8)),jt(document.documentElement.clientWidth,rt.left+nt.clientWidth)-2,Wt(0,et.top),jt(document.documentElement.clientHeight,et.top+tt.clientHeight)-2]}function Ce(){m(pt,i[0]=null,i)}function _e(t,e){zi(t,e),gt.set(o)}function De(t,e){let{start:n,end:l}=we(t);return{start:n,end:l,startStr:St(t.start),endStr:St(t.end),allDay:ot,view:ae(r),resource:X,jsEvent:e}}function Te(t,e,n){let l;return l=Ee()?Se()?{startDelta:lt,endDelta:bt(0)}:{startDelta:bt(0),endDelta:lt}:{delta:lt,oldResource:X!==V?X:void 0,newResource:X!==V?V:void 0},Ft(l,{event:we(t),oldEvent:we(e),view:ae(r),jsEvent:n}),l}function Ee(){return 2===j||Se()}function Se(){return 3===j}function Me(){return 4===j}function Ue(){return j&&j<5}function Ne(t){ct&&(ct=!1,Ce(),Gt(l)&&l({jsEvent:t,view:ae(r)}))}a(t,pt,(t=>n(77,i=t))),a(t,$t,(t=>n(82,f=t))),a(t,gt,(t=>n(76,o=t))),a(t,vt,(t=>n(74,r=t))),a(t,yt,(t=>n(79,c=t))),a(t,wt,(t=>n(108,I=t))),a(t,Tt,(t=>n(105,H=t))),a(t,Mt,(t=>n(104,z=t))),a(t,Ut,(t=>n(83,h=t))),a(t,Nt,(t=>n(94,_=t))),a(t,Rt,(t=>n(93,C=t))),a(t,zt,(t=>n(99,M=t))),a(t,Ht,(t=>n(97,E=t))),a(t,Bt,(t=>n(86,g=t))),a(t,At,(t=>n(84,p=t))),a(t,Pt,(t=>n(102,L=t))),a(t,It,(t=>n(98,S=t))),a(t,Ot,(t=>n(87,v=t))),a(t,Yt,(t=>n(85,$=t))),a(t,Xt,(t=>n(101,N=t))),a(t,Vt,(t=>n(96,T=t))),a(t,Jt,(t=>n(107,P=t))),a(t,Kt,(t=>n(88,y=t))),a(t,Qt,(t=>n(78,s=t))),a(t,Zt,(t=>n(95,D=t))),a(t,te,(t=>n(103,R=t))),a(t,ne,(t=>n(100,U=t))),a(t,oe,(t=>n(106,A=t))),a(t,de,(t=>n(92,x=t))),a(t,fe,(t=>n(91,k=t))),a(t,he,(t=>n(75,l=t))),a(t,me,(t=>n(90,b=t))),a(t,pe,(t=>n(89,w=t))),a(t,$e,(t=>n(81,d=t))),a(t,ge,(t=>n(80,u=t))),vt.subscribe(Ne);return[function(){Ue()&&(xe(),ye())},dt,pt,$t,gt,vt,yt,wt,Tt,Mt,Ut,Nt,Rt,zt,Ht,Bt,At,Pt,It,Ot,Yt,Xt,Vt,Jt,Kt,Qt,Zt,te,ne,oe,de,fe,he,me,pe,$e,ge,function(t){Ue()&&t.isPrimary&&(Q=t.clientX,Z=t.clientY,ye(t))},function(t){if(!ct||!b||w&&t.target.closest(w)||Ne(t),j&&t.isPrimary){if(W)if(Me()){if(ct=!0,Gt(y)){let e=De(i[0],t);y(e)}}else{O.display=G;let e=Ee()?v:g;Gt(e)&&e({event:we(O),jsEvent:t,view:ae(r)});let n=be(O);if(_e(O,i[0]),Ce(),e=Ee()?$:p,Gt(e)){let r=O;e(Ft(Te(O,n,t),{revert(){_e(r,n)}}))}}else if((5===j||Me())&&Gt(h)&&!ut){Q=t.clientX,Z=t.clientY;let e=ie(Q,Z);if(e){let{allDay:n,date:l,resource:o}=ee(e)(Q,Z);h({allDay:n,date:Et(l),dateStr:St(l),dayEl:e,jsEvent:t,view:ae(r),resource:o})}}W=!1,j=J=K=Q=Z=O=G=Y=q=X=V=lt=mt=ot=m($t,f=st=at=ht=void 0,f),tt=nt=et=rt=void 0,dt&&(clearTimeout(dt),n(1,dt=void 0))}ut=!1},Ue,function(t){if(Ue()){let e=t.target,n=[],r=()=>qt(n);n.push(se(e,"touchmove",Bi((()=>W)))),n.push(se(e,"touchend",r)),n.push(se(e,"touchcancel",r))}},function(t,e,n,r,l,o){j||(j=Hi(e)?n?"start"==n[1]?3:2:I(t)?1:6:6,Ue()&&(O=t,ve(e),r&&(Y=r),l&&(ht=l),it=n?"x"==n[0]?"resizingX":"resizingY":"dragging",n&&(Se()?(st=kt(O.end),ot?(Lt(st,O.start),st>=O.end&&Dt(st)):(Ct(st,A),st<O.start&&(st=O.start),Y=O.start)):(st=kt(O.start),ot?(Lt(st,O.end),st<=O.start&&!o&&_t(st)):(xt(st,A),st>O.end&&(st=O.end),Y=O.end,o||(Y=Ct(kt(Y),A)))),o&&!ot&&(mt=A)),ye(e)))},function(t){j||(j=Hi(t)?P&&!ce(u)?4:5:6,Ue()&&(ve(t),it="selecting",at=ot?bt({day:1}):A,O={allDay:ot,start:Y,end:xt(kt(Y),at),resourceIds:X?[X.id]:[]},ye(t)))},function(){j||(j=6)},Ne,function(){ut=!0},function(e){F.call(this,t,e)},()=>dt]}class Ai extends dt{constructor(t){super(),ut(this,t,Fi,Ri,o,{drag:41,select:42,noAction:43,handleScroll:0,unselect:44,noClick:45},null,[-1,-1,-1,-1,-1])}get drag(){return this.$$.ctx[41]}get select(){return this.$$.ctx[42]}get noAction(){return this.$$.ctx[43]}get handleScroll(){return this.$$.ctx[0]}get unselect(){return this.$$.ctx[44]}get noClick(){return this.$$.ctx[45]}}function Pi(e){let n,l;return{c:t,m(t,r){n||(l=[_(window,"pointermove",e[3]),_(window,"scroll",e[0])],n=!0)},p:t,i:t,o:t,d(t){n=!1,r(l)}}}function Ii(t,e,n){let r,l,{_iEvents:o,slotDuration:i}=B("state");a(t,o,(t=>n(4,r=t))),a(t,i,(t=>n(7,l=t)));let s=0,c=0;function u(){let t=ie(s,c);if(t){let{allDay:e,date:n,resource:i,disabled:a}=ee(t)(s,c);if(!a){let t=e?2:1;return r[t]||function(t){m(o,r[t]={id:"{pointer}",title:"",display:"pointer",extendedProps:{},backgroundColor:"transparent",classNames:[],styles:[]},r)}(t),m(o,r[t].start=n,r),m(o,r[t].end=xt(kt(n),l),r),void m(o,r[t].resourceIds=i?[i.id]:[],r)}}d()}function d(){r[1]&&m(o,r[1]=null,r),r[2]&&m(o,r[2]=null,r)}return t.$$.update=()=>{16&t.$$.dirty&&r[0]&&d()},[function(){u()},o,i,function(t){(function(t){return t.isPrimary&&"mouse"===t.pointerType})(t)&&(s=t.clientX,c=t.clientY,u())},r]}class ji extends dt{constructor(t){super(),ut(this,t,Ii,Pi,o,{handleScroll:0})}get handleScroll(){return this.$$.ctx[0]}}function Wi(t){let e,n,r,l;return{c(){e=b("div"),T(e,"class",n=t[2].resizer+(t[0]?" "+t[2].start:""))},m(n,o){v(n,e,o),r||(l=_(e,"pointerdown",t[11]),r=!0)},p(t,r){5&r&&n!==(n=t[2].resizer+(t[0]?" "+t[2].start:""))&&T(e,"class",n)},d(t){t&&y(e),r=!1,l()}}}function Oi(e){let n,r=e[1]&&Wi(e);return{c(){r&&r.c(),n=C()},m(t,e){r&&r.m(t,e),v(t,n,e)},p(t,e){let[l]=e;t[1]?r?r.p(t,l):(r=Wi(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){t&&y(n),r&&r.d(t)}}}function Gi(t,e,n){let r,l,o,i,s,{event:c}=e,{start:u=!1}=e,{theme:d,eventDurationEditable:f,eventResizableFromStart:h,editable:m}=B("state");return a(t,d,(t=>n(2,i=t))),a(t,f,(t=>n(9,l=t))),a(t,h,(t=>n(10,o=t))),a(t,m,(t=>n(8,r=t))),t.$$set=t=>{"event"in t&&n(7,c=t.event),"start"in t&&n(0,u=t.start)},t.$$.update=()=>{1921&t.$$.dirty&&n(1,s=!Ee(c.display)&&!Te(c.display)&&(!u||o)&&((c.durationEditable??l)||(c.editable??r)))},[u,s,i,d,f,h,m,c,r,l,o,function(e){F.call(this,t,e)}]}class Yi extends dt{constructor(t){super(),ut(this,t,Gi,Oi,o,{event:7,start:0})}}function qi(t){let e,n;return e=new ji({props:{}}),t[16](e),{c(){st(e.$$.fragment)},m(t,r){at(e,t,r),n=!0},p(t,n){e.$set({})},i(t){n||(nt(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(n){t[16](null),ct(e,n)}}}function Xi(t){let e,n,r,l;e=new Ai({props:{}}),t[15](e);let o=t[1]&&qi(t);return{c(){st(e.$$.fragment),n=x(),o&&o.c(),r=C()},m(t,i){at(e,t,i),v(t,n,i),o&&o.m(t,i),v(t,r,i),l=!0},p(t,n){let[l]=n;e.$set({}),t[1]?o?(o.p(t,l),2&l&&nt(o,1)):(o=qi(t),o.c(),nt(o,1),o.m(r.parentNode,r)):o&&(tt(),rt(o,1,1,(()=>{o=null})),et())},i(t){l||(nt(e.$$.fragment,t),nt(o),l=!0)},o(t){rt(e.$$.fragment,t),rt(o),l=!1},d(l){l&&(y(n),y(r)),t[15](null),ct(e,l),o&&o.d(l)}}}function Vi(t,e,n){let r,l,o,i,s,c,u,d,{theme:f,editable:h,eventStartEditable:p,pointer:$,_bodyEl:g,_interaction:v,_iClasses:y,_draggable:w}=B("state");function b(){for(let t of Object.values(r))t?.handleScroll?.()}return a(t,f,(t=>n(11,o=t))),a(t,h,(t=>n(13,c=t))),a(t,p,(t=>n(14,u=t))),a(t,$,(t=>n(1,d=t))),a(t,g,(t=>n(10,l=t))),a(t,v,(t=>n(0,r=t))),a(t,y,(t=>n(17,s=t))),a(t,w,(t=>n(12,i=t))),m(v,r.resizer=Yi,r),t.$$.update=()=>{24576&t.$$.dirty&&m(w,i=t=>(t.startEditable??u)||(t.editable??c),i),6144&t.$$.dirty&&m(y,s=(t,e)=>{let{display:n}=e;return Te(n)?[o[n]]:!Ee(n)&&i(e)?[o.draggable]:[]},s),1024&t.$$.dirty&&l&&se(l,"scroll",b)},[r,d,f,h,p,$,g,v,y,w,l,o,i,c,u,function(t){P[t?"unshift":"push"]((()=>{r.action=t,v.set(r)}))},function(t){P[t?"unshift":"push"]((()=>{r.pointer=t,v.set(r)}))}]}class Ji extends dt{constructor(t){super(),ut(this,t,Vi,Xi,o,{})}}var Ki={createOptions(t){t.dateClick=void 0,t.dragConstraint=void 0,t.dragScroll=!0,t.editable=!1,t.eventDragMinDistance=5,t.eventDragStart=void 0,t.eventDragStop=void 0,t.eventDrop=void 0,t.eventDurationEditable=!0,t.eventLongPressDelay=void 0,t.eventResizableFromStart=!1,t.eventResizeStart=void 0,t.eventResizeStop=void 0,t.eventResize=void 0,t.eventStartEditable=!0,t.longPressDelay=1e3,t.pointer=!1,t.resizeConstraint=void 0,t.select=void 0,t.selectBackgroundColor=void 0,t.selectConstraint=void 0,t.selectLongPressDelay=void 0,t.selectMinDistance=5,t.unselect=void 0,t.unselectAuto=!0,t.unselectCancel="",t.theme.draggable="ec-draggable",t.theme.ghost="ec-ghost",t.theme.preview="ec-preview",t.theme.pointer="ec-pointer",t.theme.resizer="ec-resizer",t.theme.start="ec-start",t.theme.dragging="ec-dragging",t.theme.resizingY="ec-resizing-y",t.theme.resizingX="ec-resizing-x",t.theme.selecting="ec-selecting"},createStores(t){t._draggable=mt(Xt),t._auxiliary.update((t=>[...t,Ji]))}};return class extends Un{constructor(t,e){super({target:t,props:{plugins:[vr,Br,Gl,Co,Mi,Ki],options:e}})}}}();
+//# sourceMappingURL=event-calendar.min.js.map
diff --git a/thirdpartylibs/event-calendar/event-calendar.min.js.map b/thirdpartylibs/event-calendar/event-calendar.min.js.map
new file mode 100644
index 0000000..2e1e261
--- /dev/null
+++ b/thirdpartylibs/event-calendar/event-calendar.min.js.map
@@ -0,0 +1 @@
+{"version":3,"file":"event-calendar.min.js","sources":["../../node_modules/svelte/src/runtime/internal/utils.js","../../node_modules/svelte/src/runtime/internal/globals.js","../../node_modules/svelte/src/runtime/internal/dom.js","../../node_modules/svelte/src/runtime/internal/lifecycle.js","../../node_modules/svelte/src/runtime/internal/scheduler.js","../../node_modules/svelte/src/runtime/internal/transitions.js","../../node_modules/svelte/src/runtime/internal/each.js","../../node_modules/svelte/src/runtime/internal/Component.js","../../node_modules/svelte/src/runtime/store/index.js","../core/index.js","../day-grid/index.js","../list/index.js","../time-grid/index.js","../resource-time-grid/index.js","../resource-timeline/index.js","../interaction/index.js","src/index.js"],"sourcesContent":["/** @returns {void} */\nexport function noop() {}\n\nexport const identity = (x) => x;\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nexport function assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n/**\n * @param {any} value\n * @returns {value is PromiseLike<any>}\n */\nexport function is_promise(value) {\n\treturn (\n\t\t!!value &&\n\t\t(typeof value === 'object' || typeof value === 'function') &&\n\t\ttypeof (/** @type {any} */ (value).then) === 'function'\n\t);\n}\n\n/** @returns {void} */\nexport function add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nexport function run(fn) {\n\treturn fn();\n}\n\nexport function blank_object() {\n\treturn Object.create(null);\n}\n\n/**\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function run_all(fns) {\n\tfns.forEach(run);\n}\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\n/** @returns {boolean} */\nexport function safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || (a && typeof a === 'object') || typeof a === 'function';\n}\n\nlet src_url_equal_anchor;\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nexport function src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\tif (!src_url_equal_anchor) {\n\t\tsrc_url_equal_anchor = document.createElement('a');\n\t}\n\t// This is actually faster than doing URL(..).href\n\tsrc_url_equal_anchor.href = url;\n\treturn element_src === src_url_equal_anchor.href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element_srcset\n * @param {string | undefined | null} srcset\n * @returns {boolean}\n */\nexport function srcset_url_equal(element_srcset, srcset) {\n\tconst element_urls = split_srcset(element_srcset.srcset);\n\tconst urls = split_srcset(srcset || '');\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n\n/** @returns {boolean} */\nexport function not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\n/** @returns {boolean} */\nexport function is_empty(obj) {\n\treturn Object.keys(obj).length === 0;\n}\n\n/** @returns {void} */\nexport function validate_store(store, name) {\n\tif (store != null && typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nexport function subscribe(store, ...callbacks) {\n\tif (store == null) {\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(undefined);\n\t\t}\n\t\treturn noop;\n\t}\n\tconst unsub = store.subscribe(...callbacks);\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * https://svelte.dev/docs/svelte-store#get\n * @template T\n * @param {import('../store/public.js').Readable<T>} store\n * @returns {T}\n */\nexport function get_store_value(store) {\n\tlet value;\n\tsubscribe(store, (_) => (value = _))();\n\treturn value;\n}\n\n/** @returns {void} */\nexport function component_subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(subscribe(store, callback));\n}\n\nexport function create_slot(definition, ctx, $$scope, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n\treturn definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;\n}\n\nexport function get_slot_changes(definition, $$scope, dirty, fn) {\n\tif (definition[2] && fn) {\n\t\tconst lets = definition[2](fn(dirty));\n\t\tif ($$scope.dirty === undefined) {\n\t\t\treturn lets;\n\t\t}\n\t\tif (typeof lets === 'object') {\n\t\t\tconst merged = [];\n\t\t\tconst len = Math.max($$scope.dirty.length, lets.length);\n\t\t\tfor (let i = 0; i < len; i += 1) {\n\t\t\t\tmerged[i] = $$scope.dirty[i] | lets[i];\n\t\t\t}\n\t\t\treturn merged;\n\t\t}\n\t\treturn $$scope.dirty | lets;\n\t}\n\treturn $$scope.dirty;\n}\n\n/** @returns {void} */\nexport function update_slot_base(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tslot_changes,\n\tget_slot_context_fn\n) {\n\tif (slot_changes) {\n\t\tconst slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n\t\tslot.p(slot_context, slot_changes);\n\t}\n}\n\n/** @returns {void} */\nexport function update_slot(\n\tslot,\n\tslot_definition,\n\tctx,\n\t$$scope,\n\tdirty,\n\tget_slot_changes_fn,\n\tget_slot_context_fn\n) {\n\tconst slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n\tupdate_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\n\n/** @returns {any[] | -1} */\nexport function get_all_dirty_from_scope($$scope) {\n\tif ($$scope.ctx.length > 32) {\n\t\tconst dirty = [];\n\t\tconst length = $$scope.ctx.length / 32;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdirty[i] = -1;\n\t\t}\n\t\treturn dirty;\n\t}\n\treturn -1;\n}\n\n/** @returns {{}} */\nexport function exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\n/** @returns {{}} */\nexport function compute_rest_props(props, keys) {\n\tconst rest = {};\n\tkeys = new Set(keys);\n\tfor (const k in props) if (!keys.has(k) && k[0] !== '$') rest[k] = props[k];\n\treturn rest;\n}\n\n/** @returns {{}} */\nexport function compute_slots(slots) {\n\tconst result = {};\n\tfor (const key in slots) {\n\t\tresult[key] = true;\n\t}\n\treturn result;\n}\n\n/** @returns {(this: any, ...args: any[]) => void} */\nexport function once(fn) {\n\tlet ran = false;\n\treturn function (...args) {\n\t\tif (ran) return;\n\t\tran = true;\n\t\tfn.call(this, ...args);\n\t};\n}\n\nexport function null_to_empty(value) {\n\treturn value == null ? '' : value;\n}\n\nexport function set_store_value(store, ret, value) {\n\tstore.set(value);\n\treturn ret;\n}\n\nexport const has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\n\nexport function action_destroyer(action_result) {\n\treturn action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nexport function split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\nexport const contenteditable_truthy_values = ['', true, 1, 'true', 'contenteditable'];\n","/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","import { contenteditable_truthy_values, has_prop } from './utils.js';\n\nimport { ResizeObserverSingleton } from './ResizeObserverSingleton.js';\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\n\n/**\n * @returns {void}\n */\nexport function start_hydrating() {\n\tis_hydrating = true;\n}\n\n/**\n * @returns {void}\n */\nexport function end_hydrating() {\n\tis_hydrating = false;\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {(index: number) => number} key\n * @param {number} value\n * @returns {number}\n */\nfunction upper_bound(low, high, key, value) {\n\t// Return first index of value larger than input value in the range [low, high)\n\twhile (low < high) {\n\t\tconst mid = low + ((high - low) >> 1);\n\t\tif (key(mid) <= value) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\treturn low;\n}\n\n/**\n * @param {NodeEx} target\n * @returns {void}\n */\nfunction init_hydrate(target) {\n\tif (target.hydrate_init) return;\n\ttarget.hydrate_init = true;\n\t// We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n\n\tlet children = /** @type {ArrayLike<NodeEx2>} */ (target.childNodes);\n\t// If target is <head>, there may be children without claim_order\n\tif (target.nodeName === 'HEAD') {\n\t\tconst my_children = [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst node = children[i];\n\t\t\tif (node.claim_order !== undefined) {\n\t\t\t\tmy_children.push(node);\n\t\t\t}\n\t\t}\n\t\tchildren = my_children;\n\t}\n\t/*\n\t * Reorder claimed children optimally.\n\t * We can reorder claimed children optimally by finding the longest subsequence of\n\t * nodes that are already claimed in order and only moving the rest. The longest\n\t * subsequence of nodes that are claimed in order can be found by\n\t * computing the longest increasing subsequence of .claim_order values.\n\t *\n\t * This algorithm is optimal in generating the least amount of reorder operations\n\t * possible.\n\t *\n\t * Proof:\n\t * We know that, given a set of reordering operations, the nodes that do not move\n\t * always form an increasing subsequence, since they do not move among each other\n\t * meaning that they must be already ordered among each other. Thus, the maximal\n\t * set of nodes that do not move form a longest increasing subsequence.\n\t */\n\t// Compute longest increasing subsequence\n\t// m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n\tconst m = new Int32Array(children.length + 1);\n\t// Predecessor indices + 1\n\tconst p = new Int32Array(children.length);\n\tm[0] = -1;\n\tlet longest = 0;\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst current = children[i].claim_order;\n\t\t// Find the largest subsequence length such that it ends in a value less than our current value\n\t\t// upper_bound returns first greater value, so we subtract one\n\t\t// with fast path for when we are on the current longest subsequence\n\t\tconst seq_len =\n\t\t\t(longest > 0 && children[m[longest]].claim_order <= current\n\t\t\t\t? longest + 1\n\t\t\t\t: upper_bound(1, longest, (idx) => children[m[idx]].claim_order, current)) - 1;\n\t\tp[i] = m[seq_len] + 1;\n\t\tconst new_len = seq_len + 1;\n\t\t// We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n\t\tm[new_len] = i;\n\t\tlongest = Math.max(new_len, longest);\n\t}\n\t// The longest increasing subsequence of nodes (initially reversed)\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst lis = [];\n\t// The rest of the nodes, nodes that will be moved\n\n\t/**\n\t * @type {NodeEx2[]}\n\t */\n\tconst to_move = [];\n\tlet last = children.length - 1;\n\tfor (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n\t\tlis.push(children[cur - 1]);\n\t\tfor (; last >= cur; last--) {\n\t\t\tto_move.push(children[last]);\n\t\t}\n\t\tlast--;\n\t}\n\tfor (; last >= 0; last--) {\n\t\tto_move.push(children[last]);\n\t}\n\tlis.reverse();\n\t// We sort the nodes being moved to guarantee that their insertion order matches the claim order\n\tto_move.sort((a, b) => a.claim_order - b.claim_order);\n\t// Finally, we move the nodes\n\tfor (let i = 0, j = 0; i < to_move.length; i++) {\n\t\twhile (j < lis.length && to_move[i].claim_order >= lis[j].claim_order) {\n\t\t\tj++;\n\t\t}\n\t\tconst anchor = j < lis.length ? lis[j] : null;\n\t\ttarget.insertBefore(to_move[i], anchor);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @returns {void}\n */\nexport function append(target, node) {\n\ttarget.appendChild(node);\n}\n\n/**\n * @param {Node} target\n * @param {string} style_sheet_id\n * @param {string} styles\n * @returns {void}\n */\nexport function append_styles(target, style_sheet_id, styles) {\n\tconst append_styles_to = get_root_for_style(target);\n\tif (!append_styles_to.getElementById(style_sheet_id)) {\n\t\tconst style = element('style');\n\t\tstyle.id = style_sheet_id;\n\t\tstyle.textContent = styles;\n\t\tappend_stylesheet(append_styles_to, style);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {ShadowRoot | Document}\n */\nexport function get_root_for_style(node) {\n\tif (!node) return document;\n\tconst root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n\tif (root && /** @type {ShadowRoot} */ (root).host) {\n\t\treturn /** @type {ShadowRoot} */ (root);\n\t}\n\treturn node.ownerDocument;\n}\n\n/**\n * @param {Node} node\n * @returns {CSSStyleSheet}\n */\nexport function append_empty_stylesheet(node) {\n\tconst style_element = element('style');\n\t// For transitions to work without 'style-src: unsafe-inline' Content Security Policy,\n\t// these empty tags need to be allowed with a hash as a workaround until we move to the Web Animations API.\n\t// Using the hash for the empty string (for an empty tag) works in all browsers except Safari.\n\t// So as a workaround for the workaround, when we append empty style tags we set their content to /* empty */.\n\t// The hash 'sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=' will then work even in Safari.\n\tstyle_element.textContent = '/* empty */';\n\tappend_stylesheet(get_root_for_style(node), style_element);\n\treturn style_element.sheet;\n}\n\n/**\n * @param {ShadowRoot | Document} node\n * @param {HTMLStyleElement} style\n * @returns {CSSStyleSheet}\n */\nfunction append_stylesheet(node, style) {\n\tappend(/** @type {Document} */ (node).head || node, style);\n\treturn style.sheet;\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @returns {void}\n */\nexport function append_hydration(target, node) {\n\tif (is_hydrating) {\n\t\tinit_hydrate(target);\n\t\tif (\n\t\t\ttarget.actual_end_child === undefined ||\n\t\t\t(target.actual_end_child !== null && target.actual_end_child.parentNode !== target)\n\t\t) {\n\t\t\ttarget.actual_end_child = target.firstChild;\n\t\t}\n\t\t// Skip nodes of undefined ordering\n\t\twhile (target.actual_end_child !== null && target.actual_end_child.claim_order === undefined) {\n\t\t\ttarget.actual_end_child = target.actual_end_child.nextSibling;\n\t\t}\n\t\tif (node !== target.actual_end_child) {\n\t\t\t// We only insert if the ordering of this node should be modified or the parent node is not target\n\t\t\tif (node.claim_order !== undefined || node.parentNode !== target) {\n\t\t\t\ttarget.insertBefore(node, target.actual_end_child);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.actual_end_child = node.nextSibling;\n\t\t}\n\t} else if (node.parentNode !== target || node.nextSibling !== null) {\n\t\ttarget.appendChild(node);\n\t}\n}\n\n/**\n * @param {Node} target\n * @param {Node} node\n * @param {Node} [anchor]\n * @returns {void}\n */\nexport function insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor || null);\n}\n\n/**\n * @param {NodeEx} target\n * @param {NodeEx} node\n * @param {NodeEx} [anchor]\n * @returns {void}\n */\nexport function insert_hydration(target, node, anchor) {\n\tif (is_hydrating && !anchor) {\n\t\tappend_hydration(target, node);\n\t} else if (node.parentNode !== target || node.nextSibling != anchor) {\n\t\ttarget.insertBefore(node, anchor || null);\n\t}\n}\n\n/**\n * @param {Node} node\n * @returns {void}\n */\nexport function detach(node) {\n\tif (node.parentNode) {\n\t\tnode.parentNode.removeChild(node);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element(name) {\n\treturn document.createElement(name);\n}\n\n/**\n * @template {keyof HTMLElementTagNameMap} K\n * @param {K} name\n * @param {string} is\n * @returns {HTMLElementTagNameMap[K]}\n */\nexport function element_is(name, is) {\n\treturn document.createElement(name, { is });\n}\n\n/**\n * @template T\n * @template {keyof T} K\n * @param {T} obj\n * @param {K[]} exclude\n * @returns {Pick<T, Exclude<keyof T, K>>}\n */\nexport function object_without_properties(obj, exclude) {\n\tconst target = /** @type {Pick<T, Exclude<keyof T, K>>} */ ({});\n\tfor (const k in obj) {\n\t\tif (\n\t\t\thas_prop(obj, k) &&\n\t\t\t// @ts-ignore\n\t\t\texclude.indexOf(k) === -1\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\ttarget[k] = obj[k];\n\t\t}\n\t}\n\treturn target;\n}\n\n/**\n * @template {keyof SVGElementTagNameMap} K\n * @param {K} name\n * @returns {SVGElement}\n */\nexport function svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\n/**\n * @param {string} data\n * @returns {Text}\n */\nexport function text(data) {\n\treturn document.createTextNode(data);\n}\n\n/**\n * @returns {Text} */\nexport function space() {\n\treturn text(' ');\n}\n\n/**\n * @returns {Text} */\nexport function empty() {\n\treturn text('');\n}\n\n/**\n * @param {string} content\n * @returns {Comment}\n */\nexport function comment(content) {\n\treturn document.createComment(content);\n}\n\n/**\n * @param {EventTarget} node\n * @param {string} event\n * @param {EventListenerOrEventListenerObject} handler\n * @param {boolean | AddEventListenerOptions | EventListenerOptions} [options]\n * @returns {() => void}\n */\nexport function listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function prevent_default(fn) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopPropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => any} */\nexport function stop_immediate_propagation(fn) {\n\treturn function (event) {\n\t\tevent.stopImmediatePropagation();\n\t\t// @ts-ignore\n\t\treturn fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function self(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.target === this) fn.call(this, event);\n\t};\n}\n\n/**\n * @returns {(event: any) => void} */\nexport function trusted(fn) {\n\treturn function (event) {\n\t\t// @ts-ignore\n\t\tif (event.isTrusted) fn.call(this, event);\n\t};\n}\n\n/**\n * @param {Element} node\n * @param {string} attribute\n * @param {string} [value]\n * @returns {void}\n */\nexport function attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n/**\n * List of attributes that should always be set through the attr method,\n * because updating them through the property setter doesn't work reliably.\n * In the example of `width`/`height`, the problem is that the setter only\n * accepts numeric values, but the attribute can also be set to a string like `50%`.\n * If this list becomes too big, rethink this approach.\n */\nconst always_set_through_set_attribute = ['width', 'height'];\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_attributes(node, attributes) {\n\t// @ts-ignore\n\tconst descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n\tfor (const key in attributes) {\n\t\tif (attributes[key] == null) {\n\t\t\tnode.removeAttribute(key);\n\t\t} else if (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key === '__value') {\n\t\t\t/** @type {any} */ (node).value = node[key] = attributes[key];\n\t\t} else if (\n\t\t\tdescriptors[key] &&\n\t\t\tdescriptors[key].set &&\n\t\t\talways_set_through_set_attribute.indexOf(key) === -1\n\t\t) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {{ [x: string]: string }} attributes\n * @returns {void}\n */\nexport function set_svg_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tattr(node, key, attributes[key]);\n\t}\n}\n\n/**\n * @param {Record<string, unknown>} data_map\n * @returns {void}\n */\nexport function set_custom_element_data_map(node, data_map) {\n\tObject.keys(data_map).forEach((key) => {\n\t\tset_custom_element_data(node, key, data_map[key]);\n\t});\n}\n\n/**\n * @returns {void} */\nexport function set_custom_element_data(node, prop, value) {\n\tconst lower = prop.toLowerCase(); // for backwards compatibility with existing behavior we do lowercase first\n\tif (lower in node) {\n\t\tnode[lower] = typeof node[lower] === 'boolean' && value === '' ? true : value;\n\t} else if (prop in node) {\n\t\tnode[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\n/**\n * @param {string} tag\n */\nexport function set_dynamic_element_data(tag) {\n\treturn /-/.test(tag) ? set_custom_element_data_map : set_attributes;\n}\n\n/**\n * @returns {void}\n */\nexport function xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @returns {string}\n */\nexport function get_svelte_dataset(node) {\n\treturn node.dataset.svelteH;\n}\n\n/**\n * @returns {unknown[]} */\nexport function get_binding_group_value(group, __value, checked) {\n\tconst value = new Set();\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.add(group[i].__value);\n\t}\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement[]} group\n * @returns {{ p(...inputs: HTMLInputElement[]): void; r(): void; }}\n */\nexport function init_binding_group(group) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\treturn {\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\t_inputs.forEach((input) => group.push(input));\n\t\t},\n\t\t/* remove */ r() {\n\t\t\t_inputs.forEach((input) => group.splice(group.indexOf(input), 1));\n\t\t}\n\t};\n}\n\n/**\n * @param {number[]} indexes\n * @returns {{ u(new_indexes: number[]): void; p(...inputs: HTMLInputElement[]): void; r: () => void; }}\n */\nexport function init_binding_group_dynamic(group, indexes) {\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _group = get_binding_group(group);\n\n\t/**\n\t * @type {HTMLInputElement[]} */\n\tlet _inputs;\n\n\tfunction get_binding_group(group) {\n\t\tfor (let i = 0; i < indexes.length; i++) {\n\t\t\tgroup = group[indexes[i]] = group[indexes[i]] || [];\n\t\t}\n\t\treturn group;\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction push() {\n\t\t_inputs.forEach((input) => _group.push(input));\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction remove() {\n\t\t_inputs.forEach((input) => _group.splice(_group.indexOf(input), 1));\n\t}\n\treturn {\n\t\t/* update */ u(new_indexes) {\n\t\t\tindexes = new_indexes;\n\t\t\tconst new_group = get_binding_group(group);\n\t\t\tif (new_group !== _group) {\n\t\t\t\tremove();\n\t\t\t\t_group = new_group;\n\t\t\t\tpush();\n\t\t\t}\n\t\t},\n\t\t/* push */ p(...inputs) {\n\t\t\t_inputs = inputs;\n\t\t\tpush();\n\t\t},\n\t\t/* remove */ r: remove\n\t};\n}\n\n/** @returns {number} */\nexport function to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/** @returns {any[]} */\nexport function time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\n/**\n * @param {Element} element\n * @returns {ChildNode[]}\n */\nexport function children(element) {\n\treturn Array.from(element.childNodes);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {void}\n */\nfunction init_claim_info(nodes) {\n\tif (nodes.claim_info === undefined) {\n\t\tnodes.claim_info = { last_index: 0, total_claimed: 0 };\n\t}\n}\n\n/**\n * @template {ChildNodeEx} R\n * @param {ChildNodeArray} nodes\n * @param {(node: ChildNodeEx) => node is R} predicate\n * @param {(node: ChildNodeEx) => ChildNodeEx | undefined} process_node\n * @param {() => R} create_node\n * @param {boolean} dont_update_last_index\n * @returns {R}\n */\nfunction claim_node(nodes, predicate, process_node, create_node, dont_update_last_index = false) {\n\t// Try to find nodes in an order such that we lengthen the longest increasing subsequence\n\tinit_claim_info(nodes);\n\tconst result_node = (() => {\n\t\t// We first try to find an element after the previous one\n\t\tfor (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// Otherwise, we try to find one before\n\t\t// We iterate in reverse so that we don't go too far back\n\t\tfor (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n\t\t\tconst node = nodes[i];\n\t\t\tif (predicate(node)) {\n\t\t\t\tconst replacement = process_node(node);\n\t\t\t\tif (replacement === undefined) {\n\t\t\t\t\tnodes.splice(i, 1);\n\t\t\t\t} else {\n\t\t\t\t\tnodes[i] = replacement;\n\t\t\t\t}\n\t\t\t\tif (!dont_update_last_index) {\n\t\t\t\t\tnodes.claim_info.last_index = i;\n\t\t\t\t} else if (replacement === undefined) {\n\t\t\t\t\t// Since we spliced before the last_index, we decrease it\n\t\t\t\t\tnodes.claim_info.last_index--;\n\t\t\t\t}\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\t// If we can't find any matching node, we create a new one\n\t\treturn create_node();\n\t})();\n\tresult_node.claim_order = nodes.claim_info.total_claimed;\n\tnodes.claim_info.total_claimed += 1;\n\treturn result_node;\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @param {(name: string) => Element | SVGElement} create_element\n * @returns {Element | SVGElement}\n */\nfunction claim_element_base(nodes, name, attributes, create_element) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Element | SVGElement} */\n\t\t(node) => node.nodeName === name,\n\t\t/** @param {Element} node */\n\t\t(node) => {\n\t\t\tconst remove = [];\n\t\t\tfor (let j = 0; j < node.attributes.length; j++) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) {\n\t\t\t\t\tremove.push(attribute.name);\n\t\t\t\t}\n\t\t\t}\n\t\t\tremove.forEach((v) => node.removeAttribute(v));\n\t\t\treturn undefined;\n\t\t},\n\t\t() => create_element(name)\n\t);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @param {string} name\n * @param {{ [key: string]: boolean }} attributes\n * @returns {Element | SVGElement}\n */\nexport function claim_svg_element(nodes, name, attributes) {\n\treturn claim_element_base(nodes, name, attributes, svg_element);\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Text}\n */\nexport function claim_text(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Text} */\n\t\t(node) => node.nodeType === 3,\n\t\t/** @param {Text} node */\n\t\t(node) => {\n\t\t\tconst data_str = '' + data;\n\t\t\tif (node.data.startsWith(data_str)) {\n\t\t\t\tif (node.data.length !== data_str.length) {\n\t\t\t\t\treturn node.splitText(data_str.length);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode.data = data_str;\n\t\t\t}\n\t\t},\n\t\t() => text(data),\n\t\ttrue // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n\t);\n}\n\n/**\n * @returns {Text} */\nexport function claim_space(nodes) {\n\treturn claim_text(nodes, ' ');\n}\n\n/**\n * @param {ChildNodeArray} nodes\n * @returns {Comment}\n */\nexport function claim_comment(nodes, data) {\n\treturn claim_node(\n\t\tnodes,\n\t\t/** @returns {node is Comment} */\n\t\t(node) => node.nodeType === 8,\n\t\t/** @param {Comment} node */\n\t\t(node) => {\n\t\t\tnode.data = '' + data;\n\t\t\treturn undefined;\n\t\t},\n\t\t() => comment(data),\n\t\ttrue\n\t);\n}\n\nfunction get_comment_idx(nodes, text, start) {\n\tfor (let i = start; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * @param {boolean} is_svg\n * @returns {HtmlTagHydration}\n */\nexport function claim_html_tag(nodes, is_svg) {\n\t// find html opening tag\n\tconst start_index = get_comment_idx(nodes, 'HTML_TAG_START', 0);\n\tconst end_index = get_comment_idx(nodes, 'HTML_TAG_END', start_index + 1);\n\tif (start_index === -1 || end_index === -1) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\n\tinit_claim_info(nodes);\n\tconst html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n\tdetach(html_tag_nodes[0]);\n\tdetach(html_tag_nodes[html_tag_nodes.length - 1]);\n\tconst claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n\tif (claimed_nodes.length === 0) {\n\t\treturn new HtmlTagHydration(is_svg);\n\t}\n\tfor (const n of claimed_nodes) {\n\t\tn.claim_order = nodes.claim_info.total_claimed;\n\t\tnodes.claim_info.total_claimed += 1;\n\t}\n\treturn new HtmlTagHydration(is_svg, claimed_nodes);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @returns {void}\n */\nexport function set_data_contenteditable(text, data) {\n\tdata = '' + data;\n\tif (text.wholeText === data) return;\n\ttext.data = /** @type {string} */ (data);\n}\n\n/**\n * @param {Text} text\n * @param {unknown} data\n * @param {string} attr_value\n * @returns {void}\n */\nexport function set_data_maybe_contenteditable(text, data, attr_value) {\n\tif (~contenteditable_truthy_values.indexOf(attr_value)) {\n\t\tset_data_contenteditable(text, data);\n\t} else {\n\t\tset_data(text, data);\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_input_value(input, value) {\n\tinput.value = value == null ? '' : value;\n}\n\n/**\n * @returns {void} */\nexport function set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\n/**\n * @returns {void} */\nexport function set_style(node, key, value, important) {\n\tif (value == null) {\n\t\tnode.style.removeProperty(key);\n\t} else {\n\t\tnode.style.setProperty(key, value, important ? 'important' : '');\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_option(select, value, mounting) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * @returns {void} */\nexport function select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nexport function select_value(select) {\n\tconst selected_option = select.querySelector(':checked');\n\treturn selected_option && selected_option.__value;\n}\n\nexport function select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), (option) => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\n\n/**\n * @type {boolean} */\nlet crossorigin;\n\n/**\n * @returns {boolean} */\nexport function is_crossorigin() {\n\tif (crossorigin === undefined) {\n\t\tcrossorigin = false;\n\t\ttry {\n\t\t\tif (typeof window !== 'undefined' && window.parent) {\n\t\t\t\tvoid window.parent.document;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tcrossorigin = true;\n\t\t}\n\t}\n\treturn crossorigin;\n}\n\n/**\n * @param {HTMLElement} node\n * @param {() => void} fn\n * @returns {() => void}\n */\nexport function add_iframe_resize_listener(node, fn) {\n\tconst computed_style = getComputedStyle(node);\n\tif (computed_style.position === 'static') {\n\t\tnode.style.position = 'relative';\n\t}\n\tconst iframe = element('iframe');\n\tiframe.setAttribute(\n\t\t'style',\n\t\t'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n\t\t\t'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;'\n\t);\n\tiframe.setAttribute('aria-hidden', 'true');\n\tiframe.tabIndex = -1;\n\tconst crossorigin = is_crossorigin();\n\n\t/**\n\t * @type {() => void}\n\t */\n\tlet unsubscribe;\n\tif (crossorigin) {\n\t\tiframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n\t\tunsubscribe = listen(\n\t\t\twindow,\n\t\t\t'message',\n\t\t\t/** @param {MessageEvent} event */ (event) => {\n\t\t\t\tif (event.source === iframe.contentWindow) fn();\n\t\t\t}\n\t\t);\n\t} else {\n\t\tiframe.src = 'about:blank';\n\t\tiframe.onload = () => {\n\t\t\tunsubscribe = listen(iframe.contentWindow, 'resize', fn);\n\t\t\t// make sure an initial resize event is fired _after_ the iframe is loaded (which is asynchronous)\n\t\t\t// see https://github.com/sveltejs/svelte/issues/4233\n\t\t\tfn();\n\t\t};\n\t}\n\tappend(node, iframe);\n\treturn () => {\n\t\tif (crossorigin) {\n\t\t\tunsubscribe();\n\t\t} else if (unsubscribe && iframe.contentWindow) {\n\t\t\tunsubscribe();\n\t\t}\n\t\tdetach(iframe);\n\t};\n}\nexport const resize_observer_content_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'content-box'\n});\nexport const resize_observer_border_box = /* @__PURE__ */ new ResizeObserverSingleton({\n\tbox: 'border-box'\n});\nexport const resize_observer_device_pixel_content_box = /* @__PURE__ */ new ResizeObserverSingleton(\n\t{ box: 'device-pixel-content-box' }\n);\nexport { ResizeObserverSingleton };\n\n/**\n * @returns {void} */\nexport function toggle_class(element, name, toggle) {\n\t// The `!!` is required because an `undefined` flag means flipping the current state.\n\telement.classList.toggle(name, !!toggle);\n}\n\n/**\n * @template T\n * @param {string} type\n * @param {T} [detail]\n * @param {{ bubbles?: boolean, cancelable?: boolean }} [options]\n * @returns {CustomEvent<T>}\n */\nexport function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * @param {string} selector\n * @param {HTMLElement} parent\n * @returns {ChildNodeArray}\n */\nexport function query_selector_all(selector, parent = document.body) {\n\treturn Array.from(parent.querySelectorAll(selector));\n}\n\n/**\n * @param {string} nodeId\n * @param {HTMLElement} head\n * @returns {any[]}\n */\nexport function head_selector(nodeId, head) {\n\tconst result = [];\n\tlet started = 0;\n\tfor (const node of head.childNodes) {\n\t\tif (node.nodeType === 8 /* comment node */) {\n\t\t\tconst comment = node.textContent.trim();\n\t\t\tif (comment === `HEAD_${nodeId}_END`) {\n\t\t\t\tstarted -= 1;\n\t\t\t\tresult.push(node);\n\t\t\t} else if (comment === `HEAD_${nodeId}_START`) {\n\t\t\t\tstarted += 1;\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t} else if (started > 0) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n/** */\nexport class HtmlTag {\n\t/**\n\t * @private\n\t * @default false\n\t */\n\tis_svg = false;\n\t/** parent for creating node */\n\te = undefined;\n\t/** html tag nodes */\n\tn = undefined;\n\t/** target */\n\tt = undefined;\n\t/** anchor */\n\ta = undefined;\n\tconstructor(is_svg = false) {\n\t\tthis.is_svg = is_svg;\n\t\tthis.e = this.n = null;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tthis.h(html);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @param {HTMLElement | SVGElement} target\n\t * @param {HTMLElement | SVGElement} anchor\n\t * @returns {void}\n\t */\n\tm(html, target, anchor = null) {\n\t\tif (!this.e) {\n\t\t\tif (this.is_svg)\n\t\t\t\tthis.e = svg_element(/** @type {keyof SVGElementTagNameMap} */ (target.nodeName));\n\t\t\t/** #7364  target for <template> may be provided as #document-fragment(11) */ else\n\t\t\t\tthis.e = element(\n\t\t\t\t\t/** @type {keyof HTMLElementTagNameMap} */ (\n\t\t\t\t\t\ttarget.nodeType === 11 ? 'TEMPLATE' : target.nodeName\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\tthis.t =\n\t\t\t\ttarget.tagName !== 'TEMPLATE'\n\t\t\t\t\t? target\n\t\t\t\t\t: /** @type {HTMLTemplateElement} */ (target).content;\n\t\t\tthis.c(html);\n\t\t}\n\t\tthis.i(anchor);\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\th(html) {\n\t\tthis.e.innerHTML = html;\n\t\tthis.n = Array.from(\n\t\t\tthis.e.nodeName === 'TEMPLATE' ? this.e.content.childNodes : this.e.childNodes\n\t\t);\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert(this.t, this.n[i], anchor);\n\t\t}\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tp(html) {\n\t\tthis.d();\n\t\tthis.h(html);\n\t\tthis.i(this.a);\n\t}\n\n\t/**\n\t * @returns {void} */\n\td() {\n\t\tthis.n.forEach(detach);\n\t}\n}\n\nexport class HtmlTagHydration extends HtmlTag {\n\t/** @type {Element[]} hydration claimed nodes */\n\tl = undefined;\n\n\tconstructor(is_svg = false, claimed_nodes) {\n\t\tsuper(is_svg);\n\t\tthis.e = this.n = null;\n\t\tthis.l = claimed_nodes;\n\t}\n\n\t/**\n\t * @param {string} html\n\t * @returns {void}\n\t */\n\tc(html) {\n\t\tif (this.l) {\n\t\t\tthis.n = this.l;\n\t\t} else {\n\t\t\tsuper.c(html);\n\t\t}\n\t}\n\n\t/**\n\t * @returns {void} */\n\ti(anchor) {\n\t\tfor (let i = 0; i < this.n.length; i += 1) {\n\t\t\tinsert_hydration(this.t, this.n[i], anchor);\n\t\t}\n\t}\n}\n\n/**\n * @param {NamedNodeMap} attributes\n * @returns {{}}\n */\nexport function attribute_to_object(attributes) {\n\tconst result = {};\n\tfor (const attribute of attributes) {\n\t\tresult[attribute.name] = attribute.value;\n\t}\n\treturn result;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t'&': '&amp;',\n\t'<': '&lt;'\n};\n\nconst regex_attribute_characters_to_escape = /[\"&<]/g;\n\n/**\n * Note that the attribute itself should be surrounded in double quotes\n * @param {any} attribute\n */\nfunction escape_attribute(attribute) {\n\treturn String(attribute).replace(regex_attribute_characters_to_escape, (match) => escaped[match]);\n}\n\n/**\n * @param {Record<string, string>} attributes\n */\nexport function stringify_spread(attributes) {\n\tlet str = ' ';\n\tfor (const key in attributes) {\n\t\tif (attributes[key] != null) {\n\t\t\tstr += `${key}=\"${escape_attribute(attributes[key])}\" `;\n\t\t}\n\t}\n\n\treturn str;\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {{}}\n */\nexport function get_custom_elements_slots(element) {\n\tconst result = {};\n\telement.childNodes.forEach(\n\t\t/** @param {Element} node */ (node) => {\n\t\t\tresult[node.slot || 'default'] = true;\n\t\t}\n\t);\n\treturn result;\n}\n\nexport function construct_svelte_component(component, props) {\n\treturn new component(props);\n}\n\n/**\n * @typedef {Node & {\n * \tclaim_order?: number;\n * \thydrate_init?: true;\n * \tactual_end_child?: NodeEx;\n * \tchildNodes: NodeListOf<NodeEx>;\n * }} NodeEx\n */\n\n/** @typedef {ChildNode & NodeEx} ChildNodeEx */\n\n/** @typedef {NodeEx & { claim_order: number }} NodeEx2 */\n\n/**\n * @typedef {ChildNodeEx[] & {\n * \tclaim_info?: {\n * \t\tlast_index: number;\n * \t\ttotal_claimed: number;\n * \t};\n * }} ChildNodeArray\n */\n","import { custom_event } from './dom.js';\n\nexport let current_component;\n\n/** @returns {void} */\nexport function set_current_component(component) {\n\tcurrent_component = component;\n}\n\nexport function get_current_component() {\n\tif (!current_component) throw new Error('Function called outside component initialization');\n\treturn current_component;\n}\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#beforeupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tget_current_component().$$.before_update.push(fn);\n}\n\n/**\n * The `onMount` function schedules a callback to run as soon as the component has been mounted to the DOM.\n * It must be called during the component's initialisation (but doesn't need to live *inside* the component;\n * it can be called from an external module).\n *\n * If a function is returned _synchronously_ from `onMount`, it will be called when the component is unmounted.\n *\n * `onMount` does not run inside a [server-side component](https://svelte.dev/docs#run-time-server-side-component-api).\n *\n * https://svelte.dev/docs/svelte#onmount\n * @template T\n * @param {() => import('./private.js').NotFunction<T> | Promise<import('./private.js').NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`\n *\n * https://svelte.dev/docs/svelte#afterupdate\n * @param {() => any} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tget_current_component().$$.after_update.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * https://svelte.dev/docs/svelte#ondestroy\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs#template-syntax-component-directives-on-eventname).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: never; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * https://svelte.dev/docs/svelte#createeventdispatcher\n * @template {Record<string, any>} [EventMap=any]\n * @returns {import('./public.js').EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst component = get_current_component();\n\treturn (type, detail, { cancelable = false } = {}) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(/** @type {string} */ (type), detail, { cancelable });\n\t\t\tcallbacks.slice().forEach((fn) => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\t\treturn true;\n\t};\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#setcontext\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n\treturn context;\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#getcontext\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * https://svelte.dev/docs/svelte#getallcontexts\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\treturn get_current_component().$$.context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * https://svelte.dev/docs/svelte#hascontext\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\treturn get_current_component().$$.context.has(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\n/**\n * @param component\n * @param event\n * @returns {void}\n */\nexport function bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\tif (callbacks) {\n\t\t// @ts-ignore\n\t\tcallbacks.slice().forEach((fn) => fn.call(this, event));\n\t}\n}\n","import { run_all } from './utils.js';\nimport { current_component, set_current_component } from './lifecycle.js';\n\nexport const dirty_components = [];\nexport const intros = { enabled: false };\nexport const binding_callbacks = [];\n\nlet render_callbacks = [];\n\nconst flush_callbacks = [];\n\nconst resolved_promise = /* @__PURE__ */ Promise.resolve();\n\nlet update_scheduled = false;\n\n/** @returns {void} */\nexport function schedule_update() {\n\tif (!update_scheduled) {\n\t\tupdate_scheduled = true;\n\t\tresolved_promise.then(flush);\n\t}\n}\n\n/** @returns {Promise<void>} */\nexport function tick() {\n\tschedule_update();\n\treturn resolved_promise;\n}\n\n/** @returns {void} */\nexport function add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\n/** @returns {void} */\nexport function add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\n\nlet flushidx = 0; // Do *not* move this inside the flush() function\n\n/** @returns {void} */\nexport function flush() {\n\t// Do not reenter flush while dirty components are updated, as this can\n\t// result in an infinite loop. Instead, let the inner flush handle it.\n\t// Reentrancy is ok afterwards for bindings etc.\n\tif (flushidx !== 0) {\n\t\treturn;\n\t}\n\tconst saved_component = current_component;\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\ttry {\n\t\t\twhile (flushidx < dirty_components.length) {\n\t\t\t\tconst component = dirty_components[flushidx];\n\t\t\t\tflushidx++;\n\t\t\t\tset_current_component(component);\n\t\t\t\tupdate(component.$$);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// reset dirty state to not end up in a deadlocked state and then rethrow\n\t\t\tdirty_components.length = 0;\n\t\t\tflushidx = 0;\n\t\t\tthrow e;\n\t\t}\n\t\tset_current_component(null);\n\t\tdirty_components.length = 0;\n\t\tflushidx = 0;\n\t\twhile (binding_callbacks.length) binding_callbacks.pop()();\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\tfor (let i = 0; i < render_callbacks.length; i += 1) {\n\t\t\tconst callback = render_callbacks[i];\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}\n\t\trender_callbacks.length = 0;\n\t} while (dirty_components.length);\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\tupdate_scheduled = false;\n\tseen_callbacks.clear();\n\tset_current_component(saved_component);\n}\n\n/** @returns {void} */\nfunction update($$) {\n\tif ($$.fragment !== null) {\n\t\t$$.update();\n\t\trun_all($$.before_update);\n\t\tconst dirty = $$.dirty;\n\t\t$$.dirty = [-1];\n\t\t$$.fragment && $$.fragment.p($$.ctx, dirty);\n\t\t$$.after_update.forEach(add_render_callback);\n\t}\n}\n\n/**\n * Useful for example to execute remaining `afterUpdate` callbacks before executing `destroy`.\n * @param {Function[]} fns\n * @returns {void}\n */\nexport function flush_render_callbacks(fns) {\n\tconst filtered = [];\n\tconst targets = [];\n\trender_callbacks.forEach((c) => (fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c)));\n\ttargets.forEach((c) => c());\n\trender_callbacks = filtered;\n}\n","import { identity as linear, is_function, noop, run_all } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\nimport { custom_event } from './dom.js';\nimport { add_render_callback } from './scheduler.js';\n\n/**\n * @type {Promise<void> | null}\n */\nlet promise;\n\n/**\n * @returns {Promise<void>}\n */\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\treturn promise;\n}\n\n/**\n * @param {Element} node\n * @param {INTRO | OUTRO | boolean} direction\n * @param {'start' | 'end'} kind\n * @returns {void}\n */\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nconst outroing = new Set();\n\n/**\n * @type {Outro}\n */\nlet outros;\n\n/**\n * @returns {void} */\nexport function group_outros() {\n\toutros = {\n\t\tr: 0,\n\t\tc: [],\n\t\tp: outros // parent group\n\t};\n}\n\n/**\n * @returns {void} */\nexport function check_outros() {\n\tif (!outros.r) {\n\t\trun_all(outros.c);\n\t}\n\toutros = outros.p;\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} [local]\n * @returns {void}\n */\nexport function transition_in(block, local) {\n\tif (block && block.i) {\n\t\toutroing.delete(block);\n\t\tblock.i(local);\n\t}\n}\n\n/**\n * @param {import('./private.js').Fragment} block\n * @param {0 | 1} local\n * @param {0 | 1} [detach]\n * @param {() => void} [callback]\n * @returns {void}\n */\nexport function transition_out(block, local, detach, callback) {\n\tif (block && block.o) {\n\t\tif (outroing.has(block)) return;\n\t\toutroing.add(block);\n\t\toutros.c.push(() => {\n\t\t\toutroing.delete(block);\n\t\t\tif (callback) {\n\t\t\t\tif (detach) block.d(1);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t\tblock.o(local);\n\t} else if (callback) {\n\t\tcallback();\n\t}\n}\n\n/**\n * @type {import('../transition/public.js').TransitionConfig}\n */\nconst null_transition = { duration: 0 };\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ start(): void; invalidate(): void; end(): void; }}\n */\nexport function create_in_transition(node, fn, params) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'in' };\n\tlet config = fn(node, params, options);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\t/**\n\t * @returns {void} */\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick(0, 1);\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tif (task) task.abort();\n\t\trunning = true;\n\t\tadd_render_callback(() => dispatch(node, true, 'start'));\n\t\ttask = loop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(1, 0);\n\t\t\t\t\tdispatch(node, true, 'end');\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn (running = false);\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\tlet started = false;\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\t\t\tstarted = true;\n\t\t\tdelete_rule(node);\n\t\t\tif (is_function(config)) {\n\t\t\t\tconfig = config(options);\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @returns {{ end(reset: any): void; }}\n */\nexport function create_out_transition(node, fn, params) {\n\t/** @type {TransitionOptions} */\n\tconst options = { direction: 'out' };\n\tlet config = fn(node, params, options);\n\tlet running = true;\n\tlet animation_name;\n\tconst group = outros;\n\tgroup.r += 1;\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = now() + delay;\n\t\tconst end_time = start_time + duration;\n\t\tadd_render_callback(() => dispatch(node, false, 'start'));\n\n\t\tif ('inert' in node) {\n\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\tnode.inert = true;\n\t\t}\n\n\t\tloop((now) => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick(0, 1);\n\t\t\t\t\tdispatch(node, false, 'end');\n\t\t\t\t\tif (!--group.r) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.c);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (is_function(config)) {\n\t\twait().then(() => {\n\t\t\t// @ts-ignore\n\t\t\tconfig = config(options);\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && 'inert' in node) {\n\t\t\t\tnode.inert = original_inert_value;\n\t\t\t}\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {TransitionFn} fn\n * @param {any} params\n * @param {boolean} intro\n * @returns {{ run(b: 0 | 1): void; end(): void; }}\n */\nexport function create_bidirectional_transition(node, fn, params, intro) {\n\t/**\n\t * @type {TransitionOptions} */\n\tconst options = { direction: 'both' };\n\tlet config = fn(node, params, options);\n\tlet t = intro ? 0 : 1;\n\n\t/**\n\t * @type {Program | null} */\n\tlet running_program = null;\n\n\t/**\n\t * @type {PendingProgram | null} */\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\t/** @type {boolean} */\n\tlet original_inert_value;\n\n\t/**\n\t * @returns {void} */\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\t/**\n\t * @param {PendingProgram} program\n\t * @param {number} duration\n\t * @returns {Program}\n\t */\n\tfunction init(program, duration) {\n\t\tconst d = /** @type {Program['d']} */ (program.b - t);\n\t\tduration *= Math.abs(d);\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\t/**\n\t * @param {INTRO | OUTRO} b\n\t * @returns {void}\n\t */\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = linear,\n\t\t\ttick = noop,\n\t\t\tcss\n\t\t} = config || null_transition;\n\n\t\t/**\n\t\t * @type {PendingProgram} */\n\t\tconst program = {\n\t\t\tstart: now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\t// @ts-ignore todo: improve typings\n\t\t\tprogram.group = outros;\n\t\t\toutros.r += 1;\n\t\t}\n\n\t\tif ('inert' in node) {\n\t\t\tif (b) {\n\t\t\t\tif (original_inert_value !== undefined) {\n\t\t\t\t\t// aborted/reversed outro  restore previous inert value\n\t\t\t\t\tnode.inert = original_inert_value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toriginal_inert_value = /** @type {HTMLElement} */ (node).inert;\n\t\t\t\tnode.inert = true;\n\t\t\t}\n\t\t}\n\n\t\tif (running_program || pending_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\t\t\tif (b) tick(0, 1);\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\t\t\tloop((now) => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tt,\n\t\t\t\t\t\t\trunning_program.b,\n\t\t\t\t\t\t\trunning_program.duration,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\teasing,\n\t\t\t\t\t\t\tconfig.css\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick((t = running_program.b), 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.r) run_all(running_program.group.c);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t} else if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\treturn {\n\t\trun(b) {\n\t\t\tif (is_function(config)) {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconst opts = { direction: b ? 'in' : 'out' };\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconfig = config(opts);\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\n/** @typedef {1} INTRO */\n/** @typedef {0} OUTRO */\n/** @typedef {{ direction: 'in' | 'out' | 'both' }} TransitionOptions */\n/** @typedef {(node: Element, params: any, options: TransitionOptions) => import('../transition/public.js').TransitionConfig} TransitionFn */\n\n/**\n * @typedef {Object} Outro\n * @property {number} r\n * @property {Function[]} c\n * @property {Object} p\n */\n\n/**\n * @typedef {Object} PendingProgram\n * @property {number} start\n * @property {INTRO|OUTRO} b\n * @property {Outro} [group]\n */\n\n/**\n * @typedef {Object} Program\n * @property {number} a\n * @property {INTRO|OUTRO} b\n * @property {1|-1} d\n * @property {number} duration\n * @property {number} start\n * @property {number} end\n * @property {Outro} [group]\n */\n","import { transition_in, transition_out } from './transitions.js';\nimport { run_all } from './utils.js';\n\n// general each functions:\n\nexport function ensure_array_like(array_like_or_iterator) {\n\treturn array_like_or_iterator?.length !== undefined\n\t\t? array_like_or_iterator\n\t\t: Array.from(array_like_or_iterator);\n}\n\n// keyed each functions:\n\n/** @returns {void} */\nexport function destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\n/** @returns {void} */\nexport function outro_and_destroy_block(block, lookup) {\n\ttransition_out(block, 1, 1, () => {\n\t\tlookup.delete(block.key);\n\t});\n}\n\n/** @returns {void} */\nexport function fix_and_destroy_block(block, lookup) {\n\tblock.f();\n\tdestroy_block(block, lookup);\n}\n\n/** @returns {void} */\nexport function fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\n/** @returns {any[]} */\nexport function update_keyed_each(\n\told_blocks,\n\tdirty,\n\tget_key,\n\tdynamic,\n\tctx,\n\tlist,\n\tlookup,\n\tnode,\n\tdestroy,\n\tcreate_each_block,\n\tnext,\n\tget_context\n) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\tconst updates = [];\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\t// defer updates until all the DOM shuffling is done\n\t\t\tupdates.push(() => block.p(child_ctx, dirty));\n\t\t}\n\t\tnew_lookup.set(key, (new_blocks[i] = block));\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\t/** @returns {void} */\n\tfunction insert(block) {\n\t\ttransition_in(block, 1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t} else if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t} else if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t} else if (did_move.has(old_key)) {\n\t\t\to--;\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\twhile (n) insert(new_blocks[n - 1]);\n\trun_all(updates);\n\treturn new_blocks;\n}\n\n/** @returns {void} */\nexport function validate_each_keys(ctx, list, get_context, get_key) {\n\tconst keys = new Map();\n\tfor (let i = 0; i < list.length; i++) {\n\t\tconst key = get_key(get_context(ctx, list, i));\n\t\tif (keys.has(key)) {\n\t\t\tlet value = '';\n\t\t\ttry {\n\t\t\t\tvalue = `with value '${String(key)}' `;\n\t\t\t} catch (e) {\n\t\t\t\t// can't stringify\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t`Cannot have duplicate keys in a keyed each: Keys at index ${keys.get(\n\t\t\t\t\tkey\n\t\t\t\t)} and ${i} ${value}are duplicates`\n\t\t\t);\n\t\t}\n\t\tkeys.set(key, i);\n\t}\n}\n","import {\n\tadd_render_callback,\n\tflush,\n\tflush_render_callbacks,\n\tschedule_update,\n\tdirty_components\n} from './scheduler.js';\nimport { current_component, set_current_component } from './lifecycle.js';\nimport { blank_object, is_empty, is_function, run, run_all, noop } from './utils.js';\nimport {\n\tchildren,\n\tdetach,\n\tstart_hydrating,\n\tend_hydrating,\n\tget_custom_elements_slots,\n\tinsert,\n\telement,\n\tattr\n} from './dom.js';\nimport { transition_in } from './transitions.js';\n\n/** @returns {void} */\nexport function bind(component, name, callback) {\n\tconst index = component.$$.props[name];\n\tif (index !== undefined) {\n\t\tcomponent.$$.bound[index] = callback;\n\t\tcallback(component.$$.ctx[index]);\n\t}\n}\n\n/** @returns {void} */\nexport function create_component(block) {\n\tblock && block.c();\n}\n\n/** @returns {void} */\nexport function claim_component(block, parent_nodes) {\n\tblock && block.l(parent_nodes);\n}\n\n/** @returns {void} */\nexport function mount_component(component, target, anchor) {\n\tconst { fragment, after_update } = component.$$;\n\tfragment && fragment.m(target, anchor);\n\t// onMount happens before the initial afterUpdate\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = component.$$.on_mount.map(run).filter(is_function);\n\t\t// if the component was destroyed immediately\n\t\t// it will update the `$$.on_destroy` reference to `null`.\n\t\t// the destructured on_destroy may still reference to the old array\n\t\tif (component.$$.on_destroy) {\n\t\t\tcomponent.$$.on_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\tafter_update.forEach(add_render_callback);\n}\n\n/** @returns {void} */\nexport function destroy_component(component, detaching) {\n\tconst $$ = component.$$;\n\tif ($$.fragment !== null) {\n\t\tflush_render_callbacks($$.after_update);\n\t\trun_all($$.on_destroy);\n\t\t$$.fragment && $$.fragment.d(detaching);\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\t$$.on_destroy = $$.fragment = null;\n\t\t$$.ctx = [];\n\t}\n}\n\n/** @returns {void} */\nfunction make_dirty(component, i) {\n\tif (component.$$.dirty[0] === -1) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty.fill(0);\n\t}\n\tcomponent.$$.dirty[(i / 31) | 0] |= 1 << i % 31;\n}\n\n// TODO: Document the other params\n/**\n * @param {SvelteComponent} component\n * @param {import('./public.js').ComponentConstructorOptions} options\n *\n * @param {import('./utils.js')['not_equal']} not_equal Used to compare props and state values.\n * @param {(target: Element | ShadowRoot) => void} [append_styles] Function that appends styles to the DOM when the component is first initialised.\n * This will be the `add_css` function from the compiled component.\n *\n * @returns {void}\n */\nexport function init(\n\tcomponent,\n\toptions,\n\tinstance,\n\tcreate_fragment,\n\tnot_equal,\n\tprops,\n\tappend_styles = null,\n\tdirty = [-1]\n) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\t/** @type {import('./private.js').T$$} */\n\tconst $$ = (component.$$ = {\n\t\tfragment: null,\n\t\tctx: [],\n\t\t// state\n\t\tprops,\n\t\tupdate: noop,\n\t\tnot_equal,\n\t\tbound: blank_object(),\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\ton_disconnect: [],\n\t\tbefore_update: [],\n\t\tafter_update: [],\n\t\tcontext: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty,\n\t\tskip_bound: false,\n\t\troot: options.target || parent_component.$$.root\n\t});\n\tappend_styles && append_styles($$.root);\n\tlet ready = false;\n\t$$.ctx = instance\n\t\t? instance(component, options.props || {}, (i, ret, ...rest) => {\n\t\t\t\tconst value = rest.length ? rest[0] : ret;\n\t\t\t\tif ($$.ctx && not_equal($$.ctx[i], ($$.ctx[i] = value))) {\n\t\t\t\t\tif (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n\t\t\t\t\tif (ready) make_dirty(component, i);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t  })\n\t\t: [];\n\t$$.update();\n\tready = true;\n\trun_all($$.before_update);\n\t// `false` as a special case of no DOM component\n\t$$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\tstart_hydrating();\n\t\t\t// TODO: what is the correct type here?\n\t\t\t// @ts-expect-error\n\t\t\tconst nodes = children(options.target);\n\t\t\t$$.fragment && $$.fragment.l(nodes);\n\t\t\tnodes.forEach(detach);\n\t\t} else {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t$$.fragment && $$.fragment.c();\n\t\t}\n\t\tif (options.intro) transition_in(component.$$.fragment);\n\t\tmount_component(component, options.target, options.anchor);\n\t\tend_hydrating();\n\t\tflush();\n\t}\n\tset_current_component(parent_component);\n}\n\nexport let SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n\tSvelteElement = class extends HTMLElement {\n\t\t/** The Svelte component constructor */\n\t\t$$ctor;\n\t\t/** Slots */\n\t\t$$s;\n\t\t/** The Svelte component instance */\n\t\t$$c;\n\t\t/** Whether or not the custom element is connected */\n\t\t$$cn = false;\n\t\t/** Component props data */\n\t\t$$d = {};\n\t\t/** `true` if currently in the process of reflecting component props back to attributes */\n\t\t$$r = false;\n\t\t/** @type {Record<string, CustomElementPropDefinition>} Props definition (name, reflected, type etc) */\n\t\t$$p_d = {};\n\t\t/** @type {Record<string, Function[]>} Event listeners */\n\t\t$$l = {};\n\t\t/** @type {Map<Function, Function>} Event listener unsubscribe functions */\n\t\t$$l_u = new Map();\n\n\t\tconstructor($$componentCtor, $$slots, use_shadow_dom) {\n\t\t\tsuper();\n\t\t\tthis.$$ctor = $$componentCtor;\n\t\t\tthis.$$s = $$slots;\n\t\t\tif (use_shadow_dom) {\n\t\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t\t}\n\t\t}\n\n\t\taddEventListener(type, listener, options) {\n\t\t\t// We can't determine upfront if the event is a custom event or not, so we have to\n\t\t\t// listen to both. If someone uses a custom event with the same name as a regular\n\t\t\t// browser event, this fires twice - we can't avoid that.\n\t\t\tthis.$$l[type] = this.$$l[type] || [];\n\t\t\tthis.$$l[type].push(listener);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t}\n\t\t\tsuper.addEventListener(type, listener, options);\n\t\t}\n\n\t\tremoveEventListener(type, listener, options) {\n\t\t\tsuper.removeEventListener(type, listener, options);\n\t\t\tif (this.$$c) {\n\t\t\t\tconst unsub = this.$$l_u.get(listener);\n\t\t\t\tif (unsub) {\n\t\t\t\t\tunsub();\n\t\t\t\t\tthis.$$l_u.delete(listener);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tasync connectedCallback() {\n\t\t\tthis.$$cn = true;\n\t\t\tif (!this.$$c) {\n\t\t\t\t// We wait one tick to let possible child slot elements be created/mounted\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tif (!this.$$cn || this.$$c) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfunction create_slot(name) {\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tlet node;\n\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t\tc: function create() {\n\t\t\t\t\t\t\t\tnode = element('slot');\n\t\t\t\t\t\t\t\tif (name !== 'default') {\n\t\t\t\t\t\t\t\t\tattr(node, 'name', name);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * @param {HTMLElement} target\n\t\t\t\t\t\t\t * @param {HTMLElement} [anchor]\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tm: function mount(target, anchor) {\n\t\t\t\t\t\t\t\tinsert(target, node, anchor);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\td: function destroy(detaching) {\n\t\t\t\t\t\t\t\tif (detaching) {\n\t\t\t\t\t\t\t\t\tdetach(node);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treturn obj;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tconst $$slots = {};\n\t\t\t\tconst existing_slots = get_custom_elements_slots(this);\n\t\t\t\tfor (const name of this.$$s) {\n\t\t\t\t\tif (name in existing_slots) {\n\t\t\t\t\t\t$$slots[name] = [create_slot(name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\t// this.$$data takes precedence over this.attributes\n\t\t\t\t\tconst name = this.$$g_p(attribute.name);\n\t\t\t\t\tif (!(name in this.$$d)) {\n\t\t\t\t\t\tthis.$$d[name] = get_custom_element_value(name, attribute.value, this.$$p_d, 'toProp');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Port over props that were set programmatically before ce was initialized\n\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\tif (!(key in this.$$d) && this[key] !== undefined) {\n\t\t\t\t\t\tthis.$$d[key] = this[key]; // don't transform, these were set through JavaScript\n\t\t\t\t\t\tdelete this[key]; // remove the property that shadows the getter/setter\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$c = new this.$$ctor({\n\t\t\t\t\ttarget: this.shadowRoot || this,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\t...this.$$d,\n\t\t\t\t\t\t$$slots,\n\t\t\t\t\t\t$$scope: {\n\t\t\t\t\t\t\tctx: []\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Reflect component props as attributes\n\t\t\t\tconst reflect_attributes = () => {\n\t\t\t\t\tthis.$$r = true;\n\t\t\t\t\tfor (const key in this.$$p_d) {\n\t\t\t\t\t\tthis.$$d[key] = this.$$c.$$.ctx[this.$$c.$$.props[key]];\n\t\t\t\t\t\tif (this.$$p_d[key].reflect) {\n\t\t\t\t\t\t\tconst attribute_value = get_custom_element_value(\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tthis.$$d[key],\n\t\t\t\t\t\t\t\tthis.$$p_d,\n\t\t\t\t\t\t\t\t'toAttribute'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (attribute_value == null) {\n\t\t\t\t\t\t\t\tthis.removeAttribute(this.$$p_d[key].attribute || key);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setAttribute(this.$$p_d[key].attribute || key, attribute_value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.$$r = false;\n\t\t\t\t};\n\t\t\t\tthis.$$c.$$.after_update.push(reflect_attributes);\n\t\t\t\treflect_attributes(); // once initially because after_update is added too late for first render\n\n\t\t\t\tfor (const type in this.$$l) {\n\t\t\t\t\tfor (const listener of this.$$l[type]) {\n\t\t\t\t\t\tconst unsub = this.$$c.$on(type, listener);\n\t\t\t\t\t\tthis.$$l_u.set(listener, unsub);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.$$l = {};\n\t\t\t}\n\t\t}\n\n\t\t// We don't need this when working within Svelte code, but for compatibility of people using this outside of Svelte\n\t\t// and setting attributes through setAttribute etc, this is helpful\n\t\tattributeChangedCallback(attr, _oldValue, newValue) {\n\t\t\tif (this.$$r) return;\n\t\t\tattr = this.$$g_p(attr);\n\t\t\tthis.$$d[attr] = get_custom_element_value(attr, newValue, this.$$p_d, 'toProp');\n\t\t\tthis.$$c?.$set({ [attr]: this.$$d[attr] });\n\t\t}\n\n\t\tdisconnectedCallback() {\n\t\t\tthis.$$cn = false;\n\t\t\t// In a microtask, because this could be a move within the DOM\n\t\t\tPromise.resolve().then(() => {\n\t\t\t\tif (!this.$$cn && this.$$c) {\n\t\t\t\t\tthis.$$c.$destroy();\n\t\t\t\t\tthis.$$c = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t$$g_p(attribute_name) {\n\t\t\treturn (\n\t\t\t\tObject.keys(this.$$p_d).find(\n\t\t\t\t\t(key) =>\n\t\t\t\t\t\tthis.$$p_d[key].attribute === attribute_name ||\n\t\t\t\t\t\t(!this.$$p_d[key].attribute && key.toLowerCase() === attribute_name)\n\t\t\t\t) || attribute_name\n\t\t\t);\n\t\t}\n\t};\n}\n\n/**\n * @param {string} prop\n * @param {any} value\n * @param {Record<string, CustomElementPropDefinition>} props_definition\n * @param {'toAttribute' | 'toProp'} [transform]\n */\nfunction get_custom_element_value(prop, value, props_definition, transform) {\n\tconst type = props_definition[prop]?.type;\n\tvalue = type === 'Boolean' && typeof value !== 'boolean' ? value != null : value;\n\tif (!transform || !props_definition[prop]) {\n\t\treturn value;\n\t} else if (transform === 'toAttribute') {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value == null ? null : JSON.stringify(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value ? '' : null;\n\t\t\tcase 'Number':\n\t\t\t\treturn value == null ? null : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t} else {\n\t\tswitch (type) {\n\t\t\tcase 'Object':\n\t\t\tcase 'Array':\n\t\t\t\treturn value && JSON.parse(value);\n\t\t\tcase 'Boolean':\n\t\t\t\treturn value; // conversion already handled above\n\t\t\tcase 'Number':\n\t\t\t\treturn value != null ? +value : value;\n\t\t\tdefault:\n\t\t\t\treturn value;\n\t\t}\n\t}\n}\n\n/**\n * @internal\n *\n * Turn a Svelte component into a custom element.\n * @param {import('./public.js').ComponentType} Component  A Svelte component constructor\n * @param {Record<string, CustomElementPropDefinition>} props_definition  The props to observe\n * @param {string[]} slots  The slots to create\n * @param {string[]} accessors  Other accessors besides the ones for props the component has\n * @param {boolean} use_shadow_dom  Whether to use shadow DOM\n * @param {(ce: new () => HTMLElement) => new () => HTMLElement} [extend]\n */\nexport function create_custom_element(\n\tComponent,\n\tprops_definition,\n\tslots,\n\taccessors,\n\tuse_shadow_dom,\n\textend\n) {\n\tlet Class = class extends SvelteElement {\n\t\tconstructor() {\n\t\t\tsuper(Component, slots, use_shadow_dom);\n\t\t\tthis.$$p_d = props_definition;\n\t\t}\n\t\tstatic get observedAttributes() {\n\t\t\treturn Object.keys(props_definition).map((key) =>\n\t\t\t\t(props_definition[key].attribute || key).toLowerCase()\n\t\t\t);\n\t\t}\n\t};\n\tObject.keys(props_definition).forEach((prop) => {\n\t\tObject.defineProperty(Class.prototype, prop, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c && prop in this.$$c ? this.$$c[prop] : this.$$d[prop];\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tvalue = get_custom_element_value(prop, value, props_definition);\n\t\t\t\tthis.$$d[prop] = value;\n\t\t\t\tthis.$$c?.$set({ [prop]: value });\n\t\t\t}\n\t\t});\n\t});\n\taccessors.forEach((accessor) => {\n\t\tObject.defineProperty(Class.prototype, accessor, {\n\t\t\tget() {\n\t\t\t\treturn this.$$c?.[accessor];\n\t\t\t}\n\t\t});\n\t});\n\tif (extend) {\n\t\t// @ts-expect-error - assigning here is fine\n\t\tClass = extend(Class);\n\t}\n\tComponent.element = /** @type {any} */ (Class);\n\treturn Class;\n}\n\n/**\n * Base class for Svelte components. Used when dev=false.\n *\n * @template {Record<string, any>} [Props=any]\n * @template {Record<string, any>} [Events=any]\n */\nexport class SvelteComponent {\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$ = undefined;\n\t/**\n\t * ### PRIVATE API\n\t *\n\t * Do not use, may change at any time\n\t *\n\t * @type {any}\n\t */\n\t$$set = undefined;\n\n\t/** @returns {void} */\n\t$destroy() {\n\t\tdestroy_component(this, 1);\n\t\tthis.$destroy = noop;\n\t}\n\n\t/**\n\t * @template {Extract<keyof Events, string>} K\n\t * @param {K} type\n\t * @param {((e: Events[K]) => void) | null | undefined} callback\n\t * @returns {() => void}\n\t */\n\t$on(type, callback) {\n\t\tif (!is_function(callback)) {\n\t\t\treturn noop;\n\t\t}\n\t\tconst callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n\t\tcallbacks.push(callback);\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t/**\n\t * @param {Partial<Props>} props\n\t * @returns {void}\n\t */\n\t$set(props) {\n\t\tif (this.$$set && !is_empty(props)) {\n\t\t\tthis.$$.skip_bound = true;\n\t\t\tthis.$$set(props);\n\t\t\tthis.$$.skip_bound = false;\n\t\t}\n\t}\n}\n\n/**\n * @typedef {Object} CustomElementPropDefinition\n * @property {string} [attribute]\n * @property {boolean} [reflect]\n * @property {'String'|'Boolean'|'Number'|'Array'|'Object'} [type]\n */\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","import { SvelteComponent, init, safe_not_equal, ensure_array_like, empty, insert, noop as noop$1, detach, destroy_each, component_subscribe, set_store_value, element, text, attr, append, listen as listen$1, set_data, is_function, action_destroyer, run_all, transition_in, group_outros, check_outros, transition_out, space, create_component, mount_component, destroy_component, construct_svelte_component, set_style } from 'svelte/internal';\nimport { tick, getContext, setContext, beforeUpdate, afterUpdate } from 'svelte';\nimport { derived, get, writable, readable } from 'svelte/store';\n\nfunction keyEnter(fn) {\n    return function (e) {\n        return e.key === 'Enter' || e.key === ' ' && !e.preventDefault()  // prevent page scroll down\n            ? fn.call(this, e)\n            : undefined;\n    };\n}\n\nfunction setContent(node, content) {\n    let actions = {\n        update(content) {\n            if (typeof content == 'string') {\n                node.innerText = content;\n            } else if (content?.domNodes) {\n                node.replaceChildren(...content.domNodes);\n            } else if (content?.html) {\n                node.innerHTML = content.html;\n            }\n        }\n    };\n    actions.update(content);\n\n    return actions;\n}\n\n/** Dispatch event occurred outside of node */\nfunction outsideEvent(node, type) {\n\n    const handlePointerDown = jsEvent => {\n        if (node && !node.contains(jsEvent.target)) {\n            node.dispatchEvent(\n                new CustomEvent(type + 'outside', {detail: {jsEvent}})\n            );\n        }\n    };\n\n    document.addEventListener(type, handlePointerDown, true);\n\n    return {\n        destroy() {\n            document.removeEventListener(type, handlePointerDown, true);\n        }\n    };\n}\n\nconst DAY_IN_SECONDS = 86400;\n\nfunction createDate(input = undefined) {\n    if (input !== undefined) {\n        return input instanceof Date ? _fromLocalDate(input) : _fromISOString(input);\n    }\n\n    return _fromLocalDate(new Date());\n}\n\nfunction createDuration(input) {\n    if (typeof input === 'number') {\n        input = {seconds: input};\n    } else if (typeof input === 'string') {\n        // Expected format hh[:mm[:ss]]\n        let seconds = 0, exp = 2;\n        for (let part of input.split(':', 3)) {\n            seconds += parseInt(part, 10) * Math.pow(60, exp--);\n        }\n        input = {seconds};\n    } else if (input instanceof Date) {\n        input = {hours: input.getUTCHours(), minutes: input.getUTCMinutes(), seconds: input.getUTCSeconds()};\n    }\n\n    let weeks = input.weeks || input.week || 0;\n\n    return {\n        years: input.years || input.year || 0,\n        months: input.months || input.month || 0,\n        days: weeks * 7 + (input.days || input.day || 0),\n        seconds: (input.hours || input.hour || 0) * 60 * 60 +\n            (input.minutes || input.minute || 0) * 60 +\n            (input.seconds || input.second || 0),\n        inWeeks: !!weeks\n    };\n}\n\nfunction cloneDate(date) {\n    return new Date(date.getTime());\n}\n\nfunction addDuration(date, duration, x = 1) {\n    date.setUTCFullYear(date.getUTCFullYear() + x * duration.years);\n    let month = date.getUTCMonth() + x * duration.months;\n    date.setUTCMonth(month);\n    month %= 12;\n    if (month < 0) {\n        month += 12;\n    }\n    while (date.getUTCMonth() !== month) {\n        subtractDay(date);\n    }\n    date.setUTCDate(date.getUTCDate() + x * duration.days);\n    date.setUTCSeconds(date.getUTCSeconds() + x * duration.seconds);\n\n    return date;\n}\n\nfunction subtractDuration(date, duration, x = 1) {\n    return addDuration(date, duration, -x);\n}\n\nfunction addDay(date, x = 1) {\n    date.setUTCDate(date.getUTCDate() + x);\n\n    return date;\n}\n\nfunction subtractDay(date, x = 1) {\n    return addDay(date, -x);\n}\n\nfunction setMidnight(date) {\n    date.setUTCHours(0, 0, 0, 0);\n\n    return date;\n}\n\nfunction toLocalDate(date) {\n    return new Date(\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        date.getUTCMinutes(),\n        date.getUTCSeconds()\n    );\n}\n\nfunction toISOString(date, len = 19) {\n    return date.toISOString().substring(0, len);\n}\n\nfunction datesEqual(date1, ...dates2) {\n    return dates2.every(date2 => date1.getTime() === date2.getTime());\n}\n\nfunction nextClosestDay(date, day) {\n    let diff = day - date.getUTCDay();\n    date.setUTCDate(date.getUTCDate() + (diff >= 0 ? diff : diff + 7));\n    return date;\n}\n\nfunction prevClosestDay(date, day) {\n    let diff = day - date.getUTCDay();\n    date.setUTCDate(date.getUTCDate() + (diff <= 0 ? diff : diff - 7));\n    return date;\n}\n\n/**\n * Check whether given date is string which contains no time part\n  */\nfunction noTimePart(date) {\n    return typeof date === 'string' && date.length <= 10;\n}\n\n/**\n * Copy time from one date to another\n */\nfunction copyTime(toDate, fromDate) {\n    toDate.setUTCHours(fromDate.getUTCHours(), fromDate.getUTCMinutes(), fromDate.getUTCSeconds(), 0);\n\n    return toDate;\n}\n\n/**\n * Get duration value in seconds\n */\nfunction toSeconds(duration) {\n    return duration.seconds;\n}\n\n/**\n * Move the date forward (when pressing the next button)\n */\nfunction nextDate(date, duration) {\n    addDuration(date, duration);\n    return date;\n}\n\n/**\n * Move the date backward (when pressing the prev button)\n */\nfunction prevDate(date, duration, hiddenDays) {\n    subtractDuration(date, duration);\n    if (hiddenDays.length && hiddenDays.length < 7) {\n        while (hiddenDays.includes(date.getUTCDay())) {\n            subtractDay(date);\n        }\n    }\n    return date;\n}\n\n/**\n * For a given date, get its week number\n *  - ISO @see https://stackoverflow.com/questions/6117814/get-week-of-year-in-javascript-like-in-php\n *  - Western @see https://en.wikipedia.org/wiki/Week#Other_week_numbering_systems\n */\nfunction getWeekNumber(date, firstDay) {\n    // Copy date so don't modify original\n    date = cloneDate(date);\n    if (firstDay == 0) {  // Western\n        // Set to nearest Saturday: current date + 6 - current day number\n        date.setUTCDate(date.getUTCDate() + 6 - date.getUTCDay());\n    } else {  // ISO\n        // Set to nearest Thursday: current date + 4 - current day number\n        // Make Sunday's day number 7\n        date.setUTCDate(date.getUTCDate() + 4 - (date.getUTCDay() || 7));\n    }\n    // Get first day of year\n    let yearStart = new Date(Date.UTC(date.getUTCFullYear(),0,1));\n    // Calculate full weeks to `date`\n    return Math.ceil((((date - yearStart) / 1000 / DAY_IN_SECONDS) + 1) / 7);\n}\n\n/**\n * Private functions\n */\n\nfunction _fromLocalDate(date) {\n    return new Date(Date.UTC(\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds()\n    ));\n}\n\nfunction _fromISOString(str) {\n    const parts = str.match(/\\d+/g);\n    return new Date(Date.UTC(\n        Number(parts[0]),\n        Number(parts[1]) - 1,\n        Number(parts[2]),\n        Number(parts[3] || 0),\n        Number(parts[4] || 0),\n        Number(parts[5] || 0)\n    ));\n}\n\nfunction assign(...args) {\n    return Object.assign(...args);\n}\n\nfunction keys(object) {\n    return Object.keys(object);\n}\n\nfunction floor(value) {\n    return Math.floor(value);\n}\n\nfunction ceil(value) {\n    return Math.ceil(value);\n}\n\nfunction min(...args) {\n    return Math.min(...args);\n}\n\nfunction max(...args) {\n    return Math.max(...args);\n}\n\nfunction symbol() {\n    return Symbol('ec');\n}\n\nfunction isArray(value) {\n    return Array.isArray(value);\n}\n\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n\nfunction run(fn) {\n    return fn();\n}\n\nfunction runAll(fns) {\n    fns.forEach(run);\n}\n\nfunction noop() {}\n\nconst identity = (x) => x;\n\nfunction debounce(fn, handle, queueStore) {\n    queueStore.update(queue => queue.set(handle, fn));\n}\n\nfunction flushDebounce(queue) {\n    runAll(queue);\n    queue.clear();\n}\n\nfunction task(fn, handle, tasks) {\n    handle ??= fn;\n    if (!tasks.has(handle)) {\n        tasks.set(handle, setTimeout(() => {\n            tasks.delete(handle);\n            fn();\n        }));\n    }\n}\n\nlet payloadProp = symbol();\nfunction setPayload(obj, payload) {\n    obj[payloadProp] = payload;\n}\n\nfunction hasPayload(obj) {\n    return !!obj?.[payloadProp];\n}\n\nfunction getPayload(obj) {\n    return obj[payloadProp];\n}\n\nfunction createElement(tag, className, content, attrs = []) {\n    let el = document.createElement(tag);\n    el.className = className;\n    if (typeof content == 'string') {\n        el.innerText = content;\n    } else if (content.domNodes) {\n        el.replaceChildren(...content.domNodes);\n    } else if (content.html) {\n        el.innerHTML = content.html;\n    }\n    for (let attr of attrs) {\n        el.setAttribute(...attr);\n    }\n    return el;\n}\n\nfunction hasYScroll(el) {\n    return el.scrollHeight > el.clientHeight;\n}\n\nfunction rect(el) {\n    return el.getBoundingClientRect();\n}\n\nfunction ancestor(el, up) {\n    while (up--) {\n        el = el.parentElement;\n    }\n    return el;\n}\n\nfunction height(el) {\n    return rect(el).height;\n}\n\nfunction getElementWithPayload(x, y, root = document) {\n    for (let el of root.elementsFromPoint(x, y)) {\n        if (hasPayload(el)) {\n            return el;\n        }\n        /** @see https://github.com/vkurko/calendar/issues/142 */\n        if (el.shadowRoot) {\n            let shadowEl = getElementWithPayload(x, y, el.shadowRoot);\n            if (shadowEl) {\n                return shadowEl;\n            }\n        }\n    }\n    return null;\n}\n\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\n\nfunction createView(view, _viewTitle, _currentRange, _activeRange) {\n    return {\n        type: view,\n        title: _viewTitle,\n        currentStart: _currentRange.start,\n        currentEnd: _currentRange.end,\n        activeStart: _activeRange.start,\n        activeEnd: _activeRange.end,\n        calendar: undefined\n    };\n}\n\nfunction toViewWithLocalDates(view) {\n    view = assign({}, view);\n    view.currentStart = toLocalDate(view.currentStart);\n    view.currentEnd = toLocalDate(view.currentEnd);\n    view.activeStart = toLocalDate(view.activeStart);\n    view.activeEnd = toLocalDate(view.activeEnd);\n\n    return view;\n}\n\nfunction listView(view) {\n    return view.startsWith('list');\n}\n\nfunction timelineView(view) {\n    return view.includes('Timeline');\n}\n\nlet eventId = 1;\nfunction createEvents(input) {\n    return input.map(event => {\n        let result = {\n            id: 'id' in event ? String(event.id) : `{generated-${eventId++}}`,\n            resourceIds: toArrayProp(event, 'resourceId').map(String),\n            allDay: event.allDay ?? (noTimePart(event.start) && noTimePart(event.end)),\n            start: createDate(event.start),\n            end: createDate(event.end),\n            title: event.title ?? '',\n            editable: event.editable,\n            startEditable: event.startEditable,\n            durationEditable: event.durationEditable,\n            display: event.display ?? 'auto',\n            extendedProps: event.extendedProps ?? {},\n            backgroundColor: event.backgroundColor ?? event.color,\n            textColor: event.textColor,\n            classNames: toArrayProp(event, 'className'),\n            styles: toArrayProp(event, 'style')\n        };\n\n        if (result.allDay) {\n            // Make sure all-day events start and end at midnight\n            setMidnight(result.start);\n            let end = cloneDate(result.end);\n            setMidnight(result.end);\n            if (\n                !datesEqual(result.end, end) ||\n                datesEqual(result.end, result.start)  /** @see https://github.com/vkurko/calendar/issues/50 */\n            ) {\n                addDay(result.end);\n            }\n        }\n\n        return result;\n    });\n}\n\nfunction toArrayProp(input, propName) {\n    let result = input[propName + 's'] ?? input[propName] ?? [];\n    return isArray(result) ? result : [result];\n}\n\nfunction createEventSources(input) {\n    return input.map(source => ({\n        events: source.events,\n        url: (source.url && source.url.trimEnd('&')) || '',\n        method: (source.method && source.method.toUpperCase()) || 'GET',\n        extraParams: source.extraParams || {}\n    }));\n}\n\nfunction createEventChunk(event, start, end) {\n    let chunk = {\n        start: event.start > start ? event.start : start,\n        end: event.end < end ? event.end : end,\n        event\n    };\n    chunk.zeroDuration = datesEqual(chunk.start, chunk.end);\n\n    return chunk;\n}\n\nfunction sortEventChunks(chunks) {\n    // Sort by start date (all-day events always on top)\n    chunks.sort((a, b) => a.start - b.start || b.event.allDay - a.event.allDay);\n}\n\nfunction createEventContent(chunk, displayEventEnd, eventContent, theme, _intlEventTime, _view) {\n    let timeText = _intlEventTime.formatRange(\n        chunk.start,\n        displayEventEnd && chunk.event.display !== 'pointer' && !chunk.zeroDuration\n            ? copyTime(cloneDate(chunk.start), chunk.end)  // make Intl.formatRange output only the time part\n            : chunk.start\n    );\n    let content;\n\n    if (eventContent) {\n        content = isFunction(eventContent)\n            ? eventContent({\n                event: toEventWithLocalDates(chunk.event),\n                timeText,\n                view: toViewWithLocalDates(_view)\n            })\n            : eventContent;\n    }\n\n    if (content === undefined) {\n        let domNodes;\n        switch (chunk.event.display) {\n            case 'background':\n                domNodes = [];\n                break;\n            case 'pointer':\n                domNodes = [createTimeElement(timeText, chunk, theme)];\n                break;\n            default:\n                domNodes = [\n                    ...chunk.event.allDay ? [] : [createTimeElement(timeText, chunk, theme)],\n                    createElement('h4', theme.eventTitle, chunk.event.title)\n                ];\n        }\n        content = {domNodes};\n    }\n\n    return [timeText, content];\n}\n\nfunction createTimeElement(timeText, chunk, theme) {\n    return createElement(\n        'time',\n        theme.eventTime,\n        timeText,\n        [['datetime', toISOString(chunk.start)]]\n    );\n}\n\nfunction createEventClasses(eventClassNames, event, _view) {\n    let result = event.classNames;\n    if (eventClassNames) {\n        if (isFunction(eventClassNames)) {\n            eventClassNames = eventClassNames({\n                event: toEventWithLocalDates(event),\n                view: toViewWithLocalDates(_view)\n            });\n        }\n        result = [\n            ...isArray(eventClassNames) ? eventClassNames : [eventClassNames],\n            ...result\n        ];\n    }\n    return result;\n}\n\nfunction toEventWithLocalDates(event) {\n    return _cloneEvent(event, toLocalDate);\n}\n\nfunction cloneEvent(event) {\n    return _cloneEvent(event, cloneDate);\n}\n\nfunction _cloneEvent(event, dateFn) {\n    event = assign({}, event);\n    event.start = dateFn(event.start);\n    event.end = dateFn(event.end);\n\n    return event;\n}\n\n/**\n * Prepare event chunks for month view and all-day slot in week view\n */\nfunction prepareEventChunks(chunks, hiddenDays) {\n    let longChunks = {};\n\n    if (chunks.length) {\n        sortEventChunks(chunks);\n\n        let prevChunk;\n        for (let chunk of chunks) {\n            let dates = [];\n            let date = setMidnight(cloneDate(chunk.start));\n            while (chunk.end > date) {\n                if (!hiddenDays.includes(date.getUTCDay())) {\n                    dates.push(cloneDate(date));\n                    if (dates.length > 1) {\n                        let key = date.getTime();\n                        if (longChunks[key]) {\n                            longChunks[key].chunks.push(chunk);\n                        } else {\n                            longChunks[key] = {\n                                sorted: false,\n                                chunks: [chunk]\n                            };\n                        }\n                    }\n                }\n                addDay(date);\n            }\n            if (dates.length) {\n                chunk.date = dates[0];\n                chunk.days = dates.length;\n                chunk.dates = dates;\n                // Adjust the start and end dates of the chunk if hidden days affected them\n                if (chunk.start < dates[0]) {\n                    chunk.start = dates[0];\n                }\n                let maxEnd = addDay(cloneDate(dates.at(-1)));\n                if (chunk.end > maxEnd) {\n                    chunk.end = maxEnd;\n                }\n            } else {\n                chunk.date = setMidnight(cloneDate(chunk.start));\n                chunk.days = 1;\n                chunk.dates = [chunk.date];\n            }\n\n            if (prevChunk && datesEqual(prevChunk.date, chunk.date)) {\n                chunk.prev = prevChunk;\n            }\n            prevChunk = chunk;\n        }\n    }\n\n    return longChunks;\n}\n\nfunction repositionEvent(chunk, longChunks, height) {\n    chunk.top = 0;\n    if (chunk.prev) {\n        chunk.top = chunk.prev.bottom + 1;\n    }\n    chunk.bottom = chunk.top + height;\n    let margin = 1;\n    let key = chunk.date.getTime();\n    if (longChunks[key]) {\n        if (!longChunks[key].sorted) {\n            longChunks[key].chunks.sort((a, b) => a.top - b.top);\n            longChunks[key].sorted = true;\n        }\n        for (let longChunk of longChunks[key].chunks) {\n            if (chunk.top < longChunk.bottom && chunk.bottom > longChunk.top) {\n                let offset = longChunk.bottom - chunk.top + 1;\n                margin += offset;\n                chunk.top += offset;\n                chunk.bottom += offset;\n            }\n        }\n    }\n\n    return margin;\n}\n\nfunction runReposition(refs, data) {\n    refs.length = data.length;\n    let result = [];\n    for (let ref of refs) {\n        result.push(ref?.reposition?.());\n    }\n    return result;\n}\n\n/**\n * Check whether the event intersects with the given date range and resources\n * @param event\n * @param start\n * @param end\n * @param resources\n * @return boolean\n */\nfunction eventIntersects(event, start, end, resources) {\n    if (event.start < end && event.end > start) {\n        if (resources) {\n            if (!isArray(resources)) {\n                resources = [resources];\n            }\n            return resources.some(resource => event.resourceIds.includes(resource.id));\n        }\n        return true;\n    }\n    return false;\n}\n\nfunction helperEvent(display) {\n    return previewEvent(display) || ghostEvent(display) || pointerEvent(display);\n}\n\nfunction bgEvent(display) {\n    return display === 'background';\n}\n\nfunction previewEvent(display) {\n    return display === 'preview';\n}\n\nfunction ghostEvent(display) {\n    return display === 'ghost';\n}\n\nfunction pointerEvent(display) {\n    return display === 'pointer';\n}\n\nfunction btnTextDay(text) {\n    return btnText(text, 'day');\n}\n\nfunction btnTextWeek(text) {\n    return btnText(text, 'week');\n}\n\nfunction btnTextMonth(text) {\n    return btnText(text, 'month');\n}\n\nfunction btnTextYear(text) {\n    return btnText(text, 'year');\n}\n\nfunction btnText(text, period) {\n    return {\n        ...text,\n        next: 'Next ' + period,\n        prev: 'Previous ' + period\n    };\n}\n\nfunction themeView(view) {\n    return theme => ({...theme, view});\n}\n\nfunction createDateRange(input) {\n    let start, end;\n    if (input) {\n        ({start, end} = input);\n        if (start) {\n            start = setMidnight(createDate(start));\n        }\n        if (end) {\n            end = setMidnight(createDate(end));\n        }\n    }\n    return {start, end};\n}\n\nfunction outsideRange(date, range) {\n    return range.start && date < range.start || range.end && date > range.end;\n}\n\nfunction limitToRange(date, range) {\n    if (range.start && date < range.start) {\n        date = range.start;\n    }\n    if (range.end && date > range.end) {\n        date = range.end;\n    }\n    return date;\n}\n\nfunction createResources(input) {\n    let result = [];\n    _createResources(input, 0, result);\n    return result;\n}\n\nfunction _createResources(input, level, flat) {\n    let result = [];\n    for (let item of input) {\n        let resource = createResource(item);\n        result.push(resource);\n        flat.push(resource);\n        let payload = {\n            level,\n            children: [],\n            expanded: true,\n            hidden: false\n        };\n        setPayload(resource, payload);\n        if (item.children) {\n            payload.children = _createResources(item.children, level + 1, flat);\n        }\n    }\n    return result;\n}\n\nfunction createResource(input) {\n    return {\n        id: String(input.id),\n        title: input.title || '',\n        eventBackgroundColor: input.eventBackgroundColor,\n        eventTextColor: input.eventTextColor,\n        extendedProps: input.extendedProps ?? {}\n    };\n}\n\nfunction resourceBackgroundColor(event, resources) {\n    return findResource(event, resources)?.eventBackgroundColor;\n}\n\nfunction resourceTextColor(event, resources) {\n    return findResource(event, resources)?.eventTextColor;\n}\n\nfunction findResource(event, resources) {\n    return resources.find(resource => event.resourceIds.includes(resource.id));\n}\n\nfunction intl(locale, format) {\n    return derived([locale, format], ([$locale, $format]) => {\n        let intl = isFunction($format)\n            ? {format: $format}\n            : new Intl.DateTimeFormat($locale, $format);\n        return {\n            format: date => intl.format(toLocalDate(date))\n        };\n    });\n}\n\nfunction intlRange(locale, format) {\n    return derived([locale, format], ([$locale, $format]) => {\n        let formatRange;\n        if (isFunction($format)) {\n            formatRange = $format;\n        } else {\n            let intl = new Intl.DateTimeFormat($locale, $format);\n            formatRange = (start, end) => {\n                if (start <= end) {\n                    return intl.formatRange(start, end);\n                } else {\n                    // In iOS 16 and older, intl.formatRange() throws an exception if the start date is later than the end date.\n                    // Therefore, we first swap the parameters, and then swap the resulting parts.\n                    /** @see https://github.com/vkurko/calendar/issues/227 */\n                    let parts = intl.formatRangeToParts(end, start);\n                    let result = '';\n                    let sources = ['startRange', 'endRange'];\n                    let processed = [false, false];\n                    for (let part of parts) {\n                        let i = sources.indexOf(part.source);\n                        if (i >= 0) {\n                            if (!processed[i]) {\n                                result += _getParts(sources[1 - i], parts);\n                                processed[i] = true;\n                            }\n                        } else {\n                            result += part.value;\n                        }\n                    }\n                    return result;\n                }\n            };\n        }\n        return {\n            formatRange: (start, end) => formatRange(toLocalDate(start), toLocalDate(end))\n        };\n    });\n}\n\nfunction _getParts(source, parts) {\n    let result = '';\n    for (let part of parts) {\n        if (part.source == source) {\n            result += part.value;\n        }\n    }\n    return result;\n}\n\nfunction viewResources(state) {\n    return derived(\n        [state.resources, state.filterResourcesWithEvents, state._events, state._activeRange],\n        ([$resources, $filterResourcesWithEvents, $_events, $_activeRange]) => {\n            let result = $resources.filter(resource => !getPayload(resource).hidden);\n\n            if ($filterResourcesWithEvents) {\n                result = $resources.filter(resource => {\n                    for (let event of $_events) {\n                        if (\n                            event.display !== 'background' &&\n                            event.resourceIds.includes(resource.id) &&\n                            event.start < $_activeRange.end &&\n                            event.end > $_activeRange.start\n                        ) {\n                            return true;\n                        }\n                    }\n                    return false;\n                });\n            }\n\n            if (!result.length) {\n                result = createResources([{}]);\n            }\n\n            return result;\n        }\n    );\n}\n\nfunction createTimes(date, $slotDuration, $slotLabelInterval, $_slotTimeLimits, $_intlSlotLabel) {\n    date = cloneDate(date);\n    let times = [];\n    let end = cloneDate(date);\n    addDuration(date, $_slotTimeLimits.min);\n    addDuration(end, $_slotTimeLimits.max);\n    // Labels\n    if ($slotLabelInterval === undefined) {\n        $slotLabelInterval = $slotDuration.seconds < 3600\n            ? createDuration($slotDuration.seconds * 2)\n            : $slotDuration;\n    }\n    let showAll = $slotLabelInterval.seconds <= 0;\n    let label;\n    if (!showAll) {\n        label = cloneDate(date);\n    }\n    // Build times\n    while (date < end) {\n        times.push([\n            toISOString(date),\n            $_intlSlotLabel.format(date),\n            showAll || (times.length && date >= label)\n        ]);\n        while (!showAll && date >= label) {\n            addDuration(label, $slotLabelInterval);\n        }\n        addDuration(date, $slotDuration);\n    }\n\n    return times;\n}\n\nfunction createSlotTimeLimits($slotMinTime, $slotMaxTime, $flexibleSlotTimeLimits, $_viewDates, $_events) {\n    let min$1 = createDuration($slotMinTime);\n    let max$1 = createDuration($slotMaxTime);\n\n    if ($flexibleSlotTimeLimits) {\n        // If slotMaxTime goes past midnight, then extend it back by a maximum of 24 hours\n        let minMin = createDuration(min(toSeconds(min$1), max(0, toSeconds(max$1) - DAY_IN_SECONDS)));\n        let maxMax = createDuration(max(toSeconds(max$1), toSeconds(minMin) + DAY_IN_SECONDS));\n        let filter = isFunction($flexibleSlotTimeLimits?.eventFilter)\n            ? $flexibleSlotTimeLimits.eventFilter\n            : event => !bgEvent(event.display);\n        loop: for (let date of $_viewDates) {\n            let start = addDuration(cloneDate(date), min$1);\n            let end = addDuration(cloneDate(date), max$1);\n            let minStart = addDuration(cloneDate(date), minMin);\n            let maxEnd = addDuration(cloneDate(date), maxMax);\n            for (let event of $_events) {\n                if (!event.allDay && filter(event) && event.start < maxEnd && event.end > minStart) {\n                    if (event.start < start) {\n                        let seconds = max((event.start - date) / 1000, toSeconds(minMin));\n                        if (seconds < toSeconds(min$1)) {\n                            min$1.seconds = seconds;\n                        }\n                    }\n                    if (event.end > end) {\n                        let seconds = min((event.end - date) / 1000, toSeconds(maxMax));\n                        if (seconds > toSeconds(max$1)) {\n                            max$1.seconds = seconds;\n                        }\n                    }\n                    if (toSeconds(min$1) === toSeconds(minMin) && toSeconds(max$1) === toSeconds(maxMax)) {\n                        break loop;\n                    }\n                }\n            }\n        }\n    }\n\n    return {min: min$1, max: max$1};\n}\n\nfunction createOptions(plugins) {\n    let options = {\n        allDayContent: undefined,\n        allDaySlot: true,\n        buttonText: {\n            today: 'today',\n        },\n        customButtons: {},\n        date: new Date(),\n        datesSet: undefined,\n        dayHeaderFormat: {\n            weekday: 'short',\n            month: 'numeric',\n            day: 'numeric'\n        },\n        dayHeaderAriaLabelFormat: {\n            dateStyle: 'full'\n        },\n        displayEventEnd: true,\n        duration: {weeks: 1},\n        events: [],\n        eventAllUpdated: undefined,\n        eventBackgroundColor: undefined,\n        eventTextColor: undefined,\n        eventClassNames: undefined,\n        eventClick: undefined,\n        eventColor: undefined,\n        eventContent: undefined,\n        eventDidMount: undefined,\n        eventMouseEnter: undefined,\n        eventMouseLeave: undefined,\n        eventSources: [],\n        eventTimeFormat: {\n            hour: 'numeric',\n            minute: '2-digit'\n        },\n        filterEventsWithResources: false,\n        filterResourcesWithEvents: false,\n        firstDay: 0,\n        flexibleSlotTimeLimits: false,  // ec option\n        headerToolbar: {\n            start: 'title',\n            center: '',\n            end: 'today prev,next'\n        },\n        height: undefined,\n        hiddenDays: [],\n        highlightedDates: [],  // ec option\n        lazyFetching: true,\n        loading: undefined,\n        locale: undefined,\n        nowIndicator: false,\n        resourceLabelContent: undefined,\n        resourceLabelDidMount: undefined,\n        resources: [],\n        selectable: false,\n        scrollTime: '06:00:00',\n        slotDuration: '00:30:00',\n        slotEventOverlap: true,\n        slotHeight: 24,  // ec option\n        slotLabelInterval: undefined,\n        slotLabelFormat: {\n            hour: 'numeric',\n            minute: '2-digit'\n        },\n        slotMaxTime: '24:00:00',\n        slotMinTime: '00:00:00',\n        slotWidth: 72,\n        theme: {\n            allDay: 'ec-all-day',\n            active: 'ec-active',\n            bgEvent: 'ec-bg-event',\n            bgEvents: 'ec-bg-events',\n            body: 'ec-body',\n            button: 'ec-button',\n            buttonGroup: 'ec-button-group',\n            calendar: 'ec',\n            compact: 'ec-compact',\n            content: 'ec-content',\n            day: 'ec-day',\n            dayHead: 'ec-day-head',\n            days: 'ec-days',\n            disabled: 'ec-disabled',\n            event: 'ec-event',\n            eventBody: 'ec-event-body',\n            eventTime: 'ec-event-time',\n            eventTitle: 'ec-event-title',\n            events: 'ec-events',\n            extra: 'ec-extra',\n            handle: 'ec-handle',\n            header: 'ec-header',\n            hiddenScroll: 'ec-hidden-scroll',\n            highlight: 'ec-highlight',\n            icon: 'ec-icon',\n            line: 'ec-line',\n            lines: 'ec-lines',\n            nowIndicator: 'ec-now-indicator',\n            otherMonth: 'ec-other-month',\n            resource: 'ec-resource',\n            sidebar: 'ec-sidebar',\n            sidebarTitle: 'ec-sidebar-title',\n            today: 'ec-today',\n            time: 'ec-time',\n            title: 'ec-title',\n            toolbar: 'ec-toolbar',\n            view: '',\n            weekdays: ['ec-sun', 'ec-mon', 'ec-tue', 'ec-wed', 'ec-thu', 'ec-fri', 'ec-sat'],\n            withScroll: 'ec-with-scroll'\n        },\n        titleFormat: {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric'\n        },\n        validRange: undefined,\n        view: undefined,\n        viewDidMount: undefined,\n        views: {}\n    };\n\n    for (let plugin of plugins) {\n        plugin.createOptions?.(options);\n    }\n\n    return options;\n}\n\nfunction createParsers(plugins) {\n    let parsers = {\n        date: date => setMidnight(createDate(date)),\n        duration: createDuration,\n        events: createEvents,\n        eventSources: createEventSources,\n        hiddenDays: days => [...new Set(days)],\n        highlightedDates: dates => dates.map(date => setMidnight(createDate(date))),\n        resources: createResources,\n        scrollTime: createDuration,\n        slotDuration: createDuration,\n        slotLabelInterval: input => input !== undefined ? createDuration(input) : undefined,\n        slotMaxTime: createDuration,\n        slotMinTime: createDuration,\n        validRange: createDateRange\n    };\n\n    for (let plugin of plugins) {\n        plugin.createParsers?.(parsers);\n    }\n\n    return parsers;\n}\n\nfunction diff(options, prevOptions) {\n    let diff = [];\n    for (let key of keys(options)) {\n        if (options[key] !== prevOptions[key]) {\n            diff.push([key, options[key]]);\n        }\n    }\n    assign(prevOptions, options);\n\n    return diff;\n}\n\nfunction dayGrid(state) {\n    return derived(state.view, $view => $view?.startsWith('dayGrid'));\n}\n\nfunction activeRange(state) {\n    return derived(\n        [state._currentRange, state.firstDay, state.slotMaxTime, state._dayGrid],\n        ([$_currentRange, $firstDay, $slotMaxTime, $_dayGrid]) => {\n            let start = cloneDate($_currentRange.start);\n            let end = cloneDate($_currentRange.end);\n\n            if ($_dayGrid) {\n                // First day of week\n                prevClosestDay(start, $firstDay);\n                nextClosestDay(end, $firstDay);\n            } else if ($slotMaxTime.days || $slotMaxTime.seconds > DAY_IN_SECONDS) {\n                addDuration(subtractDay(end), $slotMaxTime);\n                let start2 = subtractDay(cloneDate(end));\n                if (start2 < start) {\n                    start = start2;\n                }\n            }\n\n            return {start, end};\n        }\n    );\n}\n\nfunction currentRange(state) {\n    return derived(\n        [state.date, state.duration, state.firstDay],\n        ([$date, $duration, $firstDay]) => {\n            let start = cloneDate($date), end;\n            if ($duration.months) {\n                start.setUTCDate(1);\n            } else if ($duration.inWeeks) {\n                // First day of week\n                prevClosestDay(start, $firstDay);\n            }\n            end = addDuration(cloneDate(start), $duration);\n\n            return {start, end};\n        }\n    );\n}\n\nfunction viewDates(state) {\n    return derived([state._activeRange, state.hiddenDays], ([$_activeRange, $hiddenDays]) => {\n        let dates = [];\n        let date = setMidnight(cloneDate($_activeRange.start));\n        let end = setMidnight(cloneDate($_activeRange.end));\n        while (date < end) {\n            if (!$hiddenDays.includes(date.getUTCDay())) {\n                dates.push(cloneDate(date));\n            }\n            addDay(date);\n        }\n        if (!dates.length && $hiddenDays.length && $hiddenDays.length < 7) {\n            // Try to move the date\n            state.date.update(date => {\n                while ($hiddenDays.includes(date.getUTCDay())) {\n                    addDay(date);\n                }\n                return date;\n            });\n            dates = get(state._viewDates);\n        }\n\n        return dates;\n    });\n}\n\nfunction viewTitle(state) {\n    return derived(\n        [state.date, state._activeRange, state._intlTitle, state._dayGrid],\n        ([$date, $_activeRange, $_intlTitle, $_dayGrid]) => {\n            return $_dayGrid\n                ? $_intlTitle.formatRange($date, $date)\n                : $_intlTitle.formatRange($_activeRange.start, subtractDay(cloneDate($_activeRange.end)));\n        }\n    );\n}\n\nfunction view(state) {\n    return derived([state.view, state._viewTitle, state._currentRange, state._activeRange], args => createView(...args));\n}\n\nfunction events(state) {\n    let _events = writable([]);\n    let abortController;\n    let fetching = 0;\n    let debounceHandle = {};\n    derived(\n        [state.events, state.eventSources, state._activeRange, state._fetchedRange, state.lazyFetching, state.loading],\n        (values, set) => debounce(() => {\n            let [$events, $eventSources, $_activeRange, $_fetchedRange, $lazyFetching, $loading] = values;\n            if (!$eventSources.length) {\n                set($events);\n                return;\n            }\n            // Do not fetch if new range is within the previous one\n            if (!$_fetchedRange.start || $_fetchedRange.start > $_activeRange.start || $_fetchedRange.end < $_activeRange.end || !$lazyFetching) {\n                if (abortController) {\n                    // Abort previous request\n                    abortController.abort();\n                }\n                // Create new abort controller\n                abortController = new AbortController();\n                // Call loading hook\n                if (isFunction($loading) && !fetching) {\n                    $loading(true);\n                }\n                let stopLoading = () => {\n                    if (--fetching === 0 && isFunction($loading)) {\n                        $loading(false);\n                    }\n                };\n                let events = [];\n                // Prepare handlers\n                let failure = e => stopLoading();\n                let success = data => {\n                    events = events.concat(createEvents(data));\n                    set(events);\n                    stopLoading();\n                };\n                // Prepare other stuff\n                let startStr = toISOString($_activeRange.start);\n                let endStr = toISOString($_activeRange.end);\n                // Loop over event sources\n                for (let source of $eventSources) {\n                    if (isFunction(source.events)) {\n                        // Events as a function\n                        let result = source.events({\n                            start: toLocalDate($_activeRange.start),\n                            end: toLocalDate($_activeRange.end),\n                            startStr,\n                            endStr\n                        }, success, failure);\n                        if (result !== undefined) {\n                            Promise.resolve(result).then(success, failure);\n                        }\n                    } else {\n                        // Events as a JSON feed\n                        // Prepare params\n                        let params = isFunction(source.extraParams) ? source.extraParams() : assign({}, source.extraParams);\n                        params.start = startStr;\n                        params.end = endStr;\n                        params = new URLSearchParams(params);\n                        // Prepare fetch\n                        let url = source.url, headers = {}, body;\n                        if (['GET', 'HEAD'].includes(source.method)) {\n                            url += (url.includes('?') ? '&' : '?') + params;\n                        } else {\n                            headers['content-type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n                            body = String(params);  // Safari 10.1 doesn't convert to string automatically\n                        }\n                        // Do the fetch\n                        fetch(url, {method: source.method, headers, body, signal: abortController.signal, credentials: 'same-origin'})\n                            .then(response => response.json())\n                            .then(success)\n                            .catch(failure);\n                    }\n                    ++fetching;\n                }\n                // Save current range for future requests\n                $_fetchedRange.start = $_activeRange.start;\n                $_fetchedRange.end = $_activeRange.end;\n            }\n        }, debounceHandle, state._queue),\n        []\n    ).subscribe(_events.set);\n\n    return _events;\n}\n\nfunction now() {\n    return readable(createDate(), set => {\n        let interval = setInterval(() => {\n            set(createDate());\n        }, 1000);\n\n        return () => clearInterval(interval);\n    });\n}\n\nfunction today(state) {\n    return derived(state._now, $_now => setMidnight(cloneDate($_now)));\n}\n\nclass State {\n    constructor(plugins, input) {\n        plugins = plugins || [];\n\n        // Create options\n        let options = createOptions(plugins);\n        let parsers = createParsers(plugins);\n\n        // Parse options\n        options = parseOpts(options, parsers);\n        input = parseOpts(input, parsers);\n\n        // Create stores for options\n        for (let [option, value] of Object.entries(options)) {\n            this[option] = writable(value);\n        }\n\n        // Private stores\n        this._queue = writable(new Map());  // debounce queue (beforeUpdate)\n        this._queue2 = writable(new Map());  // debounce queue (afterUpdate)\n        this._tasks = new Map();  // timeout IDs for tasks\n        this._auxiliary = writable([]);  // auxiliary components\n        this._dayGrid = dayGrid(this);\n        this._currentRange = currentRange(this);\n        this._activeRange = activeRange(this);\n        this._fetchedRange = writable({start: undefined, end: undefined});\n        this._events = events(this);\n        this._now = now();\n        this._today = today(this);\n        this._intlEventTime = intlRange(this.locale, this.eventTimeFormat);\n        this._intlSlotLabel = intl(this.locale, this.slotLabelFormat);\n        this._intlDayHeader = intl(this.locale, this.dayHeaderFormat);\n        this._intlDayHeaderAL = intl(this.locale, this.dayHeaderAriaLabelFormat);\n        this._intlTitle = intlRange(this.locale, this.titleFormat);\n        this._bodyEl = writable(undefined);\n        this._scrollable = writable(false);\n        this._viewTitle = viewTitle(this);\n        this._viewDates = viewDates(this);\n        this._view = view(this);\n        this._viewComponent = writable(undefined);\n        // Interaction\n        this._interaction = writable({});\n        this._iEvents = writable([null, null]);  // interaction events: [drag/resize, pointer]\n        this._iClasses = writable(identity);  // interaction event css classes\n        this._iClass = writable(undefined);  // interaction css class for entire calendar\n\n        // Set & Get\n        this._set = (key, value) => {\n            if (validKey(key, this)) {\n                if (parsers[key]) {\n                    value = parsers[key](value);\n                }\n                this[key].set(value);\n            }\n        };\n        this._get = key => validKey(key, this) ? get(this[key]) : undefined;\n\n        // Let plugins create their private stores\n        for (let plugin of plugins) {\n            plugin.createStores?.(this);\n        }\n\n        if (input.view) {\n            // Set initial view based on input\n            this.view.set(input.view);\n        }\n\n        // Set options for each view\n        let views = new Set([...keys(options.views), ...keys(input.views ?? {})]);\n        for (let view of views) {\n            let defOpts = mergeOpts(options, options.views[view] ?? {});\n            let opts = mergeOpts(defOpts, input, input.views?.[view] ?? {});\n            let component = opts.component;\n            // Make sure we deal with valid opts from now on\n            filterOpts(opts, this);\n            // Process options\n            for (let key of keys(opts)) {\n                let {set, _set = set, ...rest} = this[key];\n\n                this[key] = {\n                    // Set value in all views\n                    set: ['buttonText', 'theme'].includes(key)\n                        ? value => {\n                            if (isFunction(value)) {\n                                let result = value(defOpts[key]);\n                                opts[key] = result;\n                                set(set === _set ? result : value);\n                            } else {\n                                opts[key] = value;\n                                set(value);\n                            }\n                        }\n                        : value => {\n                            opts[key] = value;\n                            set(value);\n                        },\n                    _set,\n                    ...rest\n                };\n            }\n            // When view changes...\n            this.view.subscribe(newView => {\n                if (newView === view) {\n                    // switch view component\n                    this._viewComponent.set(component);\n                    if (isFunction(opts.viewDidMount)) {\n                        tick().then(() => opts.viewDidMount(get(this._view)));\n                    }\n                    // update store values\n                    for (let key of keys(opts)) {\n                        this[key]._set(opts[key]);\n                    }\n                }\n            });\n        }\n    }\n}\n\nfunction parseOpts(opts, parsers) {\n    let result = {...opts};\n    for (let key of keys(parsers)) {\n        if (key in result) {\n            result[key] = parsers[key](result[key]);\n        }\n    }\n    if (opts.views) {\n        result.views = {};\n        for (let view of keys(opts.views)) {\n            result.views[view] = parseOpts(opts.views[view], parsers);\n        }\n    }\n    return result;\n}\n\nfunction mergeOpts(...args) {\n    let result = {};\n    for (let opts of args) {\n        let override = {};\n        for (let key of ['buttonText', 'theme']) {\n            if (isFunction(opts[key])) {\n                override[key] = opts[key](result[key]);\n            }\n        }\n        result = {\n            ...result,\n            ...opts,\n            ...override\n        };\n    }\n    return result;\n}\n\nfunction filterOpts(opts, state) {\n    keys(opts)\n        .filter(key => !validKey(key, state) || key == 'view')\n        .forEach(key => delete opts[key]);\n}\n\nfunction validKey(key, state) {\n    return state.hasOwnProperty(key) && key[0] !== '_';\n}\n\n/* packages/core/src/Buttons.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[34] = list[i];\n\treturn child_ctx;\n}\n\n// (90:27) \nfunction create_if_block_5(ctx) {\n\tlet button_1;\n\tlet t_value = /*$buttonText*/ ctx[7][/*button*/ ctx[34]] + \"\";\n\tlet t;\n\tlet button_1_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\tfunction click_handler_1() {\n\t\treturn /*click_handler_1*/ ctx[29](/*button*/ ctx[34]);\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tbutton_1 = element(\"button\");\n\t\t\tt = text(t_value);\n\n\t\t\tattr(button_1, \"class\", button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + (/*$view*/ ctx[9] === /*button*/ ctx[34]\n\t\t\t? ' ' + /*$theme*/ ctx[5].active\n\t\t\t: '') + \" ec-\" + /*button*/ ctx[34]));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button_1, anchor);\n\t\t\tappend(button_1, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen$1(button_1, \"click\", click_handler_1);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tif (dirty[0] & /*$buttonText, buttons*/ 129 && t_value !== (t_value = /*$buttonText*/ ctx[7][/*button*/ ctx[34]] + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*$theme, $view, buttons*/ 545 && button_1_class_value !== (button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + (/*$view*/ ctx[9] === /*button*/ ctx[34]\n\t\t\t? ' ' + /*$theme*/ ctx[5].active\n\t\t\t: '') + \" ec-\" + /*button*/ ctx[34]))) {\n\t\t\t\tattr(button_1, \"class\", button_1_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(button_1);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (84:37) \nfunction create_if_block_4(ctx) {\n\tlet button_1;\n\tlet button_1_class_value;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tbutton_1 = element(\"button\");\n\n\t\t\tattr(button_1, \"class\", button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34] + (/*$customButtons*/ ctx[8][/*button*/ ctx[34]].active\n\t\t\t? ' ' + /*$theme*/ ctx[5].active\n\t\t\t: '')));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button_1, anchor);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\tlisten$1(button_1, \"click\", function () {\n\t\t\t\t\t\tif (is_function(/*$customButtons*/ ctx[8][/*button*/ ctx[34]].click)) /*$customButtons*/ ctx[8][/*button*/ ctx[34]].click.apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, button_1, /*$customButtons*/ ctx[8][/*button*/ ctx[34]].text))\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*$theme, buttons, $customButtons*/ 289 && button_1_class_value !== (button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34] + (/*$customButtons*/ ctx[8][/*button*/ ctx[34]].active\n\t\t\t? ' ' + /*$theme*/ ctx[5].active\n\t\t\t: '')))) {\n\t\t\t\tattr(button_1, \"class\", button_1_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*$customButtons, buttons*/ 257) setContent_action.update.call(null, /*$customButtons*/ ctx[8][/*button*/ ctx[34]].text);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(button_1);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\n// (78:32) \nfunction create_if_block_3(ctx) {\n\tlet button_1;\n\tlet t_value = /*$buttonText*/ ctx[7][/*button*/ ctx[34]] + \"\";\n\tlet t;\n\tlet button_1_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tbutton_1 = element(\"button\");\n\t\t\tt = text(t_value);\n\t\t\tattr(button_1, \"class\", button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34]));\n\t\t\tbutton_1.disabled = /*todayDisabled*/ ctx[1];\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button_1, anchor);\n\t\t\tappend(button_1, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen$1(button_1, \"click\", /*click_handler*/ ctx[28]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$buttonText, buttons*/ 129 && t_value !== (t_value = /*$buttonText*/ ctx[7][/*button*/ ctx[34]] + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*$theme, buttons*/ 33 && button_1_class_value !== (button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34]))) {\n\t\t\t\tattr(button_1, \"class\", button_1_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*todayDisabled*/ 2) {\n\t\t\t\tbutton_1.disabled = /*todayDisabled*/ ctx[1];\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(button_1);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (70:31) \nfunction create_if_block_2(ctx) {\n\tlet button_1;\n\tlet i;\n\tlet i_class_value;\n\tlet button_1_class_value;\n\tlet button_1_aria_label_value;\n\tlet button_1_title_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tbutton_1 = element(\"button\");\n\t\t\ti = element(\"i\");\n\t\t\tattr(i, \"class\", i_class_value = \"\" + (/*$theme*/ ctx[5].icon + \" ec-\" + /*button*/ ctx[34]));\n\t\t\tattr(button_1, \"class\", button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34]));\n\t\t\tattr(button_1, \"aria-label\", button_1_aria_label_value = /*$buttonText*/ ctx[7].next);\n\t\t\tattr(button_1, \"title\", button_1_title_value = /*$buttonText*/ ctx[7].next);\n\t\t\tbutton_1.disabled = /*nextDisabled*/ ctx[4];\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button_1, anchor);\n\t\t\tappend(button_1, i);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen$1(button_1, \"click\", /*next*/ ctx[23]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, buttons*/ 33 && i_class_value !== (i_class_value = \"\" + (/*$theme*/ ctx[5].icon + \" ec-\" + /*button*/ ctx[34]))) {\n\t\t\t\tattr(i, \"class\", i_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$theme, buttons*/ 33 && button_1_class_value !== (button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34]))) {\n\t\t\t\tattr(button_1, \"class\", button_1_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$buttonText*/ 128 && button_1_aria_label_value !== (button_1_aria_label_value = /*$buttonText*/ ctx[7].next)) {\n\t\t\t\tattr(button_1, \"aria-label\", button_1_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$buttonText*/ 128 && button_1_title_value !== (button_1_title_value = /*$buttonText*/ ctx[7].next)) {\n\t\t\t\tattr(button_1, \"title\", button_1_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*nextDisabled*/ 16) {\n\t\t\t\tbutton_1.disabled = /*nextDisabled*/ ctx[4];\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(button_1);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (62:31) \nfunction create_if_block_1(ctx) {\n\tlet button_1;\n\tlet i;\n\tlet i_class_value;\n\tlet button_1_class_value;\n\tlet button_1_aria_label_value;\n\tlet button_1_title_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tbutton_1 = element(\"button\");\n\t\t\ti = element(\"i\");\n\t\t\tattr(i, \"class\", i_class_value = \"\" + (/*$theme*/ ctx[5].icon + \" ec-\" + /*button*/ ctx[34]));\n\t\t\tattr(button_1, \"class\", button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34]));\n\t\t\tattr(button_1, \"aria-label\", button_1_aria_label_value = /*$buttonText*/ ctx[7].prev);\n\t\t\tattr(button_1, \"title\", button_1_title_value = /*$buttonText*/ ctx[7].prev);\n\t\t\tbutton_1.disabled = /*prevDisabled*/ ctx[3];\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button_1, anchor);\n\t\t\tappend(button_1, i);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen$1(button_1, \"click\", /*prev*/ ctx[22]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, buttons*/ 33 && i_class_value !== (i_class_value = \"\" + (/*$theme*/ ctx[5].icon + \" ec-\" + /*button*/ ctx[34]))) {\n\t\t\t\tattr(i, \"class\", i_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$theme, buttons*/ 33 && button_1_class_value !== (button_1_class_value = \"\" + (/*$theme*/ ctx[5].button + \" ec-\" + /*button*/ ctx[34]))) {\n\t\t\t\tattr(button_1, \"class\", button_1_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$buttonText*/ 128 && button_1_aria_label_value !== (button_1_aria_label_value = /*$buttonText*/ ctx[7].prev)) {\n\t\t\t\tattr(button_1, \"aria-label\", button_1_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$buttonText*/ 128 && button_1_title_value !== (button_1_title_value = /*$buttonText*/ ctx[7].prev)) {\n\t\t\t\tattr(button_1, \"title\", button_1_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*prevDisabled*/ 8) {\n\t\t\t\tbutton_1.disabled = /*prevDisabled*/ ctx[3];\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(button_1);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (59:4) {#if button == 'title'}\nfunction create_if_block$1(ctx) {\n\tlet h2;\n\tlet h2_class_value;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\th2 = element(\"h2\");\n\t\t\tattr(h2, \"class\", h2_class_value = /*$theme*/ ctx[5].title);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, h2, anchor);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, h2, /*$_viewTitle*/ ctx[6]));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme*/ 32 && h2_class_value !== (h2_class_value = /*$theme*/ ctx[5].title)) {\n\t\t\t\tattr(h2, \"class\", h2_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*$_viewTitle*/ 64) setContent_action.update.call(null, /*$_viewTitle*/ ctx[6]);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(h2);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (58:0) {#each buttons as button}\nfunction create_each_block$2(ctx) {\n\tlet if_block_anchor;\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*button*/ ctx[34] == 'title') return create_if_block$1;\n\t\tif (/*button*/ ctx[34] == 'prev') return create_if_block_1;\n\t\tif (/*button*/ ctx[34] == 'next') return create_if_block_2;\n\t\tif (/*button*/ ctx[34] == 'today') return create_if_block_3;\n\t\tif (/*$customButtons*/ ctx[8][/*button*/ ctx[34]]) return create_if_block_4;\n\t\tif (/*button*/ ctx[34] != '') return create_if_block_5;\n\t}\n\n\tlet current_block_type = select_block_type(ctx);\n\tlet if_block = current_block_type && current_block_type(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif (if_block) if_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (if_block) if_block.m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif (if_block) if_block.d(1);\n\t\t\t\tif_block = current_block_type && current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\tif (if_block) {\n\t\t\t\tif_block.d(detaching);\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction create_fragment$3(ctx) {\n\tlet each_1_anchor;\n\tlet each_value = ensure_array_like(/*buttons*/ ctx[0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$2(get_each_context$2(ctx, each_value, i));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, $_viewTitle, buttons, $buttonText, prevDisabled, prev, nextDisabled, next, todayDisabled, $date, today, $customButtons, $view*/ 14681087) {\n\t\t\t\teach_value = ensure_array_like(/*buttons*/ ctx[0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$2(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$2(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value.length;\n\t\t\t}\n\t\t},\n\t\ti: noop$1,\n\t\to: noop$1,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction instance$3($$self, $$props, $$invalidate) {\n\tlet $duration;\n\tlet $date;\n\tlet $hiddenDays;\n\tlet $validRange;\n\tlet $_viewDates;\n\tlet $_currentRange;\n\tlet $theme;\n\tlet $_viewTitle;\n\tlet $buttonText;\n\tlet $customButtons;\n\tlet $view;\n\tlet { buttons } = $$props;\n\tlet { _currentRange, _viewTitle, _viewDates, buttonText, customButtons, date, duration, hiddenDays, theme, validRange, view } = getContext('state');\n\tcomponent_subscribe($$self, _currentRange, value => $$invalidate(27, $_currentRange = value));\n\tcomponent_subscribe($$self, _viewTitle, value => $$invalidate(6, $_viewTitle = value));\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(31, $_viewDates = value));\n\tcomponent_subscribe($$self, buttonText, value => $$invalidate(7, $buttonText = value));\n\tcomponent_subscribe($$self, customButtons, value => $$invalidate(8, $customButtons = value));\n\tcomponent_subscribe($$self, date, value => $$invalidate(2, $date = value));\n\tcomponent_subscribe($$self, duration, value => $$invalidate(24, $duration = value));\n\tcomponent_subscribe($$self, hiddenDays, value => $$invalidate(25, $hiddenDays = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(5, $theme = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(26, $validRange = value));\n\tcomponent_subscribe($$self, view, value => $$invalidate(9, $view = value));\n\tlet today = setMidnight(createDate());\n\tlet prevDisabled, nextDisabled, todayDisabled;\n\tlet running = false;\n\n\tfunction isRunning() {\n\t\treturn running;\n\t}\n\n\tfunction test() {\n\t\treturn $_viewDates.every(date => outsideRange(date, $validRange));\n\t}\n\n\tfunction prev() {\n\t\tset_store_value(date, $date = prevDate($date, $duration, $hiddenDays), $date);\n\t}\n\n\tfunction next() {\n\t\tset_store_value(date, $date = nextDate($date, $duration), $date);\n\t}\n\n\tconst click_handler = () => set_store_value(date, $date = cloneDate(today), $date);\n\tconst click_handler_1 = button => set_store_value(view, $view = button, $view);\n\n\t$$self.$$set = $$props => {\n\t\tif ('buttons' in $$props) $$invalidate(0, buttons = $$props.buttons);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*$validRange, $date, $duration, $hiddenDays, $_currentRange, todayDisabled*/ 251658246) {\n\t\t\tif (!isRunning()) {\n\t\t\t\trunning = true;\n\t\t\t\t$$invalidate(3, prevDisabled = false);\n\t\t\t\t$$invalidate(4, nextDisabled = false);\n\n\t\t\t\tif ($validRange.start) {\n\t\t\t\t\tlet currentDate = cloneDate($date);\n\t\t\t\t\tset_store_value(date, $date = prevDate($date, $duration, $hiddenDays), $date);\n\t\t\t\t\t$$invalidate(3, prevDisabled = test());\n\t\t\t\t\tset_store_value(date, $date = currentDate, $date);\n\t\t\t\t}\n\n\t\t\t\tif ($validRange.end) {\n\t\t\t\t\tlet currentDate = cloneDate($date);\n\t\t\t\t\tset_store_value(date, $date = nextDate($date, $duration), $date);\n\t\t\t\t\t$$invalidate(4, nextDisabled = test());\n\t\t\t\t\tset_store_value(date, $date = currentDate, $date);\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(1, todayDisabled = today >= $_currentRange.start && today < $_currentRange.end);\n\n\t\t\t\tif (!todayDisabled && ($validRange.start || $validRange.end)) {\n\t\t\t\t\tlet currentDate = cloneDate($date);\n\t\t\t\t\tset_store_value(date, $date = cloneDate(today), $date);\n\t\t\t\t\t$$invalidate(1, todayDisabled = test());\n\t\t\t\t\tset_store_value(date, $date = currentDate, $date);\n\t\t\t\t}\n\n\t\t\t\ttick().then(() => running = false);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tbuttons,\n\t\ttodayDisabled,\n\t\t$date,\n\t\tprevDisabled,\n\t\tnextDisabled,\n\t\t$theme,\n\t\t$_viewTitle,\n\t\t$buttonText,\n\t\t$customButtons,\n\t\t$view,\n\t\t_currentRange,\n\t\t_viewTitle,\n\t\t_viewDates,\n\t\tbuttonText,\n\t\tcustomButtons,\n\t\tdate,\n\t\tduration,\n\t\thiddenDays,\n\t\ttheme,\n\t\tvalidRange,\n\t\tview,\n\t\ttoday,\n\t\tprev,\n\t\tnext,\n\t\t$duration,\n\t\t$hiddenDays,\n\t\t$validRange,\n\t\t$_currentRange,\n\t\tclick_handler,\n\t\tclick_handler_1\n\t];\n}\n\nclass Buttons extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$3, create_fragment$3, safe_not_equal, { buttons: 0 }, null, [-1, -1]);\n\t}\n}\n\n/* packages/core/src/Toolbar.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[5] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[8] = list[i];\n\treturn child_ctx;\n}\n\n// (29:16) {:else}\nfunction create_else_block(ctx) {\n\tlet buttons_1;\n\tlet current;\n\tbuttons_1 = new Buttons({ props: { buttons: /*buttons*/ ctx[8] } });\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(buttons_1.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(buttons_1, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst buttons_1_changes = {};\n\t\t\tif (dirty & /*sections*/ 1) buttons_1_changes.buttons = /*buttons*/ ctx[8];\n\t\t\tbuttons_1.$set(buttons_1_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(buttons_1.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(buttons_1.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(buttons_1, detaching);\n\t\t}\n\t};\n}\n\n// (25:16) {#if buttons.length > 1}\nfunction create_if_block(ctx) {\n\tlet div;\n\tlet buttons_1;\n\tlet div_class_value;\n\tlet current;\n\tbuttons_1 = new Buttons({ props: { buttons: /*buttons*/ ctx[8] } });\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(buttons_1.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[1].buttonGroup);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(buttons_1, div, null);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst buttons_1_changes = {};\n\t\t\tif (dirty & /*sections*/ 1) buttons_1_changes.buttons = /*buttons*/ ctx[8];\n\t\t\tbuttons_1.$set(buttons_1_changes);\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div_class_value !== (div_class_value = /*$theme*/ ctx[1].buttonGroup)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(buttons_1.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(buttons_1.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_component(buttons_1);\n\t\t}\n\t};\n}\n\n// (24:12) {#each sections[key] as buttons}\nfunction create_each_block_1(ctx) {\n\tlet current_block_type_index;\n\tlet if_block;\n\tlet if_block_anchor;\n\tlet current;\n\tconst if_block_creators = [create_if_block, create_else_block];\n\tconst if_blocks = [];\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*buttons*/ ctx[8].length > 1) return 0;\n\t\treturn 1;\n\t}\n\n\tcurrent_block_type_index = select_block_type(ctx);\n\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif_blocks[current_block_type_index].m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tlet previous_block_index = current_block_type_index;\n\t\t\tcurrent_block_type_index = select_block_type(ctx);\n\n\t\t\tif (current_block_type_index === previous_block_index) {\n\t\t\t\tif_blocks[current_block_type_index].p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_blocks[previous_block_index], 1, 1, () => {\n\t\t\t\t\tif_blocks[previous_block_index] = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t\tif_block = if_blocks[current_block_type_index];\n\n\t\t\t\tif (!if_block) {\n\t\t\t\t\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t} else {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t\t}\n\n\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\tif_blocks[current_block_type_index].d(detaching);\n\t\t}\n\t};\n}\n\n// (22:4) {#each keys(sections) as key}\nfunction create_each_block$1(ctx) {\n\tlet div;\n\tlet t;\n\tlet div_class_value;\n\tlet current;\n\tlet each_value_1 = ensure_array_like(/*sections*/ ctx[0][/*key*/ ctx[5]]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt = space();\n\t\t\tattr(div, \"class\", div_class_value = \"ec-\" + /*key*/ ctx[5]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tappend(div, t);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$theme, sections*/ 3) {\n\t\t\t\teach_value_1 = ensure_array_like(/*sections*/ ctx[0][/*key*/ ctx[5]]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_1(ctx, each_value_1, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_1(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div, t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value_1.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*sections*/ 1 && div_class_value !== (div_class_value = \"ec-\" + /*key*/ ctx[5])) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$2(ctx) {\n\tlet nav;\n\tlet nav_class_value;\n\tlet current;\n\tlet each_value = ensure_array_like(keys(/*sections*/ ctx[0]));\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tnav = element(\"nav\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(nav, \"class\", nav_class_value = /*$theme*/ ctx[1].toolbar);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, nav, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(nav, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*sections, $theme*/ 3) {\n\t\t\t\teach_value = ensure_array_like(keys(/*sections*/ ctx[0]));\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$1(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$1(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(nav, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && nav_class_value !== (nav_class_value = /*$theme*/ ctx[1].toolbar)) {\n\t\t\t\tattr(nav, \"class\", nav_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(nav);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction instance$2($$self, $$props, $$invalidate) {\n\tlet $headerToolbar;\n\tlet $theme;\n\tlet { headerToolbar, theme } = getContext('state');\n\tcomponent_subscribe($$self, headerToolbar, value => $$invalidate(4, $headerToolbar = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(1, $theme = value));\n\tlet sections = { start: [], center: [], end: [] };\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*sections, $headerToolbar*/ 17) {\n\t\t\t{\n\t\t\t\tfor (let key of keys(sections)) {\n\t\t\t\t\t$$invalidate(0, sections[key] = $headerToolbar[key].split(' ').map(group => group.split(',')), sections);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [sections, $theme, headerToolbar, theme, $headerToolbar];\n}\n\nclass Toolbar extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$2, create_fragment$2, safe_not_equal, {});\n\t}\n}\n\n/* packages/core/src/Auxiliary.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[11] = list[i];\n\treturn child_ctx;\n}\n\n// (24:0) {#each $_auxiliary as component}\nfunction create_each_block(ctx) {\n\tlet switch_instance;\n\tlet switch_instance_anchor;\n\tlet current;\n\tvar switch_value = /*component*/ ctx[11];\n\n\tfunction switch_props(ctx, dirty) {\n\t\treturn {};\n\t}\n\n\tif (switch_value) {\n\t\tswitch_instance = construct_svelte_component(switch_value, switch_props());\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tif (switch_instance) create_component(switch_instance.$$.fragment);\n\t\t\tswitch_instance_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (switch_instance) mount_component(switch_instance, target, anchor);\n\t\t\tinsert(target, switch_instance_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$_auxiliary*/ 1 && switch_value !== (switch_value = /*component*/ ctx[11])) {\n\t\t\t\tif (switch_instance) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value) {\n\t\t\t\t\tswitch_instance = construct_svelte_component(switch_value, switch_props());\n\t\t\t\t\tcreate_component(switch_instance.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance, switch_instance_anchor.parentNode, switch_instance_anchor);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance = null;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\tif (switch_instance) transition_in(switch_instance.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tif (switch_instance) transition_out(switch_instance.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(switch_instance_anchor);\n\t\t\t}\n\n\t\t\tif (switch_instance) destroy_component(switch_instance, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$1(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value = ensure_array_like(/*$_auxiliary*/ ctx[0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*$_auxiliary*/ 1) {\n\t\t\t\teach_value = ensure_array_like(/*$_auxiliary*/ ctx[0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction instance$1($$self, $$props, $$invalidate) {\n\tlet $_view;\n\tlet $datesSet;\n\tlet $_activeRange;\n\tlet $_auxiliary;\n\tlet { datesSet, _auxiliary, _activeRange, _queue, _view } = getContext('state');\n\tcomponent_subscribe($$self, datesSet, value => $$invalidate(7, $datesSet = value));\n\tcomponent_subscribe($$self, _auxiliary, value => $$invalidate(0, $_auxiliary = value));\n\tcomponent_subscribe($$self, _activeRange, value => $$invalidate(5, $_activeRange = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(6, $_view = value));\n\tlet debounceHandle = {};\n\n\tfunction runDatesSet(_activeRange) {\n\t\tif (isFunction($datesSet)) {\n\t\t\tdebounce(\n\t\t\t\t() => $datesSet({\n\t\t\t\t\tstart: toLocalDate(_activeRange.start),\n\t\t\t\t\tend: toLocalDate(_activeRange.end),\n\t\t\t\t\tstartStr: toISOString(_activeRange.start),\n\t\t\t\t\tendStr: toISOString(_activeRange.end),\n\t\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t\t}),\n\t\t\t\tdebounceHandle,\n\t\t\t\t_queue\n\t\t\t);\n\t\t}\n\t}\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$_activeRange*/ 32) {\n\t\t\t// Set up datesSet callback\n\t\t\trunDatesSet($_activeRange);\n\t\t}\n\t};\n\n\treturn [$_auxiliary, datesSet, _auxiliary, _activeRange, _view, $_activeRange];\n}\n\nclass Auxiliary extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$1, create_fragment$1, safe_not_equal, {});\n\t}\n}\n\n/* packages/core/src/Calendar.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment(ctx) {\n\tlet div;\n\tlet toolbar;\n\tlet t0;\n\tlet switch_instance;\n\tlet div_class_value;\n\tlet div_role_value;\n\tlet t1;\n\tlet auxiliary;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\ttoolbar = new Toolbar({});\n\tvar switch_value = /*$_viewComponent*/ ctx[5];\n\n\tfunction switch_props(ctx, dirty) {\n\t\treturn {};\n\t}\n\n\tif (switch_value) {\n\t\tswitch_instance = construct_svelte_component(switch_value, switch_props());\n\t}\n\n\tauxiliary = new Auxiliary({});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(toolbar.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tif (switch_instance) create_component(switch_instance.$$.fragment);\n\t\t\tt1 = space();\n\t\t\tcreate_component(auxiliary.$$.fragment);\n\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[1].calendar + \" \" + /*$theme*/ ctx[1].view + (/*$_scrollable*/ ctx[0]\n\t\t\t? ' ' + /*$theme*/ ctx[1].withScroll\n\t\t\t: '') + (/*$_iClass*/ ctx[2]\n\t\t\t? ' ' + /*$theme*/ ctx[1][/*$_iClass*/ ctx[2]]\n\t\t\t: '')));\n\n\t\t\tattr(div, \"role\", div_role_value = listView(/*$view*/ ctx[4]) ? 'list' : 'table');\n\t\t\tset_style(div, \"height\", /*$height*/ ctx[3]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(toolbar, div, null);\n\t\t\tappend(div, t0);\n\t\t\tif (switch_instance) mount_component(switch_instance, div, null);\n\t\t\tinsert(target, t1, anchor);\n\t\t\tmount_component(auxiliary, target, anchor);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen$1(window, \"resize\", /*recheckScrollable*/ ctx[20]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$_viewComponent*/ 32 && switch_value !== (switch_value = /*$_viewComponent*/ ctx[5])) {\n\t\t\t\tif (switch_instance) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value) {\n\t\t\t\t\tswitch_instance = construct_svelte_component(switch_value, switch_props());\n\t\t\t\t\tcreate_component(switch_instance.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance, div, null);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme, $_scrollable, $_iClass*/ 7 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[1].calendar + \" \" + /*$theme*/ ctx[1].view + (/*$_scrollable*/ ctx[0]\n\t\t\t? ' ' + /*$theme*/ ctx[1].withScroll\n\t\t\t: '') + (/*$_iClass*/ ctx[2]\n\t\t\t? ' ' + /*$theme*/ ctx[1][/*$_iClass*/ ctx[2]]\n\t\t\t: '')))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$view*/ 16 && div_role_value !== (div_role_value = listView(/*$view*/ ctx[4]) ? 'list' : 'table')) {\n\t\t\t\tattr(div, \"role\", div_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$height*/ 8) {\n\t\t\t\tset_style(div, \"height\", /*$height*/ ctx[3]);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(toolbar.$$.fragment, local);\n\t\t\tif (switch_instance) transition_in(switch_instance.$$.fragment, local);\n\t\t\ttransition_in(auxiliary.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(toolbar.$$.fragment, local);\n\t\t\tif (switch_instance) transition_out(switch_instance.$$.fragment, local);\n\t\t\ttransition_out(auxiliary.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t\tdetach(t1);\n\t\t\t}\n\n\t\t\tdestroy_component(toolbar);\n\t\t\tif (switch_instance) destroy_component(switch_instance);\n\t\t\tdestroy_component(auxiliary, detaching);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet $_bodyEl;\n\tlet $_scrollable;\n\tlet $_queue2;\n\tlet $_queue;\n\tlet $hiddenDays;\n\tlet $duration;\n\tlet $date;\n\tlet $_interaction;\n\tlet $_events;\n\tlet $theme;\n\tlet $_iClass;\n\tlet $height;\n\tlet $view;\n\tlet $_viewComponent;\n\tlet { plugins = [] } = $$props;\n\tlet { options = {} } = $$props;\n\tlet state = new State(plugins, options);\n\tsetContext('state', state);\n\tlet { _viewComponent, _bodyEl, _interaction, _iClass, _events, _queue, _queue2, _tasks, _scrollable, date, duration, hiddenDays, height, theme, view } = state;\n\tcomponent_subscribe($$self, _viewComponent, value => $$invalidate(5, $_viewComponent = value));\n\tcomponent_subscribe($$self, _bodyEl, value => $$invalidate(36, $_bodyEl = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(42, $_interaction = value));\n\tcomponent_subscribe($$self, _iClass, value => $$invalidate(2, $_iClass = value));\n\tcomponent_subscribe($$self, _events, value => $$invalidate(43, $_events = value));\n\tcomponent_subscribe($$self, _queue, value => $$invalidate(38, $_queue = value));\n\tcomponent_subscribe($$self, _queue2, value => $$invalidate(37, $_queue2 = value));\n\tcomponent_subscribe($$self, _scrollable, value => $$invalidate(0, $_scrollable = value));\n\tcomponent_subscribe($$self, date, value => $$invalidate(41, $date = value));\n\tcomponent_subscribe($$self, duration, value => $$invalidate(40, $duration = value));\n\tcomponent_subscribe($$self, hiddenDays, value => $$invalidate(39, $hiddenDays = value));\n\tcomponent_subscribe($$self, height, value => $$invalidate(3, $height = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(1, $theme = value));\n\tcomponent_subscribe($$self, view, value => $$invalidate(4, $view = value));\n\n\t// Reactively update options that did change\n\tlet prevOptions = { ...options };\n\n\tfunction setOption(name, value) {\n\t\tstate._set(name, value);\n\t\treturn this;\n\t}\n\n\tfunction getOption(name) {\n\t\tlet value = state._get(name);\n\t\treturn value instanceof Date ? toLocalDate(value) : value;\n\t}\n\n\tfunction refetchEvents() {\n\t\tstate._fetchedRange.set({ start: undefined, end: undefined });\n\t\treturn this;\n\t}\n\n\tfunction getEvents() {\n\t\treturn $_events.map(toEventWithLocalDates);\n\t}\n\n\tfunction getEventById(id) {\n\t\tfor (let event of $_events) {\n\t\t\tif (event.id == id) {\n\t\t\t\treturn toEventWithLocalDates(event);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction addEvent(event) {\n\t\tevent = createEvents([event])[0];\n\t\t$_events.push(event);\n\t\t_events.set($_events);\n\t\treturn toEventWithLocalDates(event);\n\t}\n\n\tfunction updateEvent(event) {\n\t\tfor (let e of $_events) {\n\t\t\tif (e.id == event.id) {\n\t\t\t\tevent = createEvents([event])[0];\n\t\t\t\tassign(e, event);\n\t\t\t\t_events.set($_events);\n\t\t\t\treturn toEventWithLocalDates(event);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction removeEventById(id) {\n\t\tlet idx = $_events.findIndex(event => event.id == id);\n\n\t\tif (idx >= 0) {\n\t\t\t$_events.splice(idx, 1);\n\t\t\t_events.set($_events);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tfunction getView() {\n\t\treturn toViewWithLocalDates(get(state._view));\n\t}\n\n\tfunction unselect() {\n\t\t$_interaction.action?.unselect();\n\t\treturn this;\n\t}\n\n\tfunction dateFromPoint(x, y) {\n\t\tlet dayEl = getElementWithPayload(x, y);\n\n\t\tif (dayEl) {\n\t\t\tlet info = getPayload(dayEl)(x, y);\n\t\t\tinfo.date = toLocalDate(info.date);\n\t\t\treturn info;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction next() {\n\t\tset_store_value(date, $date = nextDate($date, $duration), $date);\n\t\treturn this;\n\t}\n\n\tfunction prev() {\n\t\tset_store_value(date, $date = prevDate($date, $duration, $hiddenDays), $date);\n\t\treturn this;\n\t}\n\n\tbeforeUpdate(() => {\n\t\tflushDebounce($_queue);\n\t});\n\n\tafterUpdate(() => {\n\t\tflushDebounce($_queue2);\n\t\ttask(recheckScrollable, null, _tasks);\n\t});\n\n\tfunction recheckScrollable() {\n\t\tif ($_bodyEl) {\n\t\t\tset_store_value(_scrollable, $_scrollable = hasYScroll($_bodyEl), $_scrollable);\n\t\t}\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('plugins' in $$props) $$invalidate(21, plugins = $$props.plugins);\n\t\tif ('options' in $$props) $$invalidate(22, options = $$props.options);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*options*/ 4194304) {\n\t\t\tfor (let [name, value] of diff(options, prevOptions)) {\n\t\t\t\tsetOption(name, value);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\t$_scrollable,\n\t\t$theme,\n\t\t$_iClass,\n\t\t$height,\n\t\t$view,\n\t\t$_viewComponent,\n\t\t_viewComponent,\n\t\t_bodyEl,\n\t\t_interaction,\n\t\t_iClass,\n\t\t_events,\n\t\t_queue,\n\t\t_queue2,\n\t\t_scrollable,\n\t\tdate,\n\t\tduration,\n\t\thiddenDays,\n\t\theight,\n\t\ttheme,\n\t\tview,\n\t\trecheckScrollable,\n\t\tplugins,\n\t\toptions,\n\t\tsetOption,\n\t\tgetOption,\n\t\trefetchEvents,\n\t\tgetEvents,\n\t\tgetEventById,\n\t\taddEvent,\n\t\tupdateEvent,\n\t\tremoveEventById,\n\t\tgetView,\n\t\tunselect,\n\t\tdateFromPoint,\n\t\tnext,\n\t\tprev\n\t];\n}\n\nclass Calendar extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance,\n\t\t\tcreate_fragment,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tplugins: 21,\n\t\t\t\toptions: 22,\n\t\t\t\tsetOption: 23,\n\t\t\t\tgetOption: 24,\n\t\t\t\trefetchEvents: 25,\n\t\t\t\tgetEvents: 26,\n\t\t\t\tgetEventById: 27,\n\t\t\t\taddEvent: 28,\n\t\t\t\tupdateEvent: 29,\n\t\t\t\tremoveEventById: 30,\n\t\t\t\tgetView: 31,\n\t\t\t\tunselect: 32,\n\t\t\t\tdateFromPoint: 33,\n\t\t\t\tnext: 34,\n\t\t\t\tprev: 35\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1]\n\t\t);\n\t}\n\n\tget setOption() {\n\t\treturn this.$$.ctx[23];\n\t}\n\n\tget getOption() {\n\t\treturn this.$$.ctx[24];\n\t}\n\n\tget refetchEvents() {\n\t\treturn this.$$.ctx[25];\n\t}\n\n\tget getEvents() {\n\t\treturn this.$$.ctx[26];\n\t}\n\n\tget getEventById() {\n\t\treturn this.$$.ctx[27];\n\t}\n\n\tget addEvent() {\n\t\treturn this.$$.ctx[28];\n\t}\n\n\tget updateEvent() {\n\t\treturn this.$$.ctx[29];\n\t}\n\n\tget removeEventById() {\n\t\treturn this.$$.ctx[30];\n\t}\n\n\tget getView() {\n\t\treturn this.$$.ctx[31];\n\t}\n\n\tget unselect() {\n\t\treturn this.$$.ctx[32];\n\t}\n\n\tget dateFromPoint() {\n\t\treturn this.$$.ctx[33];\n\t}\n\n\tget next() {\n\t\treturn this.$$.ctx[34];\n\t}\n\n\tget prev() {\n\t\treturn this.$$.ctx[35];\n\t}\n}\n\nclass index extends Calendar {\n    destroy() {\n        this.$destroy();\n    }\n\n    get view() {\n        return this.getView();\n    }\n}\n\nexport { DAY_IN_SECONDS, addDay, addDuration, ancestor, assign, bgEvent, btnTextDay, btnTextMonth, btnTextWeek, btnTextYear, ceil, cloneDate, cloneEvent, copyTime, createDate, createDateRange, createDuration, createElement, createEventChunk, createEventClasses, createEventContent, createEventSources, createEvents, createResource, createResources, createSlotTimeLimits, createTimes, createView, datesEqual, debounce, index as default, eventIntersects, floor, flushDebounce, getElementWithPayload, getPayload, getWeekNumber, ghostEvent, hasPayload, hasYScroll, height, helperEvent, identity, intl, intlRange, isArray, isFunction, keyEnter, keys, limitToRange, listView, listen, max, min, nextClosestDay, nextDate, noTimePart, noop, outsideEvent, outsideRange, pointerEvent, prepareEventChunks, prevClosestDay, prevDate, previewEvent, rect, repositionEvent, resourceBackgroundColor, resourceTextColor, run, runAll, runReposition, setContent, setMidnight, setPayload, sortEventChunks, subtractDay, subtractDuration, symbol, task, themeView, timelineView, toEventWithLocalDates, toISOString, toLocalDate, toSeconds, toViewWithLocalDates, viewResources };\n","import { derived, writable } from 'svelte/store';\nimport { cloneDate, subtractDay, addDay, setContent, keyEnter, helperEvent, isFunction, toEventWithLocalDates, toViewWithLocalDates, task, resourceBackgroundColor, resourceTextColor, bgEvent, createEventClasses, createEventContent, rect, ancestor, repositionEvent, height, max, toISOString, outsideEvent, outsideRange, datesEqual, getWeekNumber, toLocalDate, assign, createEventChunk, runReposition, setPayload, limitToRange, eventIntersects, prepareEventChunks, debounce, btnTextMonth, themeView, intl } from '@event-calendar/core';\nimport { SvelteComponent, init, safe_not_equal, ensure_array_like, element, space, attr, insert, append, noop, detach, destroy_each, component_subscribe, action_destroyer, is_function, construct_svelte_component, create_component, mount_component, listen, group_outros, transition_out, destroy_component, check_outros, transition_in, run_all, binding_callbacks, text, stop_propagation, update_keyed_each, outro_and_destroy_block, empty, set_store_value, bubble } from 'svelte/internal';\nimport { getContext, onMount, afterUpdate, tick } from 'svelte';\n\nfunction days(state) {\n    return derived([state.date, state.firstDay, state.hiddenDays], ([$date, $firstDay, $hiddenDays]) => {\n        let days = [];\n        let day = cloneDate($date);\n        let max = 7;\n        // First day of week\n        while (day.getUTCDay() !== $firstDay && max) {\n            subtractDay(day);\n            --max;\n        }\n        for (let i = 0; i < 7; ++i) {\n            if (!$hiddenDays.includes(day.getUTCDay())) {\n                days.push(cloneDate(day));\n            }\n            addDay(day);\n        }\n\n        return days;\n    });\n}\n\n/* packages/day-grid/src/Header.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$4(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[8] = list[i];\n\treturn child_ctx;\n}\n\n// (10:8) {#each $_days as day}\nfunction create_each_block$4(ctx) {\n\tlet div;\n\tlet span;\n\tlet span_aria_label_value;\n\tlet setContent_action;\n\tlet t;\n\tlet div_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tspan = element(\"span\");\n\t\t\tt = space();\n\t\t\tattr(span, \"aria-label\", span_aria_label_value = /*$_intlDayHeaderAL*/ ctx[2].format(/*day*/ ctx[8]));\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[0].day + \" \" + /*$theme*/ ctx[0].weekdays?.[/*day*/ ctx[8].getUTCDay()]));\n\t\t\tattr(div, \"role\", \"columnheader\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, span);\n\t\t\tappend(div, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, span, /*$_intlDayHeader*/ ctx[3].format(/*day*/ ctx[8])));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty & /*$_intlDayHeaderAL, $_days*/ 6 && span_aria_label_value !== (span_aria_label_value = /*$_intlDayHeaderAL*/ ctx[2].format(/*day*/ ctx[8]))) {\n\t\t\t\tattr(span, \"aria-label\", span_aria_label_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_intlDayHeader, $_days*/ 10) setContent_action.update.call(null, /*$_intlDayHeader*/ ctx[3].format(/*day*/ ctx[8]));\n\n\t\t\tif (dirty & /*$theme, $_days*/ 3 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[0].day + \" \" + /*$theme*/ ctx[0].weekdays?.[/*day*/ ctx[8].getUTCDay()]))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction create_fragment$6(ctx) {\n\tlet div2;\n\tlet div0;\n\tlet div0_class_value;\n\tlet t;\n\tlet div1;\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet each_value = ensure_array_like(/*$_days*/ ctx[1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt = space();\n\t\t\tdiv1 = element(\"div\");\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[0].days);\n\t\t\tattr(div0, \"role\", \"row\");\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[0].hiddenScroll);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[0].header);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div0);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div0, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tappend(div2, t);\n\t\t\tappend(div2, div1);\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*$theme, $_days, $_intlDayHeaderAL, $_intlDayHeader*/ 15) {\n\t\t\t\teach_value = ensure_array_like(/*$_days*/ ctx[1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$4(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$4(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(div0, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value.length;\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 1 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[0].days)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 1 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[0].hiddenScroll)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 1 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[0].header)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction instance$5($$self, $$props, $$invalidate) {\n\tlet $theme;\n\tlet $_days;\n\tlet $_intlDayHeaderAL;\n\tlet $_intlDayHeader;\n\tlet { theme, _intlDayHeader, _intlDayHeaderAL, _days } = getContext('state');\n\tcomponent_subscribe($$self, theme, value => $$invalidate(0, $theme = value));\n\tcomponent_subscribe($$self, _intlDayHeader, value => $$invalidate(3, $_intlDayHeader = value));\n\tcomponent_subscribe($$self, _intlDayHeaderAL, value => $$invalidate(2, $_intlDayHeaderAL = value));\n\tcomponent_subscribe($$self, _days, value => $$invalidate(1, $_days = value));\n\n\treturn [\n\t\t$theme,\n\t\t$_days,\n\t\t$_intlDayHeaderAL,\n\t\t$_intlDayHeader,\n\t\ttheme,\n\t\t_intlDayHeader,\n\t\t_intlDayHeaderAL,\n\t\t_days\n\t];\n}\n\nclass Header extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$5, create_fragment$6, safe_not_equal, {});\n\t}\n}\n\n/* packages/day-grid/src/Event.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$5(ctx) {\n\tlet article;\n\tlet switch_instance0;\n\tlet t0;\n\tlet div;\n\tlet div_class_value;\n\tlet setContent_action;\n\tlet t1;\n\tlet switch_instance1;\n\tlet article_role_value;\n\tlet article_tabindex_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tvar switch_value = /*$_interaction*/ ctx[8].resizer;\n\n\tfunction switch_props(ctx, dirty) {\n\t\treturn {\n\t\t\tprops: { start: true, event: /*event*/ ctx[0] }\n\t\t};\n\t}\n\n\tif (switch_value) {\n\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'start']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'start']).apply(this, arguments);\n\t\t});\n\t}\n\n\tvar switch_value_1 = /*$_interaction*/ ctx[8].resizer;\n\n\tfunction switch_props_1(ctx, dirty) {\n\t\treturn { props: { event: /*event*/ ctx[0] } };\n\t}\n\n\tif (switch_value_1) {\n\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'end']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'end']).apply(this, arguments);\n\t\t});\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tarticle = element(\"article\");\n\t\t\tif (switch_instance0) create_component(switch_instance0.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tdiv = element(\"div\");\n\t\t\tt1 = space();\n\t\t\tif (switch_instance1) create_component(switch_instance1.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[2].eventBody);\n\t\t\tattr(article, \"class\", /*classes*/ ctx[4]);\n\t\t\tattr(article, \"style\", /*style*/ ctx[5]);\n\t\t\tattr(article, \"role\", article_role_value = /*onclick*/ ctx[7] ? 'button' : undefined);\n\t\t\tattr(article, \"tabindex\", article_tabindex_value = /*onclick*/ ctx[7] ? 0 : undefined);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, article, anchor);\n\t\t\tif (switch_instance0) mount_component(switch_instance0, article, null);\n\t\t\tappend(article, t0);\n\t\t\tappend(article, div);\n\t\t\tappend(article, t1);\n\t\t\tif (switch_instance1) mount_component(switch_instance1, article, null);\n\t\t\t/*article_binding*/ ctx[51](article);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, div, /*content*/ ctx[6])),\n\t\t\t\t\tlisten(article, \"click\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[7] || undefined)) (/*onclick*/ ctx[7] || undefined).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"keydown\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[7] && keyEnter(/*onclick*/ ctx[7]))) (/*onclick*/ ctx[7] && keyEnter(/*onclick*/ ctx[7])).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseenter\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[31](/*$eventMouseEnter*/ ctx[9], /*display*/ ctx[1]))) /*createHandler*/ ctx[31](/*$eventMouseEnter*/ ctx[9], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseleave\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[31](/*$eventMouseLeave*/ ctx[10], /*display*/ ctx[1]))) /*createHandler*/ ctx[31](/*$eventMouseLeave*/ ctx[10], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(!helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8]))) (!helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8])).apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 256 && switch_value !== (switch_value = /*$_interaction*/ ctx[8].resizer)) {\n\t\t\t\tif (switch_instance0) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance0;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value) {\n\t\t\t\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\t\t\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'start']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'start']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance0.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance0.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance0, article, t0);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance0 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value) {\n\t\t\t\tconst switch_instance0_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance0_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance0.$set(switch_instance0_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 4 && div_class_value !== (div_class_value = /*$theme*/ ctx[2].eventBody)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*content*/ 64) setContent_action.update.call(null, /*content*/ ctx[6]);\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 256 && switch_value_1 !== (switch_value_1 = /*$_interaction*/ ctx[8].resizer)) {\n\t\t\t\tif (switch_instance1) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance1;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value_1) {\n\t\t\t\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\t\t\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'end']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[8], ['x', 'end']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance1.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance1.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance1, article, null);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance1 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value_1) {\n\t\t\t\tconst switch_instance1_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance1_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance1.$set(switch_instance1_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*classes*/ 16) {\n\t\t\t\tattr(article, \"class\", /*classes*/ ctx[4]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*style*/ 32) {\n\t\t\t\tattr(article, \"style\", /*style*/ ctx[5]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 128 && article_role_value !== (article_role_value = /*onclick*/ ctx[7] ? 'button' : undefined)) {\n\t\t\t\tattr(article, \"role\", article_role_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 128 && article_tabindex_value !== (article_tabindex_value = /*onclick*/ ctx[7] ? 0 : undefined)) {\n\t\t\t\tattr(article, \"tabindex\", article_tabindex_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\tif (switch_instance0) transition_in(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_in(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tif (switch_instance0) transition_out(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_out(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(article);\n\t\t\t}\n\n\t\t\tif (switch_instance0) destroy_component(switch_instance0);\n\t\t\tif (switch_instance1) destroy_component(switch_instance1);\n\t\t\t/*article_binding*/ ctx[51](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance$4($$self, $$props, $$invalidate) {\n\tlet $eventClick;\n\tlet $_hiddenEvents;\n\tlet $dayMaxEvents;\n\tlet $_popupDate;\n\tlet $_interaction;\n\tlet $_view;\n\tlet $eventAllUpdated;\n\tlet $eventDidMount;\n\tlet $_intlEventTime;\n\tlet $theme;\n\tlet $eventContent;\n\tlet $displayEventEnd;\n\tlet $eventClassNames;\n\tlet $_iClasses;\n\tlet $eventTextColor;\n\tlet $resources;\n\tlet $eventColor;\n\tlet $eventBackgroundColor;\n\tlet $eventMouseEnter;\n\tlet $eventMouseLeave;\n\tlet { chunk } = $$props;\n\tlet { longChunks = {} } = $$props;\n\tlet { inPopup = false } = $$props;\n\tlet { dates = [] } = $$props;\n\tlet { dayMaxEvents, displayEventEnd, eventAllUpdated, eventBackgroundColor, eventTextColor, eventClick, eventColor, eventContent, eventClassNames, eventDidMount, eventMouseEnter, eventMouseLeave, resources, theme, _view, _intlEventTime, _interaction, _iClasses, _hiddenEvents, _popupDate, _tasks } = getContext('state');\n\tcomponent_subscribe($$self, dayMaxEvents, value => $$invalidate(54, $dayMaxEvents = value));\n\tcomponent_subscribe($$self, displayEventEnd, value => $$invalidate(44, $displayEventEnd = value));\n\tcomponent_subscribe($$self, eventAllUpdated, value => $$invalidate(56, $eventAllUpdated = value));\n\tcomponent_subscribe($$self, eventBackgroundColor, value => $$invalidate(50, $eventBackgroundColor = value));\n\tcomponent_subscribe($$self, eventTextColor, value => $$invalidate(47, $eventTextColor = value));\n\tcomponent_subscribe($$self, eventClick, value => $$invalidate(40, $eventClick = value));\n\tcomponent_subscribe($$self, eventColor, value => $$invalidate(49, $eventColor = value));\n\tcomponent_subscribe($$self, eventContent, value => $$invalidate(43, $eventContent = value));\n\tcomponent_subscribe($$self, eventClassNames, value => $$invalidate(45, $eventClassNames = value));\n\tcomponent_subscribe($$self, eventDidMount, value => $$invalidate(57, $eventDidMount = value));\n\tcomponent_subscribe($$self, eventMouseEnter, value => $$invalidate(9, $eventMouseEnter = value));\n\tcomponent_subscribe($$self, eventMouseLeave, value => $$invalidate(10, $eventMouseLeave = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(48, $resources = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(2, $theme = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(41, $_view = value));\n\tcomponent_subscribe($$self, _intlEventTime, value => $$invalidate(42, $_intlEventTime = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(8, $_interaction = value));\n\tcomponent_subscribe($$self, _iClasses, value => $$invalidate(46, $_iClasses = value));\n\tcomponent_subscribe($$self, _hiddenEvents, value => $$invalidate(53, $_hiddenEvents = value));\n\tcomponent_subscribe($$self, _popupDate, value => $$invalidate(55, $_popupDate = value));\n\tlet el;\n\tlet event;\n\tlet classes;\n\tlet style;\n\tlet content;\n\tlet timeText;\n\tlet margin = 1;\n\tlet hidden = false;\n\tlet display;\n\tlet onclick;\n\n\tonMount(() => {\n\t\tif (isFunction($eventDidMount)) {\n\t\t\t$eventDidMount({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\ttimeText,\n\t\t\t\tel,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t});\n\t\t}\n\t});\n\n\tafterUpdate(() => {\n\t\tif (isFunction($eventAllUpdated) && !helperEvent(display)) {\n\t\t\ttask(() => $eventAllUpdated({ view: toViewWithLocalDates($_view) }), 'eau', _tasks);\n\t\t}\n\t});\n\n\tfunction createHandler(fn, display) {\n\t\treturn !helperEvent(display) && isFunction(fn)\n\t\t? jsEvent => fn({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\tel,\n\t\t\t\tjsEvent,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t})\n\t\t: undefined;\n\t}\n\n\tfunction createDragHandler(interaction, resize) {\n\t\treturn interaction.action\n\t\t? jsEvent => $_interaction.action.drag(event, jsEvent, resize, inPopup ? $_popupDate : null, [rect(el).top - rect(ancestor(el, 1)).top, dates], chunk.zeroDuration)\n\t\t: undefined;\n\t}\n\n\tfunction reposition() {\n\t\tif (!el) {\n\t\t\treturn;\n\t\t}\n\n\t\t$$invalidate(38, margin = repositionEvent(chunk, longChunks, height(el)));\n\n\t\tif ($dayMaxEvents === true) {\n\t\t\thide();\n\t\t} else {\n\t\t\t$$invalidate(39, hidden = false);\n\t\t}\n\t}\n\n\tfunction hide() {\n\t\tlet dayEl = ancestor(el, 2);\n\t\tlet h = height(dayEl) - height(dayEl.firstElementChild) - footHeight(dayEl);\n\t\t$$invalidate(39, hidden = chunk.bottom > h);\n\t\tlet update = false;\n\n\t\t// Hide or show the event throughout all days\n\t\tfor (let date of chunk.dates) {\n\t\t\tlet hiddenEvents = $_hiddenEvents[date.getTime()];\n\n\t\t\tif (hiddenEvents) {\n\t\t\t\tlet size = hiddenEvents.size;\n\n\t\t\t\tif (hidden) {\n\t\t\t\t\thiddenEvents.add(chunk.event);\n\t\t\t\t} else {\n\t\t\t\t\thiddenEvents.delete(chunk.event);\n\t\t\t\t}\n\n\t\t\t\tif (size !== hiddenEvents.size) {\n\t\t\t\t\tupdate = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (update) {\n\t\t\t_hiddenEvents.set($_hiddenEvents);\n\t\t}\n\t}\n\n\tfunction footHeight(dayEl) {\n\t\tlet h = 0;\n\n\t\tfor (let i = 0; i < chunk.days; ++i) {\n\t\t\th = max(h, height(dayEl.lastElementChild));\n\t\t\tdayEl = dayEl.nextElementSibling;\n\n\t\t\tif (!dayEl) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn h;\n\t}\n\n\tfunction article_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(3, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('chunk' in $$props) $$invalidate(33, chunk = $$props.chunk);\n\t\tif ('longChunks' in $$props) $$invalidate(34, longChunks = $$props.longChunks);\n\t\tif ('inPopup' in $$props) $$invalidate(35, inPopup = $$props.inPopup);\n\t\tif ('dates' in $$props) $$invalidate(36, dates = $$props.dates);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[1] & /*chunk*/ 4) {\n\t\t\t$$invalidate(0, event = chunk.event);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*event, display, style, $theme*/ 39 | $$self.$$.dirty[1] & /*$resources, $eventBackgroundColor, $eventColor, $eventTextColor, chunk, margin, hidden, $_iClasses, $eventClassNames, $_view*/ 1033604) {\n\t\t\t{\n\t\t\t\t$$invalidate(1, display = event.display);\n\n\t\t\t\t// Class & Style\n\t\t\t\tlet bgColor = event.backgroundColor || resourceBackgroundColor(event, $resources) || $eventBackgroundColor || $eventColor;\n\n\t\t\t\tlet txtColor = event.textColor || resourceTextColor(event, $resources) || $eventTextColor;\n\n\t\t\t\tif (bgEvent(display)) {\n\t\t\t\t\t$$invalidate(5, style = `width:calc(${chunk.days * 100}% + ${chunk.days - 1}px);`);\n\t\t\t\t} else {\n\t\t\t\t\tlet marginTop = margin;\n\n\t\t\t\t\tif (event._margin) {\n\t\t\t\t\t\t// Force margin for helper events\n\t\t\t\t\t\tlet [_margin, _dates] = event._margin;\n\n\t\t\t\t\t\tif (chunk.date >= _dates[0] && chunk.date <= _dates.at(-1)) {\n\t\t\t\t\t\t\tmarginTop = _margin;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$$invalidate(5, style = `width:calc(${chunk.days * 100}% + ${(chunk.days - 1) * 7}px);` + `margin-top:${marginTop}px;`);\n\t\t\t\t}\n\n\t\t\t\tif (bgColor) {\n\t\t\t\t\t$$invalidate(5, style += `background-color:${bgColor};`);\n\t\t\t\t}\n\n\t\t\t\tif (txtColor) {\n\t\t\t\t\t$$invalidate(5, style += `color:${txtColor};`);\n\t\t\t\t}\n\n\t\t\t\tif (hidden) {\n\t\t\t\t\t$$invalidate(5, style += 'visibility:hidden;');\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(5, style += event.styles.join(';'));\n\n\t\t\t\t$$invalidate(4, classes = [\n\t\t\t\t\tbgEvent(display) ? $theme.bgEvent : $theme.event,\n\t\t\t\t\t...$_iClasses([], event),\n\t\t\t\t\t...createEventClasses($eventClassNames, event, $_view)\n\t\t\t\t].join(' '));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$theme*/ 4 | $$self.$$.dirty[1] & /*chunk, $displayEventEnd, $eventContent, $_intlEventTime, $_view*/ 15364) {\n\t\t\t// Content\n\t\t\t$$invalidate(6, [timeText, content] = createEventContent(chunk, $displayEventEnd, $eventContent, $theme, $_intlEventTime, $_view), content);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*display*/ 2 | $$self.$$.dirty[1] & /*$eventClick*/ 512) {\n\t\t\t// Onclick handler\n\t\t\t$$invalidate(7, onclick = createHandler($eventClick, display));\n\t\t}\n\t};\n\n\treturn [\n\t\tevent,\n\t\tdisplay,\n\t\t$theme,\n\t\tel,\n\t\tclasses,\n\t\tstyle,\n\t\tcontent,\n\t\tonclick,\n\t\t$_interaction,\n\t\t$eventMouseEnter,\n\t\t$eventMouseLeave,\n\t\tdayMaxEvents,\n\t\tdisplayEventEnd,\n\t\teventAllUpdated,\n\t\teventBackgroundColor,\n\t\teventTextColor,\n\t\teventClick,\n\t\teventColor,\n\t\teventContent,\n\t\teventClassNames,\n\t\teventDidMount,\n\t\teventMouseEnter,\n\t\teventMouseLeave,\n\t\tresources,\n\t\ttheme,\n\t\t_view,\n\t\t_intlEventTime,\n\t\t_interaction,\n\t\t_iClasses,\n\t\t_hiddenEvents,\n\t\t_popupDate,\n\t\tcreateHandler,\n\t\tcreateDragHandler,\n\t\tchunk,\n\t\tlongChunks,\n\t\tinPopup,\n\t\tdates,\n\t\treposition,\n\t\tmargin,\n\t\thidden,\n\t\t$eventClick,\n\t\t$_view,\n\t\t$_intlEventTime,\n\t\t$eventContent,\n\t\t$displayEventEnd,\n\t\t$eventClassNames,\n\t\t$_iClasses,\n\t\t$eventTextColor,\n\t\t$resources,\n\t\t$eventColor,\n\t\t$eventBackgroundColor,\n\t\tarticle_binding\n\t];\n}\n\nclass Event extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance$4,\n\t\t\tcreate_fragment$5,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tchunk: 33,\n\t\t\t\tlongChunks: 34,\n\t\t\t\tinPopup: 35,\n\t\t\t\tdates: 36,\n\t\t\t\treposition: 37\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1]\n\t\t);\n\t}\n\n\tget reposition() {\n\t\treturn this.$$.ctx[37];\n\t}\n}\n\n/* packages/day-grid/src/Popup.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$3(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[20] = list[i];\n\treturn child_ctx;\n}\n\n// (100:8) {#each $_popupChunks as chunk (chunk.event)}\nfunction create_each_block$3(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet current;\n\n\tevent = new Event({\n\t\t\tprops: { chunk: /*chunk*/ ctx[20], inPopup: true }\n\t\t});\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty & /*$_popupChunks*/ 1) event_changes.chunk = /*chunk*/ ctx[20];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$4(ctx) {\n\tlet div2;\n\tlet div0;\n\tlet time;\n\tlet time_datetime_value;\n\tlet setContent_action;\n\tlet t0;\n\tlet a;\n\tlet t1;\n\tlet a_aria_label_value;\n\tlet div0_class_value;\n\tlet t2;\n\tlet div1;\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value = ensure_array_like(/*$_popupChunks*/ ctx[0]);\n\tconst get_key = ctx => /*chunk*/ ctx[20].event;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context$3(ctx, each_value, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block$3(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\ttime = element(\"time\");\n\t\t\tt0 = space();\n\t\t\ta = element(\"a\");\n\t\t\tt1 = text(\"\");\n\t\t\tt2 = space();\n\t\t\tdiv1 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(time, \"datetime\", time_datetime_value = toISOString(/*$_popupDate*/ ctx[3], 10));\n\t\t\tattr(a, \"role\", \"button\");\n\t\t\tattr(a, \"tabindex\", \"0\");\n\t\t\tattr(a, \"aria-label\", a_aria_label_value = /*$buttonText*/ ctx[6].close);\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[4].dayHead);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[4].events);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[4].popup);\n\t\t\tattr(div2, \"style\", /*style*/ ctx[2]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div0);\n\t\t\tappend(div0, time);\n\t\t\tappend(div0, t0);\n\t\t\tappend(div0, a);\n\t\t\tappend(a, t1);\n\t\t\tappend(div2, t2);\n\t\t\tappend(div2, div1);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*div2_binding*/ ctx[16](div2);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, time, /*$_intlDayPopover*/ ctx[5].format(/*$_popupDate*/ ctx[3]))),\n\t\t\t\t\tlisten(a, \"click\", stop_propagation(/*close*/ ctx[13])),\n\t\t\t\t\tlisten(a, \"keydown\", keyEnter(/*close*/ ctx[13])),\n\t\t\t\t\taction_destroyer(outsideEvent.call(null, div2, 'pointerdown')),\n\t\t\t\t\tlisten(div2, \"pointerdown\", stop_propagation(/*pointerdown_handler*/ ctx[15])),\n\t\t\t\t\tlisten(div2, \"pointerdownoutside\", /*handlePointerDownOutside*/ ctx[14])\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (!current || dirty & /*$_popupDate*/ 8 && time_datetime_value !== (time_datetime_value = toISOString(/*$_popupDate*/ ctx[3], 10))) {\n\t\t\t\tattr(time, \"datetime\", time_datetime_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_intlDayPopover, $_popupDate*/ 40) setContent_action.update.call(null, /*$_intlDayPopover*/ ctx[5].format(/*$_popupDate*/ ctx[3]));\n\n\t\t\tif (!current || dirty & /*$buttonText*/ 64 && a_aria_label_value !== (a_aria_label_value = /*$buttonText*/ ctx[6].close)) {\n\t\t\t\tattr(a, \"aria-label\", a_aria_label_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 16 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[4].dayHead)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$_popupChunks*/ 1) {\n\t\t\t\teach_value = ensure_array_like(/*$_popupChunks*/ ctx[0]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value, each_1_lookup, div1, outro_and_destroy_block, create_each_block$3, null, get_each_context$3);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 16 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[4].events)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 16 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[4].popup)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*style*/ 4) {\n\t\t\t\tattr(div2, \"style\", /*style*/ ctx[2]);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\n\t\t\t/*div2_binding*/ ctx[16](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance$3($$self, $$props, $$invalidate) {\n\tlet $_interaction;\n\tlet $_popupDate;\n\tlet $_popupChunks;\n\tlet $theme;\n\tlet $_intlDayPopover;\n\tlet $buttonText;\n\tlet { buttonText, theme, _interaction, _intlDayPopover, _popupDate, _popupChunks } = getContext('state');\n\tcomponent_subscribe($$self, buttonText, value => $$invalidate(6, $buttonText = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(4, $theme = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(17, $_interaction = value));\n\tcomponent_subscribe($$self, _intlDayPopover, value => $$invalidate(5, $_intlDayPopover = value));\n\tcomponent_subscribe($$self, _popupDate, value => $$invalidate(3, $_popupDate = value));\n\tcomponent_subscribe($$self, _popupChunks, value => $$invalidate(0, $_popupChunks = value));\n\tlet el;\n\tlet style = '';\n\n\tfunction position() {\n\t\tlet dayEl = ancestor(el, 1);\n\t\tlet bodyEl = ancestor(dayEl, 3);\n\t\tlet popupRect = rect(el);\n\t\tlet dayRect = rect(dayEl);\n\t\tlet bodyRect = rect(bodyEl);\n\t\t$$invalidate(2, style = '');\n\t\tlet left;\n\n\t\tif (popupRect.width >= bodyRect.width) {\n\t\t\tleft = bodyRect.left - dayRect.left;\n\t\t\tlet right = dayRect.right - bodyRect.right;\n\t\t\t$$invalidate(2, style += `right:${right}px;`);\n\t\t} else {\n\t\t\tleft = (dayRect.width - popupRect.width) / 2;\n\n\t\t\tif (dayRect.left + left < bodyRect.left) {\n\t\t\t\tleft = bodyRect.left - dayRect.left;\n\t\t\t} else if (dayRect.left + left + popupRect.width > bodyRect.right) {\n\t\t\t\tleft = bodyRect.right - dayRect.left - popupRect.width;\n\t\t\t}\n\t\t}\n\n\t\t$$invalidate(2, style += `left:${left}px;`);\n\t\tlet top;\n\n\t\tif (popupRect.height >= bodyRect.height) {\n\t\t\ttop = bodyRect.top - dayRect.top;\n\t\t\tlet bottom = dayRect.bottom - bodyRect.bottom;\n\t\t\t$$invalidate(2, style += `bottom:${bottom}px;`);\n\t\t} else {\n\t\t\ttop = (dayRect.height - popupRect.height) / 2;\n\n\t\t\tif (dayRect.top + top < bodyRect.top) {\n\t\t\t\ttop = bodyRect.top - dayRect.top;\n\t\t\t} else if (dayRect.top + top + popupRect.height > bodyRect.bottom) {\n\t\t\t\ttop = bodyRect.bottom - dayRect.top - popupRect.height;\n\t\t\t}\n\t\t}\n\n\t\t$$invalidate(2, style += `top:${top}px;`);\n\t}\n\n\tfunction reposition() {\n\t\t// Skip the first call (el is not defined at this time)\n\t\tif (el) {\n\t\t\t$$invalidate(2, style = '');\n\n\t\t\t// Let chunks to update/mount then position the popup\n\t\t\ttick().then(() => {\n\t\t\t\tif ($_popupChunks.length) {\n\t\t\t\t\tposition();\n\t\t\t\t} else {\n\t\t\t\t\tclose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction close(e) {\n\t\tset_store_value(_popupDate, $_popupDate = null, $_popupDate);\n\t}\n\n\tfunction handlePointerDownOutside(e) {\n\t\tclose();\n\t\t$_interaction.action?.noClick();\n\t}\n\n\tfunction pointerdown_handler(event) {\n\t\tbubble.call(this, $$self, event);\n\t}\n\n\tfunction div2_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(1, el);\n\t\t});\n\t}\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$_popupChunks*/ 1) {\n\t\t\tif ($_popupChunks) {\n\t\t\t\t// Fire reposition only on popup chunks change\n\t\t\t\treposition();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\t$_popupChunks,\n\t\tel,\n\t\tstyle,\n\t\t$_popupDate,\n\t\t$theme,\n\t\t$_intlDayPopover,\n\t\t$buttonText,\n\t\tbuttonText,\n\t\ttheme,\n\t\t_interaction,\n\t\t_intlDayPopover,\n\t\t_popupDate,\n\t\t_popupChunks,\n\t\tclose,\n\t\thandlePointerDownOutside,\n\t\tpointerdown_handler,\n\t\tdiv2_binding\n\t];\n}\n\nclass Popup extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$3, create_fragment$4, safe_not_equal, {});\n\t}\n}\n\n/* packages/day-grid/src/Day.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[54] = list[i];\n\tchild_ctx[55] = list;\n\tchild_ctx[56] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[54] = list[i];\n\treturn child_ctx;\n}\n\n// (120:8) {#if showWeekNumber}\nfunction create_if_block_7(ctx) {\n\tlet span;\n\tlet span_class_value;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tspan = element(\"span\");\n\t\t\tattr(span, \"class\", span_class_value = /*$theme*/ ctx[17].weekNumber);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, span, anchor);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, span, /*weekNumber*/ ctx[15]));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme*/ 131072 && span_class_value !== (span_class_value = /*$theme*/ ctx[17].weekNumber)) {\n\t\t\t\tattr(span, \"class\", span_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*weekNumber*/ 32768) setContent_action.update.call(null, /*weekNumber*/ ctx[15]);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(span);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (128:8) {#if !disabled}\nfunction create_if_block_6(ctx) {\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value_1 = ensure_array_like(/*dayBgChunks*/ ctx[10]);\n\tconst get_key = ctx => /*chunk*/ ctx[54].event;\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\tlet child_ctx = get_each_context_1(ctx, each_value_1, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block_1(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*dayBgChunks*/ 1024) {\n\t\t\t\teach_value_1 = ensure_array_like(/*dayBgChunks*/ ctx[10]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_1, each_1_lookup, each_1_anchor.parentNode, outro_and_destroy_block, create_each_block_1, each_1_anchor, get_each_context_1);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d(detaching);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (129:12) {#each dayBgChunks as chunk (chunk.event)}\nfunction create_each_block_1(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet current;\n\tevent = new Event({ props: { chunk: /*chunk*/ ctx[54] } });\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*dayBgChunks*/ 1024) event_changes.chunk = /*chunk*/ ctx[54];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (134:4) {#if !disabled}\nfunction create_if_block_3(ctx) {\n\tlet show_if_1 = /*iChunks*/ ctx[2][2] && datesEqual(/*iChunks*/ ctx[2][2].date, /*date*/ ctx[0]);\n\tlet t;\n\tlet show_if = /*iChunks*/ ctx[2][0] && datesEqual(/*iChunks*/ ctx[2][0].date, /*date*/ ctx[0]);\n\tlet if_block1_anchor;\n\tlet current;\n\tlet if_block0 = show_if_1 && create_if_block_5(ctx);\n\tlet if_block1 = show_if && create_if_block_4(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif (if_block0) if_block0.c();\n\t\t\tt = space();\n\t\t\tif (if_block1) if_block1.c();\n\t\t\tif_block1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (if_block0) if_block0.m(target, anchor);\n\t\t\tinsert(target, t, anchor);\n\t\t\tif (if_block1) if_block1.m(target, anchor);\n\t\t\tinsert(target, if_block1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*iChunks, date*/ 5) show_if_1 = /*iChunks*/ ctx[2][2] && datesEqual(/*iChunks*/ ctx[2][2].date, /*date*/ ctx[0]);\n\n\t\t\tif (show_if_1) {\n\t\t\t\tif (if_block0) {\n\t\t\t\t\tif_block0.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*iChunks, date*/ 5) {\n\t\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block0 = create_if_block_5(ctx);\n\t\t\t\t\tif_block0.c();\n\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\tif_block0.m(t.parentNode, t);\n\t\t\t\t}\n\t\t\t} else if (if_block0) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block0, 1, 1, () => {\n\t\t\t\t\tif_block0 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*iChunks, date*/ 5) show_if = /*iChunks*/ ctx[2][0] && datesEqual(/*iChunks*/ ctx[2][0].date, /*date*/ ctx[0]);\n\n\t\t\tif (show_if) {\n\t\t\t\tif (if_block1) {\n\t\t\t\t\tif_block1.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*iChunks, date*/ 5) {\n\t\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block1 = create_if_block_4(ctx);\n\t\t\t\t\tif_block1.c();\n\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\tif_block1.m(if_block1_anchor.parentNode, if_block1_anchor);\n\t\t\t\t}\n\t\t\t} else if (if_block1) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block1, 1, 1, () => {\n\t\t\t\t\tif_block1 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block0);\n\t\t\ttransition_in(if_block1);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block0);\n\t\t\ttransition_out(if_block1);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t);\n\t\t\t\tdetach(if_block1_anchor);\n\t\t\t}\n\n\t\t\tif (if_block0) if_block0.d(detaching);\n\t\t\tif (if_block1) if_block1.d(detaching);\n\t\t}\n\t};\n}\n\n// (136:8) {#if iChunks[2] && datesEqual(iChunks[2].date, date)}\nfunction create_if_block_5(ctx) {\n\tlet div;\n\tlet event;\n\tlet div_class_value;\n\tlet current;\n\tevent = new Event({ props: { chunk: /*iChunks*/ ctx[2][2] } });\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[17].events);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(event, div, null);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*iChunks*/ 4) event_changes.chunk = /*iChunks*/ ctx[2][2];\n\t\t\tevent.$set(event_changes);\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 131072 && div_class_value !== (div_class_value = /*$theme*/ ctx[17].events)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_component(event);\n\t\t}\n\t};\n}\n\n// (142:8) {#if iChunks[0] && datesEqual(iChunks[0].date, date)}\nfunction create_if_block_4(ctx) {\n\tlet div;\n\tlet event;\n\tlet div_class_value;\n\tlet current;\n\tevent = new Event({ props: { chunk: /*iChunks*/ ctx[2][0] } });\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[17].events + \" \" + /*$theme*/ ctx[17].preview));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(event, div, null);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*iChunks*/ 4) event_changes.chunk = /*iChunks*/ ctx[2][0];\n\t\t\tevent.$set(event_changes);\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 131072 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[17].events + \" \" + /*$theme*/ ctx[17].preview))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_component(event);\n\t\t}\n\t};\n}\n\n// (149:8) {#if !disabled}\nfunction create_if_block_2(ctx) {\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value = ensure_array_like(/*dayChunks*/ ctx[5]);\n\tconst get_key = ctx => /*chunk*/ ctx[54].event;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context$2(ctx, each_value, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block$2(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*dayChunks, longChunks, dates, refs*/ 65578) {\n\t\t\t\teach_value = ensure_array_like(/*dayChunks*/ ctx[5]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value, each_1_lookup, each_1_anchor.parentNode, outro_and_destroy_block, create_each_block$2, each_1_anchor, get_each_context$2);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d(detaching);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (150:12) {#each dayChunks as chunk, i (chunk.event)}\nfunction create_each_block$2(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet i = /*i*/ ctx[56];\n\tlet current;\n\tconst assign_event = () => /*event_binding*/ ctx[49](event, i);\n\tconst unassign_event = () => /*event_binding*/ ctx[49](null, i);\n\n\tlet event_props = {\n\t\tchunk: /*chunk*/ ctx[54],\n\t\tlongChunks: /*longChunks*/ ctx[1],\n\t\tdates: /*dates*/ ctx[3]\n\t};\n\n\tevent = new Event({ props: event_props });\n\tassign_event();\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (i !== /*i*/ ctx[56]) {\n\t\t\t\tunassign_event();\n\t\t\t\ti = /*i*/ ctx[56];\n\t\t\t\tassign_event();\n\t\t\t}\n\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*dayChunks*/ 32) event_changes.chunk = /*chunk*/ ctx[54];\n\t\t\tif (dirty[0] & /*longChunks*/ 2) event_changes.longChunks = /*longChunks*/ ctx[1];\n\t\t\tif (dirty[0] & /*dates*/ 8) event_changes.dates = /*dates*/ ctx[3];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tunassign_event();\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (155:4) {#if showPopup}\nfunction create_if_block_1(ctx) {\n\tlet popup;\n\tlet current;\n\tpopup = new Popup({});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(popup.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(popup, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(popup.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(popup.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(popup, detaching);\n\t\t}\n\t};\n}\n\n// (159:8) {#if !disabled && hiddenEvents.size}\nfunction create_if_block(ctx) {\n\tlet a;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\ta = element(\"a\");\n\t\t\tattr(a, \"role\", \"button\");\n\t\t\tattr(a, \"tabindex\", \"0\");\n\t\t\tattr(a, \"aria-haspopup\", \"true\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, a, anchor);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\tlisten(a, \"click\", stop_propagation(/*showMore*/ ctx[34])),\n\t\t\t\t\tlisten(a, \"keydown\", keyEnter(/*showMore*/ ctx[34])),\n\t\t\t\t\tlisten(a, \"pointerdown\", stop_propagation(/*pointerdown_handler*/ ctx[48])),\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, a, /*moreLink*/ ctx[14]))\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*moreLink*/ 16384) setContent_action.update.call(null, /*moreLink*/ ctx[14]);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(a);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction create_fragment$3(ctx) {\n\tlet div4;\n\tlet div0;\n\tlet time;\n\tlet time_datetime_value;\n\tlet setContent_action;\n\tlet t0;\n\tlet div0_class_value;\n\tlet t1;\n\tlet div1;\n\tlet div1_class_value;\n\tlet t2;\n\tlet t3;\n\tlet div2;\n\tlet div2_class_value;\n\tlet t4;\n\tlet t5;\n\tlet div3;\n\tlet div3_class_value;\n\tlet div4_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet if_block0 = /*showWeekNumber*/ ctx[9] && create_if_block_7(ctx);\n\tlet if_block1 = !/*disabled*/ ctx[6] && create_if_block_6(ctx);\n\tlet if_block2 = !/*disabled*/ ctx[6] && create_if_block_3(ctx);\n\tlet if_block3 = !/*disabled*/ ctx[6] && create_if_block_2(ctx);\n\tlet if_block4 = /*showPopup*/ ctx[8] && create_if_block_1();\n\tlet if_block5 = !/*disabled*/ ctx[6] && /*hiddenEvents*/ ctx[7].size && create_if_block(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv4 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\ttime = element(\"time\");\n\t\t\tt0 = space();\n\t\t\tif (if_block0) if_block0.c();\n\t\t\tt1 = space();\n\t\t\tdiv1 = element(\"div\");\n\t\t\tif (if_block1) if_block1.c();\n\t\t\tt2 = space();\n\t\t\tif (if_block2) if_block2.c();\n\t\t\tt3 = space();\n\t\t\tdiv2 = element(\"div\");\n\t\t\tif (if_block3) if_block3.c();\n\t\t\tt4 = space();\n\t\t\tif (if_block4) if_block4.c();\n\t\t\tt5 = space();\n\t\t\tdiv3 = element(\"div\");\n\t\t\tif (if_block5) if_block5.c();\n\t\t\tattr(time, \"datetime\", time_datetime_value = toISOString(/*date*/ ctx[0], 10));\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[17].dayHead);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[17].bgEvents);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[17].events);\n\t\t\tattr(div3, \"class\", div3_class_value = /*$theme*/ ctx[17].dayFoot);\n\n\t\t\tattr(div4, \"class\", div4_class_value = \"\" + (/*$theme*/ ctx[17].day + \" \" + /*$theme*/ ctx[17].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[11]\n\t\t\t? ' ' + /*$theme*/ ctx[17].today\n\t\t\t: '') + (/*otherMonth*/ ctx[12]\n\t\t\t? ' ' + /*$theme*/ ctx[17].otherMonth\n\t\t\t: '') + (/*highlight*/ ctx[13]\n\t\t\t? ' ' + /*$theme*/ ctx[17].highlight\n\t\t\t: '') + (/*disabled*/ ctx[6]\n\t\t\t? ' ' + /*$theme*/ ctx[17].disabled\n\t\t\t: '')));\n\n\t\t\tattr(div4, \"role\", \"cell\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div4, anchor);\n\t\t\tappend(div4, div0);\n\t\t\tappend(div0, time);\n\t\t\tappend(div0, t0);\n\t\t\tif (if_block0) if_block0.m(div0, null);\n\t\t\tappend(div4, t1);\n\t\t\tappend(div4, div1);\n\t\t\tif (if_block1) if_block1.m(div1, null);\n\t\t\tappend(div4, t2);\n\t\t\tif (if_block2) if_block2.m(div4, null);\n\t\t\tappend(div4, t3);\n\t\t\tappend(div4, div2);\n\t\t\tif (if_block3) if_block3.m(div2, null);\n\t\t\tappend(div4, t4);\n\t\t\tif (if_block4) if_block4.m(div4, null);\n\t\t\tappend(div4, t5);\n\t\t\tappend(div4, div3);\n\t\t\tif (if_block5) if_block5.m(div3, null);\n\t\t\t/*div4_binding*/ ctx[50](div4);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, time, /*$_intlDayCell*/ ctx[19].format(/*date*/ ctx[0]))),\n\t\t\t\t\tlisten(div4, \"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*$_interaction*/ ctx[18].action?.select)) /*$_interaction*/ ctx[18].action?.select.apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (!current || dirty[0] & /*date*/ 1 && time_datetime_value !== (time_datetime_value = toISOString(/*date*/ ctx[0], 10))) {\n\t\t\t\tattr(time, \"datetime\", time_datetime_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*$_intlDayCell, date*/ 524289) setContent_action.update.call(null, /*$_intlDayCell*/ ctx[19].format(/*date*/ ctx[0]));\n\n\t\t\tif (/*showWeekNumber*/ ctx[9]) {\n\t\t\t\tif (if_block0) {\n\t\t\t\t\tif_block0.p(ctx, dirty);\n\t\t\t\t} else {\n\t\t\t\t\tif_block0 = create_if_block_7(ctx);\n\t\t\t\t\tif_block0.c();\n\t\t\t\t\tif_block0.m(div0, null);\n\t\t\t\t}\n\t\t\t} else if (if_block0) {\n\t\t\t\tif_block0.d(1);\n\t\t\t\tif_block0 = null;\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 131072 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[17].dayHead)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!/*disabled*/ ctx[6]) {\n\t\t\t\tif (if_block1) {\n\t\t\t\t\tif_block1.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*disabled*/ 64) {\n\t\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block1 = create_if_block_6(ctx);\n\t\t\t\t\tif_block1.c();\n\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\tif_block1.m(div1, null);\n\t\t\t\t}\n\t\t\t} else if (if_block1) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block1, 1, 1, () => {\n\t\t\t\t\tif_block1 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 131072 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[17].bgEvents)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!/*disabled*/ ctx[6]) {\n\t\t\t\tif (if_block2) {\n\t\t\t\t\tif_block2.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*disabled*/ 64) {\n\t\t\t\t\t\ttransition_in(if_block2, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block2 = create_if_block_3(ctx);\n\t\t\t\t\tif_block2.c();\n\t\t\t\t\ttransition_in(if_block2, 1);\n\t\t\t\t\tif_block2.m(div4, t3);\n\t\t\t\t}\n\t\t\t} else if (if_block2) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block2, 1, 1, () => {\n\t\t\t\t\tif_block2 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!/*disabled*/ ctx[6]) {\n\t\t\t\tif (if_block3) {\n\t\t\t\t\tif_block3.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*disabled*/ 64) {\n\t\t\t\t\t\ttransition_in(if_block3, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block3 = create_if_block_2(ctx);\n\t\t\t\t\tif_block3.c();\n\t\t\t\t\ttransition_in(if_block3, 1);\n\t\t\t\t\tif_block3.m(div2, null);\n\t\t\t\t}\n\t\t\t} else if (if_block3) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block3, 1, 1, () => {\n\t\t\t\t\tif_block3 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 131072 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[17].events)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\n\t\t\tif (/*showPopup*/ ctx[8]) {\n\t\t\t\tif (if_block4) {\n\t\t\t\t\tif (dirty[0] & /*showPopup*/ 256) {\n\t\t\t\t\t\ttransition_in(if_block4, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block4 = create_if_block_1();\n\t\t\t\t\tif_block4.c();\n\t\t\t\t\ttransition_in(if_block4, 1);\n\t\t\t\t\tif_block4.m(div4, t5);\n\t\t\t\t}\n\t\t\t} else if (if_block4) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block4, 1, 1, () => {\n\t\t\t\t\tif_block4 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!/*disabled*/ ctx[6] && /*hiddenEvents*/ ctx[7].size) {\n\t\t\t\tif (if_block5) {\n\t\t\t\t\tif_block5.p(ctx, dirty);\n\t\t\t\t} else {\n\t\t\t\t\tif_block5 = create_if_block(ctx);\n\t\t\t\t\tif_block5.c();\n\t\t\t\t\tif_block5.m(div3, null);\n\t\t\t\t}\n\t\t\t} else if (if_block5) {\n\t\t\t\tif_block5.d(1);\n\t\t\t\tif_block5 = null;\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 131072 && div3_class_value !== (div3_class_value = /*$theme*/ ctx[17].dayFoot)) {\n\t\t\t\tattr(div3, \"class\", div3_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme, date, isToday, otherMonth, highlight, disabled*/ 145473 && div4_class_value !== (div4_class_value = \"\" + (/*$theme*/ ctx[17].day + \" \" + /*$theme*/ ctx[17].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[11]\n\t\t\t? ' ' + /*$theme*/ ctx[17].today\n\t\t\t: '') + (/*otherMonth*/ ctx[12]\n\t\t\t? ' ' + /*$theme*/ ctx[17].otherMonth\n\t\t\t: '') + (/*highlight*/ ctx[13]\n\t\t\t? ' ' + /*$theme*/ ctx[17].highlight\n\t\t\t: '') + (/*disabled*/ ctx[6]\n\t\t\t? ' ' + /*$theme*/ ctx[17].disabled\n\t\t\t: '')))) {\n\t\t\t\tattr(div4, \"class\", div4_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block1);\n\t\t\ttransition_in(if_block2);\n\t\t\ttransition_in(if_block3);\n\t\t\ttransition_in(if_block4);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block1);\n\t\t\ttransition_out(if_block2);\n\t\t\ttransition_out(if_block3);\n\t\t\ttransition_out(if_block4);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div4);\n\t\t\t}\n\n\t\t\tif (if_block0) if_block0.d();\n\t\t\tif (if_block1) if_block1.d();\n\t\t\tif (if_block2) if_block2.d();\n\t\t\tif (if_block3) if_block3.d();\n\t\t\tif (if_block4) if_block4.d();\n\t\t\tif (if_block5) if_block5.d();\n\t\t\t/*div4_binding*/ ctx[50](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance$2($$self, $$props, $$invalidate) {\n\tlet $weekNumberContent;\n\tlet $firstDay;\n\tlet $weekNumbers;\n\tlet $_popupChunks;\n\tlet $_popupDate;\n\tlet $moreLinkContent;\n\tlet $_hiddenEvents;\n\tlet $validRange;\n\tlet $highlightedDates;\n\tlet $currentDate;\n\tlet $_today;\n\tlet $theme;\n\tlet $_interaction;\n\tlet $_intlDayCell;\n\tlet { date } = $$props;\n\tlet { chunks } = $$props;\n\tlet { bgChunks } = $$props;\n\tlet { longChunks } = $$props;\n\tlet { iChunks = [] } = $$props;\n\tlet { dates } = $$props;\n\tlet { date: currentDate, dayMaxEvents, highlightedDates, firstDay, moreLinkContent, theme, validRange, weekNumbers, weekNumberContent, _hiddenEvents, _intlDayCell, _popupDate, _popupChunks, _today, _interaction } = getContext('state');\n\tcomponent_subscribe($$self, currentDate, value => $$invalidate(46, $currentDate = value));\n\tcomponent_subscribe($$self, highlightedDates, value => $$invalidate(45, $highlightedDates = value));\n\tcomponent_subscribe($$self, firstDay, value => $$invalidate(39, $firstDay = value));\n\tcomponent_subscribe($$self, moreLinkContent, value => $$invalidate(42, $moreLinkContent = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(17, $theme = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(44, $validRange = value));\n\tcomponent_subscribe($$self, weekNumbers, value => $$invalidate(40, $weekNumbers = value));\n\tcomponent_subscribe($$self, weekNumberContent, value => $$invalidate(38, $weekNumberContent = value));\n\tcomponent_subscribe($$self, _hiddenEvents, value => $$invalidate(43, $_hiddenEvents = value));\n\tcomponent_subscribe($$self, _intlDayCell, value => $$invalidate(19, $_intlDayCell = value));\n\tcomponent_subscribe($$self, _popupDate, value => $$invalidate(41, $_popupDate = value));\n\tcomponent_subscribe($$self, _popupChunks, value => $$invalidate(51, $_popupChunks = value));\n\tcomponent_subscribe($$self, _today, value => $$invalidate(47, $_today = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(18, $_interaction = value));\n\tlet el;\n\tlet dayChunks, dayBgChunks;\n\tlet isToday, otherMonth, highlight, disabled;\n\tlet hiddenEvents = new Set(); // hidden events of this day\n\tlet moreLink = '';\n\tlet showPopup;\n\tlet showWeekNumber;\n\tlet weekNumber;\n\tlet refs = [];\n\n\tfunction showMore() {\n\t\tset_store_value(_popupDate, $_popupDate = date, $_popupDate);\n\t}\n\n\tfunction setPopupChunks() {\n\t\tlet nextDay = addDay(cloneDate(date));\n\t\tlet chunks = dayChunks.concat(longChunks[date.getTime()]?.chunks || []);\n\t\tset_store_value(_popupChunks, $_popupChunks = chunks.map(chunk => assign({}, chunk, createEventChunk(chunk.event, date, nextDay), { days: 1, dates: [date] })).sort((a, b) => a.top - b.top), $_popupChunks);\n\t}\n\n\tfunction reposition() {\n\t\tif (!disabled) {\n\t\t\trunReposition(refs, dayChunks);\n\t\t}\n\t}\n\n\tfunction pointerdown_handler(event) {\n\t\tbubble.call(this, $$self, event);\n\t}\n\n\tfunction event_binding($$value, i) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trefs[i] = $$value;\n\t\t\t$$invalidate(16, refs);\n\t\t});\n\t}\n\n\tfunction div4_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(4, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('date' in $$props) $$invalidate(0, date = $$props.date);\n\t\tif ('chunks' in $$props) $$invalidate(35, chunks = $$props.chunks);\n\t\tif ('bgChunks' in $$props) $$invalidate(36, bgChunks = $$props.bgChunks);\n\t\tif ('longChunks' in $$props) $$invalidate(1, longChunks = $$props.longChunks);\n\t\tif ('iChunks' in $$props) $$invalidate(2, iChunks = $$props.iChunks);\n\t\tif ('dates' in $$props) $$invalidate(3, dates = $$props.dates);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$validRange*/ 8192) {\n\t\t\t$$invalidate(6, disabled = outsideRange(date, $validRange));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*disabled, date, hiddenEvents, dayChunks*/ 225 | $$self.$$.dirty[1] & /*bgChunks, chunks*/ 48) {\n\t\t\tif (!disabled) {\n\t\t\t\t$$invalidate(5, dayChunks = []);\n\t\t\t\t$$invalidate(10, dayBgChunks = bgChunks.filter(bgChunk => datesEqual(bgChunk.date, date)));\n\t\t\t\thiddenEvents.clear();\n\t\t\t\t(((((($$invalidate(7, hiddenEvents), $$invalidate(6, disabled)), $$invalidate(36, bgChunks)), $$invalidate(0, date)), $$invalidate(35, chunks)), $$invalidate(5, dayChunks)), $$invalidate(44, $validRange));\n\n\t\t\t\tfor (let chunk of chunks) {\n\t\t\t\t\tif (datesEqual(chunk.date, date)) {\n\t\t\t\t\t\tdayChunks.push(chunk);\n\t\t\t\t\t} // if ($dayMaxEvents !== false && dayChunks.length > $dayMaxEvents) {\n\t\t\t\t\t// \tchunk.hidden = true;\n\t\t\t\t} // }\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date, hiddenEvents*/ 129) {\n\t\t\tset_store_value(_hiddenEvents, $_hiddenEvents[date.getTime()] = hiddenEvents, $_hiddenEvents);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$_today*/ 65536) {\n\t\t\t$$invalidate(11, isToday = datesEqual(date, $_today));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$currentDate*/ 32768) {\n\t\t\t$$invalidate(12, otherMonth = date.getUTCMonth() !== $currentDate.getUTCMonth());\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$highlightedDates*/ 16384) {\n\t\t\t$$invalidate(13, highlight = $highlightedDates.some(d => datesEqual(d, date)));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*disabled, hiddenEvents*/ 192 | $$self.$$.dirty[1] & /*$_hiddenEvents, $moreLinkContent*/ 6144) {\n\t\t\tif (!disabled && $_hiddenEvents && hiddenEvents.size) {\n\t\t\t\t// make Svelte update this block on $_hiddenEvents update\n\t\t\t\tlet text = '+' + hiddenEvents.size + ' more';\n\n\t\t\t\tif ($moreLinkContent) {\n\t\t\t\t\t$$invalidate(14, moreLink = isFunction($moreLinkContent)\n\t\t\t\t\t? $moreLinkContent({ num: hiddenEvents.size, text })\n\t\t\t\t\t: $moreLinkContent);\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(14, moreLink = text);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$_popupDate*/ 1024) {\n\t\t\t$$invalidate(8, showPopup = $_popupDate && datesEqual(date, $_popupDate));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*showPopup, longChunks, dayChunks*/ 290) {\n\t\t\tif (showPopup && longChunks && dayChunks) {\n\t\t\t\t// Let chunks to reposition then set popup chunks\n\t\t\t\ttick().then(setPopupChunks);\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*el, date, disabled*/ 81) {\n\t\t\t// dateFromPoint\n\t\t\tif (el) {\n\t\t\t\tsetPayload(el, () => ({\n\t\t\t\t\tallDay: true,\n\t\t\t\t\tdate,\n\t\t\t\t\tresource: undefined,\n\t\t\t\t\tdayEl: el,\n\t\t\t\t\tdisabled\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date, showWeekNumber*/ 513 | $$self.$$.dirty[1] & /*$weekNumbers, $firstDay, $weekNumberContent*/ 896) {\n\t\t\t{\n\t\t\t\t$$invalidate(9, showWeekNumber = $weekNumbers && date.getUTCDay() == ($firstDay ? 1 : 0));\n\n\t\t\t\tif (showWeekNumber) {\n\t\t\t\t\tlet week = getWeekNumber(date, $firstDay);\n\n\t\t\t\t\tif ($weekNumberContent) {\n\t\t\t\t\t\t$$invalidate(15, weekNumber = isFunction($weekNumberContent)\n\t\t\t\t\t\t? $weekNumberContent({ date: toLocalDate(date), week })\n\t\t\t\t\t\t: $weekNumberContent);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$$invalidate(15, weekNumber = 'W' + String(week).padStart(2, '0'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tdate,\n\t\tlongChunks,\n\t\tiChunks,\n\t\tdates,\n\t\tel,\n\t\tdayChunks,\n\t\tdisabled,\n\t\thiddenEvents,\n\t\tshowPopup,\n\t\tshowWeekNumber,\n\t\tdayBgChunks,\n\t\tisToday,\n\t\totherMonth,\n\t\thighlight,\n\t\tmoreLink,\n\t\tweekNumber,\n\t\trefs,\n\t\t$theme,\n\t\t$_interaction,\n\t\t$_intlDayCell,\n\t\tcurrentDate,\n\t\thighlightedDates,\n\t\tfirstDay,\n\t\tmoreLinkContent,\n\t\ttheme,\n\t\tvalidRange,\n\t\tweekNumbers,\n\t\tweekNumberContent,\n\t\t_hiddenEvents,\n\t\t_intlDayCell,\n\t\t_popupDate,\n\t\t_popupChunks,\n\t\t_today,\n\t\t_interaction,\n\t\tshowMore,\n\t\tchunks,\n\t\tbgChunks,\n\t\treposition,\n\t\t$weekNumberContent,\n\t\t$firstDay,\n\t\t$weekNumbers,\n\t\t$_popupDate,\n\t\t$moreLinkContent,\n\t\t$_hiddenEvents,\n\t\t$validRange,\n\t\t$highlightedDates,\n\t\t$currentDate,\n\t\t$_today,\n\t\tpointerdown_handler,\n\t\tevent_binding,\n\t\tdiv4_binding\n\t];\n}\n\nclass Day extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance$2,\n\t\t\tcreate_fragment$3,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tdate: 0,\n\t\t\t\tchunks: 35,\n\t\t\t\tbgChunks: 36,\n\t\t\t\tlongChunks: 1,\n\t\t\t\tiChunks: 2,\n\t\t\t\tdates: 3,\n\t\t\t\treposition: 37\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1]\n\t\t);\n\t}\n\n\tget reposition() {\n\t\treturn this.$$.ctx[37];\n\t}\n}\n\n/* packages/day-grid/src/Week.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[28] = list[i];\n\tchild_ctx[29] = list;\n\tchild_ctx[30] = i;\n\treturn child_ctx;\n}\n\n// (69:4) {#each dates as date, i}\nfunction create_each_block$1(ctx) {\n\tlet day;\n\tlet i = /*i*/ ctx[30];\n\tlet current;\n\tconst assign_day = () => /*day_binding*/ ctx[25](day, i);\n\tconst unassign_day = () => /*day_binding*/ ctx[25](null, i);\n\n\tlet day_props = {\n\t\tdate: /*date*/ ctx[28],\n\t\tchunks: /*chunks*/ ctx[1],\n\t\tbgChunks: /*bgChunks*/ ctx[2],\n\t\tlongChunks: /*longChunks*/ ctx[3],\n\t\tiChunks: /*iChunks*/ ctx[4],\n\t\tdates: /*dates*/ ctx[0]\n\t};\n\n\tday = new Day({ props: day_props });\n\tassign_day();\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(day.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(day, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (i !== /*i*/ ctx[30]) {\n\t\t\t\tunassign_day();\n\t\t\t\ti = /*i*/ ctx[30];\n\t\t\t\tassign_day();\n\t\t\t}\n\n\t\t\tconst day_changes = {};\n\t\t\tif (dirty & /*dates*/ 1) day_changes.date = /*date*/ ctx[28];\n\t\t\tif (dirty & /*chunks*/ 2) day_changes.chunks = /*chunks*/ ctx[1];\n\t\t\tif (dirty & /*bgChunks*/ 4) day_changes.bgChunks = /*bgChunks*/ ctx[2];\n\t\t\tif (dirty & /*longChunks*/ 8) day_changes.longChunks = /*longChunks*/ ctx[3];\n\t\t\tif (dirty & /*iChunks*/ 16) day_changes.iChunks = /*iChunks*/ ctx[4];\n\t\t\tif (dirty & /*dates*/ 1) day_changes.dates = /*dates*/ ctx[0];\n\t\t\tday.$set(day_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(day.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(day.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tunassign_day();\n\t\t\tdestroy_component(day, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$2(ctx) {\n\tlet div;\n\tlet div_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value = ensure_array_like(/*dates*/ ctx[0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[6].days);\n\t\t\tattr(div, \"role\", \"row\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(window, \"resize\", /*reposition*/ ctx[15]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*dates, chunks, bgChunks, longChunks, iChunks, refs*/ 63) {\n\t\t\t\teach_value = ensure_array_like(/*dates*/ ctx[0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$1(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$1(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 64 && div_class_value !== (div_class_value = /*$theme*/ ctx[6].days)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$1($$self, $$props, $$invalidate) {\n\tlet $_hiddenEvents;\n\tlet $hiddenDays;\n\tlet $_iEvents;\n\tlet $resources;\n\tlet $filterEventsWithResources;\n\tlet $_events;\n\tlet $validRange;\n\tlet $theme;\n\tlet { dates } = $$props;\n\tlet { _events, _iEvents, _queue2, _hiddenEvents, resources, filterEventsWithResources, hiddenDays, theme, validRange } = getContext('state');\n\tcomponent_subscribe($$self, _events, value => $$invalidate(23, $_events = value));\n\tcomponent_subscribe($$self, _iEvents, value => $$invalidate(20, $_iEvents = value));\n\tcomponent_subscribe($$self, _hiddenEvents, value => $$invalidate(18, $_hiddenEvents = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(21, $resources = value));\n\tcomponent_subscribe($$self, filterEventsWithResources, value => $$invalidate(22, $filterEventsWithResources = value));\n\tcomponent_subscribe($$self, hiddenDays, value => $$invalidate(19, $hiddenDays = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(6, $theme = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(24, $validRange = value));\n\tlet chunks, bgChunks, longChunks, iChunks = [];\n\tlet start;\n\tlet end;\n\tlet refs = [];\n\tlet debounceHandle = {};\n\n\tfunction reposition() {\n\t\tdebounce(() => runReposition(refs, dates), debounceHandle, _queue2);\n\t}\n\n\tfunction day_binding($$value, i) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trefs[i] = $$value;\n\t\t\t$$invalidate(5, refs);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('dates' in $$props) $$invalidate(0, dates = $$props.dates);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*dates, $validRange*/ 16777217) {\n\t\t\t{\n\t\t\t\t$$invalidate(16, start = limitToRange(dates[0], $validRange));\n\t\t\t\t$$invalidate(17, end = addDay(cloneDate(limitToRange(dates.at(-1), $validRange))));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$_events, start, end, $filterEventsWithResources, $resources, bgChunks, chunks, $hiddenDays*/ 15400966) {\n\t\t\t{\n\t\t\t\t$$invalidate(1, chunks = []);\n\t\t\t\t$$invalidate(2, bgChunks = []);\n\n\t\t\t\tfor (let event of $_events) {\n\t\t\t\t\tif (eventIntersects(event, start, end, $filterEventsWithResources ? $resources : undefined)) {\n\t\t\t\t\t\tlet chunk = createEventChunk(event, start, end);\n\n\t\t\t\t\t\tif (bgEvent(event.display)) {\n\t\t\t\t\t\t\tif (event.allDay) {\n\t\t\t\t\t\t\t\tbgChunks.push(chunk);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprepareEventChunks(bgChunks, $hiddenDays);\n\t\t\t\t$$invalidate(3, longChunks = prepareEventChunks(chunks, $hiddenDays));\n\n\t\t\t\t// Run reposition only when events get changed\n\t\t\t\treposition();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$_iEvents, start, end, $hiddenDays*/ 1769472) {\n\t\t\t$$invalidate(4, iChunks = $_iEvents.map(event => {\n\t\t\t\tlet chunk;\n\n\t\t\t\tif (event && eventIntersects(event, start, end)) {\n\t\t\t\t\tchunk = createEventChunk(event, start, end);\n\t\t\t\t\tprepareEventChunks([chunk], $hiddenDays);\n\t\t\t\t} else {\n\t\t\t\t\tchunk = null;\n\t\t\t\t}\n\n\t\t\t\treturn chunk;\n\t\t\t}));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$_hiddenEvents*/ 262144) {\n\t\t\tif ($_hiddenEvents) {\n\t\t\t\t// Schedule reposition during next update\n\t\t\t\ttick().then(reposition);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tdates,\n\t\tchunks,\n\t\tbgChunks,\n\t\tlongChunks,\n\t\tiChunks,\n\t\trefs,\n\t\t$theme,\n\t\t_events,\n\t\t_iEvents,\n\t\t_hiddenEvents,\n\t\tresources,\n\t\tfilterEventsWithResources,\n\t\thiddenDays,\n\t\ttheme,\n\t\tvalidRange,\n\t\treposition,\n\t\tstart,\n\t\tend,\n\t\t$_hiddenEvents,\n\t\t$hiddenDays,\n\t\t$_iEvents,\n\t\t$resources,\n\t\t$filterEventsWithResources,\n\t\t$_events,\n\t\t$validRange,\n\t\tday_binding\n\t];\n}\n\nclass Week extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$1, create_fragment$2, safe_not_equal, { dates: 0 });\n\t}\n}\n\n/* packages/day-grid/src/Body.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[15] = list[i];\n\treturn child_ctx;\n}\n\n// (30:8) {#each weeks as dates}\nfunction create_each_block(ctx) {\n\tlet week;\n\tlet current;\n\tweek = new Week({ props: { dates: /*dates*/ ctx[15] } });\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(week.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(week, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst week_changes = {};\n\t\t\tif (dirty & /*weeks*/ 1) week_changes.dates = /*dates*/ ctx[15];\n\t\t\tweek.$set(week_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(week.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(week.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(week, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$1(ctx) {\n\tlet div1;\n\tlet div0;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet current;\n\tlet each_value = ensure_array_like(/*weeks*/ ctx[0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[2].content);\n\n\t\t\tattr(div1, \"class\", div1_class_value = \"\" + (/*$theme*/ ctx[2].body + (/*$dayMaxEvents*/ ctx[1] === true\n\t\t\t? ' ' + /*$theme*/ ctx[2].uniform\n\t\t\t: '')));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tappend(div1, div0);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div0, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*div1_binding*/ ctx[13](div1);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*weeks*/ 1) {\n\t\t\t\teach_value = ensure_array_like(/*weeks*/ ctx[0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div0, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 4 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[2].content)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme, $dayMaxEvents*/ 6 && div1_class_value !== (div1_class_value = \"\" + (/*$theme*/ ctx[2].body + (/*$dayMaxEvents*/ ctx[1] === true\n\t\t\t? ' ' + /*$theme*/ ctx[2].uniform\n\t\t\t: '')))) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\t/*div1_binding*/ ctx[13](null);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet $_viewDates;\n\tlet $dayMaxEvents;\n\tlet $_hiddenEvents;\n\tlet $hiddenDays;\n\tlet $theme;\n\tlet $_bodyEl;\n\tlet { _bodyEl, _viewDates, _hiddenEvents, dayMaxEvents, hiddenDays, theme } = getContext('state');\n\tcomponent_subscribe($$self, _bodyEl, value => $$invalidate(3, $_bodyEl = value));\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(11, $_viewDates = value));\n\tcomponent_subscribe($$self, _hiddenEvents, value => $$invalidate(14, $_hiddenEvents = value));\n\tcomponent_subscribe($$self, dayMaxEvents, value => $$invalidate(1, $dayMaxEvents = value));\n\tcomponent_subscribe($$self, hiddenDays, value => $$invalidate(12, $hiddenDays = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(2, $theme = value));\n\tlet weeks;\n\tlet days;\n\n\tfunction div1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\t$_bodyEl = $$value;\n\t\t\t_bodyEl.set($_bodyEl);\n\t\t});\n\t}\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$hiddenDays, $dayMaxEvents, $_viewDates, days, weeks*/ 7171) {\n\t\t\t{\n\t\t\t\t$$invalidate(0, weeks = []);\n\t\t\t\t$$invalidate(10, days = 7 - $hiddenDays.length);\n\t\t\t\tset_store_value(_hiddenEvents, $_hiddenEvents = {}, $_hiddenEvents);\n\n\t\t\t\tfor (let i = 0; i < $_viewDates.length / days; ++i) {\n\t\t\t\t\tlet dates = [];\n\n\t\t\t\t\tfor (let j = 0; j < days; ++j) {\n\t\t\t\t\t\tdates.push($_viewDates[i * days + j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tweeks.push(dates);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tweeks,\n\t\t$dayMaxEvents,\n\t\t$theme,\n\t\t$_bodyEl,\n\t\t_bodyEl,\n\t\t_viewDates,\n\t\t_hiddenEvents,\n\t\tdayMaxEvents,\n\t\thiddenDays,\n\t\ttheme,\n\t\tdays,\n\t\t$_viewDates,\n\t\t$hiddenDays,\n\t\tdiv1_binding\n\t];\n}\n\nclass Body extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance, create_fragment$1, safe_not_equal, {});\n\t}\n}\n\n/* packages/day-grid/src/View.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment(ctx) {\n\tlet header;\n\tlet t;\n\tlet body;\n\tlet current;\n\theader = new Header({});\n\tbody = new Body({});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(header.$$.fragment);\n\t\t\tt = space();\n\t\t\tcreate_component(body.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(header, target, anchor);\n\t\t\tinsert(target, t, anchor);\n\t\t\tmount_component(body, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp: noop,\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(header.$$.fragment, local);\n\t\t\ttransition_in(body.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(header.$$.fragment, local);\n\t\t\ttransition_out(body.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t);\n\t\t\t}\n\n\t\t\tdestroy_component(header, detaching);\n\t\t\tdestroy_component(body, detaching);\n\t\t}\n\t};\n}\n\nclass View extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, null, create_fragment, safe_not_equal, {});\n\t}\n}\n\nvar index = {\n    createOptions(options) {\n        options.dayMaxEvents = false;\n        options.dayCellFormat = {day: 'numeric'};\n        options.dayPopoverFormat = {month: 'long', day: 'numeric', year: 'numeric'};\n        options.moreLinkContent = undefined;\n        // Common options\n        options.buttonText.dayGridMonth = 'month';\n        options.buttonText.close = 'Close';\n        options.theme.uniform = 'ec-uniform';\n        options.theme.dayFoot = 'ec-day-foot';\n        options.theme.popup = 'ec-popup';\n        options.theme.weekNumber = 'ec-week-number';\n        options.view = 'dayGridMonth';\n        options.weekNumbers = false;\n        options.weekNumberContent = undefined;\n        options.views.dayGridMonth = {\n            buttonText: btnTextMonth,\n            component: View,\n            dayHeaderFormat: {weekday: 'short'},\n            dayHeaderAriaLabelFormat: {weekday: 'long'},\n            displayEventEnd: false,\n            duration: {months: 1},\n            theme: themeView('ec-day-grid ec-month-view'),\n            titleFormat: {year: 'numeric', month: 'long'}\n        };\n    },\n\n    createStores(state) {\n        state._days = days(state);\n        state._intlDayCell = intl(state.locale, state.dayCellFormat);\n        state._intlDayPopover = intl(state.locale, state.dayPopoverFormat);\n        state._hiddenEvents = writable({});\n        state._popupDate = writable(null);\n        state._popupChunks = writable([]);\n    }\n};\n\nexport { index as default };\n","import { setContent, keyEnter, isFunction, toEventWithLocalDates, toViewWithLocalDates, task, resourceBackgroundColor, resourceTextColor, createEventClasses, createEventContent, datesEqual, outsideRange, toISOString, addDay, cloneDate, bgEvent, eventIntersects, createEventChunk, sortEventChunks, setPayload, btnTextDay, themeView, btnTextWeek, btnTextMonth, btnTextYear, intl } from '@event-calendar/core';\nimport { SvelteComponent, init, safe_not_equal, element, space, attr, insert, append, action_destroyer, listen, is_function, noop, detach, run_all, component_subscribe, binding_callbacks, empty, transition_in, group_outros, transition_out, check_outros, ensure_array_like, update_keyed_each, outro_and_destroy_block, create_component, mount_component, destroy_component, destroy_each } from 'svelte/internal';\nimport { getContext, onMount, afterUpdate } from 'svelte';\n\n/* packages/list/src/Event.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$3(ctx) {\n\tlet article;\n\tlet div0;\n\tlet div0_class_value;\n\tlet t;\n\tlet div1;\n\tlet div1_class_value;\n\tlet setContent_action;\n\tlet article_role_value;\n\tlet article_tabindex_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tarticle = element(\"article\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt = space();\n\t\t\tdiv1 = element(\"div\");\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[0].eventTag);\n\t\t\tattr(div0, \"style\", /*style*/ ctx[3]);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[0].eventBody);\n\t\t\tattr(article, \"class\", /*classes*/ ctx[2]);\n\t\t\tattr(article, \"role\", article_role_value = /*onclick*/ ctx[5] ? 'button' : undefined);\n\t\t\tattr(article, \"tabindex\", article_tabindex_value = /*onclick*/ ctx[5] ? 0 : undefined);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, article, anchor);\n\t\t\tappend(article, div0);\n\t\t\tappend(article, t);\n\t\t\tappend(article, div1);\n\t\t\t/*article_binding*/ ctx[38](article);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, div1, /*content*/ ctx[4])),\n\t\t\t\t\tlisten(article, \"click\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[5])) /*onclick*/ ctx[5].apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"keydown\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[5] && keyEnter(/*onclick*/ ctx[5]))) (/*onclick*/ ctx[5] && keyEnter(/*onclick*/ ctx[5])).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseenter\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[25](/*$eventMouseEnter*/ ctx[6]))) /*createHandler*/ ctx[25](/*$eventMouseEnter*/ ctx[6]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseleave\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[25](/*$eventMouseLeave*/ ctx[7]))) /*createHandler*/ ctx[25](/*$eventMouseLeave*/ ctx[7]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*$_interaction*/ ctx[8].action?.noAction)) /*$_interaction*/ ctx[8].action?.noAction.apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*$theme*/ 1 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[0].eventTag)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*style*/ 8) {\n\t\t\t\tattr(div0, \"style\", /*style*/ ctx[3]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$theme*/ 1 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[0].eventBody)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*content*/ 16) setContent_action.update.call(null, /*content*/ ctx[4]);\n\n\t\t\tif (dirty[0] & /*classes*/ 4) {\n\t\t\t\tattr(article, \"class\", /*classes*/ ctx[2]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*onclick*/ 32 && article_role_value !== (article_role_value = /*onclick*/ ctx[5] ? 'button' : undefined)) {\n\t\t\t\tattr(article, \"role\", article_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*onclick*/ 32 && article_tabindex_value !== (article_tabindex_value = /*onclick*/ ctx[5] ? 0 : undefined)) {\n\t\t\t\tattr(article, \"tabindex\", article_tabindex_value);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(article);\n\t\t\t}\n\n\t\t\t/*article_binding*/ ctx[38](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance$2($$self, $$props, $$invalidate) {\n\tlet $eventClick;\n\tlet $_view;\n\tlet $eventAllUpdated;\n\tlet $eventDidMount;\n\tlet $_intlEventTime;\n\tlet $theme;\n\tlet $eventContent;\n\tlet $displayEventEnd;\n\tlet $eventClassNames;\n\tlet $eventTextColor;\n\tlet $resources;\n\tlet $eventColor;\n\tlet $eventBackgroundColor;\n\tlet $eventMouseEnter;\n\tlet $eventMouseLeave;\n\tlet $_interaction;\n\tlet { chunk } = $$props;\n\tlet { displayEventEnd, eventAllUpdated, eventBackgroundColor, eventTextColor, eventColor, eventContent, eventClassNames, eventClick, eventDidMount, eventMouseEnter, eventMouseLeave, resources, theme, _view, _intlEventTime, _interaction, _tasks } = getContext('state');\n\tcomponent_subscribe($$self, displayEventEnd, value => $$invalidate(32, $displayEventEnd = value));\n\tcomponent_subscribe($$self, eventAllUpdated, value => $$invalidate(40, $eventAllUpdated = value));\n\tcomponent_subscribe($$self, eventBackgroundColor, value => $$invalidate(37, $eventBackgroundColor = value));\n\tcomponent_subscribe($$self, eventTextColor, value => $$invalidate(34, $eventTextColor = value));\n\tcomponent_subscribe($$self, eventColor, value => $$invalidate(36, $eventColor = value));\n\tcomponent_subscribe($$self, eventContent, value => $$invalidate(31, $eventContent = value));\n\tcomponent_subscribe($$self, eventClassNames, value => $$invalidate(33, $eventClassNames = value));\n\tcomponent_subscribe($$self, eventClick, value => $$invalidate(28, $eventClick = value));\n\tcomponent_subscribe($$self, eventDidMount, value => $$invalidate(41, $eventDidMount = value));\n\tcomponent_subscribe($$self, eventMouseEnter, value => $$invalidate(6, $eventMouseEnter = value));\n\tcomponent_subscribe($$self, eventMouseLeave, value => $$invalidate(7, $eventMouseLeave = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(35, $resources = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(0, $theme = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(29, $_view = value));\n\tcomponent_subscribe($$self, _intlEventTime, value => $$invalidate(30, $_intlEventTime = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(8, $_interaction = value));\n\tlet el;\n\tlet event;\n\tlet classes;\n\tlet style;\n\tlet content;\n\tlet timeText;\n\tlet onclick;\n\n\tonMount(() => {\n\t\tif (isFunction($eventDidMount)) {\n\t\t\t$eventDidMount({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\ttimeText,\n\t\t\t\tel,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t});\n\t\t}\n\t});\n\n\tafterUpdate(() => {\n\t\tif (isFunction($eventAllUpdated)) {\n\t\t\ttask(() => $eventAllUpdated({ view: toViewWithLocalDates($_view) }), 'eau', _tasks);\n\t\t}\n\t});\n\n\tfunction createHandler(fn) {\n\t\treturn isFunction(fn)\n\t\t? jsEvent => fn({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\tel,\n\t\t\t\tjsEvent,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t})\n\t\t: undefined;\n\t}\n\n\tfunction article_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(1, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('chunk' in $$props) $$invalidate(26, chunk = $$props.chunk);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*chunk*/ 67108864) {\n\t\t\t$$invalidate(27, event = chunk.event);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*event, style, $theme, $_view*/ 671088649 | $$self.$$.dirty[1] & /*$resources, $eventBackgroundColor, $eventColor, $eventTextColor, $eventClassNames*/ 124) {\n\t\t\t{\n\t\t\t\t// Class & Style\n\t\t\t\t$$invalidate(3, style = '');\n\n\t\t\t\tlet bgColor = event.backgroundColor || resourceBackgroundColor(event, $resources) || $eventBackgroundColor || $eventColor;\n\n\t\t\t\tif (bgColor) {\n\t\t\t\t\t$$invalidate(3, style = `background-color:${bgColor};`);\n\t\t\t\t}\n\n\t\t\t\tlet txtColor = event.textColor || resourceTextColor(event, $resources) || $eventTextColor;\n\n\t\t\t\tif (txtColor) {\n\t\t\t\t\t$$invalidate(3, style += `color:${txtColor};`);\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(3, style += event.styles.join(';'));\n\t\t\t\t$$invalidate(2, classes = [$theme.event, ...createEventClasses($eventClassNames, event, $_view)].join(' '));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*chunk, $theme, $_intlEventTime, $_view*/ 1677721601 | $$self.$$.dirty[1] & /*$displayEventEnd, $eventContent*/ 3) {\n\t\t\t{\n\t\t\t\t// Content\n\t\t\t\t$$invalidate(4, [timeText, content] = createEventContent(chunk, $displayEventEnd, $eventContent, $theme, $_intlEventTime, $_view), content);\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$eventClick*/ 268435456) {\n\t\t\t// Onclick handler\n\t\t\t$$invalidate(5, onclick = createHandler($eventClick));\n\t\t}\n\t};\n\n\treturn [\n\t\t$theme,\n\t\tel,\n\t\tclasses,\n\t\tstyle,\n\t\tcontent,\n\t\tonclick,\n\t\t$eventMouseEnter,\n\t\t$eventMouseLeave,\n\t\t$_interaction,\n\t\tdisplayEventEnd,\n\t\teventAllUpdated,\n\t\teventBackgroundColor,\n\t\teventTextColor,\n\t\teventColor,\n\t\teventContent,\n\t\teventClassNames,\n\t\teventClick,\n\t\teventDidMount,\n\t\teventMouseEnter,\n\t\teventMouseLeave,\n\t\tresources,\n\t\ttheme,\n\t\t_view,\n\t\t_intlEventTime,\n\t\t_interaction,\n\t\tcreateHandler,\n\t\tchunk,\n\t\tevent,\n\t\t$eventClick,\n\t\t$_view,\n\t\t$_intlEventTime,\n\t\t$eventContent,\n\t\t$displayEventEnd,\n\t\t$eventClassNames,\n\t\t$eventTextColor,\n\t\t$resources,\n\t\t$eventColor,\n\t\t$eventBackgroundColor,\n\t\tarticle_binding\n\t];\n}\n\nclass Event extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$2, create_fragment$3, safe_not_equal, { chunk: 26 }, null, [-1, -1]);\n\t}\n}\n\n/* packages/list/src/Day.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[28] = list[i];\n\treturn child_ctx;\n}\n\n// (43:0) {#if chunks.length}\nfunction create_if_block$1(ctx) {\n\tlet div;\n\tlet h4;\n\tlet time0;\n\tlet setContent_action;\n\tlet t0;\n\tlet time1;\n\tlet time1_class_value;\n\tlet setContent_action_1;\n\tlet h4_class_value;\n\tlet t1;\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet div_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value = ensure_array_like(/*chunks*/ ctx[2]);\n\tconst get_key = ctx => /*chunk*/ ctx[28].event;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context$1(ctx, each_value, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block$1(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\th4 = element(\"h4\");\n\t\t\ttime0 = element(\"time\");\n\t\t\tt0 = space();\n\t\t\ttime1 = element(\"time\");\n\t\t\tt1 = space();\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(time0, \"datetime\", /*datetime*/ ctx[5]);\n\t\t\tattr(time1, \"class\", time1_class_value = /*$theme*/ ctx[6].daySide);\n\t\t\tattr(time1, \"datetime\", /*datetime*/ ctx[5]);\n\t\t\tattr(h4, \"class\", h4_class_value = /*$theme*/ ctx[6].dayHead);\n\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[6].day + \" \" + /*$theme*/ ctx[6].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[3] ? ' ' + /*$theme*/ ctx[6].today : '') + (/*highlight*/ ctx[4]\n\t\t\t? ' ' + /*$theme*/ ctx[6].highlight\n\t\t\t: '')));\n\n\t\t\tattr(div, \"role\", \"listitem\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, h4);\n\t\t\tappend(h4, time0);\n\t\t\tappend(h4, t0);\n\t\t\tappend(h4, time1);\n\t\t\tappend(div, t1);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*div_binding*/ ctx[27](div);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, time0, /*$_intlListDay*/ ctx[8].format(/*date*/ ctx[0]))),\n\t\t\t\t\taction_destroyer(setContent_action_1 = setContent.call(null, time1, /*$_intlListDaySide*/ ctx[9].format(/*date*/ ctx[0]))),\n\t\t\t\t\tlisten(div, \"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*$_interaction*/ ctx[7].action?.select)) /*$_interaction*/ ctx[7].action?.select.apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (!current || dirty & /*datetime*/ 32) {\n\t\t\t\tattr(time0, \"datetime\", /*datetime*/ ctx[5]);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_intlListDay, date*/ 257) setContent_action.update.call(null, /*$_intlListDay*/ ctx[8].format(/*date*/ ctx[0]));\n\n\t\t\tif (!current || dirty & /*$theme*/ 64 && time1_class_value !== (time1_class_value = /*$theme*/ ctx[6].daySide)) {\n\t\t\t\tattr(time1, \"class\", time1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*datetime*/ 32) {\n\t\t\t\tattr(time1, \"datetime\", /*datetime*/ ctx[5]);\n\t\t\t}\n\n\t\t\tif (setContent_action_1 && is_function(setContent_action_1.update) && dirty & /*$_intlListDaySide, date*/ 513) setContent_action_1.update.call(null, /*$_intlListDaySide*/ ctx[9].format(/*date*/ ctx[0]));\n\n\t\t\tif (!current || dirty & /*$theme*/ 64 && h4_class_value !== (h4_class_value = /*$theme*/ ctx[6].dayHead)) {\n\t\t\t\tattr(h4, \"class\", h4_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*chunks*/ 4) {\n\t\t\t\teach_value = ensure_array_like(/*chunks*/ ctx[2]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value, each_1_lookup, div, outro_and_destroy_block, create_each_block$1, null, get_each_context$1);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme, date, isToday, highlight*/ 89 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[6].day + \" \" + /*$theme*/ ctx[6].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[3] ? ' ' + /*$theme*/ ctx[6].today : '') + (/*highlight*/ ctx[4]\n\t\t\t? ' ' + /*$theme*/ ctx[6].highlight\n\t\t\t: '')))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\n\t\t\t/*div_binding*/ ctx[27](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\n// (54:8) {#each chunks as chunk (chunk.event)}\nfunction create_each_block$1(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet current;\n\tevent = new Event({ props: { chunk: /*chunk*/ ctx[28] } });\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty & /*chunks*/ 4) event_changes.chunk = /*chunk*/ ctx[28];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$2(ctx) {\n\tlet if_block_anchor;\n\tlet current;\n\tlet if_block = /*chunks*/ ctx[2].length && create_if_block$1(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif (if_block) if_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (if_block) if_block.m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (/*chunks*/ ctx[2].length) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty & /*chunks*/ 4) {\n\t\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block$1(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block, 1, 1, () => {\n\t\t\t\t\tif_block = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\tif (if_block) if_block.d(detaching);\n\t\t}\n\t};\n}\n\nfunction instance$1($$self, $$props, $$invalidate) {\n\tlet $resources;\n\tlet $filterEventsWithResources;\n\tlet $_events;\n\tlet $validRange;\n\tlet $highlightedDates;\n\tlet $_today;\n\tlet $theme;\n\tlet $_interaction;\n\tlet $_intlListDay;\n\tlet $_intlListDaySide;\n\tlet { date } = $$props;\n\tlet { _events, _interaction, _intlListDay, _intlListDaySide, _today, resources, filterEventsWithResources, highlightedDates, theme, validRange } = getContext('state');\n\tcomponent_subscribe($$self, _events, value => $$invalidate(23, $_events = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(7, $_interaction = value));\n\tcomponent_subscribe($$self, _intlListDay, value => $$invalidate(8, $_intlListDay = value));\n\tcomponent_subscribe($$self, _intlListDaySide, value => $$invalidate(9, $_intlListDaySide = value));\n\tcomponent_subscribe($$self, _today, value => $$invalidate(26, $_today = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(21, $resources = value));\n\tcomponent_subscribe($$self, filterEventsWithResources, value => $$invalidate(22, $filterEventsWithResources = value));\n\tcomponent_subscribe($$self, highlightedDates, value => $$invalidate(25, $highlightedDates = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(6, $theme = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(24, $validRange = value));\n\tlet el;\n\tlet chunks = [];\n\tlet isToday, highlight, disabled;\n\tlet datetime;\n\n\tfunction div_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(1, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('date' in $$props) $$invalidate(0, date = $$props.date);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*date, $_today*/ 67108865) {\n\t\t\t$$invalidate(3, isToday = datesEqual(date, $_today));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$highlightedDates, date*/ 33554433) {\n\t\t\t$$invalidate(4, highlight = $highlightedDates.some(d => datesEqual(d, date)));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*date, $validRange*/ 16777217) {\n\t\t\t$$invalidate(20, disabled = outsideRange(date, $validRange));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*date*/ 1) {\n\t\t\t$$invalidate(5, datetime = toISOString(date, 10));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*disabled, date, $_events, $filterEventsWithResources, $resources, chunks*/ 15728645) {\n\t\t\tif (!disabled) {\n\t\t\t\t$$invalidate(2, chunks = []);\n\t\t\t\tlet start = date;\n\t\t\t\tlet end = addDay(cloneDate(date));\n\n\t\t\t\tfor (let event of $_events) {\n\t\t\t\t\tif (!bgEvent(event.display) && eventIntersects(event, start, end, $filterEventsWithResources ? $resources : undefined)) {\n\t\t\t\t\t\tlet chunk = createEventChunk(event, start, end);\n\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsortEventChunks(chunks);\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*el, date, disabled*/ 1048579) {\n\t\t\t// dateFromPoint\n\t\t\tif (el) {\n\t\t\t\tsetPayload(el, () => ({\n\t\t\t\t\tallDay: true,\n\t\t\t\t\tdate,\n\t\t\t\t\tresource: undefined,\n\t\t\t\t\tdayEl: el,\n\t\t\t\t\tdisabled\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tdate,\n\t\tel,\n\t\tchunks,\n\t\tisToday,\n\t\thighlight,\n\t\tdatetime,\n\t\t$theme,\n\t\t$_interaction,\n\t\t$_intlListDay,\n\t\t$_intlListDaySide,\n\t\t_events,\n\t\t_interaction,\n\t\t_intlListDay,\n\t\t_intlListDaySide,\n\t\t_today,\n\t\tresources,\n\t\tfilterEventsWithResources,\n\t\thighlightedDates,\n\t\ttheme,\n\t\tvalidRange,\n\t\tdisabled,\n\t\t$resources,\n\t\t$filterEventsWithResources,\n\t\t$_events,\n\t\t$validRange,\n\t\t$highlightedDates,\n\t\t$_today,\n\t\tdiv_binding\n\t];\n}\n\nclass Day extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$1, create_fragment$2, safe_not_equal, { date: 0 });\n\t}\n}\n\n/* packages/list/src/Body.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[18] = list[i];\n\treturn child_ctx;\n}\n\n// (44:8) {:else}\nfunction create_else_block(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$_viewDates*/ 2) {\n\t\t\t\teach_value = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (40:8) {#if noEvents}\nfunction create_if_block(ctx) {\n\tlet div;\n\tlet div_class_value;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[3].noEvents);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, div, /*content*/ ctx[0])),\n\t\t\t\t\tlisten(div, \"click\", /*handleClick*/ ctx[12])\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$theme*/ 8 && div_class_value !== (div_class_value = /*$theme*/ ctx[3].noEvents)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*content*/ 1) setContent_action.update.call(null, /*content*/ ctx[0]);\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\n// (45:12) {#each $_viewDates as date}\nfunction create_each_block(ctx) {\n\tlet day;\n\tlet current;\n\tday = new Day({ props: { date: /*date*/ ctx[18] } });\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(day.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(day, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst day_changes = {};\n\t\t\tif (dirty & /*$_viewDates*/ 2) day_changes.date = /*date*/ ctx[18];\n\t\t\tday.$set(day_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(day.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(day.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(day, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$1(ctx) {\n\tlet div1;\n\tlet div0;\n\tlet current_block_type_index;\n\tlet if_block;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet current;\n\tconst if_block_creators = [create_if_block, create_else_block];\n\tconst if_blocks = [];\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*noEvents*/ ctx[2]) return 0;\n\t\treturn 1;\n\t}\n\n\tcurrent_block_type_index = select_block_type(ctx);\n\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tif_block.c();\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[3].content);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[3].body);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tappend(div1, div0);\n\t\t\tif_blocks[current_block_type_index].m(div0, null);\n\t\t\t/*div1_binding*/ ctx[15](div1);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tlet previous_block_index = current_block_type_index;\n\t\t\tcurrent_block_type_index = select_block_type(ctx);\n\n\t\t\tif (current_block_type_index === previous_block_index) {\n\t\t\t\tif_blocks[current_block_type_index].p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_blocks[previous_block_index], 1, 1, () => {\n\t\t\t\t\tif_blocks[previous_block_index] = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t\tif_block = if_blocks[current_block_type_index];\n\n\t\t\t\tif (!if_block) {\n\t\t\t\t\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t} else {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t\t}\n\n\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\tif_block.m(div0, null);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 8 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[3].content)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 8 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[3].body)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t}\n\n\t\t\tif_blocks[current_block_type_index].d();\n\t\t\t/*div1_binding*/ ctx[15](null);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet $_view;\n\tlet $noEventsClick;\n\tlet $noEventsContent;\n\tlet $_events;\n\tlet $_viewDates;\n\tlet $theme;\n\tlet $_bodyEl;\n\tlet { _bodyEl, _events, _view, _viewDates, noEventsClick, noEventsContent, theme } = getContext('state');\n\tcomponent_subscribe($$self, _bodyEl, value => $$invalidate(4, $_bodyEl = value));\n\tcomponent_subscribe($$self, _events, value => $$invalidate(14, $_events = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(16, $_view = value));\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(1, $_viewDates = value));\n\tcomponent_subscribe($$self, noEventsClick, value => $$invalidate(17, $noEventsClick = value));\n\tcomponent_subscribe($$self, noEventsContent, value => $$invalidate(13, $noEventsContent = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(3, $theme = value));\n\tlet noEvents, content;\n\n\tfunction handleClick(jsEvent) {\n\t\tif (isFunction($noEventsClick)) {\n\t\t\t$noEventsClick({\n\t\t\t\tjsEvent,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction div1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\t$_bodyEl = $$value;\n\t\t\t_bodyEl.set($_bodyEl);\n\t\t});\n\t}\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$_viewDates, $_events*/ 16386) {\n\t\t\t{\n\t\t\t\t$$invalidate(2, noEvents = true);\n\n\t\t\t\tif ($_viewDates.length) {\n\t\t\t\t\tlet start = $_viewDates[0];\n\t\t\t\t\tlet end = addDay(cloneDate($_viewDates.at(-1)));\n\n\t\t\t\t\tfor (let event of $_events) {\n\t\t\t\t\t\tif (!bgEvent(event.display) && event.start < end && event.end > start) {\n\t\t\t\t\t\t\t$$invalidate(2, noEvents = false);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$noEventsContent, content*/ 8193) {\n\t\t\t{\n\t\t\t\t$$invalidate(0, content = isFunction($noEventsContent)\n\t\t\t\t? $noEventsContent()\n\t\t\t\t: $noEventsContent);\n\n\t\t\t\tif (typeof content === 'string') {\n\t\t\t\t\t$$invalidate(0, content = { html: content });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tcontent,\n\t\t$_viewDates,\n\t\tnoEvents,\n\t\t$theme,\n\t\t$_bodyEl,\n\t\t_bodyEl,\n\t\t_events,\n\t\t_view,\n\t\t_viewDates,\n\t\tnoEventsClick,\n\t\tnoEventsContent,\n\t\ttheme,\n\t\thandleClick,\n\t\t$noEventsContent,\n\t\t$_events,\n\t\tdiv1_binding\n\t];\n}\n\nclass Body extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance, create_fragment$1, safe_not_equal, {});\n\t}\n}\n\n/* packages/list/src/View.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment(ctx) {\n\tlet body;\n\tlet current;\n\tbody = new Body({});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(body.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(body, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp: noop,\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(body.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(body.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(body, detaching);\n\t\t}\n\t};\n}\n\nclass View extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, null, create_fragment, safe_not_equal, {});\n\t}\n}\n\nvar index = {\n\tcreateOptions(options) {\n\t\t// Common options\n\t\toptions.buttonText.listDay = 'list';\n\t\toptions.buttonText.listWeek = 'list';\n\t\toptions.buttonText.listMonth = 'list';\n\t\toptions.buttonText.listYear = 'list';\n\t\toptions.listDayFormat = {weekday: 'long'};\n\t\toptions.listDaySideFormat = {year: 'numeric', month: 'long', day: 'numeric'};\n\t\toptions.noEventsClick = undefined;  // ec option\n\t\toptions.noEventsContent = 'No events';\n\t\toptions.theme.daySide = 'ec-day-side';\n\t\toptions.theme.eventTag = 'ec-event-tag';\n\t\toptions.theme.noEvents = 'ec-no-events';\n\t\toptions.view = 'listWeek';\n\t\toptions.views.listDay = {\n\t\t\tbuttonText: btnTextDay,\n\t\t\tcomponent: View,\n\t\t\tduration: {days: 1},\n\t\t\ttheme: themeView('ec-list ec-day-view')\n\t\t};\n\t\toptions.views.listWeek = {\n\t\t\tbuttonText: btnTextWeek,\n\t\t\tcomponent: View,\n\t\t\tduration: {weeks: 1},\n\t\t\ttheme: themeView('ec-list ec-week-view')\n\t\t};\n\t\toptions.views.listMonth = {\n\t\t\tbuttonText: btnTextMonth,\n\t\t\tcomponent: View,\n\t\t\tduration: {months: 1},\n\t\t\ttheme: themeView('ec-list ec-month-view')\n\t\t};\n\t\toptions.views.listYear = {\n\t\t\tbuttonText: btnTextYear,\n\t\t\tcomponent: View,\n\t\t\tduration: {years: 1},\n\t\t\ttheme: themeView('ec-list ec-year-view')\n\t\t};\n\t},\n\n\tcreateStores(state) {\n\t\tstate._intlListDay = intl(state.locale, state.listDayFormat);\n\t\tstate._intlListDaySide = intl(state.locale, state.listDaySideFormat);\n\t}\n};\n\nexport { index as default };\n","import { createTimes, setMidnight, createDate, createSlotTimeLimits, sortEventChunks, isFunction, setContent, keyEnter, bgEvent, helperEvent, toEventWithLocalDates, toViewWithLocalDates, task, resourceBackgroundColor, resourceTextColor, ghostEvent, createEventClasses, createEventContent, datesEqual, outsideRange, addDuration, cloneDate, eventIntersects, createEventChunk, setPayload, rect, floor, ancestor, repositionEvent, height, runReposition, limitToRange, addDay, prepareEventChunks, debounce, toISOString, btnTextDay, themeView, btnTextWeek } from '@event-calendar/core';\nimport { derived } from 'svelte/store';\nimport { SvelteComponent, init, safe_not_equal, ensure_array_like, create_slot, element, space, attr, insert, append, action_destroyer, is_function, update_slot_base, get_all_dirty_from_scope, get_slot_changes, transition_in, transition_out, detach, destroy_each, component_subscribe, create_component, mount_component, destroy_component, set_store_value, empty, binding_callbacks, construct_svelte_component, listen, group_outros, check_outros, run_all, set_style, noop, update_keyed_each, outro_and_destroy_block } from 'svelte/internal';\nimport { getContext, onMount, afterUpdate } from 'svelte';\n\nfunction times(state) {\n    return derived(\n        [state.slotDuration, state.slotLabelInterval, state._slotTimeLimits, state._intlSlotLabel],\n        args => createTimes(setMidnight(createDate()), ...args)\n    );\n}\n\nfunction slotTimeLimits(state) {\n    return derived(\n        [state.slotMinTime, state.slotMaxTime, state.flexibleSlotTimeLimits, state._viewDates, state._events],\n        args => createSlotTimeLimits(...args)\n    );\n}\n\nfunction groupEventChunks(chunks) {\n    if (!chunks.length) {\n        return;\n    }\n\n    sortEventChunks(chunks);\n\n    // Group\n    let group = {\n        columns: [],\n        end: chunks[0].end\n    };\n    for (let chunk of chunks) {\n        let c = 0;\n        if (chunk.start < group.end) {\n            for (; c < group.columns.length; ++c) {\n                if (group.columns[c].at(-1).end <= chunk.start) {\n                    break;\n                }\n            }\n            if (chunk.end > group.end) {\n                group.end = chunk.end;\n            }\n        } else {\n            group = {\n                columns: [],\n                end: chunk.end\n            };\n        }\n\n        if (group.columns.length < c + 1) {\n            group.columns.push([]);\n        }\n        group.columns[c].push(chunk);\n\n        chunk.group = group;\n        chunk.column = c;\n    }\n}\n\nfunction createAllDayContent(allDayContent) {\n    let text = 'all-day';\n    let content;\n    if (allDayContent) {\n        content = isFunction(allDayContent) ? allDayContent({text}) : allDayContent;\n        if (typeof content === 'string') {\n            content = {html: content};\n        }\n    } else {\n        content = {\n            html: text\n        };\n    }\n\n    return content;\n}\n\n/* packages/time-grid/src/Section.svelte generated by Svelte v4.2.19 */\nconst get_lines_slot_changes = dirty => ({});\nconst get_lines_slot_context = ctx => ({});\n\nfunction get_each_context$5(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[9] = list[i];\n\treturn child_ctx;\n}\n\n// (14:4) {#each $_times as time}\nfunction create_each_block$5(ctx) {\n\tlet time_1;\n\tlet time_1_class_value;\n\tlet time_1_datetime_value;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\ttime_1 = element(\"time\");\n\t\t\tattr(time_1, \"class\", time_1_class_value = /*$theme*/ ctx[1].time);\n\t\t\tattr(time_1, \"datetime\", time_1_datetime_value = /*time*/ ctx[9][0]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, time_1, anchor);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, time_1, /*time*/ ctx[9][2] ? /*time*/ ctx[9][1] : ''));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty & /*$theme*/ 2 && time_1_class_value !== (time_1_class_value = /*$theme*/ ctx[1].time)) {\n\t\t\t\tattr(time_1, \"class\", time_1_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$_times*/ 4 && time_1_datetime_value !== (time_1_datetime_value = /*time*/ ctx[9][0])) {\n\t\t\t\tattr(time_1, \"datetime\", time_1_datetime_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_times*/ 4) setContent_action.update.call(null, /*time*/ ctx[9][2] ? /*time*/ ctx[9][1] : '');\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(time_1);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction create_fragment$8(ctx) {\n\tlet div1;\n\tlet div0;\n\tlet div0_class_value;\n\tlet setContent_action;\n\tlet t0;\n\tlet div1_class_value;\n\tlet t1;\n\tlet div3;\n\tlet div2;\n\tlet div2_class_value;\n\tlet t2;\n\tlet div3_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value = ensure_array_like(/*$_times*/ ctx[2]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$5(get_each_context$5(ctx, each_value, i));\n\t}\n\n\tconst lines_slot_template = /*#slots*/ ctx[8].lines;\n\tconst lines_slot = create_slot(lines_slot_template, ctx, /*$$scope*/ ctx[7], get_lines_slot_context);\n\tconst default_slot_template = /*#slots*/ ctx[8].default;\n\tconst default_slot = create_slot(default_slot_template, ctx, /*$$scope*/ ctx[7], null);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt0 = space();\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt1 = space();\n\t\t\tdiv3 = element(\"div\");\n\t\t\tdiv2 = element(\"div\");\n\t\t\tif (lines_slot) lines_slot.c();\n\t\t\tt2 = space();\n\t\t\tif (default_slot) default_slot.c();\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[1].sidebarTitle);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[1].sidebar);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[1].lines);\n\t\t\tattr(div3, \"class\", div3_class_value = /*$theme*/ ctx[1].days);\n\t\t\tattr(div3, \"role\", \"row\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tappend(div1, div0);\n\t\t\tappend(div1, t0);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, t1, anchor);\n\t\t\tinsert(target, div3, anchor);\n\t\t\tappend(div3, div2);\n\n\t\t\tif (lines_slot) {\n\t\t\t\tlines_slot.m(div2, null);\n\t\t\t}\n\n\t\t\tappend(div3, t2);\n\n\t\t\tif (default_slot) {\n\t\t\t\tdefault_slot.m(div3, null);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, div0, /*allDayText*/ ctx[0]));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[1].sidebarTitle)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*allDayText*/ 1) setContent_action.update.call(null, /*allDayText*/ ctx[0]);\n\n\t\t\tif (dirty & /*$theme, $_times*/ 6) {\n\t\t\t\teach_value = ensure_array_like(/*$_times*/ ctx[2]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$5(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$5(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value.length;\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[1].sidebar)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (lines_slot) {\n\t\t\t\tif (lines_slot.p && (!current || dirty & /*$$scope*/ 128)) {\n\t\t\t\t\tupdate_slot_base(\n\t\t\t\t\t\tlines_slot,\n\t\t\t\t\t\tlines_slot_template,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\t/*$$scope*/ ctx[7],\n\t\t\t\t\t\t!current\n\t\t\t\t\t\t? get_all_dirty_from_scope(/*$$scope*/ ctx[7])\n\t\t\t\t\t\t: get_slot_changes(lines_slot_template, /*$$scope*/ ctx[7], dirty, get_lines_slot_changes),\n\t\t\t\t\t\tget_lines_slot_context\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[1].lines)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\n\t\t\tif (default_slot) {\n\t\t\t\tif (default_slot.p && (!current || dirty & /*$$scope*/ 128)) {\n\t\t\t\t\tupdate_slot_base(\n\t\t\t\t\t\tdefault_slot,\n\t\t\t\t\t\tdefault_slot_template,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\t/*$$scope*/ ctx[7],\n\t\t\t\t\t\t!current\n\t\t\t\t\t\t? get_all_dirty_from_scope(/*$$scope*/ ctx[7])\n\t\t\t\t\t\t: get_slot_changes(default_slot_template, /*$$scope*/ ctx[7], dirty, null),\n\t\t\t\t\t\tnull\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div3_class_value !== (div3_class_value = /*$theme*/ ctx[1].days)) {\n\t\t\t\tattr(div3, \"class\", div3_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(lines_slot, local);\n\t\t\ttransition_in(default_slot, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(lines_slot, local);\n\t\t\ttransition_out(default_slot, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t\tdetach(t1);\n\t\t\t\tdetach(div3);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\tif (lines_slot) lines_slot.d(detaching);\n\t\t\tif (default_slot) default_slot.d(detaching);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$8($$self, $$props, $$invalidate) {\n\tlet $allDayContent;\n\tlet $theme;\n\tlet $_times;\n\tlet { $$slots: slots = {}, $$scope } = $$props;\n\tlet { allDayContent, theme, _times } = getContext('state');\n\tcomponent_subscribe($$self, allDayContent, value => $$invalidate(6, $allDayContent = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(1, $theme = value));\n\tcomponent_subscribe($$self, _times, value => $$invalidate(2, $_times = value));\n\tlet allDayText;\n\n\t$$self.$$set = $$props => {\n\t\tif ('$$scope' in $$props) $$invalidate(7, $$scope = $$props.$$scope);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$allDayContent*/ 64) {\n\t\t\t$$invalidate(0, allDayText = createAllDayContent($allDayContent));\n\t\t}\n\t};\n\n\treturn [\n\t\tallDayText,\n\t\t$theme,\n\t\t$_times,\n\t\tallDayContent,\n\t\ttheme,\n\t\t_times,\n\t\t$allDayContent,\n\t\t$$scope,\n\t\tslots\n\t];\n}\n\nclass Section extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$8, create_fragment$8, safe_not_equal, {});\n\t}\n}\n\n/* packages/time-grid/src/Body.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$4(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[23] = list[i];\n\treturn child_ctx;\n}\n\n// (34:8) <Section>\nfunction create_default_slot$1(ctx) {\n\tlet current;\n\tconst default_slot_template = /*#slots*/ ctx[16].default;\n\tconst default_slot = create_slot(default_slot_template, ctx, /*$$scope*/ ctx[18], null);\n\n\treturn {\n\t\tc() {\n\t\t\tif (default_slot) default_slot.c();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (default_slot) {\n\t\t\t\tdefault_slot.m(target, anchor);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (default_slot) {\n\t\t\t\tif (default_slot.p && (!current || dirty & /*$$scope*/ 262144)) {\n\t\t\t\t\tupdate_slot_base(\n\t\t\t\t\t\tdefault_slot,\n\t\t\t\t\t\tdefault_slot_template,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\t/*$$scope*/ ctx[18],\n\t\t\t\t\t\t!current\n\t\t\t\t\t\t? get_all_dirty_from_scope(/*$$scope*/ ctx[18])\n\t\t\t\t\t\t: get_slot_changes(default_slot_template, /*$$scope*/ ctx[18], dirty, null),\n\t\t\t\t\t\tnull\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(default_slot, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(default_slot, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (default_slot) default_slot.d(detaching);\n\t\t}\n\t};\n}\n\n// (36:16) {#each lines as line}\nfunction create_each_block$4(ctx) {\n\tlet div;\n\tlet div_class_value;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[3].line);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$theme*/ 8 && div_class_value !== (div_class_value = /*$theme*/ ctx[3].line)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (35:12) <svelte:fragment slot=\"lines\">\nfunction create_lines_slot(ctx) {\n\tlet each_1_anchor;\n\tlet each_value = ensure_array_like(/*lines*/ ctx[2]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$theme, lines*/ 12) {\n\t\t\t\teach_value = ensure_array_like(/*lines*/ ctx[2]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$4(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$4(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value.length;\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$7(ctx) {\n\tlet div1;\n\tlet div0;\n\tlet section;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet current;\n\n\tsection = new Section({\n\t\t\tprops: {\n\t\t\t\t$$slots: {\n\t\t\t\t\tlines: [create_lines_slot],\n\t\t\t\t\tdefault: [create_default_slot$1]\n\t\t\t\t},\n\t\t\t\t$$scope: { ctx }\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tcreate_component(section.$$.fragment);\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[3].content);\n\n\t\t\tattr(div1, \"class\", div1_class_value = \"\" + (/*$theme*/ ctx[3].body + (/*compact*/ ctx[1]\n\t\t\t? ' ' + /*$theme*/ ctx[3].compact\n\t\t\t: '')));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tappend(div1, div0);\n\t\t\tmount_component(section, div0, null);\n\t\t\t/*div1_binding*/ ctx[17](div1);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tconst section_changes = {};\n\n\t\t\tif (dirty & /*$$scope, lines, $theme*/ 262156) {\n\t\t\t\tsection_changes.$$scope = { dirty, ctx };\n\t\t\t}\n\n\t\t\tsection.$set(section_changes);\n\n\t\t\tif (!current || dirty & /*$theme*/ 8 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[3].content)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme, compact*/ 10 && div1_class_value !== (div1_class_value = \"\" + (/*$theme*/ ctx[3].body + (/*compact*/ ctx[1]\n\t\t\t? ' ' + /*$theme*/ ctx[3].compact\n\t\t\t: '')))) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(section.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(section.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t}\n\n\t\t\tdestroy_component(section);\n\t\t\t/*div1_binding*/ ctx[17](null);\n\t\t}\n\t};\n}\n\nfunction instance$7($$self, $$props, $$invalidate) {\n\tlet $slotHeight;\n\tlet $slotDuration;\n\tlet $_slotTimeLimits;\n\tlet $scrollTime;\n\tlet $_viewDates;\n\tlet $_times;\n\tlet $_bodyEl;\n\tlet $theme;\n\tlet { $$slots: slots = {}, $$scope } = $$props;\n\tlet { _bodyEl, _viewDates, _slotTimeLimits, _times, scrollTime, slotDuration, slotHeight, theme } = getContext('state');\n\tcomponent_subscribe($$self, _bodyEl, value => $$invalidate(21, $_bodyEl = value));\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(14, $_viewDates = value));\n\tcomponent_subscribe($$self, _slotTimeLimits, value => $$invalidate(20, $_slotTimeLimits = value));\n\tcomponent_subscribe($$self, _times, value => $$invalidate(15, $_times = value));\n\tcomponent_subscribe($$self, scrollTime, value => $$invalidate(13, $scrollTime = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(12, $slotDuration = value));\n\tcomponent_subscribe($$self, slotHeight, value => $$invalidate(19, $slotHeight = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(3, $theme = value));\n\tlet el;\n\tlet compact;\n\tlet lines = [];\n\n\tfunction scrollToTime() {\n\t\t$$invalidate(0, el.scrollTop = (($scrollTime.seconds - $_slotTimeLimits.min.seconds) / $slotDuration.seconds - 0.5) * $slotHeight, el);\n\t}\n\n\tfunction div1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(0, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('$$scope' in $$props) $$invalidate(18, $$scope = $$props.$$scope);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*el*/ 1) {\n\t\t\tset_store_value(_bodyEl, $_bodyEl = el, $_bodyEl);\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$slotDuration, $_times*/ 36864) {\n\t\t\t{\n\t\t\t\t$$invalidate(1, compact = $slotDuration.seconds >= 3600);\n\t\t\t\t$$invalidate(2, lines.length = $_times.length, lines);\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*el, $_viewDates, $scrollTime*/ 24577) {\n\t\t\tif (el) {\n\t\t\t\tscrollToTime();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tel,\n\t\tcompact,\n\t\tlines,\n\t\t$theme,\n\t\t_bodyEl,\n\t\t_viewDates,\n\t\t_slotTimeLimits,\n\t\t_times,\n\t\tscrollTime,\n\t\tslotDuration,\n\t\tslotHeight,\n\t\ttheme,\n\t\t$slotDuration,\n\t\t$scrollTime,\n\t\t$_viewDates,\n\t\t$_times,\n\t\tslots,\n\t\tdiv1_binding,\n\t\t$$scope\n\t];\n}\n\nclass Body extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$7, create_fragment$7, safe_not_equal, {});\n\t}\n}\n\n/* packages/time-grid/src/Event.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$6(ctx) {\n\tlet article;\n\tlet switch_instance0;\n\tlet t0;\n\tlet div;\n\tlet div_class_value;\n\tlet setContent_action;\n\tlet t1;\n\tlet switch_instance1;\n\tlet article_role_value;\n\tlet article_tabindex_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tvar switch_value = /*$_interaction*/ ctx[10].resizer;\n\n\tfunction switch_props(ctx, dirty) {\n\t\treturn {\n\t\t\tprops: { start: true, event: /*event*/ ctx[0] }\n\t\t};\n\t}\n\n\tif (switch_value) {\n\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'start']))) /*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'start']).apply(this, arguments);\n\t\t});\n\t}\n\n\tvar switch_value_1 = /*$_interaction*/ ctx[10].resizer;\n\n\tfunction switch_props_1(ctx, dirty) {\n\t\treturn { props: { event: /*event*/ ctx[0] } };\n\t}\n\n\tif (switch_value_1) {\n\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'end']))) /*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'end']).apply(this, arguments);\n\t\t});\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tarticle = element(\"article\");\n\t\t\tif (switch_instance0) create_component(switch_instance0.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tdiv = element(\"div\");\n\t\t\tt1 = space();\n\t\t\tif (switch_instance1) create_component(switch_instance1.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[2].eventBody);\n\t\t\tattr(article, \"class\", /*classes*/ ctx[4]);\n\t\t\tattr(article, \"style\", /*style*/ ctx[5]);\n\t\t\tattr(article, \"role\", article_role_value = /*onclick*/ ctx[7] ? 'button' : undefined);\n\t\t\tattr(article, \"tabindex\", article_tabindex_value = /*onclick*/ ctx[7] ? 0 : undefined);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, article, anchor);\n\t\t\tif (switch_instance0) mount_component(switch_instance0, article, null);\n\t\t\tappend(article, t0);\n\t\t\tappend(article, div);\n\t\t\tappend(article, t1);\n\t\t\tif (switch_instance1) mount_component(switch_instance1, article, null);\n\t\t\t/*article_binding*/ ctx[51](article);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, div, /*content*/ ctx[6])),\n\t\t\t\t\tlisten(article, \"click\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[7])) /*onclick*/ ctx[7].apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"keydown\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[7] && keyEnter(/*onclick*/ ctx[7]))) (/*onclick*/ ctx[7] && keyEnter(/*onclick*/ ctx[7])).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseenter\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[32](/*$eventMouseEnter*/ ctx[8], /*display*/ ctx[1]))) /*createHandler*/ ctx[32](/*$eventMouseEnter*/ ctx[8], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseleave\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[32](/*$eventMouseLeave*/ ctx[9], /*display*/ ctx[1]))) /*createHandler*/ ctx[32](/*$eventMouseLeave*/ ctx[9], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(!bgEvent(/*display*/ ctx[1]) && !helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10]))) (!bgEvent(/*display*/ ctx[1]) && !helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10])).apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 1024 && switch_value !== (switch_value = /*$_interaction*/ ctx[10].resizer)) {\n\t\t\t\tif (switch_instance0) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance0;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value) {\n\t\t\t\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\t\t\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'start']))) /*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'start']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance0.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance0.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance0, article, t0);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance0 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value) {\n\t\t\t\tconst switch_instance0_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance0_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance0.$set(switch_instance0_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 4 && div_class_value !== (div_class_value = /*$theme*/ ctx[2].eventBody)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*content*/ 64) setContent_action.update.call(null, /*content*/ ctx[6]);\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 1024 && switch_value_1 !== (switch_value_1 = /*$_interaction*/ ctx[10].resizer)) {\n\t\t\t\tif (switch_instance1) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance1;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value_1) {\n\t\t\t\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\t\t\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'end']))) /*createDragHandler*/ ctx[33](/*$_interaction*/ ctx[10], ['y', 'end']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance1.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance1.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance1, article, null);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance1 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value_1) {\n\t\t\t\tconst switch_instance1_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance1_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance1.$set(switch_instance1_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*classes*/ 16) {\n\t\t\t\tattr(article, \"class\", /*classes*/ ctx[4]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*style*/ 32) {\n\t\t\t\tattr(article, \"style\", /*style*/ ctx[5]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 128 && article_role_value !== (article_role_value = /*onclick*/ ctx[7] ? 'button' : undefined)) {\n\t\t\t\tattr(article, \"role\", article_role_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 128 && article_tabindex_value !== (article_tabindex_value = /*onclick*/ ctx[7] ? 0 : undefined)) {\n\t\t\t\tattr(article, \"tabindex\", article_tabindex_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\tif (switch_instance0) transition_in(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_in(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tif (switch_instance0) transition_out(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_out(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(article);\n\t\t\t}\n\n\t\t\tif (switch_instance0) destroy_component(switch_instance0);\n\t\t\tif (switch_instance1) destroy_component(switch_instance1);\n\t\t\t/*article_binding*/ ctx[51](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance$6($$self, $$props, $$invalidate) {\n\tlet $eventClick;\n\tlet $_view;\n\tlet $eventAllUpdated;\n\tlet $eventDidMount;\n\tlet $_intlEventTime;\n\tlet $theme;\n\tlet $eventContent;\n\tlet $displayEventEnd;\n\tlet $eventClassNames;\n\tlet $_iClasses;\n\tlet $slotEventOverlap;\n\tlet $eventTextColor;\n\tlet $resources;\n\tlet $eventColor;\n\tlet $eventBackgroundColor;\n\tlet $slotHeight;\n\tlet $_slotTimeLimits;\n\tlet $slotDuration;\n\tlet $eventMouseEnter;\n\tlet $eventMouseLeave;\n\tlet $_interaction;\n\tlet { date } = $$props;\n\tlet { chunk } = $$props;\n\tlet { displayEventEnd, eventAllUpdated, eventBackgroundColor, eventTextColor, eventColor, eventContent, eventClick, eventDidMount, eventClassNames, eventMouseEnter, eventMouseLeave, slotEventOverlap, slotDuration, slotHeight, resources, theme, _view, _intlEventTime, _interaction, _iClasses, _slotTimeLimits, _tasks } = getContext('state');\n\tcomponent_subscribe($$self, displayEventEnd, value => $$invalidate(40, $displayEventEnd = value));\n\tcomponent_subscribe($$self, eventAllUpdated, value => $$invalidate(53, $eventAllUpdated = value));\n\tcomponent_subscribe($$self, eventBackgroundColor, value => $$invalidate(47, $eventBackgroundColor = value));\n\tcomponent_subscribe($$self, eventTextColor, value => $$invalidate(44, $eventTextColor = value));\n\tcomponent_subscribe($$self, eventColor, value => $$invalidate(46, $eventColor = value));\n\tcomponent_subscribe($$self, eventContent, value => $$invalidate(39, $eventContent = value));\n\tcomponent_subscribe($$self, eventClick, value => $$invalidate(36, $eventClick = value));\n\tcomponent_subscribe($$self, eventDidMount, value => $$invalidate(54, $eventDidMount = value));\n\tcomponent_subscribe($$self, eventClassNames, value => $$invalidate(41, $eventClassNames = value));\n\tcomponent_subscribe($$self, eventMouseEnter, value => $$invalidate(8, $eventMouseEnter = value));\n\tcomponent_subscribe($$self, eventMouseLeave, value => $$invalidate(9, $eventMouseLeave = value));\n\tcomponent_subscribe($$self, slotEventOverlap, value => $$invalidate(43, $slotEventOverlap = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(50, $slotDuration = value));\n\tcomponent_subscribe($$self, slotHeight, value => $$invalidate(48, $slotHeight = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(45, $resources = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(2, $theme = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(37, $_view = value));\n\tcomponent_subscribe($$self, _intlEventTime, value => $$invalidate(38, $_intlEventTime = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(10, $_interaction = value));\n\tcomponent_subscribe($$self, _iClasses, value => $$invalidate(42, $_iClasses = value));\n\tcomponent_subscribe($$self, _slotTimeLimits, value => $$invalidate(49, $_slotTimeLimits = value));\n\tlet el;\n\tlet event;\n\tlet display;\n\tlet classes;\n\tlet style;\n\tlet content;\n\tlet timeText;\n\tlet onclick;\n\n\tonMount(() => {\n\t\tif (isFunction($eventDidMount)) {\n\t\t\t$eventDidMount({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\ttimeText,\n\t\t\t\tel,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t});\n\t\t}\n\t});\n\n\tafterUpdate(() => {\n\t\tif (isFunction($eventAllUpdated) && !helperEvent(display)) {\n\t\t\ttask(() => $eventAllUpdated({ view: toViewWithLocalDates($_view) }), 'eau', _tasks);\n\t\t}\n\t});\n\n\tfunction createHandler(fn, display) {\n\t\treturn !helperEvent(display) && isFunction(fn)\n\t\t? jsEvent => fn({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\tel,\n\t\t\t\tjsEvent,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t})\n\t\t: undefined;\n\t}\n\n\tfunction createDragHandler(interaction, resize) {\n\t\treturn interaction.action\n\t\t? jsEvent => interaction.action.drag(event, jsEvent, resize, undefined, undefined, chunk.zeroDuration)\n\t\t: undefined;\n\t}\n\n\tfunction article_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(3, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('date' in $$props) $$invalidate(34, date = $$props.date);\n\t\tif ('chunk' in $$props) $$invalidate(35, chunk = $$props.chunk);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[1] & /*chunk*/ 16) {\n\t\t\t$$invalidate(0, event = chunk.event);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*event, style, display, $theme*/ 39 | $$self.$$.dirty[1] & /*$slotDuration, $_slotTimeLimits, chunk, date, $slotHeight, $resources, $eventBackgroundColor, $eventColor, $eventTextColor, $slotEventOverlap, $_iClasses, $eventClassNames, $_view*/ 1047640) {\n\t\t\t{\n\t\t\t\t$$invalidate(1, display = event.display);\n\n\t\t\t\t// Style\n\t\t\t\tlet step = $slotDuration.seconds;\n\n\t\t\t\tlet offset = $_slotTimeLimits.min.seconds;\n\t\t\t\tlet start = (chunk.start - date) / 1000;\n\t\t\t\tlet end = (chunk.end - date) / 1000;\n\t\t\t\tlet top = (start - offset) / step * $slotHeight;\n\t\t\t\tlet height = (end - start) / step * $slotHeight || $slotHeight;\n\t\t\t\tlet maxHeight = ($_slotTimeLimits.max.seconds - start) / step * $slotHeight;\n\t\t\t\tlet bgColor = event.backgroundColor || resourceBackgroundColor(event, $resources) || $eventBackgroundColor || $eventColor;\n\t\t\t\tlet txtColor = event.textColor || resourceTextColor(event, $resources) || $eventTextColor;\n\t\t\t\t$$invalidate(5, style = `top:${top}px;` + `min-height:${height}px;` + `height:${height}px;` + `max-height:${maxHeight}px;`);\n\n\t\t\t\tif (bgColor) {\n\t\t\t\t\t$$invalidate(5, style += `background-color:${bgColor};`);\n\t\t\t\t}\n\n\t\t\t\tif (txtColor) {\n\t\t\t\t\t$$invalidate(5, style += `color:${txtColor};`);\n\t\t\t\t}\n\n\t\t\t\tif (!bgEvent(display) && !helperEvent(display) || ghostEvent(display)) {\n\t\t\t\t\t$$invalidate(5, style += `z-index:${chunk.column + 1};` + `left:${100 / chunk.group.columns.length * chunk.column}%;` + `width:${100 / chunk.group.columns.length * ($slotEventOverlap\n\t\t\t\t\t? 0.5 * (1 + chunk.group.columns.length - chunk.column)\n\t\t\t\t\t: 1)}%;`);\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(5, style += event.styles.join(';'));\n\n\t\t\t\t// Class\n\t\t\t\t$$invalidate(4, classes = [\n\t\t\t\t\tbgEvent(display) ? $theme.bgEvent : $theme.event,\n\t\t\t\t\t...$_iClasses([], event),\n\t\t\t\t\t...createEventClasses($eventClassNames, event, $_view)\n\t\t\t\t].join(' '));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$theme*/ 4 | $$self.$$.dirty[1] & /*chunk, $displayEventEnd, $eventContent, $_intlEventTime, $_view*/ 976) {\n\t\t\t// Content\n\t\t\t$$invalidate(6, [timeText, content] = createEventContent(chunk, $displayEventEnd, $eventContent, $theme, $_intlEventTime, $_view), content);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*display*/ 2 | $$self.$$.dirty[1] & /*$eventClick*/ 32) {\n\t\t\t// Onclick handler\n\t\t\t$$invalidate(7, onclick = !bgEvent(display) && createHandler($eventClick, display));\n\t\t}\n\t};\n\n\treturn [\n\t\tevent,\n\t\tdisplay,\n\t\t$theme,\n\t\tel,\n\t\tclasses,\n\t\tstyle,\n\t\tcontent,\n\t\tonclick,\n\t\t$eventMouseEnter,\n\t\t$eventMouseLeave,\n\t\t$_interaction,\n\t\tdisplayEventEnd,\n\t\teventAllUpdated,\n\t\teventBackgroundColor,\n\t\teventTextColor,\n\t\teventColor,\n\t\teventContent,\n\t\teventClick,\n\t\teventDidMount,\n\t\teventClassNames,\n\t\teventMouseEnter,\n\t\teventMouseLeave,\n\t\tslotEventOverlap,\n\t\tslotDuration,\n\t\tslotHeight,\n\t\tresources,\n\t\ttheme,\n\t\t_view,\n\t\t_intlEventTime,\n\t\t_interaction,\n\t\t_iClasses,\n\t\t_slotTimeLimits,\n\t\tcreateHandler,\n\t\tcreateDragHandler,\n\t\tdate,\n\t\tchunk,\n\t\t$eventClick,\n\t\t$_view,\n\t\t$_intlEventTime,\n\t\t$eventContent,\n\t\t$displayEventEnd,\n\t\t$eventClassNames,\n\t\t$_iClasses,\n\t\t$slotEventOverlap,\n\t\t$eventTextColor,\n\t\t$resources,\n\t\t$eventColor,\n\t\t$eventBackgroundColor,\n\t\t$slotHeight,\n\t\t$_slotTimeLimits,\n\t\t$slotDuration,\n\t\tarticle_binding\n\t];\n}\n\nlet Event$1 = class Event extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$6, create_fragment$6, safe_not_equal, { date: 34, chunk: 35 }, null, [-1, -1]);\n\t}\n};\n\n/* packages/time-grid/src/NowIndicator.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$5(ctx) {\n\tlet div;\n\tlet div_class_value;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[1].nowIndicator);\n\t\t\tset_style(div, \"top\", /*top*/ ctx[0] + \"px\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*$theme*/ 2 && div_class_value !== (div_class_value = /*$theme*/ ctx[1].nowIndicator)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*top*/ 1) {\n\t\t\t\tset_style(div, \"top\", /*top*/ ctx[0] + \"px\");\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction instance$5($$self, $$props, $$invalidate) {\n\tlet $slotHeight;\n\tlet $_slotTimeLimits;\n\tlet $slotDuration;\n\tlet $_today;\n\tlet $_now;\n\tlet $theme;\n\tlet { slotDuration, slotHeight, theme, _now, _today, _slotTimeLimits } = getContext('state');\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(11, $slotDuration = value));\n\tcomponent_subscribe($$self, slotHeight, value => $$invalidate(9, $slotHeight = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(1, $theme = value));\n\tcomponent_subscribe($$self, _now, value => $$invalidate(13, $_now = value));\n\tcomponent_subscribe($$self, _today, value => $$invalidate(12, $_today = value));\n\tcomponent_subscribe($$self, _slotTimeLimits, value => $$invalidate(10, $_slotTimeLimits = value));\n\tlet start;\n\tlet top = 0;\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$_now, $_today*/ 12288) {\n\t\t\t$$invalidate(8, start = ($_now - $_today) / 1000 / 60);\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$slotDuration, $_slotTimeLimits, start, $slotHeight*/ 3840) {\n\t\t\t{\n\t\t\t\t// Style\n\t\t\t\tlet step = $slotDuration.seconds / 60;\n\n\t\t\t\tlet offset = $_slotTimeLimits.min.seconds / 60;\n\t\t\t\t$$invalidate(0, top = (start - offset) / step * $slotHeight);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\ttop,\n\t\t$theme,\n\t\tslotDuration,\n\t\tslotHeight,\n\t\ttheme,\n\t\t_now,\n\t\t_today,\n\t\t_slotTimeLimits,\n\t\tstart,\n\t\t$slotHeight,\n\t\t$_slotTimeLimits,\n\t\t$slotDuration,\n\t\t$_today,\n\t\t$_now\n\t];\n}\n\nclass NowIndicator extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$5, create_fragment$5, safe_not_equal, {});\n\t}\n}\n\n/* packages/time-grid/src/Day.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$3(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[40] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_1$2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[40] = list[i];\n\treturn child_ctx;\n}\n\n// (84:8) {#if !disabled}\nfunction create_if_block_4(ctx) {\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value_1 = ensure_array_like(/*bgChunks*/ ctx[3]);\n\tconst get_key = ctx => /*chunk*/ ctx[40].event;\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\tlet child_ctx = get_each_context_1$2(ctx, each_value_1, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block_1$2(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*date, bgChunks*/ 9) {\n\t\t\t\teach_value_1 = ensure_array_like(/*bgChunks*/ ctx[3]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_1, each_1_lookup, each_1_anchor.parentNode, outro_and_destroy_block, create_each_block_1$2, each_1_anchor, get_each_context_1$2);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d(detaching);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (85:12) {#each bgChunks as chunk (chunk.event)}\nfunction create_each_block_1$2(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet current;\n\n\tevent = new Event$1({\n\t\t\tprops: {\n\t\t\t\tdate: /*date*/ ctx[0],\n\t\t\t\tchunk: /*chunk*/ ctx[40]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*date*/ 1) event_changes.date = /*date*/ ctx[0];\n\t\t\tif (dirty[0] & /*bgChunks*/ 8) event_changes.chunk = /*chunk*/ ctx[40];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (91:8) {#if !disabled}\nfunction create_if_block_1$1(ctx) {\n\tlet t0;\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet t1;\n\tlet if_block1_anchor;\n\tlet current;\n\tlet if_block0 = /*iChunks*/ ctx[5][1] && create_if_block_3(ctx);\n\tlet each_value = ensure_array_like(/*chunks*/ ctx[2]);\n\tconst get_key = ctx => /*chunk*/ ctx[40].event;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context$3(ctx, each_value, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block$3(key, child_ctx));\n\t}\n\n\tlet if_block1 = /*iChunks*/ ctx[5][0] && !/*iChunks*/ ctx[5][0].event.allDay && create_if_block_2$1(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif (if_block0) if_block0.c();\n\t\t\tt0 = space();\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt1 = space();\n\t\t\tif (if_block1) if_block1.c();\n\t\t\tif_block1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (if_block0) if_block0.m(target, anchor);\n\t\t\tinsert(target, t0, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, t1, anchor);\n\t\t\tif (if_block1) if_block1.m(target, anchor);\n\t\t\tinsert(target, if_block1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (/*iChunks*/ ctx[5][1]) {\n\t\t\t\tif (if_block0) {\n\t\t\t\t\tif_block0.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*iChunks*/ 32) {\n\t\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block0 = create_if_block_3(ctx);\n\t\t\t\t\tif_block0.c();\n\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\tif_block0.m(t0.parentNode, t0);\n\t\t\t\t}\n\t\t\t} else if (if_block0) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block0, 1, 1, () => {\n\t\t\t\t\tif_block0 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*date, chunks*/ 5) {\n\t\t\t\teach_value = ensure_array_like(/*chunks*/ ctx[2]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value, each_1_lookup, t1.parentNode, outro_and_destroy_block, create_each_block$3, t1, get_each_context$3);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (/*iChunks*/ ctx[5][0] && !/*iChunks*/ ctx[5][0].event.allDay) {\n\t\t\t\tif (if_block1) {\n\t\t\t\t\tif_block1.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*iChunks*/ 32) {\n\t\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block1 = create_if_block_2$1(ctx);\n\t\t\t\t\tif_block1.c();\n\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\tif_block1.m(if_block1_anchor.parentNode, if_block1_anchor);\n\t\t\t\t}\n\t\t\t} else if (if_block1) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block1, 1, 1, () => {\n\t\t\t\t\tif_block1 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block0);\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\ttransition_in(if_block1);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block0);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\ttransition_out(if_block1);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t0);\n\t\t\t\tdetach(t1);\n\t\t\t\tdetach(if_block1_anchor);\n\t\t\t}\n\n\t\t\tif (if_block0) if_block0.d(detaching);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d(detaching);\n\t\t\t}\n\n\t\t\tif (if_block1) if_block1.d(detaching);\n\t\t}\n\t};\n}\n\n// (93:12) {#if iChunks[1]}\nfunction create_if_block_3(ctx) {\n\tlet event;\n\tlet current;\n\n\tevent = new Event$1({\n\t\t\tprops: {\n\t\t\t\tdate: /*date*/ ctx[0],\n\t\t\t\tchunk: /*iChunks*/ ctx[5][1]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(event.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*date*/ 1) event_changes.date = /*date*/ ctx[0];\n\t\t\tif (dirty[0] & /*iChunks*/ 32) event_changes.chunk = /*iChunks*/ ctx[5][1];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (96:12) {#each chunks as chunk (chunk.event)}\nfunction create_each_block$3(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet current;\n\n\tevent = new Event$1({\n\t\t\tprops: {\n\t\t\t\tdate: /*date*/ ctx[0],\n\t\t\t\tchunk: /*chunk*/ ctx[40]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*date*/ 1) event_changes.date = /*date*/ ctx[0];\n\t\t\tif (dirty[0] & /*chunks*/ 4) event_changes.chunk = /*chunk*/ ctx[40];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (100:12) {#if iChunks[0] && !iChunks[0].event.allDay}\nfunction create_if_block_2$1(ctx) {\n\tlet event;\n\tlet current;\n\n\tevent = new Event$1({\n\t\t\tprops: {\n\t\t\t\tdate: /*date*/ ctx[0],\n\t\t\t\tchunk: /*iChunks*/ ctx[5][0]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(event.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*date*/ 1) event_changes.date = /*date*/ ctx[0];\n\t\t\tif (dirty[0] & /*iChunks*/ 32) event_changes.chunk = /*iChunks*/ ctx[5][0];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (107:8) {#if $nowIndicator && isToday && !disabled}\nfunction create_if_block$2(ctx) {\n\tlet nowindicator;\n\tlet current;\n\tnowindicator = new NowIndicator({});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(nowindicator.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(nowindicator, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(nowindicator.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(nowindicator.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(nowindicator, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$4(ctx) {\n\tlet div3;\n\tlet div0;\n\tlet div0_class_value;\n\tlet t0;\n\tlet div1;\n\tlet div1_class_value;\n\tlet t1;\n\tlet div2;\n\tlet div2_class_value;\n\tlet div3_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet if_block0 = !/*disabled*/ ctx[4] && create_if_block_4(ctx);\n\tlet if_block1 = !/*disabled*/ ctx[4] && create_if_block_1$1(ctx);\n\tlet if_block2 = /*$nowIndicator*/ ctx[10] && /*isToday*/ ctx[6] && !/*disabled*/ ctx[4] && create_if_block$2();\n\n\treturn {\n\t\tc() {\n\t\t\tdiv3 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tif (if_block0) if_block0.c();\n\t\t\tt0 = space();\n\t\t\tdiv1 = element(\"div\");\n\t\t\tif (if_block1) if_block1.c();\n\t\t\tt1 = space();\n\t\t\tdiv2 = element(\"div\");\n\t\t\tif (if_block2) if_block2.c();\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[8].bgEvents);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[8].events);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[8].extra);\n\n\t\t\tattr(div3, \"class\", div3_class_value = \"\" + (/*$theme*/ ctx[8].day + \" \" + /*$theme*/ ctx[8].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[6] ? ' ' + /*$theme*/ ctx[8].today : '') + (/*highlight*/ ctx[7]\n\t\t\t? ' ' + /*$theme*/ ctx[8].highlight\n\t\t\t: '') + (/*disabled*/ ctx[4]\n\t\t\t? ' ' + /*$theme*/ ctx[8].disabled\n\t\t\t: '')));\n\n\t\t\tattr(div3, \"role\", \"cell\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div3, anchor);\n\t\t\tappend(div3, div0);\n\t\t\tif (if_block0) if_block0.m(div0, null);\n\t\t\tappend(div3, t0);\n\t\t\tappend(div3, div1);\n\t\t\tif (if_block1) if_block1.m(div1, null);\n\t\t\tappend(div3, t1);\n\t\t\tappend(div3, div2);\n\t\t\tif (if_block2) if_block2.m(div2, null);\n\t\t\t/*div3_binding*/ ctx[36](div3);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(div3, \"pointerdown\", function () {\n\t\t\t\t\tif (is_function(!/*disabled*/ ctx[4]\n\t\t\t\t\t? /*$_interaction*/ ctx[9].action?.select\n\t\t\t\t\t: undefined)) (!/*disabled*/ ctx[4]\n\t\t\t\t\t? /*$_interaction*/ ctx[9].action?.select\n\t\t\t\t\t: undefined).apply(this, arguments);\n\t\t\t\t});\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (!/*disabled*/ ctx[4]) {\n\t\t\t\tif (if_block0) {\n\t\t\t\t\tif_block0.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*disabled*/ 16) {\n\t\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block0 = create_if_block_4(ctx);\n\t\t\t\t\tif_block0.c();\n\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\tif_block0.m(div0, null);\n\t\t\t\t}\n\t\t\t} else if (if_block0) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block0, 1, 1, () => {\n\t\t\t\t\tif_block0 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 256 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[8].bgEvents)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!/*disabled*/ ctx[4]) {\n\t\t\t\tif (if_block1) {\n\t\t\t\t\tif_block1.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*disabled*/ 16) {\n\t\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block1 = create_if_block_1$1(ctx);\n\t\t\t\t\tif_block1.c();\n\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\tif_block1.m(div1, null);\n\t\t\t\t}\n\t\t\t} else if (if_block1) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block1, 1, 1, () => {\n\t\t\t\t\tif_block1 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 256 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[8].events)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (/*$nowIndicator*/ ctx[10] && /*isToday*/ ctx[6] && !/*disabled*/ ctx[4]) {\n\t\t\t\tif (if_block2) {\n\t\t\t\t\tif (dirty[0] & /*$nowIndicator, isToday, disabled*/ 1104) {\n\t\t\t\t\t\ttransition_in(if_block2, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block2 = create_if_block$2();\n\t\t\t\t\tif_block2.c();\n\t\t\t\t\ttransition_in(if_block2, 1);\n\t\t\t\t\tif_block2.m(div2, null);\n\t\t\t\t}\n\t\t\t} else if (if_block2) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block2, 1, 1, () => {\n\t\t\t\t\tif_block2 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 256 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[8].extra)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme, date, isToday, highlight, disabled*/ 465 && div3_class_value !== (div3_class_value = \"\" + (/*$theme*/ ctx[8].day + \" \" + /*$theme*/ ctx[8].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[6] ? ' ' + /*$theme*/ ctx[8].today : '') + (/*highlight*/ ctx[7]\n\t\t\t? ' ' + /*$theme*/ ctx[8].highlight\n\t\t\t: '') + (/*disabled*/ ctx[4]\n\t\t\t? ' ' + /*$theme*/ ctx[8].disabled\n\t\t\t: '')))) {\n\t\t\t\tattr(div3, \"class\", div3_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block0);\n\t\t\ttransition_in(if_block1);\n\t\t\ttransition_in(if_block2);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block0);\n\t\t\ttransition_out(if_block1);\n\t\t\ttransition_out(if_block2);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div3);\n\t\t\t}\n\n\t\t\tif (if_block0) if_block0.d();\n\t\t\tif (if_block1) if_block1.d();\n\t\t\tif (if_block2) if_block2.d();\n\t\t\t/*div3_binding*/ ctx[36](null);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$4($$self, $$props, $$invalidate) {\n\tlet $slotHeight;\n\tlet $slotDuration;\n\tlet $_slotTimeLimits;\n\tlet $_iEvents;\n\tlet $_events;\n\tlet $resources;\n\tlet $filterEventsWithResources;\n\tlet $validRange;\n\tlet $highlightedDates;\n\tlet $_today;\n\tlet $theme;\n\tlet $_interaction;\n\tlet $nowIndicator;\n\tlet { date } = $$props;\n\tlet { resource = undefined } = $$props;\n\tlet { _events, _iEvents, highlightedDates, nowIndicator, slotDuration, slotHeight, filterEventsWithResources, theme, resources, validRange, _interaction, _today, _slotTimeLimits } = getContext('state');\n\tcomponent_subscribe($$self, _events, value => $$invalidate(30, $_events = value));\n\tcomponent_subscribe($$self, _iEvents, value => $$invalidate(29, $_iEvents = value));\n\tcomponent_subscribe($$self, highlightedDates, value => $$invalidate(34, $highlightedDates = value));\n\tcomponent_subscribe($$self, nowIndicator, value => $$invalidate(10, $nowIndicator = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(38, $slotDuration = value));\n\tcomponent_subscribe($$self, slotHeight, value => $$invalidate(37, $slotHeight = value));\n\tcomponent_subscribe($$self, filterEventsWithResources, value => $$invalidate(32, $filterEventsWithResources = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(8, $theme = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(31, $resources = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(33, $validRange = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(9, $_interaction = value));\n\tcomponent_subscribe($$self, _today, value => $$invalidate(35, $_today = value));\n\tcomponent_subscribe($$self, _slotTimeLimits, value => $$invalidate(28, $_slotTimeLimits = value));\n\tlet el;\n\tlet chunks, bgChunks, iChunks = [];\n\tlet isToday, highlight, disabled;\n\tlet resourceFilter;\n\tlet start, end;\n\n\tfunction dateFromPoint(x, y) {\n\t\ty -= rect(el).top;\n\n\t\treturn {\n\t\t\tallDay: false,\n\t\t\tdate: addDuration(addDuration(cloneDate(date), $_slotTimeLimits.min), $slotDuration, floor(y / $slotHeight)),\n\t\t\tresource,\n\t\t\tdayEl: el,\n\t\t\tdisabled\n\t\t};\n\t}\n\n\tfunction div3_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(1, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('date' in $$props) $$invalidate(0, date = $$props.date);\n\t\tif ('resource' in $$props) $$invalidate(24, resource = $$props.resource);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$_today*/ 16) {\n\t\t\t$$invalidate(6, isToday = datesEqual(date, $_today));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$highlightedDates*/ 8) {\n\t\t\t$$invalidate(7, highlight = $highlightedDates.some(d => datesEqual(d, date)));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$validRange*/ 4) {\n\t\t\t$$invalidate(4, disabled = outsideRange(date, $validRange));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*disabled, date, $_slotTimeLimits*/ 268435473) {\n\t\t\tif (!disabled) {\n\t\t\t\t$$invalidate(26, start = addDuration(cloneDate(date), $_slotTimeLimits.min));\n\t\t\t\t$$invalidate(27, end = addDuration(cloneDate(date), $_slotTimeLimits.max));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*resource*/ 16777216 | $$self.$$.dirty[1] & /*$filterEventsWithResources, $resources*/ 3) {\n\t\t\t$$invalidate(25, resourceFilter = resource ?? ($filterEventsWithResources ? $resources : undefined));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*disabled, $_events, start, end, resourceFilter, bgChunks, chunks*/ 1308622876) {\n\t\t\tif (!disabled) {\n\t\t\t\t$$invalidate(2, chunks = []);\n\t\t\t\t$$invalidate(3, bgChunks = []);\n\n\t\t\t\tfor (let event of $_events) {\n\t\t\t\t\tif ((!event.allDay || bgEvent(event.display)) && eventIntersects(event, start, end, resourceFilter)) {\n\t\t\t\t\t\tlet chunk = createEventChunk(event, start, end);\n\n\t\t\t\t\t\tswitch (event.display) {\n\t\t\t\t\t\t\tcase 'background':\n\t\t\t\t\t\t\t\tbgChunks.push(chunk);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroupEventChunks(chunks);\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*disabled, $_iEvents, start, end, resource*/ 754974736) {\n\t\t\tif (!disabled) {\n\t\t\t\t$$invalidate(5, iChunks = $_iEvents.map(event => event && eventIntersects(event, start, end, resource)\n\t\t\t\t? createEventChunk(event, start, end)\n\t\t\t\t: null));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*el*/ 2) {\n\t\t\tif (el) {\n\t\t\t\tsetPayload(el, dateFromPoint);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tdate,\n\t\tel,\n\t\tchunks,\n\t\tbgChunks,\n\t\tdisabled,\n\t\tiChunks,\n\t\tisToday,\n\t\thighlight,\n\t\t$theme,\n\t\t$_interaction,\n\t\t$nowIndicator,\n\t\t_events,\n\t\t_iEvents,\n\t\thighlightedDates,\n\t\tnowIndicator,\n\t\tslotDuration,\n\t\tslotHeight,\n\t\tfilterEventsWithResources,\n\t\ttheme,\n\t\tresources,\n\t\tvalidRange,\n\t\t_interaction,\n\t\t_today,\n\t\t_slotTimeLimits,\n\t\tresource,\n\t\tresourceFilter,\n\t\tstart,\n\t\tend,\n\t\t$_slotTimeLimits,\n\t\t$_iEvents,\n\t\t$_events,\n\t\t$resources,\n\t\t$filterEventsWithResources,\n\t\t$validRange,\n\t\t$highlightedDates,\n\t\t$_today,\n\t\tdiv3_binding\n\t];\n}\n\nlet Day$1 = class Day extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$4, create_fragment$4, safe_not_equal, { date: 0, resource: 24 }, null, [-1, -1]);\n\t}\n};\n\n/* packages/time-grid/src/all-day/Event.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$3(ctx) {\n\tlet article;\n\tlet switch_instance0;\n\tlet t0;\n\tlet div;\n\tlet div_class_value;\n\tlet setContent_action;\n\tlet t1;\n\tlet switch_instance1;\n\tlet article_role_value;\n\tlet article_tabindex_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tvar switch_value = /*$_interaction*/ ctx[10].resizer;\n\n\tfunction switch_props(ctx, dirty) {\n\t\treturn {\n\t\t\tprops: { start: true, event: /*event*/ ctx[0] }\n\t\t};\n\t}\n\n\tif (switch_value) {\n\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'start']))) /*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'start']).apply(this, arguments);\n\t\t});\n\t}\n\n\tvar switch_value_1 = /*$_interaction*/ ctx[10].resizer;\n\n\tfunction switch_props_1(ctx, dirty) {\n\t\treturn { props: { event: /*event*/ ctx[0] } };\n\t}\n\n\tif (switch_value_1) {\n\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'end']))) /*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'end']).apply(this, arguments);\n\t\t});\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tarticle = element(\"article\");\n\t\t\tif (switch_instance0) create_component(switch_instance0.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tdiv = element(\"div\");\n\t\t\tt1 = space();\n\t\t\tif (switch_instance1) create_component(switch_instance1.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[2].eventBody);\n\t\t\tattr(article, \"class\", /*classes*/ ctx[4]);\n\t\t\tattr(article, \"style\", /*style*/ ctx[5]);\n\t\t\tattr(article, \"role\", article_role_value = /*onclick*/ ctx[7] ? 'button' : undefined);\n\t\t\tattr(article, \"tabindex\", article_tabindex_value = /*onclick*/ ctx[7] ? 0 : undefined);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, article, anchor);\n\t\t\tif (switch_instance0) mount_component(switch_instance0, article, null);\n\t\t\tappend(article, t0);\n\t\t\tappend(article, div);\n\t\t\tappend(article, t1);\n\t\t\tif (switch_instance1) mount_component(switch_instance1, article, null);\n\t\t\t/*article_binding*/ ctx[45](article);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, div, /*content*/ ctx[6])),\n\t\t\t\t\tlisten(article, \"click\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[7])) /*onclick*/ ctx[7].apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"keydown\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[7] && keyEnter(/*onclick*/ ctx[7]))) (/*onclick*/ ctx[7] && keyEnter(/*onclick*/ ctx[7])).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseenter\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[28](/*$eventMouseEnter*/ ctx[8], /*display*/ ctx[1]))) /*createHandler*/ ctx[28](/*$eventMouseEnter*/ ctx[8], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseleave\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[28](/*$eventMouseLeave*/ ctx[9], /*display*/ ctx[1]))) /*createHandler*/ ctx[28](/*$eventMouseLeave*/ ctx[9], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(!helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10]))) (!helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10])).apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 1024 && switch_value !== (switch_value = /*$_interaction*/ ctx[10].resizer)) {\n\t\t\t\tif (switch_instance0) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance0;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value) {\n\t\t\t\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\t\t\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'start']))) /*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'start']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance0.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance0.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance0, article, t0);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance0 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value) {\n\t\t\t\tconst switch_instance0_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance0_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance0.$set(switch_instance0_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 4 && div_class_value !== (div_class_value = /*$theme*/ ctx[2].eventBody)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*content*/ 64) setContent_action.update.call(null, /*content*/ ctx[6]);\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 1024 && switch_value_1 !== (switch_value_1 = /*$_interaction*/ ctx[10].resizer)) {\n\t\t\t\tif (switch_instance1) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance1;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value_1) {\n\t\t\t\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\t\t\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'end']))) /*createDragHandler*/ ctx[29](/*$_interaction*/ ctx[10], ['x', 'end']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance1.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance1.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance1, article, null);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance1 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value_1) {\n\t\t\t\tconst switch_instance1_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance1_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance1.$set(switch_instance1_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*classes*/ 16) {\n\t\t\t\tattr(article, \"class\", /*classes*/ ctx[4]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*style*/ 32) {\n\t\t\t\tattr(article, \"style\", /*style*/ ctx[5]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 128 && article_role_value !== (article_role_value = /*onclick*/ ctx[7] ? 'button' : undefined)) {\n\t\t\t\tattr(article, \"role\", article_role_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 128 && article_tabindex_value !== (article_tabindex_value = /*onclick*/ ctx[7] ? 0 : undefined)) {\n\t\t\t\tattr(article, \"tabindex\", article_tabindex_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\tif (switch_instance0) transition_in(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_in(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tif (switch_instance0) transition_out(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_out(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(article);\n\t\t\t}\n\n\t\t\tif (switch_instance0) destroy_component(switch_instance0);\n\t\t\tif (switch_instance1) destroy_component(switch_instance1);\n\t\t\t/*article_binding*/ ctx[45](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance$3($$self, $$props, $$invalidate) {\n\tlet $eventClick;\n\tlet $_view;\n\tlet $eventAllUpdated;\n\tlet $eventDidMount;\n\tlet $_intlEventTime;\n\tlet $theme;\n\tlet $eventContent;\n\tlet $displayEventEnd;\n\tlet $eventClassNames;\n\tlet $_iClasses;\n\tlet $eventTextColor;\n\tlet $resources;\n\tlet $eventColor;\n\tlet $eventBackgroundColor;\n\tlet $eventMouseEnter;\n\tlet $eventMouseLeave;\n\tlet $_interaction;\n\tlet { chunk } = $$props;\n\tlet { longChunks = {} } = $$props;\n\tlet { displayEventEnd, eventAllUpdated, eventBackgroundColor, eventTextColor, eventClick, eventColor, eventContent, eventClassNames, eventDidMount, eventMouseEnter, eventMouseLeave, resources, theme, _view, _intlEventTime, _interaction, _iClasses, _tasks } = getContext('state');\n\tcomponent_subscribe($$self, displayEventEnd, value => $$invalidate(38, $displayEventEnd = value));\n\tcomponent_subscribe($$self, eventAllUpdated, value => $$invalidate(47, $eventAllUpdated = value));\n\tcomponent_subscribe($$self, eventBackgroundColor, value => $$invalidate(44, $eventBackgroundColor = value));\n\tcomponent_subscribe($$self, eventTextColor, value => $$invalidate(41, $eventTextColor = value));\n\tcomponent_subscribe($$self, eventClick, value => $$invalidate(34, $eventClick = value));\n\tcomponent_subscribe($$self, eventColor, value => $$invalidate(43, $eventColor = value));\n\tcomponent_subscribe($$self, eventContent, value => $$invalidate(37, $eventContent = value));\n\tcomponent_subscribe($$self, eventClassNames, value => $$invalidate(39, $eventClassNames = value));\n\tcomponent_subscribe($$self, eventDidMount, value => $$invalidate(48, $eventDidMount = value));\n\tcomponent_subscribe($$self, eventMouseEnter, value => $$invalidate(8, $eventMouseEnter = value));\n\tcomponent_subscribe($$self, eventMouseLeave, value => $$invalidate(9, $eventMouseLeave = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(42, $resources = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(2, $theme = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(35, $_view = value));\n\tcomponent_subscribe($$self, _intlEventTime, value => $$invalidate(36, $_intlEventTime = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(10, $_interaction = value));\n\tcomponent_subscribe($$self, _iClasses, value => $$invalidate(40, $_iClasses = value));\n\tlet el;\n\tlet event;\n\tlet classes;\n\tlet style;\n\tlet content;\n\tlet timeText;\n\tlet margin = 1;\n\tlet display;\n\tlet onclick;\n\n\tonMount(() => {\n\t\tif (isFunction($eventDidMount)) {\n\t\t\t$eventDidMount({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\ttimeText,\n\t\t\t\tel,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t});\n\t\t}\n\t});\n\n\tafterUpdate(() => {\n\t\tif (isFunction($eventAllUpdated) && !helperEvent(display)) {\n\t\t\ttask(() => $eventAllUpdated({ view: toViewWithLocalDates($_view) }), 'eau', _tasks);\n\t\t}\n\t});\n\n\tfunction createHandler(fn, display) {\n\t\treturn !helperEvent(display) && isFunction(fn)\n\t\t? jsEvent => fn({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\tel,\n\t\t\t\tjsEvent,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t})\n\t\t: undefined;\n\t}\n\n\tfunction createDragHandler(interaction, resize) {\n\t\treturn interaction.action\n\t\t? jsEvent => interaction.action.drag(event, jsEvent, resize, null, rect(el).top - rect(ancestor(el, 1)).top, chunk.zeroDuration)\n\t\t: undefined;\n\t}\n\n\tfunction reposition() {\n\t\tif (!el) {\n\t\t\treturn;\n\t\t}\n\n\t\t$$invalidate(33, margin = repositionEvent(chunk, longChunks, height(el)));\n\t}\n\n\tfunction article_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(3, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('chunk' in $$props) $$invalidate(30, chunk = $$props.chunk);\n\t\tif ('longChunks' in $$props) $$invalidate(31, longChunks = $$props.longChunks);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*chunk*/ 1073741824) {\n\t\t\t$$invalidate(0, event = chunk.event);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*event, display, chunk, style, $theme*/ 1073741863 | $$self.$$.dirty[1] & /*$resources, $eventBackgroundColor, $eventColor, $eventTextColor, margin, $_iClasses, $eventClassNames, $_view*/ 16148) {\n\t\t\t{\n\t\t\t\t$$invalidate(1, display = event.display);\n\n\t\t\t\t// Class & Style\n\t\t\t\tlet bgColor = event.backgroundColor || resourceBackgroundColor(event, $resources) || $eventBackgroundColor || $eventColor;\n\n\t\t\t\tlet txtColor = event.textColor || resourceTextColor(event, $resources) || $eventTextColor;\n\n\t\t\t\tif (bgEvent(display)) {\n\t\t\t\t\t$$invalidate(5, style = `width:calc(${chunk.days * 100}% + ${chunk.days - 1}px);`);\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(5, style = `width:calc(${chunk.days * 100}% + ${(chunk.days - 1) * 7}px);` + `margin-top:${event._margin ?? margin}px;`);\n\t\t\t\t}\n\n\t\t\t\tif (bgColor) {\n\t\t\t\t\t$$invalidate(5, style += `background-color:${bgColor};`);\n\t\t\t\t}\n\n\t\t\t\tif (txtColor) {\n\t\t\t\t\t$$invalidate(5, style += `color:${txtColor};`);\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(5, style += event.styles.join(';'));\n\n\t\t\t\t$$invalidate(4, classes = [\n\t\t\t\t\tbgEvent(display) ? $theme.bgEvent : $theme.event,\n\t\t\t\t\t...$_iClasses([], event),\n\t\t\t\t\t...createEventClasses($eventClassNames, event, $_view)\n\t\t\t\t].join(' '));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*chunk, $theme*/ 1073741828 | $$self.$$.dirty[1] & /*$displayEventEnd, $eventContent, $_intlEventTime, $_view*/ 240) {\n\t\t\t// Content\n\t\t\t$$invalidate(6, [timeText, content] = createEventContent(chunk, $displayEventEnd, $eventContent, $theme, $_intlEventTime, $_view), content);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*display*/ 2 | $$self.$$.dirty[1] & /*$eventClick*/ 8) {\n\t\t\t// Onclick handler\n\t\t\t$$invalidate(7, onclick = createHandler($eventClick, display));\n\t\t}\n\t};\n\n\treturn [\n\t\tevent,\n\t\tdisplay,\n\t\t$theme,\n\t\tel,\n\t\tclasses,\n\t\tstyle,\n\t\tcontent,\n\t\tonclick,\n\t\t$eventMouseEnter,\n\t\t$eventMouseLeave,\n\t\t$_interaction,\n\t\tdisplayEventEnd,\n\t\teventAllUpdated,\n\t\teventBackgroundColor,\n\t\teventTextColor,\n\t\teventClick,\n\t\teventColor,\n\t\teventContent,\n\t\teventClassNames,\n\t\teventDidMount,\n\t\teventMouseEnter,\n\t\teventMouseLeave,\n\t\tresources,\n\t\ttheme,\n\t\t_view,\n\t\t_intlEventTime,\n\t\t_interaction,\n\t\t_iClasses,\n\t\tcreateHandler,\n\t\tcreateDragHandler,\n\t\tchunk,\n\t\tlongChunks,\n\t\treposition,\n\t\tmargin,\n\t\t$eventClick,\n\t\t$_view,\n\t\t$_intlEventTime,\n\t\t$eventContent,\n\t\t$displayEventEnd,\n\t\t$eventClassNames,\n\t\t$_iClasses,\n\t\t$eventTextColor,\n\t\t$resources,\n\t\t$eventColor,\n\t\t$eventBackgroundColor,\n\t\tarticle_binding\n\t];\n}\n\nclass Event extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance$3,\n\t\t\tcreate_fragment$3,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tchunk: 30,\n\t\t\t\tlongChunks: 31,\n\t\t\t\treposition: 32\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1]\n\t\t);\n\t}\n\n\tget reposition() {\n\t\treturn this.$$.ctx[32];\n\t}\n}\n\n/* packages/time-grid/src/all-day/Day.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[26] = list[i];\n\tchild_ctx[27] = list;\n\tchild_ctx[28] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_1$1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[26] = list[i];\n\treturn child_ctx;\n}\n\n// (52:8) {#if !disabled}\nfunction create_if_block_2(ctx) {\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value_1 = ensure_array_like(/*dayBgChunks*/ ctx[6]);\n\tconst get_key = ctx => /*chunk*/ ctx[26].event;\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\tlet child_ctx = get_each_context_1$1(ctx, each_value_1, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block_1$1(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*dayBgChunks*/ 64) {\n\t\t\t\teach_value_1 = ensure_array_like(/*dayBgChunks*/ ctx[6]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_1, each_1_lookup, each_1_anchor.parentNode, outro_and_destroy_block, create_each_block_1$1, each_1_anchor, get_each_context_1$1);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d(detaching);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (53:12) {#each dayBgChunks as chunk (chunk.event)}\nfunction create_each_block_1$1(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet current;\n\tevent = new Event({ props: { chunk: /*chunk*/ ctx[26] } });\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty & /*dayBgChunks*/ 64) event_changes.chunk = /*chunk*/ ctx[26];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (59:4) {#if iChunks[0] && datesEqual(iChunks[0].date, date) && !disabled}\nfunction create_if_block_1(ctx) {\n\tlet div;\n\tlet event;\n\tlet div_class_value;\n\tlet current;\n\tevent = new Event({ props: { chunk: /*iChunks*/ ctx[2][0] } });\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[10].events + \" \" + /*$theme*/ ctx[10].preview));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(event, div, null);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty & /*iChunks*/ 4) event_changes.chunk = /*iChunks*/ ctx[2][0];\n\t\t\tevent.$set(event_changes);\n\n\t\t\tif (!current || dirty & /*$theme*/ 1024 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[10].events + \" \" + /*$theme*/ ctx[10].preview))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_component(event);\n\t\t}\n\t};\n}\n\n// (65:8) {#if !disabled}\nfunction create_if_block$1(ctx) {\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map();\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value = ensure_array_like(/*dayChunks*/ ctx[5]);\n\tconst get_key = ctx => /*chunk*/ ctx[26].event;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context$2(ctx, each_value, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block$2(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*dayChunks, longChunks, refs*/ 546) {\n\t\t\t\teach_value = ensure_array_like(/*dayChunks*/ ctx[5]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value, each_1_lookup, each_1_anchor.parentNode, outro_and_destroy_block, create_each_block$2, each_1_anchor, get_each_context$2);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d(detaching);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (66:12) {#each dayChunks as chunk, i (chunk.event)}\nfunction create_each_block$2(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet i = /*i*/ ctx[28];\n\tlet current;\n\tconst assign_event = () => /*event_binding*/ ctx[24](event, i);\n\tconst unassign_event = () => /*event_binding*/ ctx[24](null, i);\n\n\tlet event_props = {\n\t\tchunk: /*chunk*/ ctx[26],\n\t\tlongChunks: /*longChunks*/ ctx[1]\n\t};\n\n\tevent = new Event({ props: event_props });\n\tassign_event();\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (i !== /*i*/ ctx[28]) {\n\t\t\t\tunassign_event();\n\t\t\t\ti = /*i*/ ctx[28];\n\t\t\t\tassign_event();\n\t\t\t}\n\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty & /*dayChunks*/ 32) event_changes.chunk = /*chunk*/ ctx[26];\n\t\t\tif (dirty & /*longChunks*/ 2) event_changes.longChunks = /*longChunks*/ ctx[1];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tunassign_event();\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$2(ctx) {\n\tlet div2;\n\tlet div0;\n\tlet div0_class_value;\n\tlet t0;\n\tlet show_if = /*iChunks*/ ctx[2][0] && datesEqual(/*iChunks*/ ctx[2][0].date, /*date*/ ctx[0]) && !/*disabled*/ ctx[4];\n\tlet t1;\n\tlet div1;\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet if_block0 = !/*disabled*/ ctx[4] && create_if_block_2(ctx);\n\tlet if_block1 = show_if && create_if_block_1(ctx);\n\tlet if_block2 = !/*disabled*/ ctx[4] && create_if_block$1(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tif (if_block0) if_block0.c();\n\t\t\tt0 = space();\n\t\t\tif (if_block1) if_block1.c();\n\t\t\tt1 = space();\n\t\t\tdiv1 = element(\"div\");\n\t\t\tif (if_block2) if_block2.c();\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[10].bgEvents);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[10].events);\n\n\t\t\tattr(div2, \"class\", div2_class_value = \"\" + (/*$theme*/ ctx[10].day + \" \" + /*$theme*/ ctx[10].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[7] ? ' ' + /*$theme*/ ctx[10].today : '') + (/*highlight*/ ctx[8]\n\t\t\t? ' ' + /*$theme*/ ctx[10].highlight\n\t\t\t: '') + (/*disabled*/ ctx[4]\n\t\t\t? ' ' + /*$theme*/ ctx[10].disabled\n\t\t\t: '')));\n\n\t\t\tattr(div2, \"role\", \"cell\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div0);\n\t\t\tif (if_block0) if_block0.m(div0, null);\n\t\t\tappend(div2, t0);\n\t\t\tif (if_block1) if_block1.m(div2, null);\n\t\t\tappend(div2, t1);\n\t\t\tappend(div2, div1);\n\t\t\tif (if_block2) if_block2.m(div1, null);\n\t\t\t/*div2_binding*/ ctx[25](div2);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(div2, \"pointerdown\", function () {\n\t\t\t\t\tif (is_function(!/*disabled*/ ctx[4]\n\t\t\t\t\t? /*$_interaction*/ ctx[11].action?.select\n\t\t\t\t\t: undefined)) (!/*disabled*/ ctx[4]\n\t\t\t\t\t? /*$_interaction*/ ctx[11].action?.select\n\t\t\t\t\t: undefined).apply(this, arguments);\n\t\t\t\t});\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, [dirty]) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (!/*disabled*/ ctx[4]) {\n\t\t\t\tif (if_block0) {\n\t\t\t\t\tif_block0.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty & /*disabled*/ 16) {\n\t\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block0 = create_if_block_2(ctx);\n\t\t\t\t\tif_block0.c();\n\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\tif_block0.m(div0, null);\n\t\t\t\t}\n\t\t\t} else if (if_block0) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block0, 1, 1, () => {\n\t\t\t\t\tif_block0 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 1024 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[10].bgEvents)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*iChunks, date, disabled*/ 21) show_if = /*iChunks*/ ctx[2][0] && datesEqual(/*iChunks*/ ctx[2][0].date, /*date*/ ctx[0]) && !/*disabled*/ ctx[4];\n\n\t\t\tif (show_if) {\n\t\t\t\tif (if_block1) {\n\t\t\t\t\tif_block1.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty & /*iChunks, date, disabled*/ 21) {\n\t\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block1 = create_if_block_1(ctx);\n\t\t\t\t\tif_block1.c();\n\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\tif_block1.m(div2, t1);\n\t\t\t\t}\n\t\t\t} else if (if_block1) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block1, 1, 1, () => {\n\t\t\t\t\tif_block1 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!/*disabled*/ ctx[4]) {\n\t\t\t\tif (if_block2) {\n\t\t\t\t\tif_block2.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty & /*disabled*/ 16) {\n\t\t\t\t\t\ttransition_in(if_block2, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block2 = create_if_block$1(ctx);\n\t\t\t\t\tif_block2.c();\n\t\t\t\t\ttransition_in(if_block2, 1);\n\t\t\t\t\tif_block2.m(div1, null);\n\t\t\t\t}\n\t\t\t} else if (if_block2) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block2, 1, 1, () => {\n\t\t\t\t\tif_block2 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 1024 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[10].events)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme, date, isToday, highlight, disabled*/ 1425 && div2_class_value !== (div2_class_value = \"\" + (/*$theme*/ ctx[10].day + \" \" + /*$theme*/ ctx[10].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[7] ? ' ' + /*$theme*/ ctx[10].today : '') + (/*highlight*/ ctx[8]\n\t\t\t? ' ' + /*$theme*/ ctx[10].highlight\n\t\t\t: '') + (/*disabled*/ ctx[4]\n\t\t\t? ' ' + /*$theme*/ ctx[10].disabled\n\t\t\t: '')))) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block0);\n\t\t\ttransition_in(if_block1);\n\t\t\ttransition_in(if_block2);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block0);\n\t\t\ttransition_out(if_block1);\n\t\t\ttransition_out(if_block2);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tif (if_block0) if_block0.d();\n\t\t\tif (if_block1) if_block1.d();\n\t\t\tif (if_block2) if_block2.d();\n\t\t\t/*div2_binding*/ ctx[25](null);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$2($$self, $$props, $$invalidate) {\n\tlet $validRange;\n\tlet $highlightedDates;\n\tlet $_today;\n\tlet $theme;\n\tlet $_interaction;\n\tlet { date } = $$props;\n\tlet { chunks } = $$props;\n\tlet { bgChunks } = $$props;\n\tlet { longChunks } = $$props;\n\tlet { iChunks = [] } = $$props;\n\tlet { resource = undefined } = $$props;\n\tlet { highlightedDates, theme, validRange, _interaction, _today } = getContext('state');\n\tcomponent_subscribe($$self, highlightedDates, value => $$invalidate(22, $highlightedDates = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(10, $theme = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(21, $validRange = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(11, $_interaction = value));\n\tcomponent_subscribe($$self, _today, value => $$invalidate(23, $_today = value));\n\tlet el;\n\tlet dayChunks, dayBgChunks;\n\tlet isToday, highlight, disabled;\n\tlet refs = [];\n\n\tfunction reposition() {\n\t\tif (!disabled) {\n\t\t\trunReposition(refs, dayChunks);\n\t\t}\n\t}\n\n\tfunction event_binding($$value, i) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trefs[i] = $$value;\n\t\t\t$$invalidate(9, refs);\n\t\t});\n\t}\n\n\tfunction div2_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(3, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('date' in $$props) $$invalidate(0, date = $$props.date);\n\t\tif ('chunks' in $$props) $$invalidate(17, chunks = $$props.chunks);\n\t\tif ('bgChunks' in $$props) $$invalidate(18, bgChunks = $$props.bgChunks);\n\t\tif ('longChunks' in $$props) $$invalidate(1, longChunks = $$props.longChunks);\n\t\tif ('iChunks' in $$props) $$invalidate(2, iChunks = $$props.iChunks);\n\t\tif ('resource' in $$props) $$invalidate(19, resource = $$props.resource);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*chunks, date*/ 131073) {\n\t\t\t$$invalidate(5, dayChunks = chunks.filter(chunk => datesEqual(chunk.date, date)));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*bgChunks, date*/ 262145) {\n\t\t\t$$invalidate(6, dayBgChunks = bgChunks.filter(bgChunk => datesEqual(bgChunk.date, date)));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*date, $_today*/ 8388609) {\n\t\t\t$$invalidate(7, isToday = datesEqual(date, $_today));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$highlightedDates, date*/ 4194305) {\n\t\t\t$$invalidate(8, highlight = $highlightedDates.some(d => datesEqual(d, date)));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*date, $validRange*/ 2097153) {\n\t\t\t$$invalidate(4, disabled = outsideRange(date, $validRange));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*el, date, resource, disabled*/ 524313) {\n\t\t\t// dateFromPoint\n\t\t\tif (el) {\n\t\t\t\tsetPayload(el, () => ({\n\t\t\t\t\tallDay: true,\n\t\t\t\t\tdate,\n\t\t\t\t\tresource,\n\t\t\t\t\tdayEl: el,\n\t\t\t\t\tdisabled\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tdate,\n\t\tlongChunks,\n\t\tiChunks,\n\t\tel,\n\t\tdisabled,\n\t\tdayChunks,\n\t\tdayBgChunks,\n\t\tisToday,\n\t\thighlight,\n\t\trefs,\n\t\t$theme,\n\t\t$_interaction,\n\t\thighlightedDates,\n\t\ttheme,\n\t\tvalidRange,\n\t\t_interaction,\n\t\t_today,\n\t\tchunks,\n\t\tbgChunks,\n\t\tresource,\n\t\treposition,\n\t\t$validRange,\n\t\t$highlightedDates,\n\t\t$_today,\n\t\tevent_binding,\n\t\tdiv2_binding\n\t];\n}\n\nclass Day extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(this, options, instance$2, create_fragment$2, safe_not_equal, {\n\t\t\tdate: 0,\n\t\t\tchunks: 17,\n\t\t\tbgChunks: 18,\n\t\t\tlongChunks: 1,\n\t\t\tiChunks: 2,\n\t\t\tresource: 19,\n\t\t\treposition: 20\n\t\t});\n\t}\n\n\tget reposition() {\n\t\treturn this.$$.ctx[20];\n\t}\n}\n\n/* packages/time-grid/src/all-day/Week.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[26] = list[i];\n\tchild_ctx[27] = list;\n\tchild_ctx[28] = i;\n\treturn child_ctx;\n}\n\n// (66:0) {#each dates as date, i}\nfunction create_each_block$1(ctx) {\n\tlet day;\n\tlet i = /*i*/ ctx[28];\n\tlet current;\n\tconst assign_day = () => /*day_binding*/ ctx[23](day, i);\n\tconst unassign_day = () => /*day_binding*/ ctx[23](null, i);\n\n\tlet day_props = {\n\t\tdate: /*date*/ ctx[26],\n\t\tchunks: /*chunks*/ ctx[2],\n\t\tbgChunks: /*bgChunks*/ ctx[3],\n\t\tlongChunks: /*longChunks*/ ctx[4],\n\t\tiChunks: /*iChunks*/ ctx[5],\n\t\tresource: /*resource*/ ctx[1]\n\t};\n\n\tday = new Day({ props: day_props });\n\tassign_day();\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(day.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(day, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (i !== /*i*/ ctx[28]) {\n\t\t\t\tunassign_day();\n\t\t\t\ti = /*i*/ ctx[28];\n\t\t\t\tassign_day();\n\t\t\t}\n\n\t\t\tconst day_changes = {};\n\t\t\tif (dirty & /*dates*/ 1) day_changes.date = /*date*/ ctx[26];\n\t\t\tif (dirty & /*chunks*/ 4) day_changes.chunks = /*chunks*/ ctx[2];\n\t\t\tif (dirty & /*bgChunks*/ 8) day_changes.bgChunks = /*bgChunks*/ ctx[3];\n\t\t\tif (dirty & /*longChunks*/ 16) day_changes.longChunks = /*longChunks*/ ctx[4];\n\t\t\tif (dirty & /*iChunks*/ 32) day_changes.iChunks = /*iChunks*/ ctx[5];\n\t\t\tif (dirty & /*resource*/ 2) day_changes.resource = /*resource*/ ctx[1];\n\t\t\tday.$set(day_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(day.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(day.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tunassign_day();\n\t\t\tdestroy_component(day, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$1(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value = ensure_array_like(/*dates*/ ctx[0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(window, \"resize\", /*reposition*/ ctx[13]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*dates, chunks, bgChunks, longChunks, iChunks, resource, refs*/ 127) {\n\t\t\t\teach_value = ensure_array_like(/*dates*/ ctx[0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$1(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$1(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$1($$self, $$props, $$invalidate) {\n\tlet $hiddenDays;\n\tlet $_iEvents;\n\tlet $_events;\n\tlet $resources;\n\tlet $filterEventsWithResources;\n\tlet $validRange;\n\tlet { dates } = $$props;\n\tlet { resource = undefined } = $$props;\n\tlet { _events, _iEvents, _queue2, hiddenDays, resources, filterEventsWithResources, validRange } = getContext('state');\n\tcomponent_subscribe($$self, _events, value => $$invalidate(19, $_events = value));\n\tcomponent_subscribe($$self, _iEvents, value => $$invalidate(18, $_iEvents = value));\n\tcomponent_subscribe($$self, hiddenDays, value => $$invalidate(17, $hiddenDays = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(20, $resources = value));\n\tcomponent_subscribe($$self, filterEventsWithResources, value => $$invalidate(21, $filterEventsWithResources = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(22, $validRange = value));\n\tlet chunks, bgChunks, longChunks, iChunks = [];\n\tlet start;\n\tlet end;\n\tlet refs = [];\n\tlet resourceFilter;\n\tlet debounceHandle = {};\n\n\tfunction reposition() {\n\t\tdebounce(() => runReposition(refs, dates), debounceHandle, _queue2);\n\t}\n\n\tfunction day_binding($$value, i) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trefs[i] = $$value;\n\t\t\t$$invalidate(6, refs);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('dates' in $$props) $$invalidate(0, dates = $$props.dates);\n\t\tif ('resource' in $$props) $$invalidate(1, resource = $$props.resource);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*dates, $validRange*/ 4194305) {\n\t\t\t{\n\t\t\t\t$$invalidate(14, start = limitToRange(dates[0], $validRange));\n\t\t\t\t$$invalidate(15, end = addDay(cloneDate(limitToRange(dates.at(-1), $validRange))));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*resource, $filterEventsWithResources, $resources*/ 3145730) {\n\t\t\t$$invalidate(16, resourceFilter = resource ?? ($filterEventsWithResources ? $resources : undefined));\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$_events, start, end, resourceFilter, bgChunks, chunks, $hiddenDays*/ 770060) {\n\t\t\t{\n\t\t\t\t$$invalidate(2, chunks = []);\n\t\t\t\t$$invalidate(3, bgChunks = []);\n\n\t\t\t\tfor (let event of $_events) {\n\t\t\t\t\tif (event.allDay && eventIntersects(event, start, end, resourceFilter)) {\n\t\t\t\t\t\tlet chunk = createEventChunk(event, start, end);\n\n\t\t\t\t\t\tif (bgEvent(event.display)) {\n\t\t\t\t\t\t\tbgChunks.push(chunk);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tprepareEventChunks(bgChunks, $hiddenDays);\n\t\t\t\t$$invalidate(4, longChunks = prepareEventChunks(chunks, $hiddenDays));\n\n\t\t\t\t// Run reposition only when events get changed\n\t\t\t\treposition();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$_iEvents, start, end, resource, $hiddenDays*/ 442370) {\n\t\t\t$$invalidate(5, iChunks = $_iEvents.map(event => {\n\t\t\t\tlet chunk;\n\n\t\t\t\tif (event && event.allDay && eventIntersects(event, start, end, resource)) {\n\t\t\t\t\tchunk = createEventChunk(event, start, end);\n\t\t\t\t\tprepareEventChunks([chunk], $hiddenDays);\n\t\t\t\t} else {\n\t\t\t\t\tchunk = null;\n\t\t\t\t}\n\n\t\t\t\treturn chunk;\n\t\t\t}));\n\t\t}\n\t};\n\n\treturn [\n\t\tdates,\n\t\tresource,\n\t\tchunks,\n\t\tbgChunks,\n\t\tlongChunks,\n\t\tiChunks,\n\t\trefs,\n\t\t_events,\n\t\t_iEvents,\n\t\thiddenDays,\n\t\tresources,\n\t\tfilterEventsWithResources,\n\t\tvalidRange,\n\t\treposition,\n\t\tstart,\n\t\tend,\n\t\tresourceFilter,\n\t\t$hiddenDays,\n\t\t$_iEvents,\n\t\t$_events,\n\t\t$resources,\n\t\t$filterEventsWithResources,\n\t\t$validRange,\n\t\tday_binding\n\t];\n}\n\nclass Week extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$1, create_fragment$1, safe_not_equal, { dates: 0, resource: 1 });\n\t}\n}\n\n/* packages/time-grid/src/View.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[10] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[10] = list[i];\n\treturn child_ctx;\n}\n\n// (14:8) {#each $_viewDates as date}\nfunction create_each_block_1(ctx) {\n\tlet div;\n\tlet time;\n\tlet time_datetime_value;\n\tlet time_aria_label_value;\n\tlet setContent_action;\n\tlet t;\n\tlet div_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\ttime = element(\"time\");\n\t\t\tt = space();\n\t\t\tattr(time, \"datetime\", time_datetime_value = toISOString(/*date*/ ctx[10], 10));\n\t\t\tattr(time, \"aria-label\", time_aria_label_value = /*$_intlDayHeaderAL*/ ctx[2].format(/*date*/ ctx[10]));\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[0].day + \" \" + /*$theme*/ ctx[0].weekdays?.[/*date*/ ctx[10].getUTCDay()]));\n\t\t\tattr(div, \"role\", \"columnheader\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, time);\n\t\t\tappend(div, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, time, /*$_intlDayHeader*/ ctx[3].format(/*date*/ ctx[10])));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty & /*$_viewDates*/ 2 && time_datetime_value !== (time_datetime_value = toISOString(/*date*/ ctx[10], 10))) {\n\t\t\t\tattr(time, \"datetime\", time_datetime_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$_intlDayHeaderAL, $_viewDates*/ 6 && time_aria_label_value !== (time_aria_label_value = /*$_intlDayHeaderAL*/ ctx[2].format(/*date*/ ctx[10]))) {\n\t\t\t\tattr(time, \"aria-label\", time_aria_label_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_intlDayHeader, $_viewDates*/ 10) setContent_action.update.call(null, /*$_intlDayHeader*/ ctx[3].format(/*date*/ ctx[10]));\n\n\t\t\tif (dirty & /*$theme, $_viewDates*/ 3 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[0].day + \" \" + /*$theme*/ ctx[0].weekdays?.[/*date*/ ctx[10].getUTCDay()]))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (13:4) <Section>\nfunction create_default_slot_2(ctx) {\n\tlet each_1_anchor;\n\tlet each_value_1 = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$theme, $_viewDates, $_intlDayHeaderAL, $_intlDayHeader*/ 15) {\n\t\t\t\teach_value_1 = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_1(ctx, each_value_1, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_1(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value_1.length;\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (26:0) {#if $allDaySlot}\nfunction create_if_block(ctx) {\n\tlet div2;\n\tlet div1;\n\tlet section;\n\tlet t;\n\tlet div0;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet current;\n\n\tsection = new Section({\n\t\t\tprops: {\n\t\t\t\t$$slots: { default: [create_default_slot_1] },\n\t\t\t\t$$scope: { ctx }\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv1 = element(\"div\");\n\t\t\tcreate_component(section.$$.fragment);\n\t\t\tt = space();\n\t\t\tdiv0 = element(\"div\");\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[0].hiddenScroll);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[0].content);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[0].allDay);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div1);\n\t\t\tmount_component(section, div1, null);\n\t\t\tappend(div1, t);\n\t\t\tappend(div1, div0);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst section_changes = {};\n\n\t\t\tif (dirty & /*$$scope, $_viewDates*/ 32770) {\n\t\t\t\tsection_changes.$$scope = { dirty, ctx };\n\t\t\t}\n\n\t\t\tsection.$set(section_changes);\n\n\t\t\tif (!current || dirty & /*$theme*/ 1 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[0].hiddenScroll)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 1 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[0].content)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 1 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[0].allDay)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(section.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(section.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tdestroy_component(section);\n\t\t}\n\t};\n}\n\n// (29:12) <Section>\nfunction create_default_slot_1(ctx) {\n\tlet week;\n\tlet current;\n\tweek = new Week({ props: { dates: /*$_viewDates*/ ctx[1] } });\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(week.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(week, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst week_changes = {};\n\t\t\tif (dirty & /*$_viewDates*/ 2) week_changes.dates = /*$_viewDates*/ ctx[1];\n\t\t\tweek.$set(week_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(week.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(week.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(week, detaching);\n\t\t}\n\t};\n}\n\n// (37:0) {#each $_viewDates as date}\nfunction create_each_block(ctx) {\n\tlet day;\n\tlet current;\n\tday = new Day$1({ props: { date: /*date*/ ctx[10] } });\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(day.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(day, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst day_changes = {};\n\t\t\tif (dirty & /*$_viewDates*/ 2) day_changes.date = /*date*/ ctx[10];\n\t\t\tday.$set(day_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(day.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(day.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(day, detaching);\n\t\t}\n\t};\n}\n\n// (36:0) <Body>\nfunction create_default_slot(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$_viewDates*/ 2) {\n\t\t\t\teach_value = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment(ctx) {\n\tlet div1;\n\tlet section;\n\tlet t0;\n\tlet div0;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet t1;\n\tlet t2;\n\tlet body;\n\tlet current;\n\n\tsection = new Section({\n\t\t\tprops: {\n\t\t\t\t$$slots: { default: [create_default_slot_2] },\n\t\t\t\t$$scope: { ctx }\n\t\t\t}\n\t\t});\n\n\tlet if_block = /*$allDaySlot*/ ctx[4] && create_if_block(ctx);\n\n\tbody = new Body({\n\t\t\tprops: {\n\t\t\t\t$$slots: { default: [create_default_slot] },\n\t\t\t\t$$scope: { ctx }\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tcreate_component(section.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt1 = space();\n\t\t\tif (if_block) if_block.c();\n\t\t\tt2 = space();\n\t\t\tcreate_component(body.$$.fragment);\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[0].hiddenScroll);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[0].header);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tmount_component(section, div1, null);\n\t\t\tappend(div1, t0);\n\t\t\tappend(div1, div0);\n\t\t\tinsert(target, t1, anchor);\n\t\t\tif (if_block) if_block.m(target, anchor);\n\t\t\tinsert(target, t2, anchor);\n\t\t\tmount_component(body, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tconst section_changes = {};\n\n\t\t\tif (dirty & /*$$scope, $_viewDates, $theme, $_intlDayHeaderAL, $_intlDayHeader*/ 32783) {\n\t\t\t\tsection_changes.$$scope = { dirty, ctx };\n\t\t\t}\n\n\t\t\tsection.$set(section_changes);\n\n\t\t\tif (!current || dirty & /*$theme*/ 1 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[0].hiddenScroll)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 1 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[0].header)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (/*$allDaySlot*/ ctx[4]) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty & /*$allDaySlot*/ 16) {\n\t\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\tif_block.m(t2.parentNode, t2);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block, 1, 1, () => {\n\t\t\t\t\tif_block = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tconst body_changes = {};\n\n\t\t\tif (dirty & /*$$scope, $_viewDates*/ 32770) {\n\t\t\t\tbody_changes.$$scope = { dirty, ctx };\n\t\t\t}\n\n\t\t\tbody.$set(body_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(section.$$.fragment, local);\n\t\t\ttransition_in(if_block);\n\t\t\ttransition_in(body.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(section.$$.fragment, local);\n\t\t\ttransition_out(if_block);\n\t\t\ttransition_out(body.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t\tdetach(t1);\n\t\t\t\tdetach(t2);\n\t\t\t}\n\n\t\t\tdestroy_component(section);\n\t\t\tif (if_block) if_block.d(detaching);\n\t\t\tdestroy_component(body, detaching);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet $theme;\n\tlet $_viewDates;\n\tlet $_intlDayHeaderAL;\n\tlet $_intlDayHeader;\n\tlet $allDaySlot;\n\tlet { _viewDates, _intlDayHeader, _intlDayHeaderAL, allDaySlot, theme } = getContext('state');\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(1, $_viewDates = value));\n\tcomponent_subscribe($$self, _intlDayHeader, value => $$invalidate(3, $_intlDayHeader = value));\n\tcomponent_subscribe($$self, _intlDayHeaderAL, value => $$invalidate(2, $_intlDayHeaderAL = value));\n\tcomponent_subscribe($$self, allDaySlot, value => $$invalidate(4, $allDaySlot = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(0, $theme = value));\n\n\treturn [\n\t\t$theme,\n\t\t$_viewDates,\n\t\t$_intlDayHeaderAL,\n\t\t$_intlDayHeader,\n\t\t$allDaySlot,\n\t\t_viewDates,\n\t\t_intlDayHeader,\n\t\t_intlDayHeaderAL,\n\t\tallDaySlot,\n\t\ttheme\n\t];\n}\n\nclass View extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance, create_fragment, safe_not_equal, {});\n\t}\n}\n\nvar index = {\n\tcreateOptions(options) {\n\t\t// Common options\n\t\toptions.buttonText.timeGridDay = 'day';\n\t\toptions.buttonText.timeGridWeek = 'week';\n\t\toptions.view = 'timeGridWeek';\n\t\toptions.views.timeGridDay = {\n\t\t\tbuttonText: btnTextDay,\n\t\t\tcomponent: View,\n\t\t\tdayHeaderFormat: {weekday: 'long'},\n\t\t\tduration: {days: 1},\n\t\t\ttheme: themeView('ec-time-grid ec-day-view'),\n\t\t\ttitleFormat: {year: 'numeric', month: 'long', day: 'numeric'}\n\t\t};\n\t\toptions.views.timeGridWeek = {\n\t\t\tbuttonText: btnTextWeek,\n\t\t\tcomponent: View,\n\t\t\tduration: {weeks: 1},\n\t\t\ttheme: themeView('ec-time-grid ec-week-view')\n\t\t};\n\t},\n\n\tcreateStores(state) {\n\t\tstate._slotTimeLimits = slotTimeLimits(state);  // flexible limits\n\t\tstate._times = times(state);\n\t}\n};\n\nexport { Body, Day$1 as Day, Section, Week, index as default };\n","import { setContent, isFunction, toLocalDate, toISOString, btnTextDay, themeView, btnTextWeek, viewResources } from '@event-calendar/core';\nimport TimeGrid, { Section, Body, Week, Day } from '@event-calendar/time-grid';\nimport { SvelteComponent, init, safe_not_equal, element, attr, insert, action_destroyer, is_function, noop, detach, component_subscribe, binding_callbacks, create_component, space, mount_component, append, transition_in, group_outros, transition_out, check_outros, destroy_component, ensure_array_like, empty, destroy_each } from 'svelte/internal';\nimport { getContext, createEventDispatcher, onMount, afterUpdate } from 'svelte';\n\n/* packages/resource-time-grid/src/Label.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$1(ctx) {\n\tlet span;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tspan = element(\"span\");\n\t\t\tattr(span, \"aria-label\", /*ariaLabel*/ ctx[2]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, span, anchor);\n\t\t\t/*span_binding*/ ctx[9](span);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, span, /*content*/ ctx[1]));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*ariaLabel*/ 4) {\n\t\t\t\tattr(span, \"aria-label\", /*ariaLabel*/ ctx[2]);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*content*/ 2) setContent_action.update.call(null, /*content*/ ctx[1]);\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(span);\n\t\t\t}\n\n\t\t\t/*span_binding*/ ctx[9](null);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$1($$self, $$props, $$invalidate) {\n\tlet $_intlDayHeaderAL;\n\tlet $resourceLabelDidMount;\n\tlet $resourceLabelContent;\n\tlet { resource } = $$props;\n\tlet { date = undefined } = $$props;\n\tlet { resourceLabelContent, resourceLabelDidMount, _intlDayHeaderAL } = getContext('state');\n\tcomponent_subscribe($$self, resourceLabelContent, value => $$invalidate(8, $resourceLabelContent = value));\n\tcomponent_subscribe($$self, resourceLabelDidMount, value => $$invalidate(11, $resourceLabelDidMount = value));\n\tcomponent_subscribe($$self, _intlDayHeaderAL, value => $$invalidate(10, $_intlDayHeaderAL = value));\n\tconst dispatch = createEventDispatcher();\n\tlet el;\n\tlet content;\n\tlet ariaLabel;\n\n\tonMount(() => {\n\t\tif (isFunction($resourceLabelDidMount)) {\n\t\t\t$resourceLabelDidMount({\n\t\t\t\tresource,\n\t\t\t\tdate: date ? toLocalDate(date) : undefined,\n\t\t\t\tel\n\t\t\t});\n\t\t}\n\t});\n\n\tafterUpdate(() => {\n\t\tif (date) {\n\t\t\t$$invalidate(2, ariaLabel = $_intlDayHeaderAL.format(date) + ', ' + el.innerText);\n\t\t} else {\n\t\t\t$$invalidate(2, ariaLabel = undefined);\n\t\t\tdispatch('text', el.innerText);\n\t\t}\n\t});\n\n\tfunction span_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(0, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('resource' in $$props) $$invalidate(6, resource = $$props.resource);\n\t\tif ('date' in $$props) $$invalidate(7, date = $$props.date);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$resourceLabelContent, resource, date*/ 448) {\n\t\t\t// Content\n\t\t\tif ($resourceLabelContent) {\n\t\t\t\t$$invalidate(1, content = isFunction($resourceLabelContent)\n\t\t\t\t? $resourceLabelContent({\n\t\t\t\t\t\tresource,\n\t\t\t\t\t\tdate: date ? toLocalDate(date) : undefined\n\t\t\t\t\t})\n\t\t\t\t: $resourceLabelContent);\n\t\t\t} else {\n\t\t\t\t$$invalidate(1, content = resource.title);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tel,\n\t\tcontent,\n\t\tariaLabel,\n\t\tresourceLabelContent,\n\t\tresourceLabelDidMount,\n\t\t_intlDayHeaderAL,\n\t\tresource,\n\t\tdate,\n\t\t$resourceLabelContent,\n\t\tspan_binding\n\t];\n}\n\nclass Label extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$1, create_fragment$1, safe_not_equal, { resource: 6, date: 7 });\n\t}\n}\n\n/* packages/resource-time-grid/src/View.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[17] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[20] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_4(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[26] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[23] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_3(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[26] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_5(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[17] = list[i];\n\tchild_ctx[32] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_6(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[20] = list[i];\n\treturn child_ctx;\n}\n\n// (27:16) {:else}\nfunction create_else_block_2(ctx) {\n\tlet div;\n\tlet label;\n\tlet div_class_value;\n\tlet current;\n\n\tfunction text_handler(...args) {\n\t\treturn /*text_handler*/ ctx[16](/*i*/ ctx[32], ...args);\n\t}\n\n\tlabel = new Label({ props: { resource: /*item0*/ ctx[17] } });\n\tlabel.$on(\"text\", text_handler);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(label.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[5].day);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(label, div, null);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst label_changes = {};\n\t\t\tif (dirty[0] & /*loops*/ 8) label_changes.resource = /*item0*/ ctx[17];\n\t\t\tlabel.$set(label_changes);\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div_class_value !== (div_class_value = /*$theme*/ ctx[5].day)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(label.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(label.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_component(label);\n\t\t}\n\t};\n}\n\n// (19:16) {#if $datesAboveResources}\nfunction create_if_block_4(ctx) {\n\tlet div;\n\tlet time;\n\tlet time_datetime_value;\n\tlet time_aria_label_value;\n\tlet setContent_action;\n\tlet div_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\ttime = element(\"time\");\n\t\t\tattr(time, \"datetime\", time_datetime_value = toISOString(/*item0*/ ctx[17], 10));\n\t\t\tattr(time, \"aria-label\", time_aria_label_value = /*$_intlDayHeaderAL*/ ctx[6].format(/*item0*/ ctx[17]));\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[5].day + \" \" + /*$theme*/ ctx[5].weekdays?.[/*item0*/ ctx[17].getUTCDay()]));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, time);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, time, /*$_intlDayHeader*/ ctx[7].format(/*item0*/ ctx[17])));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*loops*/ 8 && time_datetime_value !== (time_datetime_value = toISOString(/*item0*/ ctx[17], 10))) {\n\t\t\t\tattr(time, \"datetime\", time_datetime_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$_intlDayHeaderAL, loops*/ 72 && time_aria_label_value !== (time_aria_label_value = /*$_intlDayHeaderAL*/ ctx[6].format(/*item0*/ ctx[17]))) {\n\t\t\t\tattr(time, \"aria-label\", time_aria_label_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*$_intlDayHeader, loops*/ 136) setContent_action.update.call(null, /*$_intlDayHeader*/ ctx[7].format(/*item0*/ ctx[17]));\n\n\t\t\tif (dirty[0] & /*$theme, loops*/ 40 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[5].day + \" \" + /*$theme*/ ctx[5].weekdays?.[/*item0*/ ctx[17].getUTCDay()]))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (32:16) {#if loops[1].length > 1}\nfunction create_if_block_2(ctx) {\n\tlet div;\n\tlet div_class_value;\n\tlet current;\n\tlet each_value_6 = ensure_array_like(/*loops*/ ctx[3][1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_6.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_6(get_each_context_6(ctx, each_value_6, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[5].days);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, loops, $datesAboveResources, resourceLabels, $_intlDayHeaderAL, $_intlDayHeader*/ 252) {\n\t\t\t\teach_value_6 = ensure_array_like(/*loops*/ ctx[3][1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_6.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_6(ctx, each_value_6, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_6(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value_6.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div_class_value !== (div_class_value = /*$theme*/ ctx[5].days)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_6.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (39:28) {:else}\nfunction create_else_block_1(ctx) {\n\tlet div;\n\tlet time;\n\tlet time_datetime_value;\n\tlet time_aria_label_value;\n\tlet setContent_action;\n\tlet t;\n\tlet div_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\ttime = element(\"time\");\n\t\t\tt = space();\n\t\t\tattr(time, \"datetime\", time_datetime_value = toISOString(/*item1*/ ctx[20], 10));\n\t\t\tattr(time, \"aria-label\", time_aria_label_value = \"\" + (/*resourceLabels*/ ctx[4][/*i*/ ctx[32]] + /*$_intlDayHeaderAL*/ ctx[6].format(/*item1*/ ctx[20])));\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[5].day + \" \" + /*$theme*/ ctx[5].weekdays?.[/*item1*/ ctx[20].getUTCDay()]));\n\t\t\tattr(div, \"role\", \"columnheader\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, time);\n\t\t\tappend(div, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, time, /*$_intlDayHeader*/ ctx[7].format(/*item1*/ ctx[20])));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*loops*/ 8 && time_datetime_value !== (time_datetime_value = toISOString(/*item1*/ ctx[20], 10))) {\n\t\t\t\tattr(time, \"datetime\", time_datetime_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*resourceLabels, $_intlDayHeaderAL, loops*/ 88 && time_aria_label_value !== (time_aria_label_value = \"\" + (/*resourceLabels*/ ctx[4][/*i*/ ctx[32]] + /*$_intlDayHeaderAL*/ ctx[6].format(/*item1*/ ctx[20])))) {\n\t\t\t\tattr(time, \"aria-label\", time_aria_label_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*$_intlDayHeader, loops*/ 136) setContent_action.update.call(null, /*$_intlDayHeader*/ ctx[7].format(/*item1*/ ctx[20]));\n\n\t\t\tif (dirty[0] & /*$theme, loops*/ 40 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[5].day + \" \" + /*$theme*/ ctx[5].weekdays?.[/*item1*/ ctx[20].getUTCDay()]))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (35:28) {#if $datesAboveResources}\nfunction create_if_block_3(ctx) {\n\tlet div;\n\tlet label;\n\tlet t;\n\tlet div_class_value;\n\tlet current;\n\n\tlabel = new Label({\n\t\t\tprops: {\n\t\t\t\tresource: /*item1*/ ctx[20],\n\t\t\t\tdate: /*item0*/ ctx[17]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(label.$$.fragment);\n\t\t\tt = space();\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[5].day);\n\t\t\tattr(div, \"role\", \"columnheader\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(label, div, null);\n\t\t\tappend(div, t);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst label_changes = {};\n\t\t\tif (dirty[0] & /*loops*/ 8) label_changes.resource = /*item1*/ ctx[20];\n\t\t\tif (dirty[0] & /*loops*/ 8) label_changes.date = /*item0*/ ctx[17];\n\t\t\tlabel.$set(label_changes);\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div_class_value !== (div_class_value = /*$theme*/ ctx[5].day)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(label.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(label.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_component(label);\n\t\t}\n\t};\n}\n\n// (34:24) {#each loops[1] as item1}\nfunction create_each_block_6(ctx) {\n\tlet current_block_type_index;\n\tlet if_block;\n\tlet if_block_anchor;\n\tlet current;\n\tconst if_block_creators = [create_if_block_3, create_else_block_1];\n\tconst if_blocks = [];\n\n\tfunction select_block_type_1(ctx, dirty) {\n\t\tif (/*$datesAboveResources*/ ctx[2]) return 0;\n\t\treturn 1;\n\t}\n\n\tcurrent_block_type_index = select_block_type_1(ctx);\n\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif_blocks[current_block_type_index].m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tlet previous_block_index = current_block_type_index;\n\t\t\tcurrent_block_type_index = select_block_type_1(ctx);\n\n\t\t\tif (current_block_type_index === previous_block_index) {\n\t\t\t\tif_blocks[current_block_type_index].p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_blocks[previous_block_index], 1, 1, () => {\n\t\t\t\t\tif_blocks[previous_block_index] = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t\tif_block = if_blocks[current_block_type_index];\n\n\t\t\t\tif (!if_block) {\n\t\t\t\t\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t} else {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t\t}\n\n\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\tif_blocks[current_block_type_index].d(detaching);\n\t\t}\n\t};\n}\n\n// (17:8) {#each loops[0] as item0, i}\nfunction create_each_block_5(ctx) {\n\tlet div;\n\tlet current_block_type_index;\n\tlet if_block0;\n\tlet t0;\n\tlet t1;\n\tlet div_class_value;\n\tlet current;\n\tconst if_block_creators = [create_if_block_4, create_else_block_2];\n\tconst if_blocks = [];\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*$datesAboveResources*/ ctx[2]) return 0;\n\t\treturn 1;\n\t}\n\n\tcurrent_block_type_index = select_block_type(ctx);\n\tif_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\tlet if_block1 = /*loops*/ ctx[3][1].length > 1 && create_if_block_2(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tif_block0.c();\n\t\t\tt0 = space();\n\t\t\tif (if_block1) if_block1.c();\n\t\t\tt1 = space();\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[5].resource);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tif_blocks[current_block_type_index].m(div, null);\n\t\t\tappend(div, t0);\n\t\t\tif (if_block1) if_block1.m(div, null);\n\t\t\tappend(div, t1);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tlet previous_block_index = current_block_type_index;\n\t\t\tcurrent_block_type_index = select_block_type(ctx);\n\n\t\t\tif (current_block_type_index === previous_block_index) {\n\t\t\t\tif_blocks[current_block_type_index].p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_blocks[previous_block_index], 1, 1, () => {\n\t\t\t\t\tif_blocks[previous_block_index] = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t\tif_block0 = if_blocks[current_block_type_index];\n\n\t\t\t\tif (!if_block0) {\n\t\t\t\t\tif_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\t\t\t\t\tif_block0.c();\n\t\t\t\t} else {\n\t\t\t\t\tif_block0.p(ctx, dirty);\n\t\t\t\t}\n\n\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\tif_block0.m(div, t0);\n\t\t\t}\n\n\t\t\tif (/*loops*/ ctx[3][1].length > 1) {\n\t\t\t\tif (if_block1) {\n\t\t\t\t\tif_block1.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*loops*/ 8) {\n\t\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block1 = create_if_block_2(ctx);\n\t\t\t\t\tif_block1.c();\n\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\tif_block1.m(div, t1);\n\t\t\t\t}\n\t\t\t} else if (if_block1) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block1, 1, 1, () => {\n\t\t\t\t\tif_block1 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div_class_value !== (div_class_value = /*$theme*/ ctx[5].resource)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block0);\n\t\t\ttransition_in(if_block1);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block0);\n\t\t\ttransition_out(if_block1);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tif_blocks[current_block_type_index].d();\n\t\t\tif (if_block1) if_block1.d();\n\t\t}\n\t};\n}\n\n// (16:4) <Section>\nfunction create_default_slot_2(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value_5 = ensure_array_like(/*loops*/ ctx[3][0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_5.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_5(get_each_context_5(ctx, each_value_5, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, loops, $datesAboveResources, resourceLabels, $_intlDayHeaderAL, $_intlDayHeader*/ 252) {\n\t\t\t\teach_value_5 = ensure_array_like(/*loops*/ ctx[3][0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_5.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_5(ctx, each_value_5, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_5(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value_5.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_5.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (56:0) {#if $allDaySlot}\nfunction create_if_block(ctx) {\n\tlet div2;\n\tlet div1;\n\tlet section;\n\tlet t;\n\tlet div0;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet current;\n\n\tsection = new Section({\n\t\t\tprops: {\n\t\t\t\t$$slots: { default: [create_default_slot_1] },\n\t\t\t\t$$scope: { ctx }\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv1 = element(\"div\");\n\t\t\tcreate_component(section.$$.fragment);\n\t\t\tt = space();\n\t\t\tdiv0 = element(\"div\");\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[5].hiddenScroll);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[5].content);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[5].allDay);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div1);\n\t\t\tmount_component(section, div1, null);\n\t\t\tappend(div1, t);\n\t\t\tappend(div1, div0);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst section_changes = {};\n\n\t\t\tif (dirty[0] & /*$_viewDates, $theme, $_viewResources, $datesAboveResources*/ 39 | dirty[1] & /*$$scope*/ 16) {\n\t\t\t\tsection_changes.$$scope = { dirty, ctx };\n\t\t\t}\n\n\t\t\tsection.$set(section_changes);\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[5].hiddenScroll)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[5].content)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[5].allDay)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(section.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(section.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tdestroy_component(section);\n\t\t}\n\t};\n}\n\n// (68:16) {:else}\nfunction create_else_block(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value_4 = ensure_array_like(/*$_viewResources*/ ctx[1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_4.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_4(get_each_context_4(ctx, each_value_4, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, $_viewDates, $_viewResources*/ 35) {\n\t\t\t\teach_value_4 = ensure_array_like(/*$_viewResources*/ ctx[1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_4.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_4(ctx, each_value_4, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_4(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value_4.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_4.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (60:16) {#if $datesAboveResources}\nfunction create_if_block_1(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value_2 = ensure_array_like(/*$_viewDates*/ ctx[0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_2.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_2(get_each_context_2(ctx, each_value_2, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, $_viewResources, $_viewDates*/ 35) {\n\t\t\t\teach_value_2 = ensure_array_like(/*$_viewDates*/ ctx[0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_2.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_2(ctx, each_value_2, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_2(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value_2.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_2.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (69:20) {#each $_viewResources as resource}\nfunction create_each_block_4(ctx) {\n\tlet div;\n\tlet week;\n\tlet t;\n\tlet div_class_value;\n\tlet current;\n\n\tweek = new Week({\n\t\t\tprops: {\n\t\t\t\tdates: /*$_viewDates*/ ctx[0],\n\t\t\t\tresource: /*resource*/ ctx[26]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tcreate_component(week.$$.fragment);\n\t\t\tt = space();\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[5].resource);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tmount_component(week, div, null);\n\t\t\tappend(div, t);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst week_changes = {};\n\t\t\tif (dirty[0] & /*$_viewDates*/ 1) week_changes.dates = /*$_viewDates*/ ctx[0];\n\t\t\tif (dirty[0] & /*$_viewResources*/ 2) week_changes.resource = /*resource*/ ctx[26];\n\t\t\tweek.$set(week_changes);\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div_class_value !== (div_class_value = /*$theme*/ ctx[5].resource)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(week.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(week.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_component(week);\n\t\t}\n\t};\n}\n\n// (63:28) {#each $_viewResources as resource}\nfunction create_each_block_3(ctx) {\n\tlet week;\n\tlet current;\n\n\tweek = new Week({\n\t\t\tprops: {\n\t\t\t\tdates: [/*date*/ ctx[23]],\n\t\t\t\tresource: /*resource*/ ctx[26]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(week.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(week, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst week_changes = {};\n\t\t\tif (dirty[0] & /*$_viewDates*/ 1) week_changes.dates = [/*date*/ ctx[23]];\n\t\t\tif (dirty[0] & /*$_viewResources*/ 2) week_changes.resource = /*resource*/ ctx[26];\n\t\t\tweek.$set(week_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(week.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(week.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(week, detaching);\n\t\t}\n\t};\n}\n\n// (61:20) {#each $_viewDates as date}\nfunction create_each_block_2(ctx) {\n\tlet div;\n\tlet t;\n\tlet div_class_value;\n\tlet current;\n\tlet each_value_3 = ensure_array_like(/*$_viewResources*/ ctx[1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_3.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_3(get_each_context_3(ctx, each_value_3, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt = space();\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[5].resource);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tappend(div, t);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$_viewDates, $_viewResources*/ 3) {\n\t\t\t\teach_value_3 = ensure_array_like(/*$_viewResources*/ ctx[1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_3.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_3(ctx, each_value_3, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_3(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div, t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value_3.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div_class_value !== (div_class_value = /*$theme*/ ctx[5].resource)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_3.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (59:12) <Section>\nfunction create_default_slot_1(ctx) {\n\tlet current_block_type_index;\n\tlet if_block;\n\tlet if_block_anchor;\n\tlet current;\n\tconst if_block_creators = [create_if_block_1, create_else_block];\n\tconst if_blocks = [];\n\n\tfunction select_block_type_2(ctx, dirty) {\n\t\tif (/*$datesAboveResources*/ ctx[2]) return 0;\n\t\treturn 1;\n\t}\n\n\tcurrent_block_type_index = select_block_type_2(ctx);\n\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif_blocks[current_block_type_index].m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tlet previous_block_index = current_block_type_index;\n\t\t\tcurrent_block_type_index = select_block_type_2(ctx);\n\n\t\t\tif (current_block_type_index === previous_block_index) {\n\t\t\t\tif_blocks[current_block_type_index].p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_blocks[previous_block_index], 1, 1, () => {\n\t\t\t\t\tif_blocks[previous_block_index] = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t\tif_block = if_blocks[current_block_type_index];\n\n\t\t\t\tif (!if_block) {\n\t\t\t\t\tif_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t} else {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t\t}\n\n\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\tif_blocks[current_block_type_index].d(detaching);\n\t\t}\n\t};\n}\n\n// (83:8) {#each loops[1] as item1}\nfunction create_each_block_1(ctx) {\n\tlet day;\n\tlet current;\n\n\tday = new Day({\n\t\t\tprops: {\n\t\t\t\tdate: /*$datesAboveResources*/ ctx[2]\n\t\t\t\t? /*item0*/ ctx[17]\n\t\t\t\t: /*item1*/ ctx[20],\n\t\t\t\tresource: /*$datesAboveResources*/ ctx[2]\n\t\t\t\t? /*item1*/ ctx[20]\n\t\t\t\t: /*item0*/ ctx[17]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(day.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(day, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst day_changes = {};\n\n\t\t\tif (dirty[0] & /*$datesAboveResources, loops*/ 12) day_changes.date = /*$datesAboveResources*/ ctx[2]\n\t\t\t? /*item0*/ ctx[17]\n\t\t\t: /*item1*/ ctx[20];\n\n\t\t\tif (dirty[0] & /*$datesAboveResources, loops*/ 12) day_changes.resource = /*$datesAboveResources*/ ctx[2]\n\t\t\t? /*item1*/ ctx[20]\n\t\t\t: /*item0*/ ctx[17];\n\n\t\t\tday.$set(day_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(day.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(day.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(day, detaching);\n\t\t}\n\t};\n}\n\n// (81:0) {#each loops[0] as item0}\nfunction create_each_block(ctx) {\n\tlet div;\n\tlet t;\n\tlet div_class_value;\n\tlet current;\n\tlet each_value_1 = ensure_array_like(/*loops*/ ctx[3][1]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt = space();\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[5].resource);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tappend(div, t);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$datesAboveResources, loops*/ 12) {\n\t\t\t\teach_value_1 = ensure_array_like(/*loops*/ ctx[3][1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_1(ctx, each_value_1, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_1(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div, t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value_1.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div_class_value !== (div_class_value = /*$theme*/ ctx[5].resource)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (80:0) <Body>\nfunction create_default_slot(ctx) {\n\tlet each_1_anchor;\n\tlet current;\n\tlet each_value = ensure_array_like(/*loops*/ ctx[3][0]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, loops, $datesAboveResources*/ 44) {\n\t\t\t\teach_value = ensure_array_like(/*loops*/ ctx[3][0]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment(ctx) {\n\tlet div1;\n\tlet section;\n\tlet t0;\n\tlet div0;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet t1;\n\tlet t2;\n\tlet body;\n\tlet current;\n\n\tsection = new Section({\n\t\t\tprops: {\n\t\t\t\t$$slots: { default: [create_default_slot_2] },\n\t\t\t\t$$scope: { ctx }\n\t\t\t}\n\t\t});\n\n\tlet if_block = /*$allDaySlot*/ ctx[8] && create_if_block(ctx);\n\n\tbody = new Body({\n\t\t\tprops: {\n\t\t\t\t$$slots: { default: [create_default_slot] },\n\t\t\t\t$$scope: { ctx }\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tcreate_component(section.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt1 = space();\n\t\t\tif (if_block) if_block.c();\n\t\t\tt2 = space();\n\t\t\tcreate_component(body.$$.fragment);\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[5].hiddenScroll);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[5].header);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tmount_component(section, div1, null);\n\t\t\tappend(div1, t0);\n\t\t\tappend(div1, div0);\n\t\t\tinsert(target, t1, anchor);\n\t\t\tif (if_block) if_block.m(target, anchor);\n\t\t\tinsert(target, t2, anchor);\n\t\t\tmount_component(body, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst section_changes = {};\n\n\t\t\tif (dirty[0] & /*loops, $theme, $datesAboveResources, resourceLabels, $_intlDayHeaderAL, $_intlDayHeader*/ 252 | dirty[1] & /*$$scope*/ 16) {\n\t\t\t\tsection_changes.$$scope = { dirty, ctx };\n\t\t\t}\n\n\t\t\tsection.$set(section_changes);\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[5].hiddenScroll)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[5].header)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (/*$allDaySlot*/ ctx[8]) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*$allDaySlot*/ 256) {\n\t\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\tif_block.m(t2.parentNode, t2);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block, 1, 1, () => {\n\t\t\t\t\tif_block = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tconst body_changes = {};\n\n\t\t\tif (dirty[0] & /*loops, $theme, $datesAboveResources*/ 44 | dirty[1] & /*$$scope*/ 16) {\n\t\t\t\tbody_changes.$$scope = { dirty, ctx };\n\t\t\t}\n\n\t\t\tbody.$set(body_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(section.$$.fragment, local);\n\t\t\ttransition_in(if_block);\n\t\t\ttransition_in(body.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(section.$$.fragment, local);\n\t\t\ttransition_out(if_block);\n\t\t\ttransition_out(body.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t\tdetach(t1);\n\t\t\t\tdetach(t2);\n\t\t\t}\n\n\t\t\tdestroy_component(section);\n\t\t\tif (if_block) if_block.d(detaching);\n\t\t\tdestroy_component(body, detaching);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet $_viewDates;\n\tlet $_viewResources;\n\tlet $datesAboveResources;\n\tlet $theme;\n\tlet $_intlDayHeaderAL;\n\tlet $_intlDayHeader;\n\tlet $allDaySlot;\n\tlet { datesAboveResources, _viewDates, _viewResources, _intlDayHeader, _intlDayHeaderAL, allDaySlot, theme } = getContext('state');\n\tcomponent_subscribe($$self, datesAboveResources, value => $$invalidate(2, $datesAboveResources = value));\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(0, $_viewDates = value));\n\tcomponent_subscribe($$self, _viewResources, value => $$invalidate(1, $_viewResources = value));\n\tcomponent_subscribe($$self, _intlDayHeader, value => $$invalidate(7, $_intlDayHeader = value));\n\tcomponent_subscribe($$self, _intlDayHeaderAL, value => $$invalidate(6, $_intlDayHeaderAL = value));\n\tcomponent_subscribe($$self, allDaySlot, value => $$invalidate(8, $allDaySlot = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(5, $theme = value));\n\tlet loops;\n\tlet resourceLabels = [];\n\tconst text_handler = (i, e) => $$invalidate(4, resourceLabels[i] = e.detail + ', ', resourceLabels);\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*$datesAboveResources, $_viewDates, $_viewResources*/ 7) {\n\t\t\t$$invalidate(3, loops = $datesAboveResources\n\t\t\t? [$_viewDates, $_viewResources]\n\t\t\t: [$_viewResources, $_viewDates]);\n\t\t}\n\t};\n\n\treturn [\n\t\t$_viewDates,\n\t\t$_viewResources,\n\t\t$datesAboveResources,\n\t\tloops,\n\t\tresourceLabels,\n\t\t$theme,\n\t\t$_intlDayHeaderAL,\n\t\t$_intlDayHeader,\n\t\t$allDaySlot,\n\t\tdatesAboveResources,\n\t\t_viewDates,\n\t\t_viewResources,\n\t\t_intlDayHeader,\n\t\t_intlDayHeaderAL,\n\t\tallDaySlot,\n\t\ttheme,\n\t\ttext_handler\n\t];\n}\n\nclass View extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance, create_fragment, safe_not_equal, {}, null, [-1, -1]);\n\t}\n}\n\nvar index = {\n    createOptions(options) {\n        options.datesAboveResources = false;\n        // Common options\n        options.buttonText.resourceTimeGridDay = 'resources';\n        options.buttonText.resourceTimeGridWeek = 'resources';\n        options.view = 'resourceTimeGridWeek';\n        options.views.resourceTimeGridDay = {\n            buttonText: btnTextDay,\n            component: View,\n            duration: {days: 1},\n            theme: themeView('ec-time-grid ec-resource-day-view')\n        };\n        options.views.resourceTimeGridWeek = {\n            buttonText: btnTextWeek,\n            component: View,\n            duration: {weeks: 1},\n            theme: themeView('ec-time-grid ec-resource-week-view')\n        };\n    },\n\n    createStores(state) {\n        if (!('_times' in state)) {\n            TimeGrid.createStores(state);\n        }\n        if (!('_viewResources' in state)) {\n            state._viewResources = viewResources(state);\n        }\n    }\n};\n\nexport { index as default };\n","import { derived, writable } from 'svelte/store';\nimport { createSlotTimeLimits, createTimes, getPayload, setContent, isFunction, toLocalDate, identity, max, toSeconds, toISOString, createDuration, sortEventChunks, addDuration, cloneDate, addDay, datesEqual, helperEvent, toEventWithLocalDates, toViewWithLocalDates, task, resourceBackgroundColor, resourceTextColor, bgEvent, createEventClasses, createEventContent, keyEnter, height, ceil, outsideRange, runReposition, setPayload, rect, floor, limitToRange, DAY_IN_SECONDS, eventIntersects, createEventChunk, debounce, btnTextDay, themeView, btnTextWeek, btnTextMonth, viewResources } from '@event-calendar/core';\nimport { SvelteComponent, init, safe_not_equal, element, insert, action_destroyer, is_function, noop, detach, component_subscribe, binding_callbacks, ensure_array_like, space, attr, destroy_each, listen, text, set_style, append, transition_in, group_outros, check_outros, transition_out, create_component, mount_component, destroy_component, empty, construct_svelte_component, run_all, update_keyed_each, outro_and_destroy_block, set_store_value } from 'svelte/internal';\nimport { getContext, onMount, afterUpdate } from 'svelte';\n\n// slotTimeLimits per day\nfunction dayTimeLimits(state) {\n    return derived(\n        [state.slotMinTime, state.slotMaxTime, state.flexibleSlotTimeLimits, state._viewDates, state._events],\n        ([$slotMinTime, $slotMaxTime, $flexibleSlotTimeLimits, $_viewDates, $_events]) => {\n            let dayTimeLimits = {};\n            for (let date of $_viewDates) {\n                dayTimeLimits[date.getTime()] = createSlotTimeLimits(\n                    $slotMinTime,\n                    $slotMaxTime,\n                    $flexibleSlotTimeLimits,\n                    [date],\n                    $_events\n                );\n            }\n\n            return dayTimeLimits;\n        }\n    );\n}\n\nfunction dayTimes(state) {\n    return derived(\n        [state._viewDates, state.slotDuration, state.slotLabelInterval, state._dayTimeLimits, state._intlSlotLabel],\n        ([$_viewDates, $slotDuration, $slotLabelInterval, $_dayTimeLimits, $_intlSlotLabel]) => {\n            let dayTimes = {};\n            for (let date of $_viewDates) {\n                let time = date.getTime();\n                dayTimes[time] = time in $_dayTimeLimits\n                    ? createTimes(date, $slotDuration, $slotLabelInterval, $_dayTimeLimits[time], $_intlSlotLabel)\n                    : [];\n            }\n\n            return dayTimes;\n        }\n    );\n}\n\nfunction nestedResources(state) {\n    return derived(state.resources, $resources => $resources.some(resource => getPayload(resource).children.length));\n}\n\n/* packages/resource-timeline/src/Label.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$8(ctx) {\n\tlet span;\n\tlet setContent_action;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tspan = element(\"span\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, span, anchor);\n\t\t\t/*span_binding*/ ctx[7](span);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, span, /*content*/ ctx[1]));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*content*/ 2) setContent_action.update.call(null, /*content*/ ctx[1]);\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(span);\n\t\t\t}\n\n\t\t\t/*span_binding*/ ctx[7](null);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$8($$self, $$props, $$invalidate) {\n\tlet $resourceLabelDidMount;\n\tlet $resourceLabelContent;\n\tlet { resource } = $$props;\n\tlet { date = undefined } = $$props;\n\tlet { resourceLabelContent, resourceLabelDidMount } = getContext('state');\n\tcomponent_subscribe($$self, resourceLabelContent, value => $$invalidate(6, $resourceLabelContent = value));\n\tcomponent_subscribe($$self, resourceLabelDidMount, value => $$invalidate(8, $resourceLabelDidMount = value));\n\tlet el;\n\tlet content;\n\n\tonMount(() => {\n\t\tif (isFunction($resourceLabelDidMount)) {\n\t\t\t$resourceLabelDidMount({\n\t\t\t\tresource,\n\t\t\t\tdate: date ? toLocalDate(date) : undefined,\n\t\t\t\tel\n\t\t\t});\n\t\t}\n\t});\n\n\tfunction span_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(0, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('resource' in $$props) $$invalidate(4, resource = $$props.resource);\n\t\tif ('date' in $$props) $$invalidate(5, date = $$props.date);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$resourceLabelContent, resource, date*/ 112) {\n\t\t\t// Content\n\t\t\tif ($resourceLabelContent) {\n\t\t\t\t$$invalidate(1, content = isFunction($resourceLabelContent)\n\t\t\t\t? $resourceLabelContent({\n\t\t\t\t\t\tresource,\n\t\t\t\t\t\tdate: date ? toLocalDate(date) : undefined\n\t\t\t\t\t})\n\t\t\t\t: $resourceLabelContent);\n\t\t\t} else {\n\t\t\t\t$$invalidate(1, content = resource.title);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tel,\n\t\tcontent,\n\t\tresourceLabelContent,\n\t\tresourceLabelDidMount,\n\t\tresource,\n\t\tdate,\n\t\t$resourceLabelContent,\n\t\tspan_binding\n\t];\n}\n\nclass Label extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$8, create_fragment$8, safe_not_equal, { resource: 4, date: 5 });\n\t}\n}\n\n/* packages/resource-timeline/src/Expander.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$5(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[7] = list[i];\n\treturn child_ctx;\n}\n\n// (30:0) {#each Array(payload.level) as level}\nfunction create_each_block$5(ctx) {\n\tlet span;\n\tlet span_class_value;\n\n\treturn {\n\t\tc() {\n\t\t\tspan = element(\"span\");\n\t\t\tattr(span, \"class\", span_class_value = /*$theme*/ ctx[1].expander);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, span, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$theme*/ 2 && span_class_value !== (span_class_value = /*$theme*/ ctx[1].expander)) {\n\t\t\t\tattr(span, \"class\", span_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(span);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (35:4) {#if payload.children.length}\nfunction create_if_block$4(ctx) {\n\tlet button;\n\tlet button_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*payload*/ ctx[0].expanded) return create_if_block_1$1;\n\t\treturn create_else_block$1;\n\t}\n\n\tlet current_block_type = select_block_type(ctx);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tif_block.c();\n\t\t\tattr(button, \"class\", button_class_value = /*$theme*/ ctx[1].button);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tif_block.m(button, null);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(button, \"click\", /*handleClick*/ ctx[3]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (current_block_type !== (current_block_type = select_block_type(ctx))) {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(button, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 2 && button_class_value !== (button_class_value = /*$theme*/ ctx[1].button)) {\n\t\t\t\tattr(button, \"class\", button_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(button);\n\t\t\t}\n\n\t\t\tif_block.d();\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (37:41) {:else}\nfunction create_else_block$1(ctx) {\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(\"+\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (37:12) {#if payload.expanded}\nfunction create_if_block_1$1(ctx) {\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(\"\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t);\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction create_fragment$7(ctx) {\n\tlet t;\n\tlet span;\n\tlet span_class_value;\n\tlet each_value = ensure_array_like(Array(/*payload*/ ctx[0].level));\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$5(get_each_context$5(ctx, each_value, i));\n\t}\n\n\tlet if_block = /*payload*/ ctx[0].children.length && create_if_block$4(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt = space();\n\t\t\tspan = element(\"span\");\n\t\t\tif (if_block) if_block.c();\n\t\t\tattr(span, \"class\", span_class_value = /*$theme*/ ctx[1].expander);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, t, anchor);\n\t\t\tinsert(target, span, anchor);\n\t\t\tif (if_block) if_block.m(span, null);\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*$theme, payload*/ 3) {\n\t\t\t\teach_value = ensure_array_like(Array(/*payload*/ ctx[0].level));\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$5(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$5(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(t.parentNode, t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value.length;\n\t\t\t}\n\n\t\t\tif (/*payload*/ ctx[0].children.length) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block$4(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(span, null);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = null;\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 2 && span_class_value !== (span_class_value = /*$theme*/ ctx[1].expander)) {\n\t\t\t\tattr(span, \"class\", span_class_value);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t);\n\t\t\t\tdetach(span);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\tif (if_block) if_block.d();\n\t\t}\n\t};\n}\n\nfunction instance$7($$self, $$props, $$invalidate) {\n\tlet $theme;\n\tlet { resource } = $$props;\n\tlet { resources, theme } = getContext('state');\n\tcomponent_subscribe($$self, theme, value => $$invalidate(1, $theme = value));\n\tlet payload = {};\n\n\tfunction handleClick() {\n\t\t$$invalidate(0, payload.expanded = !payload.expanded, payload);\n\t\ttoggle(payload.children, payload.expanded);\n\t\tresources.update(identity);\n\t}\n\n\tfunction toggle(children, expand) {\n\t\tfor (let child of children) {\n\t\t\tlet payload = getPayload(child);\n\t\t\tpayload.hidden = !expand;\n\n\t\t\tif (payload.expanded) {\n\t\t\t\ttoggle(payload.children, expand);\n\t\t\t}\n\t\t}\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('resource' in $$props) $$invalidate(4, resource = $$props.resource);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*resource*/ 16) {\n\t\t\t$$invalidate(0, payload = getPayload(resource));\n\t\t}\n\t};\n\n\treturn [payload, $theme, theme, handleClick, resource];\n}\n\nclass Expander extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$7, create_fragment$7, safe_not_equal, { resource: 4 });\n\t}\n}\n\n/* packages/resource-timeline/src/Sidebar.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$4(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[14] = list[i];\n\treturn child_ctx;\n}\n\n// (21:16) {#if $_nestedResources}\nfunction create_if_block$3(ctx) {\n\tlet expander;\n\tlet current;\n\n\texpander = new Expander({\n\t\t\tprops: { resource: /*resource*/ ctx[14] }\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(expander.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(expander, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst expander_changes = {};\n\t\t\tif (dirty & /*$_viewResources*/ 8) expander_changes.resource = /*resource*/ ctx[14];\n\t\t\texpander.$set(expander_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(expander.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(expander.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(expander, detaching);\n\t\t}\n\t};\n}\n\n// (19:8) {#each $_viewResources as resource}\nfunction create_each_block$4(ctx) {\n\tlet div;\n\tlet t0;\n\tlet label;\n\tlet t1;\n\tlet div_class_value;\n\tlet current;\n\tlet if_block = /*$_nestedResources*/ ctx[5] && create_if_block$3(ctx);\n\n\tlabel = new Label({\n\t\t\tprops: { resource: /*resource*/ ctx[14] }\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tif (if_block) if_block.c();\n\t\t\tt0 = space();\n\t\t\tcreate_component(label.$$.fragment);\n\t\t\tt1 = space();\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[1].resource);\n\t\t\tset_style(div, \"flex-basis\", max(/*$_resHs*/ ctx[4].get(/*resource*/ ctx[14]) ?? 0, 34) + \"px\");\n\t\t\tattr(div, \"role\", \"rowheader\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tif (if_block) if_block.m(div, null);\n\t\t\tappend(div, t0);\n\t\t\tmount_component(label, div, null);\n\t\t\tappend(div, t1);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (/*$_nestedResources*/ ctx[5]) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty & /*$_nestedResources*/ 32) {\n\t\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block$3(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\tif_block.m(div, t0);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block, 1, 1, () => {\n\t\t\t\t\tif_block = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tconst label_changes = {};\n\t\t\tif (dirty & /*$_viewResources*/ 8) label_changes.resource = /*resource*/ ctx[14];\n\t\t\tlabel.$set(label_changes);\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div_class_value !== (div_class_value = /*$theme*/ ctx[1].resource)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$_resHs, $_viewResources*/ 24) {\n\t\t\t\tset_style(div, \"flex-basis\", max(/*$_resHs*/ ctx[4].get(/*resource*/ ctx[14]) ?? 0, 34) + \"px\");\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\ttransition_in(label.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\ttransition_out(label.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tif (if_block) if_block.d();\n\t\t\tdestroy_component(label);\n\t\t}\n\t};\n}\n\nfunction create_fragment$6(ctx) {\n\tlet div2;\n\tlet div0;\n\tlet div0_class_value;\n\tlet t;\n\tlet div1;\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet current;\n\tlet each_value = ensure_array_like(/*$_viewResources*/ ctx[3]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt = space();\n\t\t\tdiv1 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[1].sidebarTitle);\n\t\t\tset_style(div0, \"flex-basis\", /*titleHeight*/ ctx[0] + \"px\");\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[1].content);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[1].sidebar);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div0);\n\t\t\tappend(div2, t);\n\t\t\tappend(div2, div1);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*div1_binding*/ ctx[12](div1);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[1].sidebarTitle)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*titleHeight*/ 1) {\n\t\t\t\tset_style(div0, \"flex-basis\", /*titleHeight*/ ctx[0] + \"px\");\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme, $_resHs, $_viewResources, $_nestedResources*/ 58) {\n\t\t\t\teach_value = ensure_array_like(/*$_viewResources*/ ctx[3]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$4(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$4(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[1].content)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 2 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[1].sidebar)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\t/*div1_binding*/ ctx[12](null);\n\t\t}\n\t};\n}\n\nfunction instance$6($$self, $$props, $$invalidate) {\n\tlet $_headerEl;\n\tlet $theme;\n\tlet $_sidebarEl;\n\tlet $_viewResources;\n\tlet $_resHs;\n\tlet $_nestedResources;\n\tlet { _viewResources, _headerEl, _resHs, _sidebarEl, _nestedResources, theme } = getContext('state');\n\tcomponent_subscribe($$self, _viewResources, value => $$invalidate(3, $_viewResources = value));\n\tcomponent_subscribe($$self, _headerEl, value => $$invalidate(13, $_headerEl = value));\n\tcomponent_subscribe($$self, _resHs, value => $$invalidate(4, $_resHs = value));\n\tcomponent_subscribe($$self, _sidebarEl, value => $$invalidate(2, $_sidebarEl = value));\n\tcomponent_subscribe($$self, _nestedResources, value => $$invalidate(5, $_nestedResources = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(1, $theme = value));\n\tlet titleHeight = 0;\n\n\tafterUpdate(() => {\n\t\t$$invalidate(0, titleHeight = $_headerEl.clientHeight);\n\t});\n\n\tfunction div1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\t$_sidebarEl = $$value;\n\t\t\t_sidebarEl.set($_sidebarEl);\n\t\t});\n\t}\n\n\treturn [\n\t\ttitleHeight,\n\t\t$theme,\n\t\t$_sidebarEl,\n\t\t$_viewResources,\n\t\t$_resHs,\n\t\t$_nestedResources,\n\t\t_viewResources,\n\t\t_headerEl,\n\t\t_resHs,\n\t\t_sidebarEl,\n\t\t_nestedResources,\n\t\ttheme,\n\t\tdiv1_binding\n\t];\n}\n\nclass Sidebar extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$6, create_fragment$6, safe_not_equal, {});\n\t}\n}\n\n/* packages/resource-timeline/src/Header.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$3(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[15] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_1$2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[18] = list[i];\n\treturn child_ctx;\n}\n\n// (30:16) {:else}\nfunction create_else_block(ctx) {\n\tlet div;\n\tlet time_1;\n\tlet time_1_datetime_value;\n\tlet time_1_aria_label_value;\n\tlet setContent_action;\n\tlet div_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\ttime_1 = element(\"time\");\n\t\t\tattr(time_1, \"datetime\", time_1_datetime_value = toISOString(/*date*/ ctx[15], 10));\n\t\t\tattr(time_1, \"aria-label\", time_1_aria_label_value = /*$_intlDayHeaderAL*/ ctx[4].format(/*date*/ ctx[15]));\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[0].time);\n\t\t\tattr(div, \"role\", \"columnheader\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, time_1);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, time_1, /*$_intlDayHeader*/ ctx[5].format(/*date*/ ctx[15])));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty & /*$_viewDates*/ 4 && time_1_datetime_value !== (time_1_datetime_value = toISOString(/*date*/ ctx[15], 10))) {\n\t\t\t\tattr(time_1, \"datetime\", time_1_datetime_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$_intlDayHeaderAL, $_viewDates*/ 20 && time_1_aria_label_value !== (time_1_aria_label_value = /*$_intlDayHeaderAL*/ ctx[4].format(/*date*/ ctx[15]))) {\n\t\t\t\tattr(time_1, \"aria-label\", time_1_aria_label_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_intlDayHeader, $_viewDates*/ 36) setContent_action.update.call(null, /*$_intlDayHeader*/ ctx[5].format(/*date*/ ctx[15]));\n\n\t\t\tif (dirty & /*$theme*/ 1 && div_class_value !== (div_class_value = /*$theme*/ ctx[0].time)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (12:16) {#if toSeconds($slotDuration)}\nfunction create_if_block$2(ctx) {\n\tlet div0;\n\tlet time_1;\n\tlet time_1_datetime_value;\n\tlet time_1_aria_label_value;\n\tlet setContent_action;\n\tlet div0_class_value;\n\tlet t;\n\tlet div1;\n\tlet div1_class_value;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value_1 = ensure_array_like(/*$_dayTimes*/ ctx[6][/*date*/ ctx[15].getTime()]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_1$2(get_each_context_1$2(ctx, each_value_1, i));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tdiv0 = element(\"div\");\n\t\t\ttime_1 = element(\"time\");\n\t\t\tt = space();\n\t\t\tdiv1 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(time_1, \"datetime\", time_1_datetime_value = toISOString(/*date*/ ctx[15], 10));\n\t\t\tattr(time_1, \"aria-label\", time_1_aria_label_value = /*$_intlDayHeaderAL*/ ctx[4].format(/*date*/ ctx[15]));\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[0].dayHead);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[0].times);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div0, anchor);\n\t\t\tappend(div0, time_1);\n\t\t\tinsert(target, t, anchor);\n\t\t\tinsert(target, div1, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, time_1, /*$_intlDayHeader*/ ctx[5].format(/*date*/ ctx[15])));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty & /*$_viewDates*/ 4 && time_1_datetime_value !== (time_1_datetime_value = toISOString(/*date*/ ctx[15], 10))) {\n\t\t\t\tattr(time_1, \"datetime\", time_1_datetime_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$_intlDayHeaderAL, $_viewDates*/ 20 && time_1_aria_label_value !== (time_1_aria_label_value = /*$_intlDayHeaderAL*/ ctx[4].format(/*date*/ ctx[15]))) {\n\t\t\t\tattr(time_1, \"aria-label\", time_1_aria_label_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_intlDayHeader, $_viewDates*/ 36) setContent_action.update.call(null, /*$_intlDayHeader*/ ctx[5].format(/*date*/ ctx[15]));\n\n\t\t\tif (dirty & /*$theme*/ 1 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[0].dayHead)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme, $_dayTimes, $_viewDates*/ 69) {\n\t\t\t\teach_value_1 = ensure_array_like(/*$_dayTimes*/ ctx[6][/*date*/ ctx[15].getTime()]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_1$2(ctx, each_value_1, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_1$2(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value_1.length;\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 1 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[0].times)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div0);\n\t\t\t\tdetach(t);\n\t\t\t\tdetach(div1);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (21:24) {#each $_dayTimes[date.getTime()] as time}\nfunction create_each_block_1$2(ctx) {\n\tlet div;\n\tlet time_1;\n\tlet time_1_datetime_value;\n\tlet setContent_action;\n\tlet t;\n\tlet div_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\ttime_1 = element(\"time\");\n\t\t\tt = space();\n\t\t\tattr(time_1, \"datetime\", time_1_datetime_value = /*time*/ ctx[18][0]);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[0].time);\n\t\t\tattr(div, \"role\", \"columnheader\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, time_1);\n\t\t\tappend(div, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(setContent_action = setContent.call(null, time_1, /*time*/ ctx[18][1]));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty & /*$_dayTimes, $_viewDates*/ 68 && time_1_datetime_value !== (time_1_datetime_value = /*time*/ ctx[18][0])) {\n\t\t\t\tattr(time_1, \"datetime\", time_1_datetime_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty & /*$_dayTimes, $_viewDates*/ 68) setContent_action.update.call(null, /*time*/ ctx[18][1]);\n\n\t\t\tif (dirty & /*$theme*/ 1 && div_class_value !== (div_class_value = /*$theme*/ ctx[0].time)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (10:8) {#each $_viewDates as date}\nfunction create_each_block$3(ctx) {\n\tlet div;\n\tlet show_if;\n\tlet t;\n\tlet div_class_value;\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (dirty & /*$slotDuration*/ 8) show_if = null;\n\t\tif (show_if == null) show_if = !!toSeconds(/*$slotDuration*/ ctx[3]);\n\t\tif (show_if) return create_if_block$2;\n\t\treturn create_else_block;\n\t}\n\n\tlet current_block_type = select_block_type(ctx, -1);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tif_block.c();\n\t\t\tt = space();\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[0].day + \" \" + /*$theme*/ ctx[0].weekdays?.[/*date*/ ctx[15].getUTCDay()]));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tif_block.m(div, null);\n\t\t\tappend(div, t);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (current_block_type === (current_block_type = select_block_type(ctx, dirty)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(div, t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme, $_viewDates*/ 5 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[0].day + \" \" + /*$theme*/ ctx[0].weekdays?.[/*date*/ ctx[15].getUTCDay()]))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tif_block.d();\n\t\t}\n\t};\n}\n\nfunction create_fragment$5(ctx) {\n\tlet div2;\n\tlet div0;\n\tlet div0_class_value;\n\tlet t;\n\tlet div1;\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet each_value = ensure_array_like(/*$_viewDates*/ ctx[2]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$3(get_each_context$3(ctx, each_value, i));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt = space();\n\t\t\tdiv1 = element(\"div\");\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[0].days);\n\t\t\tattr(div0, \"role\", \"row\");\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[0].hiddenScroll);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[0].header);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div0);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div0, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tappend(div2, t);\n\t\t\tappend(div2, div1);\n\t\t\t/*div2_binding*/ ctx[14](div2);\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (dirty & /*$theme, $_viewDates, $_dayTimes, $_intlDayHeaderAL, $_intlDayHeader, $slotDuration*/ 125) {\n\t\t\t\teach_value = ensure_array_like(/*$_viewDates*/ ctx[2]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$3(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$3(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(div0, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value.length;\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 1 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[0].days)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 1 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[0].hiddenScroll)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (dirty & /*$theme*/ 1 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[0].header)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\t/*div2_binding*/ ctx[14](null);\n\t\t}\n\t};\n}\n\nfunction instance$5($$self, $$props, $$invalidate) {\n\tlet $theme;\n\tlet $_headerEl;\n\tlet $_viewDates;\n\tlet $slotDuration;\n\tlet $_intlDayHeaderAL;\n\tlet $_intlDayHeader;\n\tlet $_dayTimes;\n\tlet { _headerEl, _intlDayHeader, _intlDayHeaderAL, _dayTimes, _viewDates, slotDuration, theme } = getContext('state');\n\tcomponent_subscribe($$self, _headerEl, value => $$invalidate(1, $_headerEl = value));\n\tcomponent_subscribe($$self, _intlDayHeader, value => $$invalidate(5, $_intlDayHeader = value));\n\tcomponent_subscribe($$self, _intlDayHeaderAL, value => $$invalidate(4, $_intlDayHeaderAL = value));\n\tcomponent_subscribe($$self, _dayTimes, value => $$invalidate(6, $_dayTimes = value));\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(2, $_viewDates = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(3, $slotDuration = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(0, $theme = value));\n\n\tfunction div2_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\t$_headerEl = $$value;\n\t\t\t_headerEl.set($_headerEl);\n\t\t});\n\t}\n\n\treturn [\n\t\t$theme,\n\t\t$_headerEl,\n\t\t$_viewDates,\n\t\t$slotDuration,\n\t\t$_intlDayHeaderAL,\n\t\t$_intlDayHeader,\n\t\t$_dayTimes,\n\t\t_headerEl,\n\t\t_intlDayHeader,\n\t\t_intlDayHeaderAL,\n\t\t_dayTimes,\n\t\t_viewDates,\n\t\tslotDuration,\n\t\ttheme,\n\t\tdiv2_binding\n\t];\n}\n\nclass Header extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$5, create_fragment$5, safe_not_equal, {});\n\t}\n}\n\nfunction prepareEventChunks(chunks, $_viewDates, $_dayTimeLimits, $slotDuration) {\n    let longChunks = {};\n    let filteredChunks = [];\n\n    if (chunks.length) {\n        sortEventChunks(chunks);\n\n        let step = toSeconds($slotDuration);\n        let prevChunk;\n        for (let chunk of chunks) {\n            let prevDayEnd;\n            if (step) {\n                let slots = 0;\n                for (let i = 0; i < $_viewDates.length; ++i) {\n                    let slotTimeLimits = getSlotTimeLimits($_dayTimeLimits, $_viewDates[i]);\n                    let dayStart = addDuration(cloneDate($_viewDates[i]), slotTimeLimits.min);\n                    let dayEnd = addDuration(cloneDate($_viewDates[i]), slotTimeLimits.max);\n                    if (!chunk.date) {\n                        if (chunk.start < dayEnd && chunk.end > dayStart) {\n                            // The first day is found\n                            chunk.date = $_viewDates[i];\n                            if (chunk.start < dayStart) {\n                                // Adjust chunk start\n                                chunk.start = dayStart;\n                            }\n                            // Calculate offset\n                            chunk.offset = (chunk.start - dayStart) / 1000 / step;\n                            // Calculate slots\n                            if (chunk.end > dayEnd) {\n                                slots += dayEnd - chunk.start;\n                            } else {\n                                slots += chunk.end - chunk.start || step * 1000;\n                                break;\n                            }\n                        }\n                    } else {\n                        if (chunk.end <= dayStart) {\n                            // Adjust chunk end\n                            chunk.end = prevDayEnd;\n                            break;\n                        }\n                        // The chunk is long one\n                        let key = $_viewDates[i].getTime();\n                        if (longChunks[key]) {\n                            longChunks[key].push(chunk);\n                        } else {\n                            longChunks[key] = [chunk];\n                        }\n                        // Calculate slots\n                        if (chunk.end > dayEnd) {\n                            slots += dayEnd - dayStart;\n                        } else {\n                            slots += chunk.end - dayStart;\n                            break;\n                        }\n                    }\n                    prevDayEnd = dayEnd;\n                }\n                chunk.slots = slots / 1000 / step;\n            } else {\n                // Month view\n                let days = 0;\n                for (let i = 0; i < $_viewDates.length; ++i) {\n                    let dayStart = $_viewDates[i];\n                    let dayEnd = addDay(cloneDate(dayStart));\n                    if (!chunk.date) {\n                        if (chunk.start < dayEnd) {\n                            // The first day is found\n                            chunk.date = dayStart;\n                            if (chunk.start < dayStart) {\n                                // Adjust chunk start\n                                chunk.start = dayStart;\n                            }\n                            ++days;\n                        }\n                    } else {\n                        if (chunk.end <= dayStart) {\n                            // Adjust chunk end\n                            chunk.end = prevDayEnd;\n                            break;\n                        }\n                        // The chunk is long one\n                        let key = dayStart.getTime();\n                        if (longChunks[key]) {\n                            longChunks[key].push(chunk);\n                        } else {\n                            longChunks[key] = [chunk];\n                        }\n                        ++days;\n                    }\n                    prevDayEnd = dayEnd;\n                }\n                chunk.days = days;\n            }\n\n            if (!chunk.date) {\n                // Chunk is outside the slot time limits, so skip it\n                continue;\n            }\n\n            if (prevChunk && datesEqual(prevChunk.date, chunk.date)) {\n                chunk.prev = prevChunk;\n            }\n            prevChunk = chunk;\n            filteredChunks.push(chunk);\n        }\n    }\n\n    return [filteredChunks, longChunks];\n}\n\nfunction repositionEvent(chunk, dayChunks, longChunks, height, allDay) {\n    chunk.top = 0;\n    chunk.bottom = height;\n    let margin = 1;\n    let key = chunk.date.getTime();\n    longChunks = longChunks?.[key] ?? [];\n    let chunks = [...dayChunks, ...longChunks];\n    chunks.sort((a, b) => (a.top ?? 0) - (b.top ?? 0) || a.start - b.start || b.event.allDay - a.event.allDay);\n    for (let dayChunk of chunks) {\n        if (dayChunk === chunk) {\n            continue;\n        }\n        if ((allDay || chunk.start < dayChunk.end && chunk.end > dayChunk.start) && chunk.top < dayChunk.bottom && chunk.bottom > dayChunk.top) {\n            let offset = dayChunk.bottom - chunk.top + 1;\n            margin += offset;\n            chunk.top += offset;\n            chunk.bottom += offset;\n        }\n    }\n\n    return margin;\n}\n\nfunction getSlotTimeLimits($_dayTimeLimits, date) {\n    return $_dayTimeLimits[date.getTime()] ?? {min: createDuration(0), max: createDuration(0)};\n}\n\n/* packages/resource-timeline/src/Event.svelte generated by Svelte v4.2.19 */\n\nfunction create_if_block$1(ctx) {\n\tlet article;\n\tlet switch_instance0;\n\tlet t0;\n\tlet div;\n\tlet div_class_value;\n\tlet setContent_action;\n\tlet t1;\n\tlet switch_instance1;\n\tlet article_role_value;\n\tlet article_tabindex_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tvar switch_value = /*$_interaction*/ ctx[11].resizer;\n\n\tfunction switch_props(ctx, dirty) {\n\t\treturn {\n\t\t\tprops: { start: true, event: /*event*/ ctx[0] }\n\t\t};\n\t}\n\n\tif (switch_value) {\n\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'start']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'start']).apply(this, arguments);\n\t\t});\n\t}\n\n\tvar switch_value_1 = /*$_interaction*/ ctx[11].resizer;\n\n\tfunction switch_props_1(ctx, dirty) {\n\t\treturn { props: { event: /*event*/ ctx[0] } };\n\t}\n\n\tif (switch_value_1) {\n\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'end']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'end']).apply(this, arguments);\n\t\t});\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tarticle = element(\"article\");\n\t\t\tif (switch_instance0) create_component(switch_instance0.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tdiv = element(\"div\");\n\t\t\tt1 = space();\n\t\t\tif (switch_instance1) create_component(switch_instance1.$$.fragment);\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[3].eventBody);\n\t\t\tattr(article, \"class\", /*classes*/ ctx[5]);\n\t\t\tattr(article, \"style\", /*style*/ ctx[6]);\n\t\t\tattr(article, \"role\", article_role_value = /*onclick*/ ctx[8] ? 'button' : undefined);\n\t\t\tattr(article, \"tabindex\", article_tabindex_value = /*onclick*/ ctx[8] ? 0 : undefined);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, article, anchor);\n\t\t\tif (switch_instance0) mount_component(switch_instance0, article, null);\n\t\t\tappend(article, t0);\n\t\t\tappend(article, div);\n\t\t\tappend(article, t1);\n\t\t\tif (switch_instance1) mount_component(switch_instance1, article, null);\n\t\t\t/*article_binding*/ ctx[51](article);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\taction_destroyer(setContent_action = setContent.call(null, div, /*content*/ ctx[7])),\n\t\t\t\t\tlisten(article, \"click\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[8])) /*onclick*/ ctx[8].apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"keydown\", function () {\n\t\t\t\t\t\tif (is_function(/*onclick*/ ctx[8] && keyEnter(/*onclick*/ ctx[8]))) (/*onclick*/ ctx[8] && keyEnter(/*onclick*/ ctx[8])).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseenter\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[31](/*$eventMouseEnter*/ ctx[9], /*display*/ ctx[1]))) /*createHandler*/ ctx[31](/*$eventMouseEnter*/ ctx[9], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"mouseleave\", function () {\n\t\t\t\t\t\tif (is_function(/*createHandler*/ ctx[31](/*$eventMouseLeave*/ ctx[10], /*display*/ ctx[1]))) /*createHandler*/ ctx[31](/*$eventMouseLeave*/ ctx[10], /*display*/ ctx[1]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(article, \"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(!bgEvent(/*display*/ ctx[1]) && !helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11]))) (!bgEvent(/*display*/ ctx[1]) && !helperEvent(/*display*/ ctx[1]) && /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11])).apply(this, arguments);\n\t\t\t\t\t})\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 2048 && switch_value !== (switch_value = /*$_interaction*/ ctx[11].resizer)) {\n\t\t\t\tif (switch_instance0) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance0;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value) {\n\t\t\t\t\tswitch_instance0 = construct_svelte_component(switch_value, switch_props(ctx));\n\n\t\t\t\t\tswitch_instance0.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'start']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'start']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance0.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance0.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance0, article, t0);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance0 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value) {\n\t\t\t\tconst switch_instance0_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance0_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance0.$set(switch_instance0_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 8 && div_class_value !== (div_class_value = /*$theme*/ ctx[3].eventBody)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (setContent_action && is_function(setContent_action.update) && dirty[0] & /*content*/ 128) setContent_action.update.call(null, /*content*/ ctx[7]);\n\n\t\t\tif (dirty[0] & /*$_interaction*/ 2048 && switch_value_1 !== (switch_value_1 = /*$_interaction*/ ctx[11].resizer)) {\n\t\t\t\tif (switch_instance1) {\n\t\t\t\t\tgroup_outros();\n\t\t\t\t\tconst old_component = switch_instance1;\n\n\t\t\t\t\ttransition_out(old_component.$$.fragment, 1, 0, () => {\n\t\t\t\t\t\tdestroy_component(old_component, 1);\n\t\t\t\t\t});\n\n\t\t\t\t\tcheck_outros();\n\t\t\t\t}\n\n\t\t\t\tif (switch_value_1) {\n\t\t\t\t\tswitch_instance1 = construct_svelte_component(switch_value_1, switch_props_1(ctx));\n\n\t\t\t\t\tswitch_instance1.$on(\"pointerdown\", function () {\n\t\t\t\t\t\tif (is_function(/*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'end']))) /*createDragHandler*/ ctx[32](/*$_interaction*/ ctx[11], ['x', 'end']).apply(this, arguments);\n\t\t\t\t\t});\n\n\t\t\t\t\tcreate_component(switch_instance1.$$.fragment);\n\t\t\t\t\ttransition_in(switch_instance1.$$.fragment, 1);\n\t\t\t\t\tmount_component(switch_instance1, article, null);\n\t\t\t\t} else {\n\t\t\t\t\tswitch_instance1 = null;\n\t\t\t\t}\n\t\t\t} else if (switch_value_1) {\n\t\t\t\tconst switch_instance1_changes = {};\n\t\t\t\tif (dirty[0] & /*event*/ 1) switch_instance1_changes.event = /*event*/ ctx[0];\n\t\t\t\tswitch_instance1.$set(switch_instance1_changes);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*classes*/ 32) {\n\t\t\t\tattr(article, \"class\", /*classes*/ ctx[5]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*style*/ 64) {\n\t\t\t\tattr(article, \"style\", /*style*/ ctx[6]);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 256 && article_role_value !== (article_role_value = /*onclick*/ ctx[8] ? 'button' : undefined)) {\n\t\t\t\tattr(article, \"role\", article_role_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*onclick*/ 256 && article_tabindex_value !== (article_tabindex_value = /*onclick*/ ctx[8] ? 0 : undefined)) {\n\t\t\t\tattr(article, \"tabindex\", article_tabindex_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\tif (switch_instance0) transition_in(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_in(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tif (switch_instance0) transition_out(switch_instance0.$$.fragment, local);\n\t\t\tif (switch_instance1) transition_out(switch_instance1.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(article);\n\t\t\t}\n\n\t\t\tif (switch_instance0) destroy_component(switch_instance0);\n\t\t\tif (switch_instance1) destroy_component(switch_instance1);\n\t\t\t/*article_binding*/ ctx[51](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction create_fragment$4(ctx) {\n\tlet if_block_anchor;\n\tlet current;\n\tlet if_block = /*width*/ ctx[2] > 0 && create_if_block$1(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif (if_block) if_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (if_block) if_block.m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (/*width*/ ctx[2] > 0) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*width*/ 4) {\n\t\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block$1(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block, 1, 1, () => {\n\t\t\t\t\tif_block = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\tif (if_block) if_block.d(detaching);\n\t\t}\n\t};\n}\n\nfunction instance$4($$self, $$props, $$invalidate) {\n\tlet $slotDuration;\n\tlet $eventClick;\n\tlet $_view;\n\tlet $eventAllUpdated;\n\tlet $eventDidMount;\n\tlet $_intlEventTime;\n\tlet $theme;\n\tlet $eventContent;\n\tlet $displayEventEnd;\n\tlet $eventClassNames;\n\tlet $_iClasses;\n\tlet $eventTextColor;\n\tlet $resources;\n\tlet $eventColor;\n\tlet $eventBackgroundColor;\n\tlet $slotWidth;\n\tlet $eventMouseEnter;\n\tlet $eventMouseLeave;\n\tlet $_interaction;\n\tlet { chunk } = $$props;\n\tlet { dayChunks = [] } = $$props;\n\tlet { longChunks = {} } = $$props;\n\tlet { resource = undefined } = $$props;\n\tlet { displayEventEnd, eventAllUpdated, eventBackgroundColor, eventTextColor, eventColor, eventContent, eventClick, eventDidMount, eventClassNames, eventMouseEnter, eventMouseLeave, resources, slotDuration, slotWidth, theme, _view, _intlEventTime, _interaction, _iClasses, _tasks } = getContext('state');\n\tcomponent_subscribe($$self, displayEventEnd, value => $$invalidate(43, $displayEventEnd = value));\n\tcomponent_subscribe($$self, eventAllUpdated, value => $$invalidate(54, $eventAllUpdated = value));\n\tcomponent_subscribe($$self, eventBackgroundColor, value => $$invalidate(49, $eventBackgroundColor = value));\n\tcomponent_subscribe($$self, eventTextColor, value => $$invalidate(46, $eventTextColor = value));\n\tcomponent_subscribe($$self, eventColor, value => $$invalidate(48, $eventColor = value));\n\tcomponent_subscribe($$self, eventContent, value => $$invalidate(42, $eventContent = value));\n\tcomponent_subscribe($$self, eventClick, value => $$invalidate(39, $eventClick = value));\n\tcomponent_subscribe($$self, eventDidMount, value => $$invalidate(55, $eventDidMount = value));\n\tcomponent_subscribe($$self, eventClassNames, value => $$invalidate(44, $eventClassNames = value));\n\tcomponent_subscribe($$self, eventMouseEnter, value => $$invalidate(9, $eventMouseEnter = value));\n\tcomponent_subscribe($$self, eventMouseLeave, value => $$invalidate(10, $eventMouseLeave = value));\n\tcomponent_subscribe($$self, resources, value => $$invalidate(47, $resources = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(53, $slotDuration = value));\n\tcomponent_subscribe($$self, slotWidth, value => $$invalidate(50, $slotWidth = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(3, $theme = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(40, $_view = value));\n\tcomponent_subscribe($$self, _intlEventTime, value => $$invalidate(41, $_intlEventTime = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(11, $_interaction = value));\n\tcomponent_subscribe($$self, _iClasses, value => $$invalidate(45, $_iClasses = value));\n\tlet el;\n\tlet event;\n\tlet display;\n\tlet classes;\n\tlet style;\n\tlet content;\n\tlet timeText;\n\tlet onclick;\n\tlet margin = helperEvent(chunk.event.display) ? 1 : 0;\n\tlet width = 0;\n\n\tonMount(() => {\n\t\tif (isFunction($eventDidMount)) {\n\t\t\t$eventDidMount({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\ttimeText,\n\t\t\t\tel,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t});\n\t\t}\n\t});\n\n\tafterUpdate(() => {\n\t\tif (isFunction($eventAllUpdated) && !helperEvent(display)) {\n\t\t\ttask(() => $eventAllUpdated({ view: toViewWithLocalDates($_view) }), 'eau', _tasks);\n\t\t}\n\t});\n\n\tfunction createHandler(fn, display) {\n\t\treturn !helperEvent(display) && isFunction(fn)\n\t\t? jsEvent => fn({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\tel,\n\t\t\t\tjsEvent,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t})\n\t\t: undefined;\n\t}\n\n\tfunction createDragHandler(interaction, resize) {\n\t\treturn interaction.action\n\t\t? jsEvent => interaction.action.drag(event, jsEvent, resize, undefined, [margin, resource], chunk.zeroDuration)\n\t\t: undefined;\n\t}\n\n\tfunction reposition() {\n\t\tif (!el) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet h = height(el);\n\t\t$$invalidate(38, margin = repositionEvent(chunk, dayChunks, longChunks, h, !toSeconds($slotDuration)));\n\t\treturn margin + h;\n\t}\n\n\tfunction article_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(4, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('chunk' in $$props) $$invalidate(33, chunk = $$props.chunk);\n\t\tif ('dayChunks' in $$props) $$invalidate(34, dayChunks = $$props.dayChunks);\n\t\tif ('longChunks' in $$props) $$invalidate(35, longChunks = $$props.longChunks);\n\t\tif ('resource' in $$props) $$invalidate(36, resource = $$props.resource);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[1] & /*chunk*/ 4) {\n\t\t\t$$invalidate(0, event = chunk.event);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*event, width, style, display, $theme*/ 79 | $$self.$$.dirty[1] & /*chunk, $slotWidth, $resources, $eventBackgroundColor, $eventColor, $eventTextColor, margin, resource, $_iClasses, $eventClassNames, $_view*/ 1041060) {\n\t\t\t{\n\t\t\t\t$$invalidate(1, display = event.display);\n\n\t\t\t\t// Style\n\t\t\t\tif ('slots' in chunk) {\n\t\t\t\t\tlet left = chunk.offset * $slotWidth;\n\t\t\t\t\t$$invalidate(2, width = chunk.slots * $slotWidth);\n\t\t\t\t\t$$invalidate(6, style = `left:${left}px;` + `width:${width}px;`);\n\t\t\t\t} else {\n\t\t\t\t\t// Month view\n\t\t\t\t\t$$invalidate(2, width = chunk.days * 100);\n\n\t\t\t\t\t$$invalidate(6, style = `width:${width}%;`);\n\t\t\t\t}\n\n\t\t\t\tlet bgColor = event.backgroundColor || resourceBackgroundColor(event, $resources) || $eventBackgroundColor || $eventColor;\n\t\t\t\tlet txtColor = event.textColor || resourceTextColor(event, $resources) || $eventTextColor;\n\t\t\t\tlet marginTop = margin;\n\n\t\t\t\tif (event._margin) {\n\t\t\t\t\t// Force margin for helper events\n\t\t\t\t\tlet [_margin, _resource] = event._margin;\n\n\t\t\t\t\tif (resource === _resource) {\n\t\t\t\t\t\tmarginTop = _margin;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(6, style += `margin-top:${marginTop}px;`);\n\n\t\t\t\tif (bgColor) {\n\t\t\t\t\t$$invalidate(6, style += `background-color:${bgColor};`);\n\t\t\t\t}\n\n\t\t\t\tif (txtColor) {\n\t\t\t\t\t$$invalidate(6, style += `color:${txtColor};`);\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(6, style += event.styles.join(';'));\n\n\t\t\t\t// Class\n\t\t\t\t$$invalidate(5, classes = [\n\t\t\t\t\tbgEvent(display) ? $theme.bgEvent : $theme.event,\n\t\t\t\t\t...$_iClasses([], event),\n\t\t\t\t\t...createEventClasses($eventClassNames, event, $_view)\n\t\t\t\t].join(' '));\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$theme*/ 8 | $$self.$$.dirty[1] & /*chunk, $displayEventEnd, $eventContent, $_intlEventTime, $_view*/ 7684) {\n\t\t\t// Content\n\t\t\t$$invalidate(7, [timeText, content] = createEventContent(chunk, $displayEventEnd, $eventContent, $theme, $_intlEventTime, $_view), content);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*display*/ 2 | $$self.$$.dirty[1] & /*$eventClick*/ 256) {\n\t\t\t// Onclick handler\n\t\t\t$$invalidate(8, onclick = !bgEvent(display) && createHandler($eventClick, display));\n\t\t}\n\t};\n\n\treturn [\n\t\tevent,\n\t\tdisplay,\n\t\twidth,\n\t\t$theme,\n\t\tel,\n\t\tclasses,\n\t\tstyle,\n\t\tcontent,\n\t\tonclick,\n\t\t$eventMouseEnter,\n\t\t$eventMouseLeave,\n\t\t$_interaction,\n\t\tdisplayEventEnd,\n\t\teventAllUpdated,\n\t\teventBackgroundColor,\n\t\teventTextColor,\n\t\teventColor,\n\t\teventContent,\n\t\teventClick,\n\t\teventDidMount,\n\t\teventClassNames,\n\t\teventMouseEnter,\n\t\teventMouseLeave,\n\t\tresources,\n\t\tslotDuration,\n\t\tslotWidth,\n\t\ttheme,\n\t\t_view,\n\t\t_intlEventTime,\n\t\t_interaction,\n\t\t_iClasses,\n\t\tcreateHandler,\n\t\tcreateDragHandler,\n\t\tchunk,\n\t\tdayChunks,\n\t\tlongChunks,\n\t\tresource,\n\t\treposition,\n\t\tmargin,\n\t\t$eventClick,\n\t\t$_view,\n\t\t$_intlEventTime,\n\t\t$eventContent,\n\t\t$displayEventEnd,\n\t\t$eventClassNames,\n\t\t$_iClasses,\n\t\t$eventTextColor,\n\t\t$resources,\n\t\t$eventColor,\n\t\t$eventBackgroundColor,\n\t\t$slotWidth,\n\t\tarticle_binding\n\t];\n}\n\nclass Event extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance$4,\n\t\t\tcreate_fragment$4,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tchunk: 33,\n\t\t\t\tdayChunks: 34,\n\t\t\t\tlongChunks: 35,\n\t\t\t\tresource: 36,\n\t\t\t\treposition: 37\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1]\n\t\t);\n\t}\n\n\tget reposition() {\n\t\treturn this.$$.ctx[37];\n\t}\n}\n\n/* packages/resource-timeline/src/Day.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[37] = list[i];\n\tchild_ctx[38] = list;\n\tchild_ctx[39] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_1$1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[37] = list[i];\n\treturn child_ctx;\n}\n\n// (77:8) {#if !disabled}\nfunction create_if_block(ctx) {\n\tlet each_blocks_1 = [];\n\tlet each0_lookup = new Map();\n\tlet t0;\n\tlet show_if_1 = /*iChunks*/ ctx[3][/*pointerIdx*/ ctx[14]] && /*chunkIntersects*/ ctx[25](/*iChunks*/ ctx[3][/*pointerIdx*/ ctx[14]]);\n\tlet t1;\n\tlet each_blocks = [];\n\tlet each1_lookup = new Map();\n\tlet t2;\n\tlet show_if = /*iChunks*/ ctx[3][0] && /*chunkIntersects*/ ctx[25](/*iChunks*/ ctx[3][0]);\n\tlet if_block1_anchor;\n\tlet current;\n\tlet each_value_1 = ensure_array_like(/*dayBgChunks*/ ctx[8]);\n\tconst get_key = ctx => /*chunk*/ ctx[37].event;\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\tlet child_ctx = get_each_context_1$1(ctx, each_value_1, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach0_lookup.set(key, each_blocks_1[i] = create_each_block_1$1(key, child_ctx));\n\t}\n\n\tlet if_block0 = show_if_1 && create_if_block_2(ctx);\n\tlet each_value = ensure_array_like(/*dayChunks*/ ctx[7]);\n\tconst get_key_1 = ctx => /*chunk*/ ctx[37].event;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context$2(ctx, each_value, i);\n\t\tlet key = get_key_1(child_ctx);\n\t\teach1_lookup.set(key, each_blocks[i] = create_each_block$2(key, child_ctx));\n\t}\n\n\tlet if_block1 = show_if && create_if_block_1(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].c();\n\t\t\t}\n\n\t\t\tt0 = space();\n\t\t\tif (if_block0) if_block0.c();\n\t\t\tt1 = space();\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tt2 = space();\n\t\t\tif (if_block1) if_block1.c();\n\t\t\tif_block1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\tif (each_blocks_1[i]) {\n\t\t\t\t\teach_blocks_1[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, t0, anchor);\n\t\t\tif (if_block0) if_block0.m(target, anchor);\n\t\t\tinsert(target, t1, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, t2, anchor);\n\t\t\tif (if_block1) if_block1.m(target, anchor);\n\t\t\tinsert(target, if_block1_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*dayBgChunks*/ 256) {\n\t\t\t\teach_value_1 = ensure_array_like(/*dayBgChunks*/ ctx[8]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key, 1, ctx, each_value_1, each0_lookup, t0.parentNode, outro_and_destroy_block, create_each_block_1$1, t0, get_each_context_1$1);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*iChunks, pointerIdx*/ 16392) show_if_1 = /*iChunks*/ ctx[3][/*pointerIdx*/ ctx[14]] && /*chunkIntersects*/ ctx[25](/*iChunks*/ ctx[3][/*pointerIdx*/ ctx[14]]);\n\n\t\t\tif (show_if_1) {\n\t\t\t\tif (if_block0) {\n\t\t\t\t\tif_block0.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*iChunks, pointerIdx*/ 16392) {\n\t\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block0 = create_if_block_2(ctx);\n\t\t\t\t\tif_block0.c();\n\t\t\t\t\ttransition_in(if_block0, 1);\n\t\t\t\t\tif_block0.m(t1.parentNode, t1);\n\t\t\t\t}\n\t\t\t} else if (if_block0) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block0, 1, 1, () => {\n\t\t\t\t\tif_block0 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*dayChunks, longChunks, resource, refs*/ 4230) {\n\t\t\t\teach_value = ensure_array_like(/*dayChunks*/ ctx[7]);\n\t\t\t\tgroup_outros();\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key_1, 1, ctx, each_value, each1_lookup, t2.parentNode, outro_and_destroy_block, create_each_block$2, t2, get_each_context$2);\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*iChunks*/ 8) show_if = /*iChunks*/ ctx[3][0] && /*chunkIntersects*/ ctx[25](/*iChunks*/ ctx[3][0]);\n\n\t\t\tif (show_if) {\n\t\t\t\tif (if_block1) {\n\t\t\t\t\tif_block1.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*iChunks*/ 8) {\n\t\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block1 = create_if_block_1(ctx);\n\t\t\t\t\tif_block1.c();\n\t\t\t\t\ttransition_in(if_block1, 1);\n\t\t\t\t\tif_block1.m(if_block1_anchor.parentNode, if_block1_anchor);\n\t\t\t\t}\n\t\t\t} else if (if_block1) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block1, 1, 1, () => {\n\t\t\t\t\tif_block1 = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks_1[i]);\n\t\t\t}\n\n\t\t\ttransition_in(if_block0);\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\ttransition_in(if_block1);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks_1[i]);\n\t\t\t}\n\n\t\t\ttransition_out(if_block0);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\ttransition_out(if_block1);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t0);\n\t\t\t\tdetach(t1);\n\t\t\t\tdetach(t2);\n\t\t\t\tdetach(if_block1_anchor);\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].d(detaching);\n\t\t\t}\n\n\t\t\tif (if_block0) if_block0.d(detaching);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d(detaching);\n\t\t\t}\n\n\t\t\tif (if_block1) if_block1.d(detaching);\n\t\t}\n\t};\n}\n\n// (78:12) {#each dayBgChunks as chunk (chunk.event)}\nfunction create_each_block_1$1(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet current;\n\tevent = new Event({ props: { chunk: /*chunk*/ ctx[37] } });\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*dayBgChunks*/ 256) event_changes.chunk = /*chunk*/ ctx[37];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (82:12) {#if iChunks[pointerIdx] && chunkIntersects(iChunks[pointerIdx])}\nfunction create_if_block_2(ctx) {\n\tlet event;\n\tlet current;\n\n\tevent = new Event({\n\t\t\tprops: {\n\t\t\t\tchunk: /*iChunks*/ ctx[3][/*pointerIdx*/ ctx[14]]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(event.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*iChunks, pointerIdx*/ 16392) event_changes.chunk = /*iChunks*/ ctx[3][/*pointerIdx*/ ctx[14]];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (85:12) {#each dayChunks as chunk, i (chunk.event)}\nfunction create_each_block$2(key_1, ctx) {\n\tlet first;\n\tlet event;\n\tlet i = /*i*/ ctx[39];\n\tlet current;\n\tconst assign_event = () => /*event_binding*/ ctx[33](event, i);\n\tconst unassign_event = () => /*event_binding*/ ctx[33](null, i);\n\n\tlet event_props = {\n\t\tchunk: /*chunk*/ ctx[37],\n\t\tdayChunks: /*dayChunks*/ ctx[7],\n\t\tlongChunks: /*longChunks*/ ctx[2],\n\t\tresource: /*resource*/ ctx[1]\n\t};\n\n\tevent = new Event({ props: event_props });\n\tassign_event();\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tfirst = empty();\n\t\t\tcreate_component(event.$$.fragment);\n\t\t\tthis.first = first;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, first, anchor);\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (i !== /*i*/ ctx[39]) {\n\t\t\t\tunassign_event();\n\t\t\t\ti = /*i*/ ctx[39];\n\t\t\t\tassign_event();\n\t\t\t}\n\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*dayChunks*/ 128) event_changes.chunk = /*chunk*/ ctx[37];\n\t\t\tif (dirty[0] & /*dayChunks*/ 128) event_changes.dayChunks = /*dayChunks*/ ctx[7];\n\t\t\tif (dirty[0] & /*longChunks*/ 4) event_changes.longChunks = /*longChunks*/ ctx[2];\n\t\t\tif (dirty[0] & /*resource*/ 2) event_changes.resource = /*resource*/ ctx[1];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(first);\n\t\t\t}\n\n\t\t\tunassign_event();\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\n// (89:12) {#if iChunks[0] && chunkIntersects(iChunks[0])}\nfunction create_if_block_1(ctx) {\n\tlet event;\n\tlet current;\n\n\tevent = new Event({\n\t\t\tprops: {\n\t\t\t\tchunk: /*iChunks*/ ctx[3][0],\n\t\t\t\tresource: /*resource*/ ctx[1]\n\t\t\t}\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(event.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(event, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst event_changes = {};\n\t\t\tif (dirty[0] & /*iChunks*/ 8) event_changes.chunk = /*iChunks*/ ctx[3][0];\n\t\t\tif (dirty[0] & /*resource*/ 2) event_changes.resource = /*resource*/ ctx[1];\n\t\t\tevent.$set(event_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(event.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(event.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(event, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$3(ctx) {\n\tlet div1;\n\tlet div0;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet if_block = !/*disabled*/ ctx[11] && create_if_block(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tif (if_block) if_block.c();\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[15].events);\n\n\t\t\tattr(div1, \"class\", div1_class_value = \"\" + (/*$theme*/ ctx[15].day + \" \" + /*$theme*/ ctx[15].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[9] ? ' ' + /*$theme*/ ctx[15].today : '') + (/*highlight*/ ctx[10]\n\t\t\t? ' ' + /*$theme*/ ctx[15].highlight\n\t\t\t: '') + (/*disabled*/ ctx[11]\n\t\t\t? ' ' + /*$theme*/ ctx[15].disabled\n\t\t\t: '')));\n\n\t\t\tset_style(div1, \"flex-grow\", /*allDay*/ ctx[5]\n\t\t\t? null\n\t\t\t: ceil((toSeconds(/*slotTimeLimits*/ ctx[13].max) - toSeconds(/*slotTimeLimits*/ ctx[13].min)) / toSeconds(/*$slotDuration*/ ctx[6])));\n\n\t\t\tattr(div1, \"role\", \"cell\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tappend(div1, div0);\n\t\t\tif (if_block) if_block.m(div0, null);\n\t\t\t/*div1_binding*/ ctx[34](div1);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(div1, \"pointerdown\", function () {\n\t\t\t\t\tif (is_function(/*$_interaction*/ ctx[16].action?.select)) /*$_interaction*/ ctx[16].action?.select.apply(this, arguments);\n\t\t\t\t});\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (!/*disabled*/ ctx[11]) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty[0] & /*disabled*/ 2048) {\n\t\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\tif_block.m(div0, null);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block, 1, 1, () => {\n\t\t\t\t\tif_block = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 32768 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[15].events)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme, date, isToday, highlight, disabled*/ 36353 && div1_class_value !== (div1_class_value = \"\" + (/*$theme*/ ctx[15].day + \" \" + /*$theme*/ ctx[15].weekdays?.[/*date*/ ctx[0].getUTCDay()] + (/*isToday*/ ctx[9] ? ' ' + /*$theme*/ ctx[15].today : '') + (/*highlight*/ ctx[10]\n\t\t\t? ' ' + /*$theme*/ ctx[15].highlight\n\t\t\t: '') + (/*disabled*/ ctx[11]\n\t\t\t? ' ' + /*$theme*/ ctx[15].disabled\n\t\t\t: '')))) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*allDay, slotTimeLimits, $slotDuration*/ 8288) {\n\t\t\t\tset_style(div1, \"flex-grow\", /*allDay*/ ctx[5]\n\t\t\t\t? null\n\t\t\t\t: ceil((toSeconds(/*slotTimeLimits*/ ctx[13].max) - toSeconds(/*slotTimeLimits*/ ctx[13].min)) / toSeconds(/*$slotDuration*/ ctx[6])));\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t}\n\n\t\t\tif (if_block) if_block.d();\n\t\t\t/*div1_binding*/ ctx[34](null);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$3($$self, $$props, $$invalidate) {\n\tlet $slotWidth;\n\tlet $slotDuration;\n\tlet $_dayTimeLimits;\n\tlet $validRange;\n\tlet $highlightedDates;\n\tlet $_today;\n\tlet $theme;\n\tlet $_interaction;\n\tlet { date } = $$props;\n\tlet { resource } = $$props;\n\tlet { chunks } = $$props;\n\tlet { bgChunks } = $$props;\n\tlet { longChunks } = $$props;\n\tlet { iChunks = [] } = $$props;\n\tlet { highlightedDates, slotDuration, slotWidth, theme, validRange, _interaction, _today, _dayTimeLimits } = getContext('state');\n\tcomponent_subscribe($$self, highlightedDates, value => $$invalidate(31, $highlightedDates = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(6, $slotDuration = value));\n\tcomponent_subscribe($$self, slotWidth, value => $$invalidate(35, $slotWidth = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(15, $theme = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(30, $validRange = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(16, $_interaction = value));\n\tcomponent_subscribe($$self, _today, value => $$invalidate(32, $_today = value));\n\tcomponent_subscribe($$self, _dayTimeLimits, value => $$invalidate(29, $_dayTimeLimits = value));\n\tlet el;\n\tlet dayChunks, dayBgChunks;\n\tlet isToday, highlight, disabled;\n\tlet refs = [];\n\tlet slotTimeLimits;\n\tlet allDay;\n\tlet pointerIdx = 1;\n\n\tfunction chunkIntersects(chunk) {\n\t\treturn datesEqual(chunk.date, date);\n\t}\n\n\tfunction dateFromPoint(x, y) {\n\t\tx -= rect(el).left;\n\n\t\treturn {\n\t\t\tallDay,\n\t\t\tdate: allDay\n\t\t\t? cloneDate(date)\n\t\t\t: addDuration(addDuration(cloneDate(date), slotTimeLimits.min), $slotDuration, floor(x / $slotWidth)),\n\t\t\tresource,\n\t\t\tdayEl: el,\n\t\t\tdisabled\n\t\t};\n\t}\n\n\tfunction reposition() {\n\t\treturn max(...runReposition(refs, dayChunks));\n\t}\n\n\tfunction event_binding($$value, i) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trefs[i] = $$value;\n\t\t\t$$invalidate(12, refs);\n\t\t});\n\t}\n\n\tfunction div1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(4, el);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('date' in $$props) $$invalidate(0, date = $$props.date);\n\t\tif ('resource' in $$props) $$invalidate(1, resource = $$props.resource);\n\t\tif ('chunks' in $$props) $$invalidate(26, chunks = $$props.chunks);\n\t\tif ('bgChunks' in $$props) $$invalidate(27, bgChunks = $$props.bgChunks);\n\t\tif ('longChunks' in $$props) $$invalidate(2, longChunks = $$props.longChunks);\n\t\tif ('iChunks' in $$props) $$invalidate(3, iChunks = $$props.iChunks);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$_today*/ 2) {\n\t\t\t$$invalidate(9, isToday = datesEqual(date, $_today));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date*/ 1 | $$self.$$.dirty[1] & /*$highlightedDates*/ 1) {\n\t\t\t$$invalidate(10, highlight = $highlightedDates.some(d => datesEqual(d, date)));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*date, $validRange*/ 1073741825) {\n\t\t\t$$invalidate(11, disabled = outsideRange(date, $validRange));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$_dayTimeLimits, date*/ 536870913) {\n\t\t\t$$invalidate(13, slotTimeLimits = getSlotTimeLimits($_dayTimeLimits, date));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$slotDuration, allDay*/ 96) {\n\t\t\t{\n\t\t\t\t$$invalidate(5, allDay = !toSeconds($slotDuration));\n\t\t\t\t$$invalidate(14, pointerIdx = allDay ? 2 : 1);\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*chunks*/ 67108864) {\n\t\t\t$$invalidate(7, dayChunks = chunks.filter(chunkIntersects));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*bgChunks, allDay*/ 134217760) {\n\t\t\t$$invalidate(8, dayBgChunks = bgChunks.filter(bgChunk => (!allDay || bgChunk.event.allDay) && chunkIntersects(bgChunk)));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*el*/ 16) {\n\t\t\tif (el) {\n\t\t\t\tsetPayload(el, dateFromPoint);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tdate,\n\t\tresource,\n\t\tlongChunks,\n\t\tiChunks,\n\t\tel,\n\t\tallDay,\n\t\t$slotDuration,\n\t\tdayChunks,\n\t\tdayBgChunks,\n\t\tisToday,\n\t\thighlight,\n\t\tdisabled,\n\t\trefs,\n\t\tslotTimeLimits,\n\t\tpointerIdx,\n\t\t$theme,\n\t\t$_interaction,\n\t\thighlightedDates,\n\t\tslotDuration,\n\t\tslotWidth,\n\t\ttheme,\n\t\tvalidRange,\n\t\t_interaction,\n\t\t_today,\n\t\t_dayTimeLimits,\n\t\tchunkIntersects,\n\t\tchunks,\n\t\tbgChunks,\n\t\treposition,\n\t\t$_dayTimeLimits,\n\t\t$validRange,\n\t\t$highlightedDates,\n\t\t$_today,\n\t\tevent_binding,\n\t\tdiv1_binding\n\t];\n}\n\nclass Day extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance$3,\n\t\t\tcreate_fragment$3,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tdate: 0,\n\t\t\t\tresource: 1,\n\t\t\t\tchunks: 26,\n\t\t\t\tbgChunks: 27,\n\t\t\t\tlongChunks: 2,\n\t\t\t\tiChunks: 3,\n\t\t\t\treposition: 28\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1]\n\t\t);\n\t}\n\n\tget reposition() {\n\t\treturn this.$$.ctx[28];\n\t}\n}\n\n/* packages/resource-timeline/src/Days.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context$1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[29] = list[i];\n\tchild_ctx[30] = list;\n\tchild_ctx[31] = i;\n\treturn child_ctx;\n}\n\n// (73:4) {#each $_viewDates as date, i}\nfunction create_each_block$1(ctx) {\n\tlet day;\n\tlet i = /*i*/ ctx[31];\n\tlet current;\n\tconst assign_day = () => /*day_binding*/ ctx[25](day, i);\n\tconst unassign_day = () => /*day_binding*/ ctx[25](null, i);\n\n\tlet day_props = {\n\t\tdate: /*date*/ ctx[29],\n\t\tresource: /*resource*/ ctx[0],\n\t\tchunks: /*chunks*/ ctx[1],\n\t\tbgChunks: /*bgChunks*/ ctx[2],\n\t\tlongChunks: /*longChunks*/ ctx[4],\n\t\tiChunks: /*iChunks*/ ctx[5]\n\t};\n\n\tday = new Day({ props: day_props });\n\tassign_day();\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(day.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(day, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (i !== /*i*/ ctx[31]) {\n\t\t\t\tunassign_day();\n\t\t\t\ti = /*i*/ ctx[31];\n\t\t\t\tassign_day();\n\t\t\t}\n\n\t\t\tconst day_changes = {};\n\t\t\tif (dirty[0] & /*$_viewDates*/ 8) day_changes.date = /*date*/ ctx[29];\n\t\t\tif (dirty[0] & /*resource*/ 1) day_changes.resource = /*resource*/ ctx[0];\n\t\t\tif (dirty[0] & /*chunks*/ 2) day_changes.chunks = /*chunks*/ ctx[1];\n\t\t\tif (dirty[0] & /*bgChunks*/ 4) day_changes.bgChunks = /*bgChunks*/ ctx[2];\n\t\t\tif (dirty[0] & /*longChunks*/ 16) day_changes.longChunks = /*longChunks*/ ctx[4];\n\t\t\tif (dirty[0] & /*iChunks*/ 32) day_changes.iChunks = /*iChunks*/ ctx[5];\n\t\t\tday.$set(day_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(day.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(day.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tunassign_day();\n\t\t\tdestroy_component(day, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$2(ctx) {\n\tlet div;\n\tlet div_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value = ensure_array_like(/*$_viewDates*/ ctx[3]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[8].days);\n\t\t\tset_style(div, \"flex-basis\", max(/*height*/ ctx[7], 34) + \"px\");\n\t\t\tattr(div, \"role\", \"row\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(window, \"resize\", /*reposition*/ ctx[17]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$_viewDates, resource, chunks, bgChunks, longChunks, iChunks, refs*/ 127) {\n\t\t\t\teach_value = ensure_array_like(/*$_viewDates*/ ctx[3]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context$1(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block$1(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 256 && div_class_value !== (div_class_value = /*$theme*/ ctx[8].days)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*height*/ 128) {\n\t\t\t\tset_style(div, \"flex-basis\", max(/*height*/ ctx[7], 34) + \"px\");\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$2($$self, $$props, $$invalidate) {\n\tlet $slotDuration;\n\tlet $_dayTimeLimits;\n\tlet $_viewDates;\n\tlet $_iEvents;\n\tlet $_events;\n\tlet $_resHs;\n\tlet $validRange;\n\tlet $theme;\n\tlet { resource } = $$props;\n\tlet { _viewDates, _events, _iEvents, _queue2, _resHs, _dayTimeLimits, slotDuration, theme, validRange } = getContext('state');\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(3, $_viewDates = value));\n\tcomponent_subscribe($$self, _events, value => $$invalidate(23, $_events = value));\n\tcomponent_subscribe($$self, _iEvents, value => $$invalidate(22, $_iEvents = value));\n\tcomponent_subscribe($$self, _resHs, value => $$invalidate(26, $_resHs = value));\n\tcomponent_subscribe($$self, _dayTimeLimits, value => $$invalidate(21, $_dayTimeLimits = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(20, $slotDuration = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(8, $theme = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(24, $validRange = value));\n\tlet chunks, bgChunks, longChunks, iChunks = [];\n\tlet start;\n\tlet end;\n\tlet refs = [];\n\tlet height = 0;\n\tlet debounceHandle = {};\n\n\tfunction reposition() {\n\t\tdebounce(\n\t\t\t() => {\n\t\t\t\t$$invalidate(7, height = ceil(max(...runReposition(refs, $_viewDates))) + 10);\n\t\t\t\t$_resHs.set(resource, height);\n\t\t\t\t_resHs.set($_resHs);\n\t\t\t},\n\t\t\tdebounceHandle,\n\t\t\t_queue2\n\t\t);\n\t}\n\n\tfunction day_binding($$value, i) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trefs[i] = $$value;\n\t\t\t$$invalidate(6, refs);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('resource' in $$props) $$invalidate(0, resource = $$props.resource);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*$_viewDates, $validRange, $_dayTimeLimits, start, end*/ 19660808) {\n\t\t\t{\n\t\t\t\t$$invalidate(18, start = cloneDate(limitToRange($_viewDates[0], $validRange)));\n\t\t\t\t$$invalidate(19, end = cloneDate(limitToRange($_viewDates.at(-1), $validRange)));\n\t\t\t\tlet slotTimeLimits = getSlotTimeLimits($_dayTimeLimits, start);\n\t\t\t\taddDuration(start, slotTimeLimits.min);\n\t\t\t\tslotTimeLimits = getSlotTimeLimits($_dayTimeLimits, end);\n\n\t\t\t\tslotTimeLimits.max.seconds > DAY_IN_SECONDS\n\t\t\t\t? addDuration(end, slotTimeLimits.max)\n\t\t\t\t: addDay(/** @see https://github.com/vkurko/calendar/issues/333 */ end);\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$_events, start, end, resource, bgChunks, chunks, $_viewDates, $_dayTimeLimits, $slotDuration*/ 12320783) {\n\t\t\t{\n\t\t\t\t$$invalidate(1, chunks = []);\n\t\t\t\t$$invalidate(2, bgChunks = []);\n\n\t\t\t\tfor (let event of $_events) {\n\t\t\t\t\tif (eventIntersects(event, start, end, resource)) {\n\t\t\t\t\t\tlet chunk = createEventChunk(event, start, end);\n\n\t\t\t\t\t\tif (bgEvent(event.display)) {\n\t\t\t\t\t\t\tbgChunks.push(chunk);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(2, [bgChunks] = prepareEventChunks(bgChunks, $_viewDates, $_dayTimeLimits, $slotDuration), bgChunks);\n\t\t\t\t$$invalidate(1, [chunks, longChunks] = prepareEventChunks(chunks, $_viewDates, $_dayTimeLimits, $slotDuration), chunks, (((((((((($$invalidate(4, longChunks), $$invalidate(23, $_events)), $$invalidate(18, start)), $$invalidate(19, end)), $$invalidate(0, resource)), $$invalidate(2, bgChunks)), $$invalidate(1, chunks)), $$invalidate(3, $_viewDates)), $$invalidate(21, $_dayTimeLimits)), $$invalidate(20, $slotDuration)), $$invalidate(24, $validRange)));\n\n\t\t\t\t// Run reposition only when events get changed\n\t\t\t\treposition();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*$_iEvents, start, end, resource, $_viewDates, $_dayTimeLimits, $slotDuration*/ 8126473) {\n\t\t\t$$invalidate(5, iChunks = $_iEvents.map(event => {\n\t\t\t\tlet chunk;\n\n\t\t\t\tif (event && eventIntersects(event, start, end, resource)) {\n\t\t\t\t\tchunk = createEventChunk(event, start, end);\n\t\t\t\t\t[[chunk]] = prepareEventChunks([chunk], $_viewDates, $_dayTimeLimits, $slotDuration);\n\t\t\t\t} else {\n\t\t\t\t\tchunk = null;\n\t\t\t\t}\n\n\t\t\t\treturn chunk;\n\t\t\t}));\n\t\t}\n\t};\n\n\treturn [\n\t\tresource,\n\t\tchunks,\n\t\tbgChunks,\n\t\t$_viewDates,\n\t\tlongChunks,\n\t\tiChunks,\n\t\trefs,\n\t\theight,\n\t\t$theme,\n\t\t_viewDates,\n\t\t_events,\n\t\t_iEvents,\n\t\t_resHs,\n\t\t_dayTimeLimits,\n\t\tslotDuration,\n\t\ttheme,\n\t\tvalidRange,\n\t\treposition,\n\t\tstart,\n\t\tend,\n\t\t$slotDuration,\n\t\t$_dayTimeLimits,\n\t\t$_iEvents,\n\t\t$_events,\n\t\t$validRange,\n\t\tday_binding\n\t];\n}\n\nclass Days extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$2, create_fragment$2, safe_not_equal, { resource: 0 }, null, [-1, -1]);\n\t}\n}\n\n/* packages/resource-timeline/src/Body.svelte generated by Svelte v4.2.19 */\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[26] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[29] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[32] = list[i];\n\treturn child_ctx;\n}\n\n// (39:16) {#each $_dayTimes[date.getTime()] as time}\nfunction create_each_block_2(ctx) {\n\tlet div;\n\tlet div_class_value;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tattr(div, \"class\", div_class_value = /*$theme*/ ctx[2].line);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme*/ 4 && div_class_value !== (div_class_value = /*$theme*/ ctx[2].line)) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (38:12) {#each $_viewDates as date}\nfunction create_each_block_1(ctx) {\n\tlet each_1_anchor;\n\tlet each_value_2 = ensure_array_like(/*$_dayTimes*/ ctx[3][/*date*/ ctx[29].getTime()]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value_2.length; i += 1) {\n\t\teach_blocks[i] = create_each_block_2(get_each_context_2(ctx, each_value_2, i));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\teach_1_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(target, anchor);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinsert(target, each_1_anchor, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$theme, $_dayTimes, $_viewDates*/ 14) {\n\t\t\t\teach_value_2 = ensure_array_like(/*$_dayTimes*/ ctx[3][/*date*/ ctx[29].getTime()]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_2.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_2(ctx, each_value_2, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block_2(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\teach_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks.length; i += 1) {\n\t\t\t\t\teach_blocks[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks.length = each_value_2.length;\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(each_1_anchor);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t}\n\t};\n}\n\n// (44:8) {#each $_viewResources as resource}\nfunction create_each_block(ctx) {\n\tlet days;\n\tlet current;\n\n\tdays = new Days({\n\t\t\tprops: { resource: /*resource*/ ctx[26] }\n\t\t});\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(days.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(days, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst days_changes = {};\n\t\t\tif (dirty[0] & /*$_viewResources*/ 16) days_changes.resource = /*resource*/ ctx[26];\n\t\t\tdays.$set(days_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(days.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(days.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tdestroy_component(days, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment$1(ctx) {\n\tlet div2;\n\tlet div1;\n\tlet div0;\n\tlet div0_class_value;\n\tlet t;\n\tlet div1_class_value;\n\tlet div2_class_value;\n\tlet current;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value_1 = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\tlet each_blocks_1 = [];\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\teach_blocks_1[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));\n\t}\n\n\tlet each_value = ensure_array_like(/*$_viewResources*/ ctx[4]);\n\tlet each_blocks = [];\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\teach_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));\n\t}\n\n\tconst out = i => transition_out(each_blocks[i], 1, 1, () => {\n\t\teach_blocks[i] = null;\n\t});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv2 = element(\"div\");\n\t\t\tdiv1 = element(\"div\");\n\t\t\tdiv0 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].c();\n\t\t\t}\n\n\t\t\tt = space();\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[2].lines);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[2].content);\n\t\t\tattr(div2, \"class\", div2_class_value = /*$theme*/ ctx[2].body);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div2, anchor);\n\t\t\tappend(div2, div1);\n\t\t\tappend(div1, div0);\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\tif (each_blocks_1[i]) {\n\t\t\t\t\teach_blocks_1[i].m(div0, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tappend(div1, t);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*div2_binding*/ ctx[18](div2);\n\t\t\tcurrent = true;\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(div2, \"scroll\", /*handleScroll*/ ctx[16]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*$_dayTimes, $_viewDates, $theme*/ 14) {\n\t\t\t\teach_value_1 = ensure_array_like(/*$_viewDates*/ ctx[1]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value_1.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context_1(ctx, each_value_1, i);\n\n\t\t\t\t\tif (each_blocks_1[i]) {\n\t\t\t\t\t\teach_blocks_1[i].p(child_ctx, dirty);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks_1[i] = create_each_block_1(child_ctx);\n\t\t\t\t\t\teach_blocks_1[i].c();\n\t\t\t\t\t\teach_blocks_1[i].m(div0, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (; i < each_blocks_1.length; i += 1) {\n\t\t\t\t\teach_blocks_1[i].d(1);\n\t\t\t\t}\n\n\t\t\t\teach_blocks_1.length = each_value_1.length;\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 4 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[2].lines)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*$_viewResources*/ 16) {\n\t\t\t\teach_value = ensure_array_like(/*$_viewResources*/ ctx[4]);\n\t\t\t\tlet i;\n\n\t\t\t\tfor (i = 0; i < each_value.length; i += 1) {\n\t\t\t\t\tconst child_ctx = get_each_context(ctx, each_value, i);\n\n\t\t\t\t\tif (each_blocks[i]) {\n\t\t\t\t\t\teach_blocks[i].p(child_ctx, dirty);\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\teach_blocks[i] = create_each_block(child_ctx);\n\t\t\t\t\t\teach_blocks[i].c();\n\t\t\t\t\t\ttransition_in(each_blocks[i], 1);\n\t\t\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tgroup_outros();\n\n\t\t\t\tfor (i = each_value.length; i < each_blocks.length; i += 1) {\n\t\t\t\t\tout(i);\n\t\t\t\t}\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 4 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[2].content)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty[0] & /*$theme*/ 4 && div2_class_value !== (div2_class_value = /*$theme*/ ctx[2].body)) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\n\t\t\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\t\t\ttransition_in(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\teach_blocks = each_blocks.filter(Boolean);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\ttransition_out(each_blocks[i]);\n\t\t\t}\n\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div2);\n\t\t\t}\n\n\t\t\tdestroy_each(each_blocks_1, detaching);\n\t\t\tdestroy_each(each_blocks, detaching);\n\t\t\t/*div2_binding*/ ctx[18](null);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction instance$1($$self, $$props, $$invalidate) {\n\tlet $slotWidth;\n\tlet $slotDuration;\n\tlet $scrollTime;\n\tlet $_viewDates;\n\tlet $_dayTimeLimits;\n\tlet $_bodyEl;\n\tlet $_sidebarEl;\n\tlet $_headerEl;\n\tlet $theme;\n\tlet $_dayTimes;\n\tlet $_viewResources;\n\tlet { _bodyEl, _headerEl, _sidebarEl, _dayTimes, _dayTimeLimits, _viewResources, _viewDates, scrollTime, slotDuration, slotWidth, theme } = getContext('state');\n\tcomponent_subscribe($$self, _bodyEl, value => $$invalidate(22, $_bodyEl = value));\n\tcomponent_subscribe($$self, _headerEl, value => $$invalidate(24, $_headerEl = value));\n\tcomponent_subscribe($$self, _sidebarEl, value => $$invalidate(23, $_sidebarEl = value));\n\tcomponent_subscribe($$self, _dayTimes, value => $$invalidate(3, $_dayTimes = value));\n\tcomponent_subscribe($$self, _dayTimeLimits, value => $$invalidate(21, $_dayTimeLimits = value));\n\tcomponent_subscribe($$self, _viewResources, value => $$invalidate(4, $_viewResources = value));\n\tcomponent_subscribe($$self, _viewDates, value => $$invalidate(1, $_viewDates = value));\n\tcomponent_subscribe($$self, scrollTime, value => $$invalidate(17, $scrollTime = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(20, $slotDuration = value));\n\tcomponent_subscribe($$self, slotWidth, value => $$invalidate(19, $slotWidth = value));\n\tcomponent_subscribe($$self, theme, value => $$invalidate(2, $theme = value));\n\tlet el;\n\n\tfunction handleScroll() {\n\t\tset_store_value(_headerEl, $_headerEl.scrollLeft = $_bodyEl.scrollLeft, $_headerEl);\n\t\tset_store_value(_sidebarEl, $_sidebarEl.scrollTop = $_bodyEl.scrollTop, $_sidebarEl);\n\t}\n\n\tfunction scrollToTime() {\n\t\tlet slotTimeLimits = getSlotTimeLimits($_dayTimeLimits, $_viewDates[0]);\n\t\t$$invalidate(0, el.scrollLeft = (toSeconds($scrollTime) - toSeconds(slotTimeLimits.min)) / toSeconds($slotDuration) * $slotWidth, el);\n\t}\n\n\tfunction div2_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tel = $$value;\n\t\t\t$$invalidate(0, el);\n\t\t});\n\t}\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[0] & /*el*/ 1) {\n\t\t\tset_store_value(_bodyEl, $_bodyEl = el, $_bodyEl);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*el, $_viewDates, $scrollTime*/ 131075) {\n\t\t\tif (el) {\n\t\t\t\tscrollToTime();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\tel,\n\t\t$_viewDates,\n\t\t$theme,\n\t\t$_dayTimes,\n\t\t$_viewResources,\n\t\t_bodyEl,\n\t\t_headerEl,\n\t\t_sidebarEl,\n\t\t_dayTimes,\n\t\t_dayTimeLimits,\n\t\t_viewResources,\n\t\t_viewDates,\n\t\tscrollTime,\n\t\tslotDuration,\n\t\tslotWidth,\n\t\ttheme,\n\t\thandleScroll,\n\t\t$scrollTime,\n\t\tdiv2_binding\n\t];\n}\n\nclass Body extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$1, create_fragment$1, safe_not_equal, {}, null, [-1, -1]);\n\t}\n}\n\n/* packages/resource-timeline/src/View.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment(ctx) {\n\tlet div1;\n\tlet sidebar;\n\tlet t0;\n\tlet div0;\n\tlet header;\n\tlet t1;\n\tlet body;\n\tlet div0_class_value;\n\tlet div1_class_value;\n\tlet current;\n\tsidebar = new Sidebar({});\n\theader = new Header({});\n\tbody = new Body({});\n\n\treturn {\n\t\tc() {\n\t\t\tdiv1 = element(\"div\");\n\t\t\tcreate_component(sidebar.$$.fragment);\n\t\t\tt0 = space();\n\t\t\tdiv0 = element(\"div\");\n\t\t\tcreate_component(header.$$.fragment);\n\t\t\tt1 = space();\n\t\t\tcreate_component(body.$$.fragment);\n\t\t\tattr(div0, \"class\", div0_class_value = /*$theme*/ ctx[0].main);\n\t\t\tattr(div1, \"class\", div1_class_value = /*$theme*/ ctx[0].container);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div1, anchor);\n\t\t\tmount_component(sidebar, div1, null);\n\t\t\tappend(div1, t0);\n\t\t\tappend(div1, div0);\n\t\t\tmount_component(header, div0, null);\n\t\t\tappend(div0, t1);\n\t\t\tmount_component(body, div0, null);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (!current || dirty & /*$theme*/ 1 && div0_class_value !== (div0_class_value = /*$theme*/ ctx[0].main)) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (!current || dirty & /*$theme*/ 1 && div1_class_value !== (div1_class_value = /*$theme*/ ctx[0].container)) {\n\t\t\t\tattr(div1, \"class\", div1_class_value);\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(sidebar.$$.fragment, local);\n\t\t\ttransition_in(header.$$.fragment, local);\n\t\t\ttransition_in(body.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(sidebar.$$.fragment, local);\n\t\t\ttransition_out(header.$$.fragment, local);\n\t\t\ttransition_out(body.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div1);\n\t\t\t}\n\n\t\t\tdestroy_component(sidebar);\n\t\t\tdestroy_component(header);\n\t\t\tdestroy_component(body);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet $theme;\n\tlet { theme } = getContext('state');\n\tcomponent_subscribe($$self, theme, value => $$invalidate(0, $theme = value));\n\treturn [$theme, theme];\n}\n\nclass View extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance, create_fragment, safe_not_equal, {});\n\t}\n}\n\nvar index = {\n\tcreateOptions(options) {\n\t\t// Common options\n\t\toptions.buttonText.resourceTimelineDay = 'timeline';\n\t\toptions.buttonText.resourceTimelineWeek = 'timeline';\n\t\toptions.buttonText.resourceTimelineMonth = 'timeline';\n\t\toptions.theme.expander = 'ec-expander';\n\t\toptions.theme.main = 'ec-main';\n\t\toptions.theme.times = 'ec-times';\n\t\toptions.theme.container = 'ec-container';\n\t\toptions.view = 'resourceTimelineWeek';\n\t\toptions.views.resourceTimelineDay = {\n\t\t\tbuttonText: btnTextDay,\n\t\t\tcomponent: View,\n\t\t\tdisplayEventEnd: false,\n\t\t\tdayHeaderFormat: {weekday: 'long'},\n\t\t\tduration: {days: 1},\n\t\t\tslotDuration: '01:00',\n\t\t\ttheme: themeView('ec-timeline ec-resource-day-view'),\n\t\t\ttitleFormat: {year: 'numeric', month: 'long', day: 'numeric'}\n\t\t};\n\t\toptions.views.resourceTimelineWeek = {\n\t\t\tbuttonText: btnTextWeek,\n\t\t\tcomponent: View,\n\t\t\tdisplayEventEnd: false,\n\t\t\tduration: {weeks: 1},\n\t\t\tslotDuration: '01:00',\n\t\t\ttheme: themeView('ec-timeline ec-resource-week-view')\n\t\t};\n\t\toptions.views.resourceTimelineMonth = {\n\t\t\tbuttonText: btnTextMonth,\n\t\t\tcomponent: View,\n\t\t\tdisplayEventEnd: false,\n\t\t\tdayHeaderFormat: {\n\t\t\t\tweekday: 'short',\n\t\t\t\tday: 'numeric'\n\t\t\t},\n\t\t\tduration: {months: 1},\n\t\t\tslotDuration: {days: 1},\n\t\t\ttheme: themeView('ec-timeline ec-resource-month-view'),\n\t\t\ttitleFormat: {year: 'numeric', month: 'long'}\n\t\t};\n\t},\n\n\tcreateStores(state) {\n\t\tif (!('_viewResources' in state)) {\n\t\t\tstate._viewResources = viewResources(state);\n\t\t}\n\t\tstate._headerEl = writable(undefined);\n\t\tstate._dayTimeLimits = dayTimeLimits(state);  // flexible time limits per day\n\t\tstate._dayTimes = dayTimes(state);\n\t\tstate._nestedResources = nestedResources(state);\n\t\tstate._resHs = writable(new Map());  // resource row heights\n\t\tstate._sidebarEl = writable(undefined);\n\t}\n};\n\nexport { index as default };\n","import { writable } from 'svelte/store';\nimport { max, min, cloneDate, subtractDuration, addDuration, listView, getElementWithPayload, getPayload, timelineView, ancestor, createDuration, cloneEvent, isFunction, toEventWithLocalDates, toViewWithLocalDates, assign, toLocalDate, toISOString, rect, listen as listen$1, copyTime, subtractDay, addDay, runAll, bgEvent, helperEvent, noop as noop$1 } from '@event-calendar/core';\nimport { SvelteComponent, init, safe_not_equal, noop, listen, is_function, run_all, component_subscribe, globals, set_store_value, bubble, empty, insert, detach, element, attr, create_component, space, mount_component, transition_in, group_outros, transition_out, check_outros, destroy_component, binding_callbacks } from 'svelte/internal';\nimport { getContext } from 'svelte';\n\nlet busy = false;\nfunction animate(fn) {\n    if (!busy) {\n        busy = true;\n        window.requestAnimationFrame(() => {\n            fn();\n            busy = false;\n        });\n    }\n}\n\nfunction limit(value, minLimit, maxLimit) {\n    return max(minLimit, min(maxLimit, value));\n}\n\n/* packages/interaction/src/Action.svelte generated by Svelte v4.2.19 */\n\nconst { window: window_1 } = globals;\n\nfunction create_fragment$3(ctx) {\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc: noop,\n\t\tm(target, anchor) {\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\tlisten(window_1, \"pointermove\", /*handlePointerMove*/ ctx[37]),\n\t\t\t\t\tlisten(window_1, \"pointerup\", /*handlePointerUp*/ ctx[38]),\n\t\t\t\t\tlisten(window_1, \"pointercancel\", /*handlePointerUp*/ ctx[38]),\n\t\t\t\t\tlisten(window_1, \"scroll\", /*handleScroll*/ ctx[0]),\n\t\t\t\t\tlisten(window_1, \"selectstart\", createPreventDefaultHandler(/*complexAction*/ ctx[39])),\n\t\t\t\t\tlisten(window_1, \"contextmenu\", function () {\n\t\t\t\t\t\tif (is_function(createPreventDefaultHandler(/*contextmenu_handler*/ ctx[47]))) createPreventDefaultHandler(/*contextmenu_handler*/ ctx[47]).apply(this, arguments);\n\t\t\t\t\t}),\n\t\t\t\t\tlisten(window_1, \"touchstart\", /*handleTouchStart*/ ctx[40]),\n\t\t\t\t\tlisten(window_1, \"touchmove\", /*touchmove_handler*/ ctx[46], { passive: false })\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nconst ACTION_DRAG = 1;\nconst ACTION_RESIZE_END = 2;\nconst ACTION_RESIZE_START = 3;\nconst ACTION_SELECT = 4;\nconst ACTION_CLICK = 5;\nconst ACTION_NO_ACTION = 6;\n\nfunction copyIEventData(target, source) {\n\ttarget.start = source.start;\n\ttarget.end = source.end;\n\ttarget.resourceIds = source.resourceIds;\n\treturn target;\n}\n\nfunction validJsEvent(jsEvent) {\n\treturn jsEvent.isPrimary && (jsEvent.pointerType !== 'mouse' || jsEvent.buttons & 1);\n}\n\nfunction createPreventDefaultHandler(condition) {\n\treturn jsEvent => {\n\t\tif (condition()) {\n\t\t\tjsEvent.preventDefault();\n\t\t}\n\t};\n}\n\nfunction instance$3($$self, $$props, $$invalidate) {\n\tlet $_view;\n\tlet $unselectFn;\n\tlet $_events;\n\tlet $_iEvents;\n\tlet $selectBackgroundColor;\n\tlet $_dayGrid;\n\tlet $view;\n\tlet $validRange;\n\tlet $_iClass;\n\tlet $dateClick;\n\tlet $eventDrop;\n\tlet $eventResize;\n\tlet $eventDragStop;\n\tlet $eventResizeStop;\n\tlet $selectFn;\n\tlet $unselectCancel;\n\tlet $unselectAuto;\n\tlet $slotWidth;\n\tlet $slotHeight;\n\tlet $dragScroll;\n\tlet $dragConstraint;\n\tlet $selectConstraint;\n\tlet $resizeConstraint;\n\tlet $eventDragStart;\n\tlet $eventResizeStart;\n\tlet $eventDragMinDistance;\n\tlet $selectMinDistance;\n\tlet $longPressDelay;\n\tlet $eventLongPressDelay;\n\tlet $selectLongPressDelay;\n\tlet $datesAboveResources;\n\tlet $_bodyEl;\n\tlet $slotDuration;\n\tlet $selectable;\n\tlet $_draggable;\n\tlet { _iEvents, _iClass, _events, _view, _dayGrid, _draggable, _bodyEl, datesAboveResources, dateClick, dragConstraint, dragScroll, eventDragMinDistance, eventDragStart, eventDragStop, eventDrop, eventLongPressDelay, eventResizeStart, eventResizeStop, eventResize, longPressDelay, resizeConstraint, selectable, select: selectFn, selectBackgroundColor, selectConstraint, selectLongPressDelay, selectMinDistance, slotDuration, slotHeight, slotWidth, unselect: unselectFn, unselectAuto, unselectCancel, validRange, view } = getContext('state');\n\tcomponent_subscribe($$self, _iEvents, value => $$invalidate(77, $_iEvents = value));\n\tcomponent_subscribe($$self, _iClass, value => $$invalidate(82, $_iClass = value));\n\tcomponent_subscribe($$self, _events, value => $$invalidate(76, $_events = value));\n\tcomponent_subscribe($$self, _view, value => $$invalidate(74, $_view = value));\n\tcomponent_subscribe($$self, _dayGrid, value => $$invalidate(79, $_dayGrid = value));\n\tcomponent_subscribe($$self, _draggable, value => $$invalidate(108, $_draggable = value));\n\tcomponent_subscribe($$self, _bodyEl, value => $$invalidate(105, $_bodyEl = value));\n\tcomponent_subscribe($$self, datesAboveResources, value => $$invalidate(104, $datesAboveResources = value));\n\tcomponent_subscribe($$self, dateClick, value => $$invalidate(83, $dateClick = value));\n\tcomponent_subscribe($$self, dragConstraint, value => $$invalidate(94, $dragConstraint = value));\n\tcomponent_subscribe($$self, dragScroll, value => $$invalidate(93, $dragScroll = value));\n\tcomponent_subscribe($$self, eventDragMinDistance, value => $$invalidate(99, $eventDragMinDistance = value));\n\tcomponent_subscribe($$self, eventDragStart, value => $$invalidate(97, $eventDragStart = value));\n\tcomponent_subscribe($$self, eventDragStop, value => $$invalidate(86, $eventDragStop = value));\n\tcomponent_subscribe($$self, eventDrop, value => $$invalidate(84, $eventDrop = value));\n\tcomponent_subscribe($$self, eventLongPressDelay, value => $$invalidate(102, $eventLongPressDelay = value));\n\tcomponent_subscribe($$self, eventResizeStart, value => $$invalidate(98, $eventResizeStart = value));\n\tcomponent_subscribe($$self, eventResizeStop, value => $$invalidate(87, $eventResizeStop = value));\n\tcomponent_subscribe($$self, eventResize, value => $$invalidate(85, $eventResize = value));\n\tcomponent_subscribe($$self, longPressDelay, value => $$invalidate(101, $longPressDelay = value));\n\tcomponent_subscribe($$self, resizeConstraint, value => $$invalidate(96, $resizeConstraint = value));\n\tcomponent_subscribe($$self, selectable, value => $$invalidate(107, $selectable = value));\n\tcomponent_subscribe($$self, selectFn, value => $$invalidate(88, $selectFn = value));\n\tcomponent_subscribe($$self, selectBackgroundColor, value => $$invalidate(78, $selectBackgroundColor = value));\n\tcomponent_subscribe($$self, selectConstraint, value => $$invalidate(95, $selectConstraint = value));\n\tcomponent_subscribe($$self, selectLongPressDelay, value => $$invalidate(103, $selectLongPressDelay = value));\n\tcomponent_subscribe($$self, selectMinDistance, value => $$invalidate(100, $selectMinDistance = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(106, $slotDuration = value));\n\tcomponent_subscribe($$self, slotHeight, value => $$invalidate(92, $slotHeight = value));\n\tcomponent_subscribe($$self, slotWidth, value => $$invalidate(91, $slotWidth = value));\n\tcomponent_subscribe($$self, unselectFn, value => $$invalidate(75, $unselectFn = value));\n\tcomponent_subscribe($$self, unselectAuto, value => $$invalidate(90, $unselectAuto = value));\n\tcomponent_subscribe($$self, unselectCancel, value => $$invalidate(89, $unselectCancel = value));\n\tcomponent_subscribe($$self, validRange, value => $$invalidate(81, $validRange = value));\n\tcomponent_subscribe($$self, view, value => $$invalidate(80, $view = value));\n\tlet action;\n\tlet interacting;\n\tlet event;\n\tlet display;\n\tlet date, newDate;\n\tlet resource, newResource;\n\tlet fromX, fromY;\n\tlet toX, toY;\n\tlet bodyEl, bodyRect, clipEl, clipRect;\n\tlet delta;\n\tlet allDay;\n\tlet iClass;\n\tlet minResize; // minimum end time when resizing\n\tlet selectStep; // minimum selection step\n\tlet selected; // whether selection has been made\n\tlet noDateClick; // do not perform date click\n\tlet timer; // timer for long press delays\n\tlet viewport;\n\tlet margin;\n\tlet extraDuration; // extra duration for zero duration events\n\n\tfunction drag(eventToDrag, jsEvent, resize, forceDate, forceMargin, zeroDuration) {\n\t\tif (!action) {\n\t\t\taction = validJsEvent(jsEvent)\n\t\t\t? resize\n\t\t\t\t? resize[1] == 'start'\n\t\t\t\t\t? ACTION_RESIZE_START\n\t\t\t\t\t: ACTION_RESIZE_END\n\t\t\t\t: $_draggable(eventToDrag)\n\t\t\t\t\t? ACTION_DRAG\n\t\t\t\t\t: ACTION_NO_ACTION\n\t\t\t: ACTION_NO_ACTION;\n\n\t\t\tif (complexAction()) {\n\t\t\t\tevent = eventToDrag;\n\t\t\t\tcommon(jsEvent);\n\n\t\t\t\tif (forceDate) {\n\t\t\t\t\t// Force date in popup\n\t\t\t\t\tdate = forceDate;\n\t\t\t\t}\n\n\t\t\t\tif (forceMargin) {\n\t\t\t\t\tmargin = forceMargin;\n\t\t\t\t}\n\n\t\t\t\tiClass = resize\n\t\t\t\t? resize[0] == 'x' ? 'resizingX' : 'resizingY'\n\t\t\t\t: 'dragging';\n\n\t\t\t\tif (resize) {\n\t\t\t\t\t// Calculate the limits for resize\n\t\t\t\t\tif (resizingStart()) {\n\t\t\t\t\t\tminResize = cloneDate(event.end);\n\n\t\t\t\t\t\tif (allDay) {\n\t\t\t\t\t\t\tcopyTime(minResize, event.start);\n\n\t\t\t\t\t\t\tif (minResize >= event.end) {\n\t\t\t\t\t\t\t\tsubtractDay(minResize);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsubtractDuration(minResize, $slotDuration);\n\n\t\t\t\t\t\t\tif (minResize < event.start) {\n\t\t\t\t\t\t\t\tminResize = event.start;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Overwrite the date due to possible discrepancy between calculated date\n\t\t\t\t\t\t\t// and resizer coordinates in browser\n\t\t\t\t\t\t\tdate = event.start;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tminResize = cloneDate(event.start);\n\n\t\t\t\t\t\tif (allDay) {\n\t\t\t\t\t\t\tcopyTime(minResize, event.end);\n\n\t\t\t\t\t\t\tif (minResize <= event.start && !zeroDuration) {\n\t\t\t\t\t\t\t\taddDay(minResize);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\taddDuration(minResize, $slotDuration);\n\n\t\t\t\t\t\t\tif (minResize > event.end) {\n\t\t\t\t\t\t\t\tminResize = event.end;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Overwrite the date due to possible discrepancy between calculated date\n\t\t\t\t\t\t\t// and resizer coordinates in browser\n\t\t\t\t\t\t\tdate = event.end;\n\n\t\t\t\t\t\t\tif (!zeroDuration) {\n\t\t\t\t\t\t\t\tdate = subtractDuration(cloneDate(date), $slotDuration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle zero duration events\n\t\t\t\t\tif (zeroDuration && !allDay) {\n\t\t\t\t\t\textraDuration = $slotDuration;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmove(jsEvent);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction select(jsEvent) {\n\t\tif (!action) {\n\t\t\taction = validJsEvent(jsEvent)\n\t\t\t? $selectable && !listView($view)\n\t\t\t\t? ACTION_SELECT\n\t\t\t\t: ACTION_CLICK\n\t\t\t: ACTION_NO_ACTION;\n\n\t\t\tif (complexAction()) {\n\t\t\t\tcommon(jsEvent);\n\t\t\t\tiClass = 'selecting';\n\t\t\t\tselectStep = allDay ? createDuration({ day: 1 }) : $slotDuration;\n\n\t\t\t\t// Create dummy source event\n\t\t\t\tevent = {\n\t\t\t\t\tallDay,\n\t\t\t\t\tstart: date,\n\t\t\t\t\tend: addDuration(cloneDate(date), selectStep),\n\t\t\t\t\tresourceIds: resource ? [resource.id] : []\n\t\t\t\t};\n\n\t\t\t\tmove(jsEvent);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction noAction() {\n\t\tif (!action) {\n\t\t\taction = ACTION_NO_ACTION;\n\t\t}\n\t}\n\n\tfunction common(jsEvent) {\n\t\twindow.getSelection().removeAllRanges();\n\t\tfromX = toX = jsEvent.clientX;\n\t\tfromY = toY = jsEvent.clientY;\n\t\tlet dayEl = getElementWithPayload(toX, toY);\n\t\t({ allDay, date, resource } = getPayload(dayEl)(toX, toY));\n\n\t\tif (timelineView($view)) {\n\t\t\tbodyEl = clipEl = $_bodyEl;\n\t\t} else {\n\t\t\tbodyEl = ancestor(dayEl, resource ? 4 : 3);\n\t\t\tclipEl = ancestor(dayEl, resource && (dragging() || $datesAboveResources) ? 2 : 1);\n\t\t}\n\n\t\tcalcViewport();\n\n\t\tif (jsEvent.pointerType !== 'mouse') {\n\t\t\t// For touch devices init long press delay\n\t\t\t$$invalidate(1, timer = setTimeout(\n\t\t\t\t() => {\n\t\t\t\t\tif (action) {\n\t\t\t\t\t\tinteracting = true;\n\t\t\t\t\t\tmove(jsEvent);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(selecting()\n\t\t\t\t? $selectLongPressDelay\n\t\t\t\t: $eventLongPressDelay) ?? $longPressDelay\n\t\t\t));\n\t\t}\n\t}\n\n\tfunction move(jsEvent) {\n\t\tif (interacting || jsEvent && jsEvent.pointerType === 'mouse' && distance() >= (selecting() ? $selectMinDistance : $eventDragMinDistance)) {\n\t\t\tinteracting = true;\n\t\t\tunselect(jsEvent);\n\t\t\tset_store_value(_iClass, $_iClass = iClass, $_iClass);\n\n\t\t\tif (!$_iEvents[0]) {\n\t\t\t\tif (selecting()) {\n\t\t\t\t\tcreateIEventSelect();\n\t\t\t\t} else {\n\t\t\t\t\tcreateIEvent(jsEvent, resizing() ? $eventResizeStart : $eventDragStart);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet payload = findPayload(findDayEl());\n\n\t\t\tif (payload) {\n\t\t\t\tlet newAllDay;\n\t\t\t\t({ allDay: newAllDay, date: newDate, resource: newResource } = payload);\n\n\t\t\t\tif (newAllDay === allDay) {\n\t\t\t\t\tlet candidate = copyIEventData({}, $_iEvents[0]);\n\t\t\t\t\tlet constraintFn = $resizeConstraint;\n\t\t\t\t\tdelta = createDuration((newDate - date) / 1000);\n\n\t\t\t\t\tif (resizingStart()) {\n\t\t\t\t\t\t// Resizing start\n\t\t\t\t\t\tcandidate.start = addDuration(cloneDate(event.start), delta);\n\n\t\t\t\t\t\tif (candidate.start > minResize) {\n\t\t\t\t\t\t\tcandidate.start = minResize;\n\t\t\t\t\t\t\tdelta = createDuration((minResize - event.start) / 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcandidate.end = addDuration(cloneDate(event.end), delta);\n\n\t\t\t\t\t\tif (extraDuration) {\n\t\t\t\t\t\t\taddDuration(candidate.end, extraDuration);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (resizing()) {\n\t\t\t\t\t\t\t// Resizing end\n\t\t\t\t\t\t\tif (candidate.end < minResize) {\n\t\t\t\t\t\t\t\tcandidate.end = minResize;\n\t\t\t\t\t\t\t\tdelta = createDuration((minResize - event.end) / 1000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (selecting()) {\n\t\t\t\t\t\t\t// Selecting\n\t\t\t\t\t\t\tif (candidate.end < event.end) {\n\t\t\t\t\t\t\t\tcandidate.start = subtractDuration(candidate.end, selectStep);\n\t\t\t\t\t\t\t\tcandidate.end = event.end;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcandidate.start = event.start;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconstraintFn = $selectConstraint;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Dragging\n\t\t\t\t\t\t\tcandidate.start = addDuration(cloneDate(event.start), delta);\n\n\t\t\t\t\t\t\tif (resource) {\n\t\t\t\t\t\t\t\tcandidate.resourceIds = event.resourceIds.filter(id => id !== resource.id);\n\t\t\t\t\t\t\t\tcandidate.resourceIds.push(newResource.id);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconstraintFn = $dragConstraint;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check constraint\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (constraintFn !== undefined) {\n\t\t\t\t\t\t\tcandidate = copyIEventData(cloneEvent(event), candidate);\n\n\t\t\t\t\t\t\tlet result = constraintFn(selecting()\n\t\t\t\t\t\t\t? createSelectCallbackInfo(candidate, jsEvent)\n\t\t\t\t\t\t\t: createCallbackInfo(candidate, event, jsEvent));\n\n\t\t\t\t\t\t\tif (result === false) {\n\t\t\t\t\t\t\t\t// Revert preview event\n\t\t\t\t\t\t\t\tset_store_value(_iEvents, $_iEvents[0] = copyIEventData($_iEvents[0], event), $_iEvents);\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Update preview event\n\t\t\t\t\t\tset_store_value(_iEvents, $_iEvents[0] = copyIEventData($_iEvents[0], candidate), $_iEvents);\n\t\t\t\t\t} while (0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($dragScroll) {\n\t\t\tlet thresholdY = $slotHeight * 2;\n\t\t\tlet thresholdX = $slotWidth;\n\n\t\t\tanimate(() => {\n\t\t\t\tif (bodyEl) {\n\t\t\t\t\tif (toY < thresholdY) {\n\t\t\t\t\t\twindow.scrollBy(0, max(-10, (toY - thresholdY) / 3));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (toY < bodyRect.top + thresholdY) {\n\t\t\t\t\t\tbodyEl.scrollTop += max(-10, (toY - bodyRect.top - thresholdY) / 3);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (toY > window.innerHeight - thresholdY) {\n\t\t\t\t\t\twindow.scrollBy(0, min(10, (toY - window.innerHeight + thresholdY) / 3));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (toY > bodyRect.bottom - thresholdY) {\n\t\t\t\t\t\tbodyEl.scrollTop += min(10, (toY - bodyRect.bottom + thresholdY) / 3);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (timelineView($view)) {\n\t\t\t\t\t\tif (toX < bodyRect.left + thresholdX) {\n\t\t\t\t\t\t\tbodyEl.scrollLeft += max(-10, (toX - bodyRect.left - thresholdX) / 3);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (toX > bodyRect.right - thresholdX) {\n\t\t\t\t\t\t\tbodyEl.scrollLeft += min(10, (toX - bodyRect.right + thresholdX) / 3);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction handleScroll() {\n\t\tif (complexAction()) {\n\t\t\tcalcViewport();\n\t\t\tmove();\n\t\t}\n\t}\n\n\tfunction handlePointerMove(jsEvent) {\n\t\tif (complexAction() && jsEvent.isPrimary) {\n\t\t\ttoX = jsEvent.clientX;\n\t\t\ttoY = jsEvent.clientY;\n\t\t\tmove(jsEvent);\n\t\t}\n\t}\n\n\tfunction handlePointerUp(jsEvent) {\n\t\tif (selected && $unselectAuto && !($unselectCancel && jsEvent.target.closest($unselectCancel))) {\n\t\t\tunselect(jsEvent);\n\t\t}\n\n\t\tif (action && jsEvent.isPrimary) {\n\t\t\tif (interacting) {\n\t\t\t\tif (selecting()) {\n\t\t\t\t\tselected = true;\n\n\t\t\t\t\tif (isFunction($selectFn)) {\n\t\t\t\t\t\tlet info = createSelectCallbackInfo($_iEvents[0], jsEvent);\n\t\t\t\t\t\t$selectFn(info);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tevent.display = display;\n\t\t\t\t\tlet callback = resizing() ? $eventResizeStop : $eventDragStop;\n\n\t\t\t\t\tif (isFunction(callback)) {\n\t\t\t\t\t\tcallback({\n\t\t\t\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\t\t\t\tjsEvent,\n\t\t\t\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tlet oldEvent = cloneEvent(event);\n\t\t\t\t\tupdateEvent(event, $_iEvents[0]);\n\t\t\t\t\tdestroyIEvent();\n\t\t\t\t\tcallback = resizing() ? $eventResize : $eventDrop;\n\n\t\t\t\t\tif (isFunction(callback)) {\n\t\t\t\t\t\tlet eventRef = event;\n\t\t\t\t\t\tlet info = createCallbackInfo(event, oldEvent, jsEvent);\n\n\t\t\t\t\t\tcallback(assign(info, {\n\t\t\t\t\t\t\trevert() {\n\t\t\t\t\t\t\t\tupdateEvent(eventRef, oldEvent);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (clicking() || selecting()) {\n\t\t\t\t\t// Perform date click\n\t\t\t\t\tif (isFunction($dateClick) && !noDateClick) {\n\t\t\t\t\t\ttoX = jsEvent.clientX;\n\t\t\t\t\t\ttoY = jsEvent.clientY;\n\t\t\t\t\t\tlet dayEl = getElementWithPayload(toX, toY);\n\n\t\t\t\t\t\tif (dayEl) {\n\t\t\t\t\t\t\tlet { allDay, date, resource } = getPayload(dayEl)(toX, toY);\n\n\t\t\t\t\t\t\t$dateClick({\n\t\t\t\t\t\t\t\tallDay,\n\t\t\t\t\t\t\t\tdate: toLocalDate(date),\n\t\t\t\t\t\t\t\tdateStr: toISOString(date),\n\t\t\t\t\t\t\t\tdayEl,\n\t\t\t\t\t\t\t\tjsEvent,\n\t\t\t\t\t\t\t\tview: toViewWithLocalDates($_view),\n\t\t\t\t\t\t\t\tresource\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinteracting = false;\n\t\t\taction = fromX = fromY = toX = toY = event = display = date = newDate = resource = newResource = delta = extraDuration = allDay = set_store_value(_iClass, $_iClass = minResize = selectStep = margin = undefined, $_iClass);\n\t\t\tbodyEl = clipEl = bodyRect = clipRect = undefined;\n\n\t\t\tif (timer) {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\t$$invalidate(1, timer = undefined);\n\t\t\t}\n\t\t}\n\n\t\tnoDateClick = false;\n\t}\n\n\tfunction findDayEl() {\n\t\t// Limit coordinates to viewport\n\t\treturn getElementWithPayload(limit(toX, viewport[0], viewport[1]), limit(toY, viewport[2], viewport[3]));\n\t}\n\n\tfunction findPayload(dayEl) {\n\t\tif (dayEl) {\n\t\t\tlet payload = getPayload(dayEl)(toX, toY);\n\n\t\t\tif (payload.disabled) {\n\t\t\t\tif (!$validRange.end || payload.date < $validRange.end) {\n\t\t\t\t\treturn findPayload(dayEl.nextElementSibling);\n\t\t\t\t}\n\n\t\t\t\tif (!$validRange.start || payload.date > $validRange.start) {\n\t\t\t\t\treturn findPayload(dayEl.previousElementSibling);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn payload;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tfunction calcViewport() {\n\t\tbodyRect = rect(bodyEl);\n\t\tclipRect = rect(clipEl);\n\n\t\tviewport = [\n\t\t\tmax(0, clipRect.left + (timelineView($view) ? 1 : $_dayGrid ? 0 : 8)),\n\t\t\tmin(\n\t\t\t\tdocument.documentElement.clientWidth,\n\t\t\t\tclipRect.left + clipEl.clientWidth\n\t\t\t) - 2,\n\t\t\tmax(\n\t\t\t\t0,\n\t\t\t\tbodyRect.top // top\n\t\t\t),\n\t\t\tmin(document.documentElement.clientHeight, bodyRect.top + bodyEl.clientHeight) - 2\n\t\t]; // bottom\n\t}\n\n\tfunction createIEvent(jsEvent, callback) {\n\t\tif (isFunction(callback)) {\n\t\t\tcallback({\n\t\t\t\tevent: toEventWithLocalDates(event),\n\t\t\t\tjsEvent,\n\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t});\n\t\t}\n\n\t\tdisplay = event.display;\n\t\tevent.display = 'preview';\n\t\tset_store_value(_iEvents, $_iEvents[0] = cloneEvent(event), $_iEvents);\n\n\t\tif (margin !== undefined) {\n\t\t\tset_store_value(_iEvents, $_iEvents[0]._margin = margin, $_iEvents);\n\t\t}\n\n\t\tif (extraDuration) {\n\t\t\taddDuration($_iEvents[0].end, extraDuration);\n\t\t}\n\n\t\tevent.display = 'ghost';\n\t\t_events.set($_events);\n\t}\n\n\tfunction createIEventSelect() {\n\t\tset_store_value(\n\t\t\t_iEvents,\n\t\t\t$_iEvents[0] = {\n\t\t\t\tid: '{select}',\n\t\t\t\tallDay: event.allDay,\n\t\t\t\tstart: event.start,\n\t\t\t\ttitle: '',\n\t\t\t\tdisplay: 'preview',\n\t\t\t\textendedProps: {},\n\t\t\t\tbackgroundColor: $selectBackgroundColor,\n\t\t\t\tresourceIds: event.resourceIds,\n\t\t\t\tclassNames: [],\n\t\t\t\tstyles: []\n\t\t\t},\n\t\t\t$_iEvents\n\t\t);\n\t}\n\n\tfunction destroyIEvent() {\n\t\tset_store_value(_iEvents, $_iEvents[0] = null, $_iEvents);\n\t}\n\n\tfunction updateEvent(target, source) {\n\t\tcopyIEventData(target, source);\n\t\t_events.set($_events);\n\t}\n\n\tfunction createSelectCallbackInfo(event, jsEvent) {\n\t\tlet { start, end } = toEventWithLocalDates(event);\n\n\t\treturn {\n\t\t\tstart,\n\t\t\tend,\n\t\t\tstartStr: toISOString(event.start),\n\t\t\tendStr: toISOString(event.end),\n\t\t\tallDay,\n\t\t\tview: toViewWithLocalDates($_view),\n\t\t\tresource,\n\t\t\tjsEvent\n\t\t};\n\t}\n\n\tfunction createCallbackInfo(event, oldEvent, jsEvent) {\n\t\tlet info;\n\n\t\tif (resizing()) {\n\t\t\tinfo = resizingStart()\n\t\t\t? {\n\t\t\t\t\tstartDelta: delta,\n\t\t\t\t\tendDelta: createDuration(0)\n\t\t\t\t}\n\t\t\t: {\n\t\t\t\t\tstartDelta: createDuration(0),\n\t\t\t\t\tendDelta: delta\n\t\t\t\t};\n\t\t} else {\n\t\t\tinfo = {\n\t\t\t\tdelta,\n\t\t\t\toldResource: resource !== newResource ? resource : undefined,\n\t\t\t\tnewResource: resource !== newResource ? newResource : undefined\n\t\t\t};\n\t\t}\n\n\t\tassign(info, {\n\t\t\tevent: toEventWithLocalDates(event),\n\t\t\toldEvent: toEventWithLocalDates(oldEvent),\n\t\t\tview: toViewWithLocalDates($_view),\n\t\t\tjsEvent\n\t\t});\n\n\t\treturn info;\n\t}\n\n\tfunction distance() {\n\t\treturn Math.sqrt(Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2));\n\t}\n\n\tfunction dragging() {\n\t\treturn action === ACTION_DRAG;\n\t}\n\n\tfunction resizing() {\n\t\treturn action === ACTION_RESIZE_END || resizingStart();\n\t}\n\n\tfunction resizingStart() {\n\t\treturn action === ACTION_RESIZE_START;\n\t}\n\n\tfunction clicking() {\n\t\treturn action === ACTION_CLICK;\n\t}\n\n\tfunction selecting() {\n\t\treturn action === ACTION_SELECT;\n\t}\n\n\tfunction complexAction() {\n\t\treturn action && action < ACTION_CLICK;\n\t}\n\n\tfunction unselect(jsEvent) {\n\t\tif (selected) {\n\t\t\tselected = false;\n\t\t\tdestroyIEvent();\n\n\t\t\tif (isFunction($unselectFn)) {\n\t\t\t\t$unselectFn({\n\t\t\t\t\tjsEvent,\n\t\t\t\t\tview: toViewWithLocalDates($_view)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction noClick() {\n\t\tnoDateClick = true;\n\t}\n\n\t// Clear selection on view params change\n\t_view.subscribe(unselect);\n\n\tfunction handleTouchStart(jsEvent) {\n\t\tif (complexAction()) {\n\t\t\tlet target = jsEvent.target;\n\t\t\tlet stops = [];\n\t\t\tlet stop = () => runAll(stops);\n\t\t\tstops.push(listen$1(target, 'touchmove', createPreventDefaultHandler(() => interacting)));\n\t\t\tstops.push(listen$1(target, 'touchend', stop));\n\t\t\tstops.push(listen$1(target, 'touchcancel', stop));\n\t\t}\n\t}\n\n\tfunction touchmove_handler(event) {\n\t\tbubble.call(this, $$self, event);\n\t}\n\n\tconst contextmenu_handler = () => timer;\n\n\treturn [\n\t\thandleScroll,\n\t\ttimer,\n\t\t_iEvents,\n\t\t_iClass,\n\t\t_events,\n\t\t_view,\n\t\t_dayGrid,\n\t\t_draggable,\n\t\t_bodyEl,\n\t\tdatesAboveResources,\n\t\tdateClick,\n\t\tdragConstraint,\n\t\tdragScroll,\n\t\teventDragMinDistance,\n\t\teventDragStart,\n\t\teventDragStop,\n\t\teventDrop,\n\t\teventLongPressDelay,\n\t\teventResizeStart,\n\t\teventResizeStop,\n\t\teventResize,\n\t\tlongPressDelay,\n\t\tresizeConstraint,\n\t\tselectable,\n\t\tselectFn,\n\t\tselectBackgroundColor,\n\t\tselectConstraint,\n\t\tselectLongPressDelay,\n\t\tselectMinDistance,\n\t\tslotDuration,\n\t\tslotHeight,\n\t\tslotWidth,\n\t\tunselectFn,\n\t\tunselectAuto,\n\t\tunselectCancel,\n\t\tvalidRange,\n\t\tview,\n\t\thandlePointerMove,\n\t\thandlePointerUp,\n\t\tcomplexAction,\n\t\thandleTouchStart,\n\t\tdrag,\n\t\tselect,\n\t\tnoAction,\n\t\tunselect,\n\t\tnoClick,\n\t\ttouchmove_handler,\n\t\tcontextmenu_handler\n\t];\n}\n\nclass Action extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance$3,\n\t\t\tcreate_fragment$3,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tdrag: 41,\n\t\t\t\tselect: 42,\n\t\t\t\tnoAction: 43,\n\t\t\t\thandleScroll: 0,\n\t\t\t\tunselect: 44,\n\t\t\t\tnoClick: 45\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1, -1, -1, -1]\n\t\t);\n\t}\n\n\tget drag() {\n\t\treturn this.$$.ctx[41];\n\t}\n\n\tget select() {\n\t\treturn this.$$.ctx[42];\n\t}\n\n\tget noAction() {\n\t\treturn this.$$.ctx[43];\n\t}\n\n\tget handleScroll() {\n\t\treturn this.$$.ctx[0];\n\t}\n\n\tget unselect() {\n\t\treturn this.$$.ctx[44];\n\t}\n\n\tget noClick() {\n\t\treturn this.$$.ctx[45];\n\t}\n}\n\n/* packages/interaction/src/Pointer.svelte generated by Svelte v4.2.19 */\n\nfunction create_fragment$2(ctx) {\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc: noop,\n\t\tm(target, anchor) {\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\tlisten(window, \"pointermove\", /*handlePointerMove*/ ctx[3]),\n\t\t\t\t\tlisten(window, \"scroll\", /*handleScroll*/ ctx[0])\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp: noop,\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction validEvent(jsEvent) {\n\treturn jsEvent.isPrimary && jsEvent.pointerType === 'mouse';\n}\n\nfunction instance$2($$self, $$props, $$invalidate) {\n\tlet $_iEvents;\n\tlet $slotDuration;\n\tlet { _iEvents, slotDuration } = getContext('state');\n\tcomponent_subscribe($$self, _iEvents, value => $$invalidate(4, $_iEvents = value));\n\tcomponent_subscribe($$self, slotDuration, value => $$invalidate(7, $slotDuration = value));\n\tlet x = 0, y = 0;\n\n\tfunction move() {\n\t\tlet dayEl = getElementWithPayload(x, y);\n\n\t\tif (dayEl) {\n\t\t\tlet { allDay, date, resource, disabled } = getPayload(dayEl)(x, y);\n\n\t\t\tif (!disabled) {\n\t\t\t\tlet idx = allDay ? 2 : 1;\n\n\t\t\t\tif (!$_iEvents[idx]) {\n\t\t\t\t\tcreatePointerEvent(idx);\n\t\t\t\t}\n\n\t\t\t\tset_store_value(_iEvents, $_iEvents[idx].start = date, $_iEvents);\n\t\t\t\tset_store_value(_iEvents, $_iEvents[idx].end = addDuration(cloneDate(date), $slotDuration), $_iEvents);\n\t\t\t\tset_store_value(_iEvents, $_iEvents[idx].resourceIds = resource ? [resource.id] : [], $_iEvents);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tremovePointerEvent();\n\t}\n\n\tfunction handleScroll() {\n\t\tmove();\n\t}\n\n\tfunction handlePointerMove(jsEvent) {\n\t\tif (validEvent(jsEvent)) {\n\t\t\tx = jsEvent.clientX;\n\t\t\ty = jsEvent.clientY;\n\t\t\tmove();\n\t\t}\n\t}\n\n\tfunction createPointerEvent(idx) {\n\t\tset_store_value(\n\t\t\t_iEvents,\n\t\t\t$_iEvents[idx] = {\n\t\t\t\tid: '{pointer}',\n\t\t\t\ttitle: '',\n\t\t\t\tdisplay: 'pointer',\n\t\t\t\textendedProps: {},\n\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\tclassNames: [],\n\t\t\t\tstyles: []\n\t\t\t},\n\t\t\t$_iEvents\n\t\t);\n\t}\n\n\tfunction removePointerEvent() {\n\t\tif ($_iEvents[1]) {\n\t\t\tset_store_value(_iEvents, $_iEvents[1] = null, $_iEvents);\n\t\t}\n\n\t\tif ($_iEvents[2]) {\n\t\t\tset_store_value(_iEvents, $_iEvents[2] = null, $_iEvents);\n\t\t}\n\t}\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$_iEvents*/ 16) {\n\t\t\tif ($_iEvents[0]) {\n\t\t\t\tremovePointerEvent();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [handleScroll, _iEvents, slotDuration, handlePointerMove, $_iEvents];\n}\n\nclass Pointer extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$2, create_fragment$2, safe_not_equal, { handleScroll: 0 });\n\t}\n\n\tget handleScroll() {\n\t\treturn this.$$.ctx[0];\n\t}\n}\n\n/* packages/interaction/src/Resizer.svelte generated by Svelte v4.2.19 */\n\nfunction create_if_block$1(ctx) {\n\tlet div;\n\tlet div_class_value;\n\tlet mounted;\n\tlet dispose;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tattr(div, \"class\", div_class_value = \"\" + (/*$theme*/ ctx[2].resizer + (/*start*/ ctx[0] ? ' ' + /*$theme*/ ctx[2].start : '')));\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(div, \"pointerdown\", /*pointerdown_handler*/ ctx[11]);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty & /*$theme, start*/ 5 && div_class_value !== (div_class_value = \"\" + (/*$theme*/ ctx[2].resizer + (/*start*/ ctx[0] ? ' ' + /*$theme*/ ctx[2].start : '')))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(div);\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\nfunction create_fragment$1(ctx) {\n\tlet if_block_anchor;\n\tlet if_block = /*resizable*/ ctx[1] && create_if_block$1(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tif (if_block) if_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tif (if_block) if_block.m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tif (/*resizable*/ ctx[1]) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block$1(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = null;\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\tif (if_block) if_block.d(detaching);\n\t\t}\n\t};\n}\n\nfunction instance$1($$self, $$props, $$invalidate) {\n\tlet $editable;\n\tlet $eventDurationEditable;\n\tlet $eventResizableFromStart;\n\tlet $theme;\n\tlet { event } = $$props;\n\tlet { start = false } = $$props;\n\tlet { theme, eventDurationEditable, eventResizableFromStart, editable } = getContext('state');\n\tcomponent_subscribe($$self, theme, value => $$invalidate(2, $theme = value));\n\tcomponent_subscribe($$self, eventDurationEditable, value => $$invalidate(9, $eventDurationEditable = value));\n\tcomponent_subscribe($$self, eventResizableFromStart, value => $$invalidate(10, $eventResizableFromStart = value));\n\tcomponent_subscribe($$self, editable, value => $$invalidate(8, $editable = value));\n\tlet resizable;\n\n\tfunction pointerdown_handler(event) {\n\t\tbubble.call(this, $$self, event);\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('event' in $$props) $$invalidate(7, event = $$props.event);\n\t\tif ('start' in $$props) $$invalidate(0, start = $$props.start);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*event, start, $eventResizableFromStart, $eventDurationEditable, $editable*/ 1921) {\n\t\t\t$$invalidate(1, resizable = !bgEvent(event.display) && !helperEvent(event.display) && (!start || $eventResizableFromStart) && ((event.durationEditable ?? $eventDurationEditable) || (event.editable ?? $editable)));\n\t\t}\n\t};\n\n\treturn [\n\t\tstart,\n\t\tresizable,\n\t\t$theme,\n\t\ttheme,\n\t\teventDurationEditable,\n\t\teventResizableFromStart,\n\t\teditable,\n\t\tevent,\n\t\t$editable,\n\t\t$eventDurationEditable,\n\t\t$eventResizableFromStart,\n\t\tpointerdown_handler\n\t];\n}\n\nclass Resizer extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance$1, create_fragment$1, safe_not_equal, { event: 7, start: 0 });\n\t}\n}\n\n/* packages/interaction/src/Auxiliary.svelte generated by Svelte v4.2.19 */\n\nfunction create_if_block(ctx) {\n\tlet pointer_1;\n\tlet current;\n\tlet pointer_1_props = {};\n\tpointer_1 = new Pointer({ props: pointer_1_props });\n\t/*pointer_1_binding*/ ctx[16](pointer_1);\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(pointer_1.$$.fragment);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(pointer_1, target, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tconst pointer_1_changes = {};\n\t\t\tpointer_1.$set(pointer_1_changes);\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(pointer_1.$$.fragment, local);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(pointer_1.$$.fragment, local);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\t/*pointer_1_binding*/ ctx[16](null);\n\t\t\tdestroy_component(pointer_1, detaching);\n\t\t}\n\t};\n}\n\nfunction create_fragment(ctx) {\n\tlet action;\n\tlet t;\n\tlet if_block_anchor;\n\tlet current;\n\tlet action_props = {};\n\taction = new Action({ props: action_props });\n\t/*action_binding*/ ctx[15](action);\n\tlet if_block = /*$pointer*/ ctx[1] && create_if_block(ctx);\n\n\treturn {\n\t\tc() {\n\t\t\tcreate_component(action.$$.fragment);\n\t\t\tt = space();\n\t\t\tif (if_block) if_block.c();\n\t\t\tif_block_anchor = empty();\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tmount_component(action, target, anchor);\n\t\t\tinsert(target, t, anchor);\n\t\t\tif (if_block) if_block.m(target, anchor);\n\t\t\tinsert(target, if_block_anchor, anchor);\n\t\t\tcurrent = true;\n\t\t},\n\t\tp(ctx, [dirty]) {\n\t\t\tconst action_changes = {};\n\t\t\taction.$set(action_changes);\n\n\t\t\tif (/*$pointer*/ ctx[1]) {\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.p(ctx, dirty);\n\n\t\t\t\t\tif (dirty & /*$pointer*/ 2) {\n\t\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif_block = create_if_block(ctx);\n\t\t\t\t\tif_block.c();\n\t\t\t\t\ttransition_in(if_block, 1);\n\t\t\t\t\tif_block.m(if_block_anchor.parentNode, if_block_anchor);\n\t\t\t\t}\n\t\t\t} else if (if_block) {\n\t\t\t\tgroup_outros();\n\n\t\t\t\ttransition_out(if_block, 1, 1, () => {\n\t\t\t\t\tif_block = null;\n\t\t\t\t});\n\n\t\t\t\tcheck_outros();\n\t\t\t}\n\t\t},\n\t\ti(local) {\n\t\t\tif (current) return;\n\t\t\ttransition_in(action.$$.fragment, local);\n\t\t\ttransition_in(if_block);\n\t\t\tcurrent = true;\n\t\t},\n\t\to(local) {\n\t\t\ttransition_out(action.$$.fragment, local);\n\t\t\ttransition_out(if_block);\n\t\t\tcurrent = false;\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) {\n\t\t\t\tdetach(t);\n\t\t\t\tdetach(if_block_anchor);\n\t\t\t}\n\n\t\t\t/*action_binding*/ ctx[15](null);\n\t\t\tdestroy_component(action, detaching);\n\t\t\tif (if_block) if_block.d(detaching);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet $_interaction;\n\tlet $_bodyEl;\n\tlet $theme;\n\tlet $_draggable;\n\tlet $_iClasses;\n\tlet $editable;\n\tlet $eventStartEditable;\n\tlet $pointer;\n\tlet { theme, editable, eventStartEditable, pointer, _bodyEl, _interaction, _iClasses, _draggable } = getContext('state');\n\tcomponent_subscribe($$self, theme, value => $$invalidate(11, $theme = value));\n\tcomponent_subscribe($$self, editable, value => $$invalidate(13, $editable = value));\n\tcomponent_subscribe($$self, eventStartEditable, value => $$invalidate(14, $eventStartEditable = value));\n\tcomponent_subscribe($$self, pointer, value => $$invalidate(1, $pointer = value));\n\tcomponent_subscribe($$self, _bodyEl, value => $$invalidate(10, $_bodyEl = value));\n\tcomponent_subscribe($$self, _interaction, value => $$invalidate(0, $_interaction = value));\n\tcomponent_subscribe($$self, _iClasses, value => $$invalidate(17, $_iClasses = value));\n\tcomponent_subscribe($$self, _draggable, value => $$invalidate(12, $_draggable = value));\n\tset_store_value(_interaction, $_interaction.resizer = Resizer, $_interaction);\n\n\tfunction bodyScrollHandler() {\n\t\tfor (let component of Object.values($_interaction)) {\n\t\t\tcomponent?.handleScroll?.();\n\t\t}\n\t}\n\n\tfunction action_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\t$_interaction.action = $$value;\n\t\t\t_interaction.set($_interaction);\n\t\t});\n\t}\n\n\tfunction pointer_1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\t$_interaction.pointer = $$value;\n\t\t\t_interaction.set($_interaction);\n\t\t});\n\t}\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty & /*$eventStartEditable, $editable*/ 24576) {\n\t\t\tset_store_value(_draggable, $_draggable = event => (event.startEditable ?? $eventStartEditable) || (event.editable ?? $editable), $_draggable);\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$theme, $_draggable*/ 6144) {\n\t\t\tset_store_value(\n\t\t\t\t_iClasses,\n\t\t\t\t$_iClasses = (className, event) => {\n\t\t\t\t\tlet { display } = event;\n\n\t\t\t\t\treturn helperEvent(display)\n\t\t\t\t\t? [$theme[display]]\n\t\t\t\t\t: !bgEvent(display) && $_draggable(event)\n\t\t\t\t\t\t? [$theme.draggable]\n\t\t\t\t\t\t: [];\n\t\t\t\t},\n\t\t\t\t$_iClasses\n\t\t\t);\n\t\t}\n\n\t\tif ($$self.$$.dirty & /*$_bodyEl*/ 1024) {\n\t\t\tif ($_bodyEl) {\n\t\t\t\tlisten$1($_bodyEl, 'scroll', bodyScrollHandler);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\t$_interaction,\n\t\t$pointer,\n\t\ttheme,\n\t\teditable,\n\t\teventStartEditable,\n\t\tpointer,\n\t\t_bodyEl,\n\t\t_interaction,\n\t\t_iClasses,\n\t\t_draggable,\n\t\t$_bodyEl,\n\t\t$theme,\n\t\t$_draggable,\n\t\t$editable,\n\t\t$eventStartEditable,\n\t\taction_binding,\n\t\tpointer_1_binding\n\t];\n}\n\nclass Auxiliary extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\t\tinit(this, options, instance, create_fragment, safe_not_equal, {});\n\t}\n}\n\nvar index = {\n    createOptions(options) {\n        options.dateClick = undefined;\n        options.dragConstraint = undefined;\n        options.dragScroll = true;\n        options.editable = false;\n        options.eventDragMinDistance = 5;\n        options.eventDragStart = undefined;\n        options.eventDragStop = undefined;\n        options.eventDrop = undefined;\n        options.eventDurationEditable = true;\n        options.eventLongPressDelay = undefined;\n        options.eventResizableFromStart = false;\n        options.eventResizeStart = undefined;\n        options.eventResizeStop = undefined;\n        options.eventResize = undefined;\n        options.eventStartEditable = true;\n        options.longPressDelay = 1000;\n        options.pointer = false;\n        options.resizeConstraint = undefined;\n        options.select = undefined;\n        options.selectBackgroundColor = undefined;  // ec option\n        options.selectConstraint = undefined;\n        options.selectLongPressDelay = undefined;\n        options.selectMinDistance = 5;\n        options.unselect = undefined;\n        options.unselectAuto = true;\n        options.unselectCancel = '';\n        options.theme.draggable = 'ec-draggable';\n        options.theme.ghost = 'ec-ghost';\n        options.theme.preview = 'ec-preview';\n        options.theme.pointer = 'ec-pointer';\n        options.theme.resizer = 'ec-resizer';\n        options.theme.start = 'ec-start';\n        options.theme.dragging = 'ec-dragging';\n        options.theme.resizingY = 'ec-resizing-y';\n        options.theme.resizingX = 'ec-resizing-x';\n        options.theme.selecting = 'ec-selecting';\n    },\n\n    createStores(state) {\n        state._draggable = writable(noop$1);\n        state._auxiliary.update($_auxiliary => [...$_auxiliary, Auxiliary]);\n    }\n};\n\nexport { index as default };\n","import Calendar from '@event-calendar/core';\nimport DayGrid from '@event-calendar/day-grid';\nimport List from '@event-calendar/list';\nimport TimeGrid from '@event-calendar/time-grid';\nimport ResourceTimeGrid from '@event-calendar/resource-time-grid';\nimport ResourceTimeline from '@event-calendar/resource-timeline';\nimport Interaction from '@event-calendar/interaction';\nimport '@event-calendar/core/index.css';\n\nexport default class extends Calendar {\n    constructor(el, options) {\n        super({\n            target: el,\n            props: {\n                plugins: [DayGrid, List, TimeGrid, ResourceTimeGrid, ResourceTimeline, Interaction],\n                options\n            }\n        });\n    }\n}\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","_len","arguments","length","callbacks","Array","_key","callback","undefined","unsub","unsubscribe","get_store_value","value","_","component_subscribe","component","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","tar","src","k","assign","slice","get_slot_changes","dirty","lets","merged","len","Math","max","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","set_store_value","ret","set","action_destroyer","action_result","destroy","globals","window","globalThis","global","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","stop_propagation","stopPropagation","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_data","set_style","key","important","style","removeProperty","setProperty","construct_svelte_component","props","current_component","set_current_component","get_current_component","Error","onMount","on_mount","afterUpdate","after_update","createEventDispatcher","type","detail","cancelable","bubbles","CustomEvent","custom_event","defaultPrevented","getContext","context","get","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","tick","add_render_callback","seen_callbacks","Set","flushidx","saved_component","update","e","pop","has","add","clear","fragment","before_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","ensure_array_like","array_like_or_iterator","from","outro_and_destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","next","get_context","n","old_indexes","new_blocks","new_lookup","Map","deltas","updates","child_ctx","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","create_component","mount_component","new_on_destroy","map","filter","destroy_component","filtered","targets","indexOf","flush_render_callbacks","init","instance","create_fragment","not_equal","append_styles","parent_component","bound","on_disconnect","skip_bound","root","ready","fill","make_dirty","hydrate","nodes","childNodes","children","l","intro","SvelteComponent","$$set","$destroy","$on","index","splice","$set","obj","keys","subscriber_queue","readable","start","writable","stop","subscribers","new_value","run_queue","subscriber","size","derived","stores","initial_value","single","isArray","stores_array","every","Boolean","auto","started","values","pending","cleanup","sync","result","unsubscribers","keyEnter","preventDefault","setContent","content","actions","innerText","domNodes","replaceChildren","html","innerHTML","outsideEvent","handlePointerDown","jsEvent","contains","dispatchEvent","DAY_IN_SECONDS","createDate","input","Date","_fromLocalDate","str","parts","match","UTC","Number","_fromISOString","createDuration","seconds","exp","part","split","parseInt","pow","hours","getUTCHours","minutes","getUTCMinutes","getUTCSeconds","weeks","week","years","year","months","month","days","day","hour","minute","second","inWeeks","cloneDate","date","getTime","addDuration","duration","x","setUTCFullYear","getUTCFullYear","getUTCMonth","setUTCMonth","subtractDay","setUTCDate","getUTCDate","setUTCSeconds","subtractDuration","addDay","setMidnight","setUTCHours","toLocalDate","toISOString","substring","datesEqual","date1","dates2","date2","prevClosestDay","diff","getUTCDay","noTimePart","copyTime","toDate","fromDate","toSeconds","nextDate","prevDate","hiddenDays","includes","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","object","floor","ceil","min","isFunction","runAll","identity","debounce","handle","queueStore","queue","flushDebounce","task","tasks","setTimeout","payloadProp","Symbol","setPayload","payload","getPayload","tag","className","attrs","el","rect","getBoundingClientRect","ancestor","up","parentElement","height","getElementWithPayload","y","elementsFromPoint","shadowRoot","shadowEl","toViewWithLocalDates","view","currentStart","currentEnd","activeStart","activeEnd","listView","startsWith","timelineView","eventId","createEvents","id","String","resourceIds","toArrayProp","allDay","end","title","editable","startEditable","durationEditable","display","extendedProps","backgroundColor","color","textColor","classNames","styles","propName","createEventSources","source","events","url","trimEnd","method","toUpperCase","extraParams","createEventChunk","chunk","zeroDuration","sortEventChunks","chunks","sort","createEventContent","displayEventEnd","eventContent","theme","_intlEventTime","_view","timeText","formatRange","toEventWithLocalDates","createTimeElement","eventTitle","eventTime","createEventClasses","eventClassNames","_cloneEvent","cloneEvent","dateFn","prepareEventChunks","longChunks","prevChunk","dates","sorted","maxEnd","at","prev","repositionEvent","top","bottom","margin","longChunk","offset","runReposition","refs","ref","reposition","eventIntersects","resources","some","resource","helperEvent","previewEvent","ghostEvent","pointerEvent","bgEvent","btnTextDay","btnText","btnTextWeek","btnTextMonth","btnTextYear","period","themeView","createDateRange","outsideRange","range","limitToRange","createResources","_createResources","level","flat","item","createResource","expanded","hidden","eventBackgroundColor","eventTextColor","resourceBackgroundColor","findResource","resourceTextColor","find","intl","locale","format","_ref","$locale","$format","Intl","DateTimeFormat","intlRange","_ref2","formatRangeToParts","sources","processed","_getParts","viewResources","state","filterResourcesWithEvents","_events","_activeRange","_ref3","$resources","$filterResourcesWithEvents","$_events","$_activeRange","createTimes","$slotDuration","$slotLabelInterval","$_slotTimeLimits","$_intlSlotLabel","times","label","showAll","createSlotTimeLimits","$slotMinTime","$slotMaxTime","$flexibleSlotTimeLimits","$_viewDates","min$1","max$1","minMin","maxMax","eventFilter","loop","minStart","State","constructor","plugins","allDayContent","allDaySlot","buttonText","today","customButtons","datesSet","dayHeaderFormat","weekday","dayHeaderAriaLabelFormat","dateStyle","eventAllUpdated","eventClick","eventColor","eventDidMount","eventMouseEnter","eventMouseLeave","eventSources","eventTimeFormat","filterEventsWithResources","firstDay","flexibleSlotTimeLimits","headerToolbar","center","highlightedDates","lazyFetching","loading","nowIndicator","resourceLabelContent","resourceLabelDidMount","selectable","scrollTime","slotDuration","slotEventOverlap","slotHeight","slotLabelInterval","slotLabelFormat","slotMaxTime","slotMinTime","slotWidth","active","bgEvents","body","button","buttonGroup","calendar","compact","dayHead","disabled","eventBody","extra","header","hiddenScroll","highlight","icon","line","lines","otherMonth","sidebar","sidebarTitle","time","toolbar","weekdays","withScroll","titleFormat","validRange","viewDidMount","views","plugin","createOptions","parsers","createParsers","parseOpts","option","entries","_queue","_queue2","_tasks","_auxiliary","_dayGrid","$view","_currentRange","_ref5","$date","$duration","$firstDay","currentRange","_ref4","$_currentRange","$_dayGrid","nextClosestDay","start2","activeRange","_fetchedRange","abortController","fetching","debounceHandle","$events","$eventSources","$_fetchedRange","$lazyFetching","$loading","abort","AbortController","stopLoading","failure","success","concat","startStr","endStr","params","URLSearchParams","headers","fetch","signal","credentials","response","json","catch","_now","interval","setInterval","clearInterval","_today","$_now","_intlSlotLabel","_intlDayHeader","_intlDayHeaderAL","_intlTitle","_bodyEl","_scrollable","_viewTitle","_ref7","$_intlTitle","viewTitle","_viewDates","_ref6","$hiddenDays","viewDates","args","createView","_viewComponent","_interaction","_iEvents","_iClasses","_iClass","_set","validKey","_get","createStores","defOpts","mergeOpts","opts","filterOpts","rest","newView","_len2","_key2","override","hasOwnProperty","get_each_context$2","create_if_block_5","button_1","t","button_1_class_value","mounted","dispose","t_value","click_handler_1","listen$1","new_ctx","create_if_block_4","setContent_action","click","apply","create_if_block_3","create_if_block_2","i_class_value","button_1_aria_label_value","button_1_title_value","create_if_block_1","create_if_block$1","h2","h2_class_value","create_each_block$2","if_block_anchor","select_block_type","current_block_type","if_block","create_fragment$3","each_1_anchor","each_value","each_blocks","noop$1","instance$3","$$self","$$props","$$invalidate","$validRange","$theme","$_viewTitle","$buttonText","$customButtons","buttons","prevDisabled","nextDisabled","todayDisabled","running","test","currentDate","click_handler","Buttons","super","get_each_context$1","get_each_context_1","create_else_block","buttons_1","current","buttons_1_changes","create_if_block","div","div_class_value","create_each_block_1","current_block_type_index","if_block_creators","if_blocks","previous_block_index","create_each_block$1","each_value_1","out","create_fragment$2","nav","nav_class_value","_ref8","instance$2","$headerToolbar","sections","group","Toolbar","get_each_context","switch_instance","switch_instance_anchor","switch_value","old_component","create_fragment$1","_ref9","instance$1","$_view","$datesSet","$_auxiliary","runDatesSet","t0","div_role_value","t1","auxiliary","Auxiliary","$_bodyEl","$_scrollable","$_queue2","$_queue","$_interaction","$_iClass","$height","$_viewComponent","prevOptions","setOption","recheckScrollable","scrollHeight","clientHeight","idx","findIndex","action","unselect","dayEl","info","Calendar","getOption","refetchEvents","getEvents","getEventById","addEvent","updateEvent","removeEventById","getView","dateFromPoint","get_each_context$4","create_each_block$4","span","span_aria_label_value","create_fragment$6","div2","div0","div0_class_value","div1","div1_class_value","div2_class_value","instance$5","$_days","$_intlDayHeaderAL","$_intlDayHeader","_days","create_fragment$5","article","switch_instance0","switch_instance1","article_role_value","article_tabindex_value","resizer","switch_props","switch_value_1","switch_props_1","switch_instance0_changes","switch_instance1_changes","instance$4","$eventClick","$_hiddenEvents","$dayMaxEvents","$_popupDate","$eventAllUpdated","$eventDidMount","$_intlEventTime","$eventContent","$displayEventEnd","$eventClassNames","$_iClasses","$eventTextColor","$eventColor","$eventBackgroundColor","$eventMouseEnter","$eventMouseLeave","classes","inPopup","dayMaxEvents","_hiddenEvents","_popupDate","onclick","createHandler","bgColor","txtColor","marginTop","_margin","_dates","join","interaction","resize","drag","h","firstElementChild","lastElementChild","nextElementSibling","footHeight","hiddenEvents","hide","$$value","get_each_context$3","create_each_block$3","key_1","Event","event_changes","create_fragment$4","time_datetime_value","a_aria_label_value","t2","each_1_lookup","close","popup","$_popupChunks","$_intlDayPopover","_intlDayPopover","_popupChunks","left","bodyEl","popupRect","dayRect","bodyRect","width","right","position","noClick","Popup","create_if_block_7","span_class_value","weekNumber","create_if_block_6","if_block1_anchor","show_if_1","show_if","if_block0","if_block1","preview","assign_event","unassign_event","event_props","div4","t3","t4","t5","div3","div3_class_value","div4_class_value","if_block2","if_block3","if_block4","if_block5","dayFoot","select","$weekNumberContent","$weekNumbers","$moreLinkContent","$highlightedDates","$currentDate","$_today","$_intlDayCell","dayChunks","dayBgChunks","isToday","bgChunks","iChunks","moreLinkContent","weekNumbers","weekNumberContent","_intlDayCell","showPopup","showWeekNumber","moreLink","setPopupChunks","nextDay","bgChunk","num","yearStart","getWeekNumber","padStart","assign_day","unassign_day","day_props","Day","day_changes","$_iEvents","$filterEventsWithResources","Week","week_changes","uniform","j","Header","Body","dayCellFormat","dayPopoverFormat","dayGridMonth","View","eventTag","noAction","h4","time0","time1","time1_class_value","setContent_action_1","h4_class_value","daySide","$_intlListDay","$_intlListDaySide","_intlListDay","_intlListDaySide","datetime","noEvents","$noEventsClick","$noEventsContent","noEventsClick","noEventsContent","listDay","listWeek","listMonth","listYear","listDayFormat","listDaySideFormat","get_lines_slot_changes","get_lines_slot_context","get_each_context$5","create_each_block$5","time_1","time_1_class_value","time_1_datetime_value","create_fragment$8","lines_slot_template","lines_slot","default_slot_template","default","default_slot","instance$8","$allDayContent","$_times","allDayText","$$slots","slots","_times","createAllDayContent","Section","create_default_slot$1","create_lines_slot","create_fragment$7","section","section_changes","instance$7","$slotHeight","$scrollTime","_slotTimeLimits","scrollTop","instance$6","$slotEventOverlap","step","maxHeight","column","columns","Event$1","NowIndicator","get_each_context_1$2","create_each_block_1$2","create_if_block_1$1","create_if_block_2$1","create_if_block$2","nowindicator","$nowIndicator","resourceFilter","groupEventChunks","Day$1","get_each_context_1$1","create_each_block_1$1","time_aria_label_value","create_default_slot_2","create_default_slot_1","create_default_slot","body_changes","$allDaySlot","timeGridDay","timeGridWeek","slotTimeLimits","$resourceLabelDidMount","$resourceLabelContent","dispatch","ariaLabel","get_each_context_4","get_each_context_2","get_each_context_3","get_each_context_5","get_each_context_6","create_else_block_2","Label","label_changes","each_value_6","create_each_block_6","create_else_block_1","select_block_type_1","create_each_block_5","each_value_5","each_value_4","create_each_block_4","each_value_2","create_each_block_2","create_each_block_3","each_value_3","select_block_type_2","$_viewResources","$datesAboveResources","loops","datesAboveResources","_viewResources","resourceLabels","text_handler","resourceTimeGridDay","resourceTimeGridWeek","TimeGrid","expander","create_if_block$4","button_class_value","create_else_block$1","toggle","expand","child","Expander","create_if_block$3","expander_changes","$_headerEl","$_sidebarEl","$_resHs","$_nestedResources","_headerEl","_resHs","_sidebarEl","_nestedResources","titleHeight","Sidebar","time_1_aria_label_value","$_dayTimes","_dayTimes","$_dayTimeLimits","filteredChunks","prevDayEnd","getSlotTimeLimits","dayStart","dayEnd","$slotWidth","_resource","dayChunk","each_blocks_1","each0_lookup","each1_lookup","get_key_1","_dayTimeLimits","pointerIdx","chunkIntersects","Days","days_changes","scrollLeft","scrollToTime","main","container","resourceTimelineDay","resourceTimelineWeek","resourceTimelineMonth","dayTimeLimits","dayTimes","nestedResources","busy","limit","minLimit","maxLimit","window_1","createPreventDefaultHandler","passive","copyIEventData","validJsEvent","isPrimary","pointerType","condition","$unselectFn","$selectBackgroundColor","$dateClick","$eventDrop","$eventResize","$eventDragStop","$eventResizeStop","$selectFn","$unselectCancel","$unselectAuto","$dragScroll","$dragConstraint","$selectConstraint","$resizeConstraint","$eventDragStart","$eventResizeStart","$eventDragMinDistance","$selectMinDistance","$longPressDelay","$eventLongPressDelay","$selectLongPressDelay","$selectable","$_draggable","interacting","newDate","newResource","fromX","fromY","toX","toY","clipEl","clipRect","delta","iClass","minResize","selectStep","selected","noDateClick","timer","viewport","extraDuration","_draggable","dateClick","dragConstraint","dragScroll","eventDragMinDistance","eventDragStart","eventDragStop","eventDrop","eventLongPressDelay","eventResizeStart","eventResizeStop","eventResize","longPressDelay","resizeConstraint","selectFn","selectBackgroundColor","selectConstraint","selectLongPressDelay","selectMinDistance","unselectFn","unselectAuto","unselectCancel","common","getSelection","removeAllRanges","clientX","clientY","calcViewport","move","selecting","sqrt","createIEvent","resizing","findPayload","newAllDay","candidate","constraintFn","resizingStart","createSelectCallbackInfo","createCallbackInfo","thresholdY","thresholdX","scrollBy","innerHeight","requestAnimationFrame","previousElementSibling","documentElement","clientWidth","destroyIEvent","oldEvent","startDelta","endDelta","oldResource","complexAction","closest","eventRef","revert","dateStr","clearTimeout","stops","eventToDrag","forceDate","forceMargin","contextmenu_handler","Action","handleScroll","createPointerEvent","removePointerEvent","validEvent","Pointer","$editable","$eventDurationEditable","$eventResizableFromStart","resizable","eventDurationEditable","eventResizableFromStart","Resizer","pointer_1","$eventStartEditable","$pointer","eventStartEditable","pointer","bodyScrollHandler","draggable","ghost","dragging","resizingY","resizingX","DayGrid","List","ResourceTimeGrid","ResourceTimeline","Interaction"],"mappings":";;;;0CACO,SAASA,IAAO,CAsChB,SAASC,EAAIC,GACnB,OAAOA,GACR,CAEO,SAASC,IACf,OAAOC,OAAOC,OAAO,KACtB,CAMO,SAASC,EAAQC,GACvBA,EAAIC,QAAQP,EACb,CAMO,SAASQ,EAAYC,GAC3B,MAAwB,mBAAVA,CACf,CAGO,SAASC,EAAeC,EAAGC,GACjC,OAAOD,GAAKA,EAAIC,GAAKA,EAAID,IAAMC,GAAMD,GAAkB,iBAANA,GAAgC,mBAANA,CAC5E,CAiEO,SAASE,EAAUC,GAAqB,IAAAC,IAAAA,EAAAC,UAAAC,OAAXC,MAASC,MAAAJ,EAAAA,EAAAA,OAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAATF,EAASE,EAAAJ,GAAAA,UAAAI,GAC5C,GAAa,MAATN,EAAe,CAClB,IAAK,MAAMO,KAAYH,EACtBG,OAASC,GAEV,OAAOvB,CACR,CACA,MAAMwB,EAAQT,EAAMD,aAAaK,GACjC,OAAOK,EAAMC,YAAc,IAAMD,EAAMC,cAAgBD,CACxD,CAUO,SAASE,EAAgBX,GAC/B,IAAIY,EAEJ,OADAb,EAAUC,GAAQa,GAAOD,EAAQC,GAAjCd,GACOa,CACR,CAGO,SAASE,EAAoBC,EAAWf,EAAOO,GACrDQ,EAAUC,GAAGC,WAAWC,KAAKnB,EAAUC,EAAOO,GAC/C,CAEO,SAASY,EAAYC,EAAYC,EAAKC,EAASnC,GACrD,GAAIiC,EAAY,CACf,MAAMG,EAAWC,EAAiBJ,EAAYC,EAAKC,EAASnC,GAC5D,OAAOiC,EAAW,GAAGG,EACtB,CACD,CAEA,SAASC,EAAiBJ,EAAYC,EAAKC,EAASnC,GACnD,OAAOiC,EAAW,IAAMjC,EA7JlB,SAAgBsC,EAAKC,GAE3B,IAAK,MAAMC,KAAKD,EAAKD,EAAIE,GAAKD,EAAIC,GAClC,OAA6BF,CAC9B,CAyJ8BG,CAAON,EAAQD,IAAIQ,QAAST,EAAW,GAAGjC,EAAGkC,KAASC,EAAQD,GAC5F,CAEO,SAASS,EAAiBV,EAAYE,EAASS,EAAO5C,GAC5D,GAAIiC,EAAW,IAAMjC,EAAI,CACxB,MAAM6C,EAAOZ,EAAW,GAAGjC,EAAG4C,IAC9B,QAAsBvB,IAAlBc,EAAQS,MACX,OAAOC,EAER,GAAoB,iBAATA,EAAmB,CAC7B,MAAMC,EAAS,GACTC,EAAMC,KAAKC,IAAId,EAAQS,MAAM5B,OAAQ6B,EAAK7B,QAChD,IAAK,IAAIkC,EAAI,EAAGA,EAAIH,EAAKG,GAAK,EAC7BJ,EAAOI,GAAKf,EAAQS,MAAMM,GAAKL,EAAKK,GAErC,OAAOJ,CACR,CACA,OAAOX,EAAQS,MAAQC,CACxB,CACA,OAAOV,EAAQS,KAChB,CAGO,SAASO,EACfC,EACAC,EACAnB,EACAC,EACAmB,EACAC,GAEA,GAAID,EAAc,CACjB,MAAME,EAAenB,EAAiBgB,EAAiBnB,EAAKC,EAASoB,GACrEH,EAAKK,EAAED,EAAcF,EACtB,CACD,CAiBO,SAASI,EAAyBvB,GACxC,GAAIA,EAAQD,IAAIlB,OAAS,GAAI,CAC5B,MAAM4B,EAAQ,GACR5B,EAASmB,EAAQD,IAAIlB,OAAS,GACpC,IAAK,IAAIkC,EAAI,EAAGA,EAAIlC,EAAQkC,IAC3BN,EAAMM,IAAM,EAEb,OAAON,CACR,CACA,OAAQ,CACT,CAwCO,SAASe,EAAgB9C,EAAO+C,EAAKnC,GAE3C,OADAZ,EAAMgD,IAAIpC,GACHmC,CACR,CAIO,SAASE,EAAiBC,GAChC,OAAOA,GAAiBxD,EAAYwD,EAAcC,SAAWD,EAAcC,QAAUlE,CACtF,CCvRO,MAAMmE,EACM,oBAAXC,OACJA,OACsB,oBAAfC,WACPA,WAEAC,OCuIG,SAASC,EAAOC,EAAQC,GAC9BD,EAAOE,YAAYD,EACpB,CA8FO,SAASE,EAAOH,EAAQC,EAAMG,GACpCJ,EAAOK,aAAaJ,EAAMG,GAAU,KACrC,CAoBO,SAASE,EAAOL,GAClBA,EAAKM,YACRN,EAAKM,WAAWC,YAAYP,EAE9B,CAIO,SAASQ,EAAaC,EAAYC,GACxC,IAAK,IAAI/B,EAAI,EAAGA,EAAI8B,EAAWhE,OAAQkC,GAAK,EACvC8B,EAAW9B,IAAI8B,EAAW9B,GAAGgC,EAAED,EAErC,CAOO,SAASE,EAAQC,GACvB,OAAOC,SAASC,cAAcF,EAC/B,CA+CO,SAASG,EAAKC,GACpB,OAAOH,SAASI,eAAeD,EAChC,CAIO,SAASE,IACf,OAAOH,EAAK,IACb,CAIO,SAASI,IACf,OAAOJ,EAAK,GACb,CAiBO,SAASK,EAAOrB,EAAMsB,EAAOC,EAASC,GAE5C,OADAxB,EAAKyB,iBAAiBH,EAAOC,EAASC,GAC/B,IAAMxB,EAAK0B,oBAAoBJ,EAAOC,EAASC,EACvD,CAcO,SAASG,EAAiBlG,GAChC,OAAO,SAAU6F,GAGhB,OAFAA,EAAMM,kBAECnG,EAAGoG,KAAKC,KAAMR,EACrB,CACF,CAoCO,SAASS,EAAK/B,EAAMgC,EAAW9E,GACxB,MAATA,EAAe8C,EAAKiC,gBAAgBD,GAC/BhC,EAAKkC,aAAaF,KAAe9E,GAAO8C,EAAKmC,aAAaH,EAAW9E,EAC/E,CAmZO,SAASkF,EAASpB,EAAMC,GAC9BA,EAAO,GAAKA,EACRD,EAAKC,OAASA,IAClBD,EAAKC,KAA8BA,EACpC,CA6CO,SAASoB,EAAUrC,EAAMsC,EAAKpF,EAAOqF,GAC9B,MAATrF,EACH8C,EAAKwC,MAAMC,eAAeH,GAE1BtC,EAAKwC,MAAME,YAAYJ,EAAKpF,EAAiC,GAE/D,CA2VO,SAASyF,EAA2BtF,EAAWuF,GACrD,OAAO,IAAIvF,EAAUuF,EACtB,CC1sCO,IAAIC,EAGJ,SAASC,EAAsBzF,GACrCwF,EAAoBxF,CACrB,CAEO,SAAS0F,IACf,IAAKF,EAAmB,MAAM,IAAIG,MAAM,oDACxC,OAAOH,CACR,CA6BO,SAASI,EAAQxH,GACvBsH,IAAwBzF,GAAG4F,SAAS1F,KAAK/B,EAC1C,CAWO,SAAS0H,EAAY1H,GAC3BsH,IAAwBzF,GAAG8F,aAAa5F,KAAK/B,EAC9C,CAuCO,SAAS4H,IACf,MAAMhG,EAAY0F,IAClB,OAAO,SAACO,EAAMC,GAAwC,IAAhCC,WAAEA,GAAa,GAAOhH,UAAAC,OAAAD,QAAAM,IAAAN,UAAAM,GAAAN,UAAG,GAAA,CAAE,EAChD,MAAME,EAAYW,EAAUC,GAAGZ,UAAU4G,GACzC,GAAI5G,EAAW,CAGd,MAAM4E,ED+4BF,SAAsBgC,EAAMC,GAAsD,IAA9CE,QAAEA,GAAU,EAAKD,WAAEA,GAAa,GAAOhH,UAAAC,OAAAD,QAAAM,IAAAN,UAAAM,GAAAN,UAAG,GAAA,CAAE,EACtF,OAAO,IAAIkH,YAAYJ,EAAM,CAAEC,SAAQE,UAASD,cACjD,CCj5BiBG,CAAoCL,EAAOC,EAAQ,CAAEC,eAInE,OAHA9G,EAAUyB,QAAQpC,SAASN,IAC1BA,EAAGoG,KAAKxE,EAAWiE,EAAM,KAElBA,EAAMsC,gBACf,CACA,OAAO,CACP,CACF,CA6BO,SAASC,EAAWvB,GAC1B,OAAOS,IAAwBzF,GAAGwG,QAAQC,IAAIzB,EAC/C,CAmCO,SAAS0B,EAAO3G,EAAWiE,GACjC,MAAM5E,EAAYW,EAAUC,GAAGZ,UAAU4E,EAAMgC,MAC3C5G,GAEHA,EAAUyB,QAAQpC,SAASN,GAAOA,EAAGoG,KAAKC,KAAMR,IAElD,CCnLO,MAAM2C,EAAmB,GAEnBC,EAAoB,GAEjC,IAAIC,EAAmB,GAEvB,MAAMC,EAAkB,GAElBC,EAAmCC,QAAQC,UAEjD,IAAIC,GAAmB,EAGhB,SAASC,IACVD,IACJA,GAAmB,EACnBH,EAAiBK,KAAKC,GAExB,CAGO,SAASC,IAEf,OADAH,IACOJ,CACR,CAGO,SAASQ,EAAoBpJ,GACnC0I,EAAiB3G,KAAK/B,EACvB,CAyBA,MAAMqJ,EAAiB,IAAIC,IAE3B,IAAIC,EAAW,EAGR,SAASL,IAIf,GAAiB,IAAbK,EACH,OAED,MAAMC,EAAkBpC,EACxB,EAAG,CAGF,IACC,KAAOmC,EAAWf,EAAiBxH,QAAQ,CAC1C,MAAMY,EAAY4G,EAAiBe,GACnCA,IACAlC,EAAsBzF,GACtB6H,EAAO7H,EAAUC,GAClB,CACA,CAAC,MAAO6H,GAIR,MAFAlB,EAAiBxH,OAAS,EAC1BuI,EAAW,EACLG,CACP,CAIA,IAHArC,EAAsB,MACtBmB,EAAiBxH,OAAS,EAC1BuI,EAAW,EACJd,EAAkBzH,QAAQyH,EAAkBkB,KAAlBlB,GAIjC,IAAK,IAAIvF,EAAI,EAAGA,EAAIwF,EAAiB1H,OAAQkC,GAAK,EAAG,CACpD,MAAM9B,EAAWsH,EAAiBxF,GAC7BmG,EAAeO,IAAIxI,KAEvBiI,EAAeQ,IAAIzI,GACnBA,IAEF,CACAsH,EAAiB1H,OAAS,CAC1B,OAAQwH,EAAiBxH,QAC1B,KAAO2H,EAAgB3H,QACtB2H,EAAgBgB,KAAhBhB,GAEDI,GAAmB,EACnBM,EAAeS,QACfzC,EAAsBmC,EACvB,CAGA,SAASC,EAAO5H,GACf,GAAoB,OAAhBA,EAAGkI,SAAmB,CACzBlI,EAAG4H,SACHrJ,EAAQyB,EAAGmI,eACX,MAAMpH,EAAQf,EAAGe,MACjBf,EAAGe,MAAQ,EAAE,GACbf,EAAGkI,UAAYlI,EAAGkI,SAAStG,EAAE5B,EAAGK,IAAKU,GACrCf,EAAG8F,aAAarH,QAAQ8I,EACzB,CACD,CCtFA,MAAMa,EAAW,IAAIX,IAKrB,IAAIY,EAIG,SAASC,KACfD,EAAS,CACRE,EAAG,EACHC,EAAG,GACH5G,EAAGyG,EAEL,CAIO,SAASI,KACVJ,EAAOE,GACXhK,EAAQ8J,EAAOG,GAEhBH,EAASA,EAAOzG,CACjB,CAOO,SAAS8G,GAAcC,EAAOC,GAChCD,GAASA,EAAMtH,IAClB+G,EAASS,OAAOF,GAChBA,EAAMtH,EAAEuH,GAEV,CASO,SAASE,GAAeH,EAAOC,EAAO7F,EAAQxD,GACpD,GAAIoJ,GAASA,EAAMI,EAAG,CACrB,GAAIX,EAASL,IAAIY,GAAQ,OACzBP,EAASJ,IAAIW,GACbN,EAAOG,EAAEtI,MAAK,KACbkI,EAASS,OAAOF,GACZpJ,IACCwD,GAAQ4F,EAAMtF,EAAE,GACpB9D,IACD,IAEDoJ,EAAMI,EAAEH,EACR,MAAUrJ,GACVA,GAEF,CC1FO,SAASyJ,GAAkBC,GACjC,YAA0CzJ,IAAnCyJ,GAAwB9J,OAC5B8J,EACA5J,MAAM6J,KAAKD,EACf,CAWO,SAASE,GAAwBR,EAAOS,GAC9CN,GAAeH,EAAO,EAAG,GAAG,KAC3BS,EAAOP,OAAOF,EAAM3D,IAAI,GAE1B,CAeO,SAASqE,GACfC,EACAvI,EACAwI,EACAC,EACAnJ,EACAoJ,EACAL,EACA1G,EACAP,EACAuH,EACAC,EACAC,GAEA,IAAIb,EAAIO,EAAWnK,OACf0K,EAAIJ,EAAKtK,OACTkC,EAAI0H,EACR,MAAMe,EAAc,CAAE,EACtB,KAAOzI,KAAKyI,EAAYR,EAAWjI,GAAG2D,KAAO3D,EAC7C,MAAM0I,EAAa,GACbC,EAAa,IAAIC,IACjBC,EAAS,IAAID,IACbE,EAAU,GAEhB,IADA9I,EAAIwI,EACGxI,KAAK,CACX,MAAM+I,EAAYR,EAAYvJ,EAAKoJ,EAAMpI,GACnC2D,EAAMuE,EAAQa,GACpB,IAAIzB,EAAQS,EAAO3C,IAAIzB,GAClB2D,EAKJwB,EAAQjK,MAAK,IAAMyI,EAAM/G,EAAEwI,EAAWrJ,MAJtC4H,EAAQe,EAAkB1E,EAAKoF,GAC/BzB,EAAMH,KAKPwB,EAAWhI,IAAIgD,EAAM+E,EAAW1I,GAAKsH,GACjC3D,KAAO8E,GAAaI,EAAOlI,IAAIgD,EAAK7D,KAAKkJ,IAAIhJ,EAAIyI,EAAY9E,IAClE,CACA,MAAMsF,EAAY,IAAI7C,IAChB8C,EAAW,IAAI9C,IAErB,SAAS7E,EAAO+F,GACfD,GAAcC,EAAO,GACrBA,EAAM6B,EAAE9H,EAAMiH,GACdP,EAAOpH,IAAI2G,EAAM3D,IAAK2D,GACtBgB,EAAOhB,EAAM8B,MACbZ,GACD,CACA,KAAOd,GAAKc,GAAG,CACd,MAAMa,EAAYX,EAAWF,EAAI,GAC3Bc,EAAYrB,EAAWP,EAAI,GAC3B6B,EAAUF,EAAU1F,IACpB6F,EAAUF,EAAU3F,IACtB0F,IAAcC,GAEjBhB,EAAOe,EAAUD,MACjB1B,IACAc,KACWG,EAAWjC,IAAI8C,IAIfzB,EAAOrB,IAAI6C,IAAYN,EAAUvC,IAAI6C,GAChDhI,EAAO8H,GACGH,EAASxC,IAAI8C,GACvB9B,IACUmB,EAAOzD,IAAImE,GAAWV,EAAOzD,IAAIoE,IAC3CN,EAASvC,IAAI4C,GACbhI,EAAO8H,KAEPJ,EAAUtC,IAAI6C,GACd9B,MAXA5G,EAAQwI,EAAWvB,GACnBL,IAYF,CACA,KAAOA,KAAK,CACX,MAAM4B,EAAYrB,EAAWP,GACxBiB,EAAWjC,IAAI4C,EAAU3F,MAAM7C,EAAQwI,EAAWvB,EACxD,CACA,KAAOS,GAAGjH,EAAOmH,EAAWF,EAAI,IAEhC,OADAtL,EAAQ4L,GACDJ,CACR,CCzFO,SAASe,GAAiBnC,GAChCA,GAASA,EAAMH,GAChB,CAQO,SAASuC,GAAgBhL,EAAW0C,EAAQI,GAClD,MAAMqF,SAAEA,EAAQpC,aAAEA,GAAiB/F,EAAUC,GAC7CkI,GAAYA,EAASsC,EAAE/H,EAAQI,GAE/B0E,GAAoB,KACnB,MAAMyD,EAAiBjL,EAAUC,GAAG4F,SAASqF,IAAI/M,GAAKgN,OAAOxM,GAIzDqB,EAAUC,GAAGC,WAChBF,EAAUC,GAAGC,WAAWC,QAAQ8K,GAIhCzM,EAAQyM,GAETjL,EAAUC,GAAG4F,SAAW,EAAE,IAE3BE,EAAarH,QAAQ8I,EACtB,CAGO,SAAS4D,GAAkBpL,EAAWqD,GAC5C,MAAMpD,EAAKD,EAAUC,GACD,OAAhBA,EAAGkI,YH+DD,SAAgC1J,GACtC,MAAM4M,EAAW,GACXC,EAAU,GAChBxE,EAAiBpI,SAAS+J,IAA2B,IAApBhK,EAAI8M,QAAQ9C,GAAY4C,EAASlL,KAAKsI,GAAK6C,EAAQnL,KAAKsI,KACzF6C,EAAQ5M,SAAS+J,GAAMA,MACvB3B,EAAmBuE,CACpB,CGpEEG,CAAuBvL,EAAG8F,cAC1BvH,EAAQyB,EAAGC,YACXD,EAAGkI,UAAYlI,EAAGkI,SAAS7E,EAAED,GAG7BpD,EAAGC,WAAaD,EAAGkI,SAAW,KAC9BlI,EAAGK,IAAM,GAEX,CAuBO,SAASmL,GACfzL,EACAmE,EACAuH,EACAC,EACAC,EACArG,GAGC,IAFDsG,EAAa1M,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAG,KAChB6B,EAAK7B,UAAAC,OAAAD,QAAAM,IAAAN,UAAAM,GAAAN,UAAA,GAAG,EAAE,GAEV,MAAM2M,EAAmBtG,EACzBC,EAAsBzF,GAEtB,MAAMC,EAAMD,EAAUC,GAAK,CAC1BkI,SAAU,KACV7H,IAAK,GAELiF,QACAsC,OAAQ3J,EACR0N,YACAG,MAAO1N,IAEPwH,SAAU,GACV3F,WAAY,GACZ8L,cAAe,GACf5D,cAAe,GACfrC,aAAc,GACdU,QAAS,IAAIyD,IAAI/F,EAAQsC,UAAYqF,EAAmBA,EAAiB7L,GAAGwG,QAAU,KAEtFpH,UAAWhB,IACX2C,QACAiL,YAAY,EACZC,KAAM/H,EAAQzB,QAAUoJ,EAAiB7L,GAAGiM,MAE7CL,GAAiBA,EAAc5L,EAAGiM,MAClC,IAAIC,GAAQ,EAgBZ,GAfAlM,EAAGK,IAAMoL,EACNA,EAAS1L,EAAWmE,EAAQoB,OAAS,CAAE,GAAE,SAACjE,EAAGU,GAC7C,MAAMnC,IAAQV,UAAAC,YAAAD,UAAAC,OAAAD,EAAAA,UAAAC,QAAA,OAAAK,EAAAN,aAAwB6C,EAKtC,OAJI/B,EAAGK,KAAOsL,EAAU3L,EAAGK,IAAIgB,GAAKrB,EAAGK,IAAIgB,GAAKzB,MAC1CI,EAAGgM,YAAchM,EAAG8L,MAAMzK,IAAIrB,EAAG8L,MAAMzK,GAAGzB,GAC3CsM,GA7DT,SAAoBnM,EAAWsB,IACC,IAA3BtB,EAAUC,GAAGe,MAAM,KACtB4F,EAAiBzG,KAAKH,GACtBoH,IACApH,EAAUC,GAAGe,MAAMoL,KAAK,IAEzBpM,EAAUC,GAAGe,MAAOM,EAAI,GAAM,IAAM,GAAKA,EAAI,EAC9C,CAsDgB+K,CAAWrM,EAAWsB,IAE3BU,CACN,IACD,GACH/B,EAAG4H,SACHsE,GAAQ,EACR3N,EAAQyB,EAAGmI,eAEXnI,EAAGkI,WAAWwD,GAAkBA,EAAgB1L,EAAGK,KAC/C6D,EAAQzB,OAAQ,CACnB,GAAIyB,EAAQmI,QAAS,CAIpB,MAAMC,EL4cF,SAAkBhJ,GACxB,OAAOjE,MAAM6J,KAAK5F,EAAQiJ,WAC3B,CK9ciBC,CAAStI,EAAQzB,QAC/BzC,EAAGkI,UAAYlI,EAAGkI,SAASuE,EAAEH,GAC7BA,EAAM7N,QAAQsE,EACf,MAEC/C,EAAGkI,UAAYlI,EAAGkI,SAASM,IAExBtE,EAAQwI,OAAOhE,GAAc3I,EAAUC,GAAGkI,UAC9C6C,GAAgBhL,EAAWmE,EAAQzB,OAAQyB,EAAQrB,QAEnDwE,GACD,CACA7B,EAAsBqG,EACvB,CAmSO,MAAMc,GAQZ3M,UAQA4M,aAGAC,QAAAA,GACC1B,GAAkB3G,KAAM,GACxBA,KAAKqI,SAAW5O,CACjB,CAQA6O,GAAAA,CAAI9G,EAAMzG,GACT,IAAKb,EAAYa,GAChB,OAAOtB,EAER,MAAMmB,EAAYoF,KAAKxE,GAAGZ,UAAU4G,KAAUxB,KAAKxE,GAAGZ,UAAU4G,GAAQ,IAExE,OADA5G,EAAUc,KAAKX,GACR,KACN,MAAMwN,EAAQ3N,EAAUkM,QAAQ/L,IACjB,IAAXwN,GAAc3N,EAAU4N,OAAOD,EAAO,EAAE,CAE9C,CAMAE,IAAAA,CAAK3H,GP/XC,IAAkB4H,EOgYnB1I,KAAKoI,QPhYcM,EOgYK5H,EP/XM,IAA5BjH,OAAO8O,KAAKD,GAAK/N,UOgYtBqF,KAAKxE,GAAGgM,YAAa,EACrBxH,KAAKoI,MAAMtH,GACXd,KAAKxE,GAAGgM,YAAa,EAEvB,ECpfD,MAAMoB,GAAmB,GAWlB,SAASC,GAASzN,EAAO0N,GAC/B,MAAO,CACNvO,UAAWwO,GAAS3N,EAAO0N,GAAOvO,UAEpC,CAWO,SAASwO,GAAS3N,GAAqB,IAEzC4N,EAF2BF,EAAKpO,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAGjB,EAIvC,MAAMwP,EAAc,IAAIhG,IAIxB,SAASzF,EAAI0L,GACZ,GAAI9O,EAAegB,EAAO8N,KACzB9N,EAAQ8N,EACJF,GAAM,CAET,MAAMG,GAAaP,GAAiBjO,OACpC,IAAK,MAAMyO,KAAcH,EACxBG,EAAW,KACXR,GAAiBlN,KAAK0N,EAAYhO,GAEnC,GAAI+N,EAAW,CACd,IAAK,IAAItM,EAAI,EAAGA,EAAI+L,GAAiBjO,OAAQkC,GAAK,EACjD+L,GAAiB/L,GAAG,GAAG+L,GAAiB/L,EAAI,IAE7C+L,GAAiBjO,OAAS,CAC3B,CACD,CAEF,CAMA,SAASyI,EAAOzJ,GACf6D,EAAI7D,EAAGyB,GACR,CAuBA,MAAO,CAAEoC,MAAK4F,SAAQ7I,UAhBtB,SAAmBb,GAElB,MAAM0P,EAAa,CAAC1P,EAFagB,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAGjB,GAQpC,OALAwP,EAAYzF,IAAI4F,GACS,IAArBH,EAAYI,OACfL,EAAOF,EAAMtL,EAAK4F,IAAW3J,GAE9BC,EAAI0B,GACG,KACN6N,EAAY5E,OAAO+E,GACM,IAArBH,EAAYI,MAAcL,IAC7BA,IACAA,EAAO,KACR,CAEF,EAED,CAsCO,SAASM,GAAQC,EAAQ5P,EAAI6P,GACnC,MAAMC,GAAU5O,MAAM6O,QAAQH,GAExBI,EAAeF,EAAS,CAACF,GAAUA,EACzC,IAAKI,EAAaC,MAAMC,SACvB,MAAM,IAAI3I,MAAM,wDAEjB,MAAM4I,EAAOnQ,EAAGgB,OAAS,EACzB,OAAOkO,GAASW,GAAe,CAAChM,EAAK4F,KACpC,IAAI2G,GAAU,EACd,MAAMC,EAAS,GACf,IAAIC,EAAU,EACVC,EAAUzQ,EACd,MAAM0Q,EAAOA,KACZ,GAAIF,EACH,OAEDC,IACA,MAAME,EAASzQ,EAAG8P,EAASO,EAAO,GAAKA,EAAQxM,EAAK4F,GAChD0G,EACHtM,EAAI4M,GAEJF,EAAUhQ,EAAYkQ,GAAUA,EAAS3Q,CAC1C,EAEK4Q,EAAgBV,EAAalD,KAAI,CAACjM,EAAOqC,IAC9CtC,EACCC,GACCY,IACA4O,EAAOnN,GAAKzB,EACZ6O,KAAa,GAAKpN,GACdkN,GACHI,GACD,IAED,KACCF,GAAW,GAAKpN,CAAC,MAMpB,OAFAkN,GAAU,EACVI,IACO,WACNpQ,EAAQsQ,GACRH,IAIAH,GAAU,CACV,CAAA,GAEH,CClLA,SAASO,GAAS3Q,GACd,OAAO,SAAU0J,GACb,MAAiB,UAAVA,EAAE7C,KAA6B,MAAV6C,EAAE7C,MAAgB6C,EAAEkH,iBAC1C5Q,EAAGoG,KAAKC,KAAMqD,QACdrI,CACT,CACL,CAEA,SAASwP,GAAWtM,EAAMuM,GACtB,IAAIC,EAAU,CACVtH,MAAAA,CAAOqH,GACmB,iBAAXA,EACPvM,EAAKyM,UAAYF,EACVA,GAASG,SAChB1M,EAAK2M,mBAAmBJ,EAAQG,UACzBH,GAASK,OAChB5M,EAAK6M,UAAYN,EAAQK,KAEjC,GAIJ,OAFAJ,EAAQtH,OAAOqH,GAERC,CACX,CAGA,SAASM,GAAa9M,EAAMsD,GAExB,MAAMyJ,EAAoBC,IAClBhN,IAASA,EAAKiN,SAASD,EAAQjN,SAC/BC,EAAKkN,cACD,IAAIxJ,YAAYJ,EAAO,UAAW,CAACC,OAAQ,CAACyJ,aAEpD,EAKJ,OAFAlM,SAASW,iBAAiB6B,EAAMyJ,GAAmB,GAE5C,CACHtN,OAAAA,GACIqB,SAASY,oBAAoB4B,EAAMyJ,GAAmB,EAC1D,EAER,CAEA,MAAMI,GAAiB,MAEvB,SAASC,KAA8B,IAAnBC,EAAK7Q,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,QAAGM,EACxB,YAAcA,IAAVuQ,EACOA,aAAiBC,KAAOC,GAAeF,GA0LtD,SAAwBG,GACpB,MAAMC,EAAQD,EAAIE,MAAM,QACxB,OAAO,IAAIJ,KAAKA,KAAKK,IACjBC,OAAOH,EAAM,IACbG,OAAOH,EAAM,IAAM,EACnBG,OAAOH,EAAM,IACbG,OAAOH,EAAM,IAAM,GACnBG,OAAOH,EAAM,IAAM,GACnBG,OAAOH,EAAM,IAAM,IAE3B,CApM+DI,CAAeR,GAGnEE,GAAe,IAAID,KAC9B,CAEA,SAASQ,GAAeT,GACpB,GAAqB,iBAAVA,EACPA,EAAQ,CAACU,QAASV,QACf,GAAqB,iBAAVA,EAAoB,CAElC,IAAIU,EAAU,EAAGC,EAAM,EACvB,IAAK,IAAIC,KAAQZ,EAAMa,MAAM,IAAK,GAC9BH,GAAWI,SAASF,EAAM,IAAMxP,KAAK2P,IAAI,GAAIJ,KAEjDX,EAAQ,CAACU,UACb,MAAWV,aAAiBC,OACxBD,EAAQ,CAACgB,MAAOhB,EAAMiB,cAAeC,QAASlB,EAAMmB,gBAAiBT,QAASV,EAAMoB,kBAGxF,IAAIC,EAAQrB,EAAMqB,OAASrB,EAAMsB,MAAQ,EAEzC,MAAO,CACHC,MAAOvB,EAAMuB,OAASvB,EAAMwB,MAAQ,EACpCC,OAAQzB,EAAMyB,QAAUzB,EAAM0B,OAAS,EACvCC,KAAc,EAARN,GAAarB,EAAM2B,MAAQ3B,EAAM4B,KAAO,GAC9ClB,QAA4C,IAAlCV,EAAMgB,OAAShB,EAAM6B,MAAQ,GAAU,GACN,IAAtC7B,EAAMkB,SAAWlB,EAAM8B,QAAU,IACjC9B,EAAMU,SAAWV,EAAM+B,QAAU,GACtCC,UAAWX,EAEnB,CAEA,SAASY,GAAUC,GACf,OAAO,IAAIjC,KAAKiC,EAAKC,UACzB,CAEA,SAASC,GAAYF,EAAMG,GAAiB,IAAPC,EAACnT,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAG,EACrC+S,EAAKK,eAAeL,EAAKM,iBAAmBF,EAAID,EAASd,OACzD,IAAIG,EAAQQ,EAAKO,cAAgBH,EAAID,EAASZ,OAM9C,IALAS,EAAKQ,YAAYhB,GACjBA,GAAS,GACLA,EAAQ,IACRA,GAAS,IAENQ,EAAKO,gBAAkBf,GAC1BiB,GAAYT,GAKhB,OAHAA,EAAKU,WAAWV,EAAKW,aAAeP,EAAID,EAASV,MACjDO,EAAKY,cAAcZ,EAAKd,gBAAkBkB,EAAID,EAAS3B,SAEhDwB,CACX,CAEA,SAASa,GAAiBb,EAAMG,GAC5B,OAAOD,GAAYF,EAAMG,IADclT,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAG,GAE9C,CAEA,SAAS6T,GAAOd,GAAa,IAAPI,EAACnT,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAG,EAGtB,OAFA+S,EAAKU,WAAWV,EAAKW,aAAeP,GAE7BJ,CACX,CAEA,SAASS,GAAYT,GACjB,OAAOc,GAAOd,IADU/S,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAG,GAE/B,CAEA,SAAS8T,GAAYf,GAGjB,OAFAA,EAAKgB,YAAY,EAAG,EAAG,EAAG,GAEnBhB,CACX,CAEA,SAASiB,GAAYjB,GACjB,OAAO,IAAIjC,KACPiC,EAAKM,iBACLN,EAAKO,cACLP,EAAKW,aACLX,EAAKjB,cACLiB,EAAKf,gBACLe,EAAKd,gBAEb,CAEA,SAASgC,GAAYlB,GAAgB,IAAV/Q,EAAGhC,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAG,GAC7B,OAAO+S,EAAKkB,cAAcC,UAAU,EAAGlS,EAC3C,CAEA,SAASmS,GAAWC,GAAkB,IAAArU,IAAAA,EAAAC,UAAAC,OAARoU,MAAMlU,MAAAJ,EAAAA,EAAAA,OAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAANiU,EAAMjU,EAAAJ,GAAAA,UAAAI,GAChC,OAAOiU,EAAOnF,OAAMoF,GAASF,EAAMpB,YAAcsB,EAAMtB,WAC3D,CAQA,SAASuB,GAAexB,EAAMN,GAC1B,IAAI+B,EAAO/B,EAAMM,EAAK0B,YAEtB,OADA1B,EAAKU,WAAWV,EAAKW,cAAgBc,GAAQ,EAAIA,EAAOA,EAAO,IACxDzB,CACX,CAKA,SAAS2B,GAAW3B,GAChB,MAAuB,iBAATA,GAAqBA,EAAK9S,QAAU,EACtD,CAKA,SAAS0U,GAASC,EAAQC,GAGtB,OAFAD,EAAOb,YAAYc,EAAS/C,cAAe+C,EAAS7C,gBAAiB6C,EAAS5C,gBAAiB,GAExF2C,CACX,CAKA,SAASE,GAAU5B,GACf,OAAOA,EAAS3B,OACpB,CAKA,SAASwD,GAAShC,EAAMG,GAEpB,OADAD,GAAYF,EAAMG,GACXH,CACX,CAKA,SAASiC,GAASjC,EAAMG,EAAU+B,GAE9B,GADArB,GAAiBb,EAAMG,GACnB+B,EAAWhV,QAAUgV,EAAWhV,OAAS,EACzC,KAAOgV,EAAWC,SAASnC,EAAK0B,cAC5BjB,GAAYT,GAGpB,OAAOA,CACX,CA4BA,SAAShC,GAAegC,GACpB,OAAO,IAAIjC,KAAKA,KAAKK,IACjB4B,EAAKoC,cACLpC,EAAKqC,WACLrC,EAAKsC,UACLtC,EAAKuC,WACLvC,EAAKwC,aACLxC,EAAKyC,cAEb,CAcA,SAAS9T,KACL,OAAOvC,OAAOuC,UAAO1B,UACzB,CAEA,SAASiO,GAAKwH,GACV,OAAOtW,OAAO8O,KAAKwH,EACvB,CAEA,SAASC,GAAMhV,GACX,OAAOuB,KAAKyT,MAAMhV,EACtB,CAEA,SAASiV,GAAKjV,GACV,OAAOuB,KAAK0T,KAAKjV,EACrB,CAEA,SAASkV,KACL,OAAO3T,KAAK2T,OAAI5V,UACpB,CAEA,SAASkC,KACL,OAAOD,KAAKC,OAAIlC,UACpB,CAMA,SAASgP,GAAQtO,GACb,OAAOP,MAAM6O,QAAQtO,EACzB,CAEA,SAASmV,GAAWnV,GAChB,MAAwB,mBAAVA,CAClB,CAEA,SAAS1B,GAAIC,GACT,OAAOA,GACX,CAEA,SAAS6W,GAAOxW,GACZA,EAAIC,QAAQP,GAChB,CAEA,SAASD,KAAO,CAEhB,MAAMgX,GAAY5C,GAAMA,EAExB,SAAS6C,GAAS/W,EAAIgX,EAAQC,GAC1BA,EAAWxN,QAAOyN,GAASA,EAAMrT,IAAImT,EAAQhX,IACjD,CAEA,SAASmX,GAAcD,GACnBL,GAAOK,GACPA,EAAMpN,OACV,CAEA,SAASsN,GAAKpX,EAAIgX,EAAQK,GACtBL,IAAWhX,EACNqX,EAAMzN,IAAIoN,IACXK,EAAMxT,IAAImT,EAAQM,YAAW,KACzBD,EAAM3M,OAAOsM,GACbhX,GAAI,IAGhB,CAEA,IAAIuX,GA1COC,OAAO,MA2ClB,SAASC,GAAW1I,EAAK2I,GACrB3I,EAAIwI,IAAeG,CACvB,CAMA,SAASC,GAAW5I,GAChB,OAAOA,EAAIwI,GACf,CAEA,SAASjS,GAAcsS,EAAKC,EAAW/G,GAAqB,IAAZgH,EAAK/W,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAG,GAChDgX,EAAK1S,SAASC,cAAcsS,GAChCG,EAAGF,UAAYA,EACO,iBAAX/G,EACPiH,EAAG/G,UAAYF,EACRA,EAAQG,SACf8G,EAAG7G,mBAAmBJ,EAAQG,UACvBH,EAAQK,OACf4G,EAAG3G,UAAYN,EAAQK,MAE3B,IAAK,IAAI7K,KAAQwR,EACbC,EAAGrR,gBAAgBJ,GAEvB,OAAOyR,CACX,CAMA,SAASC,GAAKD,GACV,OAAOA,EAAGE,uBACd,CAEA,SAASC,GAASH,EAAII,GAClB,KAAOA,KACHJ,EAAKA,EAAGK,cAEZ,OAAOL,CACX,CAEA,SAASM,GAAON,GACZ,OAAOC,GAAKD,GAAIM,MACpB,CAEA,SAASC,GAAsBpE,EAAGqE,GAAoB,IAAjBzK,EAAI/M,UAAAC,OAAA,QAAAK,IAAAN,UAAA,GAAAA,UAAA,GAAGsE,SACxC,IAAK,IAAI0S,KAAMjK,EAAK0K,kBAAkBtE,EAAGqE,GAAI,CACzC,GA7CYxJ,EA6CGgJ,EA5CVhJ,IAAMwI,IA6CP,OAAOQ,EAGX,GAAIA,EAAGU,WAAY,CACf,IAAIC,EAAWJ,GAAsBpE,EAAGqE,EAAGR,EAAGU,YAC9C,GAAIC,EACA,OAAOA,CAEf,CACJ,CAvDJ,IAAoB3J,EAwDhB,OAAO,IACX,CAEA,SAASnJ,GAAOrB,EAAMsB,EAAOC,EAASC,GAElC,OADAxB,EAAKyB,iBAAiBH,EAAOC,EAASC,GAC/B,IAAMxB,EAAK0B,oBAAoBJ,EAAOC,EAASC,EAC1D,CAcA,SAAS4S,GAAqBC,GAO1B,OANAA,EAAOnW,GAAO,CAAE,EAAEmW,IACbC,aAAe9D,GAAY6D,EAAKC,cACrCD,EAAKE,WAAa/D,GAAY6D,EAAKE,YACnCF,EAAKG,YAAchE,GAAY6D,EAAKG,aACpCH,EAAKI,UAAYjE,GAAY6D,EAAKI,WAE3BJ,CACX,CAEA,SAASK,GAASL,GACd,OAAOA,EAAKM,WAAW,OAC3B,CAEA,SAASC,GAAaP,GAClB,OAAOA,EAAK3C,SAAS,WACzB,CAEA,IAAImD,GAAU,EACd,SAASC,GAAazH,GAClB,OAAOA,EAAM9E,KAAIjH,IACb,IAAI4K,EAAS,CACT6I,GAAI,OAAQzT,EAAQ0T,OAAO1T,EAAMyT,IAAM,cAAcF,QACrDI,YAAaC,GAAY5T,EAAO,cAAciH,IAAIyM,QAClDG,OAAQ7T,EAAM6T,SAAWjE,GAAW5P,EAAMsJ,QAAUsG,GAAW5P,EAAM8T,MACrExK,MAAOwC,GAAW9L,EAAMsJ,OACxBwK,IAAKhI,GAAW9L,EAAM8T,KACtBC,MAAO/T,EAAM+T,OAAS,GACtBC,SAAUhU,EAAMgU,SAChBC,cAAejU,EAAMiU,cACrBC,iBAAkBlU,EAAMkU,iBACxBC,QAASnU,EAAMmU,SAAW,OAC1BC,cAAepU,EAAMoU,eAAiB,CAAE,EACxCC,gBAAiBrU,EAAMqU,iBAAmBrU,EAAMsU,MAChDC,UAAWvU,EAAMuU,UACjBC,WAAYZ,GAAY5T,EAAO,aAC/ByU,OAAQb,GAAY5T,EAAO,UAG/B,GAAI4K,EAAOiJ,OAAQ,CAEf7E,GAAYpE,EAAOtB,OACnB,IAAIwK,EAAM9F,GAAUpD,EAAOkJ,KAC3B9E,GAAYpE,EAAOkJ,KAEdzE,GAAWzE,EAAOkJ,IAAKA,KACxBzE,GAAWzE,EAAOkJ,IAAKlJ,EAAOtB,QAE9ByF,GAAOnE,EAAOkJ,IAEtB,CAEA,OAAOlJ,CAAM,GAErB,CAEA,SAASgJ,GAAY7H,EAAO2I,GACxB,IAAI9J,EAASmB,EAAM2I,EAAW,MAAQ3I,EAAM2I,IAAa,GACzD,OAAOxK,GAAQU,GAAUA,EAAS,CAACA,EACvC,CAEA,SAAS+J,GAAmB5I,GACxB,OAAOA,EAAM9E,KAAI2N,IAAW,CACxBC,OAAQD,EAAOC,OACfC,IAAMF,EAAOE,KAAOF,EAAOE,IAAIC,QAAQ,MAAS,GAChDC,OAASJ,EAAOI,QAAUJ,EAAOI,OAAOC,eAAkB,MAC1DC,YAAaN,EAAOM,aAAe,CAAA,KAE3C,CAEA,SAASC,GAAiBnV,EAAOsJ,EAAOwK,GACpC,IAAIsB,EAAQ,CACR9L,MAAOtJ,EAAMsJ,MAAQA,EAAQtJ,EAAMsJ,MAAQA,EAC3CwK,IAAK9T,EAAM8T,IAAMA,EAAM9T,EAAM8T,IAAMA,EACnC9T,SAIJ,OAFAoV,EAAMC,aAAehG,GAAW+F,EAAM9L,MAAO8L,EAAMtB,KAE5CsB,CACX,CAEA,SAASE,GAAgBC,GAErBA,EAAOC,MAAK,CAAC3a,EAAGC,IAAMD,EAAEyO,MAAQxO,EAAEwO,OAASxO,EAAEkF,MAAM6T,OAAShZ,EAAEmF,MAAM6T,QACxE,CAEA,SAAS4B,GAAmBL,EAAOM,EAAiBC,EAAcC,EAAOC,EAAgBC,GACrF,IAMI7K,EANA8K,EAAWF,EAAeG,YAC1BZ,EAAM9L,MACNoM,GAA2C,YAAxBN,EAAMpV,MAAMmU,UAA0BiB,EAAMC,aACzDxF,GAAS7B,GAAUoH,EAAM9L,OAAQ8L,EAAMtB,KACvCsB,EAAM9L,OAchB,GAVIqM,IACA1K,EAAU8F,GAAW4E,GACfA,EAAa,CACX3V,MAAOiW,GAAsBb,EAAMpV,OACnC+V,WACAhD,KAAMD,GAAqBgD,KAE7BH,QAGMna,IAAZyP,EAAuB,CACvB,IAAIG,EACJ,OAAQgK,EAAMpV,MAAMmU,SAChB,IAAK,aACD/I,EAAW,GACX,MACJ,IAAK,UACDA,EAAW,CAAC8K,GAAkBH,EAAUX,EAAOQ,IAC/C,MACJ,QACIxK,EAAW,IACJgK,EAAMpV,MAAM6T,OAAS,GAAK,CAACqC,GAAkBH,EAAUX,EAAOQ,IACjEnW,GAAc,KAAMmW,EAAMO,WAAYf,EAAMpV,MAAM+T,QAG9D9I,EAAU,CAACG,WACf,CAEA,MAAO,CAAC2K,EAAU9K,EACtB,CAEA,SAASiL,GAAkBH,EAAUX,EAAOQ,GACxC,OAAOnW,GACH,OACAmW,EAAMQ,UACNL,EACA,CAAC,CAAC,WAAY5G,GAAYiG,EAAM9L,SAExC,CAEA,SAAS+M,GAAmBC,EAAiBtW,EAAO8V,GAChD,IAAIlL,EAAS5K,EAAMwU,WAanB,OAZI8B,IACIvF,GAAWuF,KACXA,EAAkBA,EAAgB,CAC9BtW,MAAOiW,GAAsBjW,GAC7B+S,KAAMD,GAAqBgD,MAGnClL,EAAS,IACFV,GAAQoM,GAAmBA,EAAkB,CAACA,MAC9C1L,IAGJA,CACX,CAEA,SAASqL,GAAsBjW,GAC3B,OAAOuW,GAAYvW,EAAOkP,GAC9B,CAEA,SAASsH,GAAWxW,GAChB,OAAOuW,GAAYvW,EAAOgO,GAC9B,CAEA,SAASuI,GAAYvW,EAAOyW,GAKxB,OAJAzW,EAAQpD,GAAO,CAAE,EAAEoD,IACbsJ,MAAQmN,EAAOzW,EAAMsJ,OAC3BtJ,EAAM8T,IAAM2C,EAAOzW,EAAM8T,KAElB9T,CACX,CAKA,SAAS0W,GAAmBnB,EAAQpF,GAChC,IAAIwG,EAAa,CAAE,EAEnB,GAAIpB,EAAOpa,OAAQ,CAGf,IAAIyb,EAFJtB,GAAgBC,GAGhB,IAAK,IAAIH,KAASG,EAAQ,CACtB,IAAIsB,EAAQ,GACR5I,EAAOe,GAAYhB,GAAUoH,EAAM9L,QACvC,KAAO8L,EAAMtB,IAAM7F,GAAM,CACrB,IAAKkC,EAAWC,SAASnC,EAAK0B,eAC1BkH,EAAM3a,KAAK8R,GAAUC,IACjB4I,EAAM1b,OAAS,GAAG,CAClB,IAAI6F,EAAMiN,EAAKC,UACXyI,EAAW3V,GACX2V,EAAW3V,GAAKuU,OAAOrZ,KAAKkZ,GAE5BuB,EAAW3V,GAAO,CACd8V,QAAQ,EACRvB,OAAQ,CAACH,GAGrB,CAEJrG,GAAOd,EACX,CACA,GAAI4I,EAAM1b,OAAQ,CACdia,EAAMnH,KAAO4I,EAAM,GACnBzB,EAAM1H,KAAOmJ,EAAM1b,OACnBia,EAAMyB,MAAQA,EAEVzB,EAAM9L,MAAQuN,EAAM,KACpBzB,EAAM9L,MAAQuN,EAAM,IAExB,IAAIE,EAAShI,GAAOf,GAAU6I,EAAMG,IAAI,KACpC5B,EAAMtB,IAAMiD,IACZ3B,EAAMtB,IAAMiD,EAEpB,MACI3B,EAAMnH,KAAOe,GAAYhB,GAAUoH,EAAM9L,QACzC8L,EAAM1H,KAAO,EACb0H,EAAMyB,MAAQ,CAACzB,EAAMnH,MAGrB2I,GAAavH,GAAWuH,EAAU3I,KAAMmH,EAAMnH,QAC9CmH,EAAM6B,KAAOL,GAEjBA,EAAYxB,CAChB,CACJ,CAEA,OAAOuB,CACX,CAEA,SAASO,GAAgB9B,EAAOuB,EAAYnE,GACxC4C,EAAM+B,IAAM,EACR/B,EAAM6B,OACN7B,EAAM+B,IAAM/B,EAAM6B,KAAKG,OAAS,GAEpChC,EAAMgC,OAAShC,EAAM+B,IAAM3E,EAC3B,IAAI6E,EAAS,EACTrW,EAAMoU,EAAMnH,KAAKC,UACrB,GAAIyI,EAAW3V,GAAM,CACZ2V,EAAW3V,GAAK8V,SACjBH,EAAW3V,GAAKuU,OAAOC,MAAK,CAAC3a,EAAGC,IAAMD,EAAEsc,IAAMrc,EAAEqc,MAChDR,EAAW3V,GAAK8V,QAAS,GAE7B,IAAK,IAAIQ,KAAaX,EAAW3V,GAAKuU,OAClC,GAAIH,EAAM+B,IAAMG,EAAUF,QAAUhC,EAAMgC,OAASE,EAAUH,IAAK,CAC9D,IAAII,EAASD,EAAUF,OAAShC,EAAM+B,IAAM,EAC5CE,GAAUE,EACVnC,EAAM+B,KAAOI,EACbnC,EAAMgC,QAAUG,CACpB,CAER,CAEA,OAAOF,CACX,CAEA,SAASG,GAAcC,EAAM9X,GACzB8X,EAAKtc,OAASwE,EAAKxE,OACnB,IAAIyP,EAAS,GACb,IAAK,IAAI8M,KAAOD,EACZ7M,EAAO1O,KAAKwb,GAAKC,gBAErB,OAAO/M,CACX,CAUA,SAASgN,GAAgB5X,EAAOsJ,EAAOwK,EAAK+D,GACxC,OAAI7X,EAAMsJ,MAAQwK,GAAO9T,EAAM8T,IAAMxK,KAC7BuO,IACK3N,GAAQ2N,KACTA,EAAY,CAACA,IAEVA,EAAUC,MAAKC,GAAY/X,EAAM2T,YAAYvD,SAAS2H,EAAStE,OAKlF,CAEA,SAASuE,GAAY7D,GACjB,OAOJ,SAAsBA,GAClB,MAAmB,YAAZA,CACX,CATW8D,CAAa9D,IAAY+D,GAAW/D,IAe/C,SAAsBA,GAClB,MAAmB,YAAZA,CACX,CAjB2DgE,CAAahE,EACxE,CAEA,SAASiE,GAAQjE,GACb,MAAmB,eAAZA,CACX,CAMA,SAAS+D,GAAW/D,GAChB,MAAmB,UAAZA,CACX,CAMA,SAASkE,GAAW3Y,GAChB,OAAO4Y,GAAQ5Y,EAAM,MACzB,CAEA,SAAS6Y,GAAY7Y,GACjB,OAAO4Y,GAAQ5Y,EAAM,OACzB,CAEA,SAAS8Y,GAAa9Y,GAClB,OAAO4Y,GAAQ5Y,EAAM,QACzB,CAEA,SAAS+Y,GAAY/Y,GACjB,OAAO4Y,GAAQ5Y,EAAM,OACzB,CAEA,SAAS4Y,GAAQ5Y,EAAMgZ,GACnB,MAAO,IACAhZ,EACHiG,KAAM,QAAU+S,EAChBzB,KAAM,YAAcyB,EAE5B,CAEA,SAASC,GAAU5F,GACf,OAAO6C,IAAU,IAAIA,EAAO7C,QAChC,CAEA,SAAS6F,GAAgB7M,GACrB,IAAIzC,EAAOwK,EAUX,OATI/H,MACEzC,QAAOwK,OAAO/H,GACZzC,IACAA,EAAQ0F,GAAYlD,GAAWxC,KAE/BwK,IACAA,EAAM9E,GAAYlD,GAAWgI,MAG9B,CAACxK,QAAOwK,MACnB,CAEA,SAAS+E,GAAa5K,EAAM6K,GACxB,OAAOA,EAAMxP,OAAS2E,EAAO6K,EAAMxP,OAASwP,EAAMhF,KAAO7F,EAAO6K,EAAMhF,GAC1E,CAEA,SAASiF,GAAa9K,EAAM6K,GAOxB,OANIA,EAAMxP,OAAS2E,EAAO6K,EAAMxP,QAC5B2E,EAAO6K,EAAMxP,OAEbwP,EAAMhF,KAAO7F,EAAO6K,EAAMhF,MAC1B7F,EAAO6K,EAAMhF,KAEV7F,CACX,CAEA,SAAS+K,GAAgBjN,GACrB,IAAInB,EAAS,GAEb,OADAqO,GAAiBlN,EAAO,EAAGnB,GACpBA,CACX,CAEA,SAASqO,GAAiBlN,EAAOmN,EAAOC,GACpC,IAAIvO,EAAS,GACb,IAAK,IAAIwO,KAAQrN,EAAO,CACpB,IAAIgM,EAAWsB,GAAeD,GAC9BxO,EAAO1O,KAAK6b,GACZoB,EAAKjd,KAAK6b,GACV,IAAIlG,EAAU,CACVqH,QACA1Q,SAAU,GACV8Q,UAAU,EACVC,QAAQ,GAEZ3H,GAAWmG,EAAUlG,GACjBuH,EAAK5Q,WACLqJ,EAAQrJ,SAAWyQ,GAAiBG,EAAK5Q,SAAU0Q,EAAQ,EAAGC,GAEtE,CACA,OAAOvO,CACX,CAEA,SAASyO,GAAetN,GACpB,MAAO,CACH0H,GAAIC,OAAO3H,EAAM0H,IACjBM,MAAOhI,EAAMgI,OAAS,GACtByF,qBAAsBzN,EAAMyN,qBAC5BC,eAAgB1N,EAAM0N,eACtBrF,cAAerI,EAAMqI,eAAiB,CAAA,EAE9C,CAEA,SAASsF,GAAwB1Z,EAAO6X,GACpC,OAAO8B,GAAa3Z,EAAO6X,IAAY2B,oBAC3C,CAEA,SAASI,GAAkB5Z,EAAO6X,GAC9B,OAAO8B,GAAa3Z,EAAO6X,IAAY4B,cAC3C,CAEA,SAASE,GAAa3Z,EAAO6X,GACzB,OAAOA,EAAUgC,MAAK9B,GAAY/X,EAAM2T,YAAYvD,SAAS2H,EAAStE,KAC1E,CAEA,SAASqG,GAAKC,EAAQC,GAClB,OAAOlQ,GAAQ,CAACiQ,EAAQC,IAASC,IAAwB,IAAtBC,EAASC,GAAQF,EAC5CH,EAAO/I,GAAWoJ,GAChB,CAACH,OAAQG,GACT,IAAIC,KAAKC,eAAeH,EAASC,GACvC,MAAO,CACHH,OAAQ/L,GAAQ6L,EAAKE,OAAO9K,GAAYjB,IAC3C,GAET,CAEA,SAASqM,GAAUP,EAAQC,GACvB,OAAOlQ,GAAQ,CAACiQ,EAAQC,IAASO,IAAwB,IACjDvE,GAD2BkE,EAASC,GAAQI,EAEhD,GAAIxJ,GAAWoJ,GACXnE,EAAcmE,MACX,CACH,IAAIL,EAAO,IAAIM,KAAKC,eAAeH,EAASC,GAC5CnE,EAAcA,CAAC1M,EAAOwK,KAClB,GAAIxK,GAASwK,EACT,OAAOgG,EAAK9D,YAAY1M,EAAOwK,GAC5B,CAIH,IAAI3H,EAAQ2N,EAAKU,mBAAmB1G,EAAKxK,GACrCsB,EAAS,GACT6P,EAAU,CAAC,aAAc,YACzBC,EAAY,EAAC,GAAO,GACxB,IAAK,IAAI/N,KAAQR,EAAO,CACpB,IAAI9O,EAAIod,EAAQnT,QAAQqF,EAAKiI,QACzBvX,GAAK,EACAqd,EAAUrd,KACXuN,GAAU+P,GAAUF,EAAQ,EAAIpd,GAAI8O,GACpCuO,EAAUrd,IAAK,GAGnBuN,GAAU+B,EAAK/Q,KAEvB,CACA,OAAOgP,CACX,EAER,CACA,MAAO,CACHoL,YAAaA,CAAC1M,EAAOwK,IAAQkC,EAAY9G,GAAY5F,GAAQ4F,GAAY4E,IAC5E,GAET,CAEA,SAAS6G,GAAU/F,EAAQzI,GACvB,IAAIvB,EAAS,GACb,IAAK,IAAI+B,KAAQR,EACTQ,EAAKiI,QAAUA,IACfhK,GAAU+B,EAAK/Q,OAGvB,OAAOgP,CACX,CAEA,SAASgQ,GAAcC,GACnB,OAAO/Q,GACH,CAAC+Q,EAAMhD,UAAWgD,EAAMC,0BAA2BD,EAAME,QAASF,EAAMG,eACxEC,IAAuE,IAArEC,EAAYC,EAA4BC,EAAUC,GAAcJ,EAC1DrQ,EAASsQ,EAAWhU,QAAO6Q,IAAajG,GAAWiG,GAAUwB,SAsBjE,OApBI4B,IACAvQ,EAASsQ,EAAWhU,QAAO6Q,IACvB,IAAK,IAAI/X,KAASob,EACd,GACsB,eAAlBpb,EAAMmU,SACNnU,EAAM2T,YAAYvD,SAAS2H,EAAStE,KACpCzT,EAAMsJ,MAAQ+R,EAAcvH,KAC5B9T,EAAM8T,IAAMuH,EAAc/R,MAE1B,OAAO,EAGf,OAAO,CAAK,KAIfsB,EAAOzP,SACRyP,EAASoO,GAAgB,CAAC,CAAA,KAGvBpO,CAAM,GAGzB,CAEA,SAAS0Q,GAAYrN,EAAMsN,EAAeC,EAAoBC,EAAkBC,GAC5EzN,EAAOD,GAAUC,GACjB,IAAI0N,EAAQ,GACR7H,EAAM9F,GAAUC,GACpBE,GAAYF,EAAMwN,EAAiB3K,KACnC3C,GAAY2F,EAAK2H,EAAiBre,UAEP5B,IAAvBggB,IACAA,EAAqBD,EAAc9O,QAAU,KACvCD,GAAuC,EAAxB+O,EAAc9O,SAC7B8O,GAEV,IACIK,EADAC,EAAUL,EAAmB/O,SAAW,EAM5C,IAJKoP,IACDD,EAAQ5N,GAAUC,IAGfA,EAAO6F,GAAK,CAMf,IALA6H,EAAMzf,KAAK,CACPiT,GAAYlB,GACZyN,EAAgB1B,OAAO/L,GACvB4N,GAAYF,EAAMxgB,QAAU8S,GAAQ2N,KAEhCC,GAAW5N,GAAQ2N,GACvBzN,GAAYyN,EAAOJ,GAEvBrN,GAAYF,EAAMsN,EACtB,CAEA,OAAOI,CACX,CAEA,SAASG,GAAqBC,EAAcC,EAAcC,EAAyBC,EAAad,GAC5F,IAAIe,EAAQ3P,GAAeuP,GACvBK,EAAQ5P,GAAewP,GAE3B,GAAIC,EAAyB,CAEzB,IAAII,EAAS7P,GAAesE,GAAId,GAAUmM,GAAQ/e,GAAI,EAAG4S,GAAUoM,GAASvQ,MACxEyQ,EAAS9P,GAAepP,GAAI4S,GAAUoM,GAAQpM,GAAUqM,GAAUxQ,KAClE3E,EAAS6J,GAAWkL,GAAyBM,aAC3CN,EAAwBM,YACxBvc,IAAUoY,GAAQpY,EAAMmU,SAC9BqI,EAAM,IAAK,IAAIvO,KAAQiO,EAAa,CAChC,IAAI5S,EAAQ6E,GAAYH,GAAUC,GAAOkO,GACrCrI,EAAM3F,GAAYH,GAAUC,GAAOmO,GACnCK,EAAWtO,GAAYH,GAAUC,GAAOoO,GACxCtF,EAAS5I,GAAYH,GAAUC,GAAOqO,GAC1C,IAAK,IAAItc,KAASob,EACd,IAAKpb,EAAM6T,QAAU3M,EAAOlH,IAAUA,EAAMsJ,MAAQyN,GAAU/W,EAAM8T,IAAM2I,EAAU,CAChF,GAAIzc,EAAMsJ,MAAQA,EAAO,CACrB,IAAImD,EAAUrP,IAAK4C,EAAMsJ,MAAQ2E,GAAQ,IAAM+B,GAAUqM,IACrD5P,EAAUuD,GAAUmM,KACpBA,EAAM1P,QAAUA,EAExB,CACA,GAAIzM,EAAM8T,IAAMA,EAAK,CACjB,IAAIrH,EAAUqE,IAAK9Q,EAAM8T,IAAM7F,GAAQ,IAAM+B,GAAUsM,IACnD7P,EAAUuD,GAAUoM,KACpBA,EAAM3P,QAAUA,EAExB,CACA,GAAIuD,GAAUmM,KAAWnM,GAAUqM,IAAWrM,GAAUoM,KAAWpM,GAAUsM,GACzE,MAAME,CAEd,CAER,CACJ,CAEA,MAAO,CAAC1L,IAAKqL,EAAO/e,IAAKgf,EAC7B,CAkWA,MAAMM,GACFC,WAAAA,CAAYC,EAAS7Q,GAIjB,IAAI7L,EArWZ,SAAuB0c,GACnB,IAAI1c,EAAU,CACV2c,mBAAerhB,EACfshB,YAAY,EACZC,WAAY,CACRC,MAAO,SAEXC,cAAe,CAAE,EACjBhP,KAAM,IAAIjC,KACVkR,cAAU1hB,EACV2hB,gBAAiB,CACbC,QAAS,QACT3P,MAAO,UACPE,IAAK,WAET0P,yBAA0B,CACtBC,UAAW,QAEf5H,iBAAiB,EACjBtH,SAAU,CAAChB,MAAO,GAClByH,OAAQ,GACR0I,qBAAiB/hB,EACjBge,0BAAsBhe,EACtBie,oBAAgBje,EAChB8a,qBAAiB9a,EACjBgiB,gBAAYhiB,EACZiiB,gBAAYjiB,EACZma,kBAAcna,EACdkiB,mBAAeliB,EACfmiB,qBAAiBniB,EACjBoiB,qBAAiBpiB,EACjBqiB,aAAc,GACdC,gBAAiB,CACblQ,KAAM,UACNC,OAAQ,WAEZkQ,2BAA2B,EAC3BjD,2BAA2B,EAC3BkD,SAAU,EACVC,wBAAwB,EACxBC,cAAe,CACX5U,MAAO,QACP6U,OAAQ,GACRrK,IAAK,mBAETtB,YAAQhX,EACR2U,WAAY,GACZiO,iBAAkB,GAClBC,cAAc,EACdC,aAAS9iB,EACTue,YAAQve,EACR+iB,cAAc,EACdC,0BAAsBhjB,EACtBijB,2BAAuBjjB,EACvBqc,UAAW,GACX6G,YAAY,EACZC,WAAY,WACZC,aAAc,WACdC,kBAAkB,EAClBC,WAAY,GACZC,uBAAmBvjB,EACnBwjB,gBAAiB,CACbpR,KAAM,UACNC,OAAQ,WAEZoR,YAAa,WACbC,YAAa,WACbC,UAAW,GACXvJ,MAAO,CACH/B,OAAQ,aACRuL,OAAQ,YACRhH,QAAS,cACTiH,SAAU,eACVC,KAAM,UACNC,OAAQ,YACRC,YAAa,kBACbC,SAAU,KACVC,QAAS,aACTzU,QAAS,aACT0C,IAAK,SACLgS,QAAS,cACTjS,KAAM,UACNkS,SAAU,cACV5f,MAAO,WACP6f,UAAW,gBACXzJ,UAAW,gBACXD,WAAY,iBACZtB,OAAQ,YACRiL,MAAO,WACP3O,OAAQ,YACR4O,OAAQ,YACRC,aAAc,mBACdC,UAAW,eACXC,KAAM,UACNC,KAAM,UACNC,MAAO,WACP7B,aAAc,mBACd8B,WAAY,iBACZtI,SAAU,cACVuI,QAAS,aACTC,aAAc,mBACdvD,MAAO,WACPwD,KAAM,UACNzM,MAAO,WACP0M,QAAS,aACT1N,KAAM,GACN2N,SAAU,CAAC,SAAU,SAAU,SAAU,SAAU,SAAU,SAAU,UACvEC,WAAY,kBAEhBC,YAAa,CACTrT,KAAM,UACNE,MAAO,QACPE,IAAK,WAETkT,gBAAYrlB,EACZuX,UAAMvX,EACNslB,kBAActlB,EACdulB,MAAO,CAAA,GAGX,IAAK,IAAIC,KAAUpE,EACfoE,EAAOC,gBAAgB/gB,GAG3B,OAAOA,CACX,CAwOsB+gB,CAHdrE,EAAUA,GAAW,IAIjBsE,EAvOZ,SAAuBtE,GACnB,IAAIsE,EAAU,CACVjT,KAAMA,GAAQe,GAAYlD,GAAWmC,IACrCG,SAAU5B,GACVqI,OAAQrB,GACRqK,aAAclJ,GACdxE,WAAYzC,GAAQ,IAAI,IAAIjK,IAAIiK,IAChC0Q,iBAAkBvH,GAASA,EAAM5P,KAAIgH,GAAQe,GAAYlD,GAAWmC,MACpE4J,UAAWmB,GACX2F,WAAYnS,GACZoS,aAAcpS,GACduS,kBAAmBhT,QAAmBvQ,IAAVuQ,EAAsBS,GAAeT,QAASvQ,EAC1EyjB,YAAazS,GACb0S,YAAa1S,GACbqU,WAAYjI,IAGhB,IAAK,IAAIoI,KAAUpE,EACfoE,EAAOG,gBAAgBD,GAG3B,OAAOA,CACX,CAiNsBC,CAAcvE,GAG5B1c,EAAUkhB,GAAUlhB,EAASghB,GAC7BnV,EAAQqV,GAAUrV,EAAOmV,GAGzB,IAAK,IAAKG,EAAQzlB,KAAUvB,OAAOinB,QAAQphB,GACvCM,KAAK6gB,GAAU9X,GAAS3N,GAI5B4E,KAAK+gB,OAAShY,GAAS,IAAItD,KAC3BzF,KAAKghB,QAAUjY,GAAS,IAAItD,KAC5BzF,KAAKihB,OAAS,IAAIxb,IAClBzF,KAAKkhB,WAAanY,GAAS,IAC3B/I,KAAKmhB,SAlNF7X,GAkNqBtJ,KAlNPuS,MAAM6O,GAASA,GAAOvO,WAAW,aAmNlD7S,KAAKqhB,cAxLb,SAAsBhH,GAClB,OAAO/Q,GACH,CAAC+Q,EAAM5M,KAAM4M,EAAMzM,SAAUyM,EAAMmD,WACnC8D,IAAmC,IACDhO,GADhCiO,EAAOC,EAAWC,GAAUH,EACtBxY,EAAQ0E,GAAU+T,GAStB,OARIC,EAAUxU,OACVlE,EAAMqF,WAAW,GACVqT,EAAUjU,SAEjB0B,GAAenG,EAAO2Y,GAE1BnO,EAAM3F,GAAYH,GAAU1E,GAAQ0Y,GAE7B,CAAC1Y,QAAOwK,MAAI,GAG/B,CAwK6BoO,CAAa1hB,MAClCA,KAAKwa,aAjNb,SAAqBH,GACjB,OAAO/Q,GACH,CAAC+Q,EAAMgH,cAAehH,EAAMmD,SAAUnD,EAAMoE,YAAapE,EAAM8G,WAC/DQ,IAA0D,IAAxDC,EAAgBH,EAAWjG,EAAcqG,GAAUF,EAC7C7Y,EAAQ0E,GAAUoU,EAAe9Y,OACjCwK,EAAM9F,GAAUoU,EAAetO,KAEnC,GAAIuO,EAEA5S,GAAenG,EAAO2Y,GAx+BtC,SAAwBhU,EAAMN,GAC1B,IAAI+B,EAAO/B,EAAMM,EAAK0B,YACtB1B,EAAKU,WAAWV,EAAKW,cAAgBc,GAAQ,EAAIA,EAAOA,EAAO,GAEnE,CAq+BgB4S,CAAexO,EAAKmO,QACjB,GAAIjG,EAAatO,MAAQsO,EAAavP,QAAUZ,GAAgB,CACnEsC,GAAYO,GAAYoF,GAAMkI,GAC9B,IAAIuG,EAAS7T,GAAYV,GAAU8F,IAC/ByO,EAASjZ,IACTA,EAAQiZ,EAEhB,CAEA,MAAO,CAACjZ,QAAOwK,MAAI,GAG/B,CA2L4B0O,CAAYhiB,MAChCA,KAAKiiB,cAAgBlZ,GAAS,CAACD,WAAO9N,EAAWsY,SAAKtY,IACtDgF,KAAKua,QAhIb,SAAgBF,GACZ,IACI6H,EADA3H,EAAUxR,GAAS,IAEnBoZ,EAAW,EACXC,EAAiB,CAAE,EAiFvB,OAhFA9Y,GACI,CAAC+Q,EAAMhG,OAAQgG,EAAMgD,aAAchD,EAAMG,aAAcH,EAAM4H,cAAe5H,EAAMwD,aAAcxD,EAAMyD,UACtG,CAAC9T,EAAQxM,IAAQkT,IAAS,KACtB,IAAK2R,EAASC,EAAezH,EAAe0H,EAAgBC,EAAeC,GAAYzY,EACvF,GAAKsY,EAAc3nB,QAKnB,IAAK4nB,EAAezZ,OAASyZ,EAAezZ,MAAQ+R,EAAc/R,OAASyZ,EAAejP,IAAMuH,EAAcvH,MAAQkP,EAAe,CAC7HN,GAEAA,EAAgBQ,QAGpBR,EAAkB,IAAIS,gBAElBpS,GAAWkS,KAAcN,GACzBM,GAAS,GAEb,IAAIG,EAAcA,KACK,KAAbT,GAAkB5R,GAAWkS,IAC/BA,GAAS,EACb,EAEApO,EAAS,GAETwO,EAAUxf,GAAKuf,IACfE,EAAU3jB,IACVkV,EAASA,EAAO0O,OAAO/P,GAAa7T,IACpC3B,EAAI6W,GACJuO,GAAa,EAGbI,EAAWrU,GAAYkM,EAAc/R,OACrCma,EAAStU,GAAYkM,EAAcvH,KAEvC,IAAK,IAAIc,KAAUkO,EAAe,CAC9B,GAAI/R,GAAW6D,EAAOC,QAAS,CAE3B,IAAIjK,EAASgK,EAAOC,OAAO,CACvBvL,MAAO4F,GAAYmM,EAAc/R,OACjCwK,IAAK5E,GAAYmM,EAAcvH,KAC/B0P,WACAC,UACDH,EAASD,QACG7nB,IAAXoP,GACA5H,QAAQC,QAAQ2H,GAAQxH,KAAKkgB,EAASD,EAE9C,KAAO,CAGH,IAAIK,EAAS3S,GAAW6D,EAAOM,aAAeN,EAAOM,cAAgBtY,GAAO,GAAIgY,EAAOM,aACvFwO,EAAOpa,MAAQka,EACfE,EAAO5P,IAAM2P,EACbC,EAAS,IAAIC,gBAAgBD,GAE7B,IAAoCpE,EAAhCxK,EAAMF,EAAOE,IAAK8O,EAAU,CAAE,EAC9B,CAAC,MAAO,QAAQxT,SAASwE,EAAOI,QAChCF,IAAQA,EAAI1E,SAAS,KAAO,IAAM,KAAOsT,GAEzCE,EAAQ,gBAAkB,kDAC1BtE,EAAO5L,OAAOgQ,IAGlBG,MAAM/O,EAAK,CAACE,OAAQJ,EAAOI,OAAQ4O,UAAStE,OAAMwE,OAAQpB,EAAgBoB,OAAQC,YAAa,gBAC1F3gB,MAAK4gB,GAAYA,EAASC,SAC1B7gB,KAAKkgB,GACLY,MAAMb,EACf,GACEV,CACN,CAEAI,EAAezZ,MAAQ+R,EAAc/R,MACrCyZ,EAAejP,IAAMuH,EAAcvH,GACvC,OAtEI9V,EAAI6kB,EAsER,GACDD,EAAgB/H,EAAM0G,SACzB,IACFxmB,UAAUggB,EAAQ/c,KAEb+c,CACX,CA0CuBlG,CAAOrU,MACtBA,KAAK2jB,KAxCF9a,GAASyC,MAAc9N,IAC1B,IAAIomB,EAAWC,aAAY,KACvBrmB,EAAI8N,KAAa,GAClB,KAEH,MAAO,IAAMwY,cAAcF,EAAS,IAoCpC5jB,KAAK+jB,OAhCb,SAAe1J,GACX,OAAO/Q,GAAQ+Q,EAAMsJ,MAAMK,GAASxV,GAAYhB,GAAUwW,KAC9D,CA8BsBxH,CAAMxc,MACpBA,KAAKqV,eAAiByE,GAAU9Z,KAAKuZ,OAAQvZ,KAAKsd,iBAClDtd,KAAKikB,eAAiB3K,GAAKtZ,KAAKuZ,OAAQvZ,KAAKwe,iBAC7Cxe,KAAKkkB,eAAiB5K,GAAKtZ,KAAKuZ,OAAQvZ,KAAK2c,iBAC7C3c,KAAKmkB,iBAAmB7K,GAAKtZ,KAAKuZ,OAAQvZ,KAAK6c,0BAC/C7c,KAAKokB,WAAatK,GAAU9Z,KAAKuZ,OAAQvZ,KAAKogB,aAC9CpgB,KAAKqkB,QAAUtb,QAAS/N,GACxBgF,KAAKskB,YAAcvb,IAAS,GAC5B/I,KAAKukB,WAzJb,SAAmBlK,GACf,OAAO/Q,GACH,CAAC+Q,EAAM5M,KAAM4M,EAAMG,aAAcH,EAAM+J,WAAY/J,EAAM8G,WACzDqD,IAAoD,IAAlDjD,EAAO1G,EAAe4J,EAAa5C,GAAU2C,EAC3C,OAAO3C,EACD4C,EAAYjP,YAAY+L,EAAOA,GAC/BkD,EAAYjP,YAAYqF,EAAc/R,MAAOoF,GAAYV,GAAUqN,EAAcvH,MAAM,GAGzG,CAgJ0BoR,CAAU1kB,MAC5BA,KAAK2kB,WApLb,SAAmBtK,GACf,OAAO/Q,GAAQ,CAAC+Q,EAAMG,aAAcH,EAAM1K,aAAaiV,IAAkC,IAAhC/J,EAAegK,GAAYD,EAC5EvO,EAAQ,GACR5I,EAAOe,GAAYhB,GAAUqN,EAAc/R,QAC3CwK,EAAM9E,GAAYhB,GAAUqN,EAAcvH,MAC9C,KAAO7F,EAAO6F,GACLuR,EAAYjV,SAASnC,EAAK0B,cAC3BkH,EAAM3a,KAAK8R,GAAUC,IAEzBc,GAAOd,GAaX,OAXK4I,EAAM1b,QAAUkqB,EAAYlqB,QAAUkqB,EAAYlqB,OAAS,IAE5D0f,EAAM5M,KAAKrK,QAAOqK,IACd,KAAOoX,EAAYjV,SAASnC,EAAK0B,cAC7BZ,GAAOd,GAEX,OAAOA,CAAI,IAEf4I,EAAQpU,EAAIoY,EAAMsK,aAGftO,CAAK,GAEpB,CA4J0ByO,CAAU9kB,MAC5BA,KAAKsV,MAhJb,SAAc+E,GACV,OAAO/Q,GAAQ,CAAC+Q,EAAM9H,KAAM8H,EAAMkK,WAAYlK,EAAMgH,cAAehH,EAAMG,eAAeuK,GA9zB5F,SAAoBxS,EAAMgS,EAAYlD,EAAe7G,GACjD,MAAO,CACHhZ,KAAM+Q,EACNgB,MAAOgR,EACP/R,aAAc6O,EAAcvY,MAC5B2J,WAAY4O,EAAc/N,IAC1BZ,YAAa8H,EAAa1R,MAC1B6J,UAAW6H,EAAalH,IACxB2L,cAAUjkB,EAElB,CAozBoGgqB,IAAcD,IAClH,CA8IqBxS,CAAKvS,MAClBA,KAAKilB,eAAiBlc,QAAS/N,GAE/BgF,KAAKklB,aAAenc,GAAS,IAC7B/I,KAAKmlB,SAAWpc,GAAS,CAAC,KAAM,OAChC/I,KAAKolB,UAAYrc,GAAS0H,IAC1BzQ,KAAKqlB,QAAUtc,QAAS/N,GAGxBgF,KAAKslB,KAAO,CAAC9kB,EAAKpF,KACVmqB,GAAS/kB,EAAKR,QACV0gB,EAAQlgB,KACRpF,EAAQslB,EAAQlgB,GAAKpF,IAEzB4E,KAAKQ,GAAKhD,IAAIpC,GAClB,EAEJ4E,KAAKwlB,KAAOhlB,GAAO+kB,GAAS/kB,EAAKR,MAAQiC,EAAIjC,KAAKQ,SAAQxF,EAG1D,IAAK,IAAIwlB,KAAUpE,EACfoE,EAAOiF,eAAezlB,MAGtBuL,EAAMgH,MAENvS,KAAKuS,KAAK/U,IAAI+N,EAAMgH,MAIxB,IAAIgO,EAAQ,IAAItd,IAAI,IAAI0F,GAAKjJ,EAAQ6gB,UAAW5X,GAAK4C,EAAMgV,OAAS,CAAA,KACpE,IAAK,IAAIhO,KAAQgO,EAAO,CACpB,IAAImF,EAAUC,GAAUjmB,EAASA,EAAQ6gB,MAAMhO,IAAS,IACpDqT,EAAOD,GAAUD,EAASna,EAAOA,EAAMgV,QAAQhO,IAAS,IACxDhX,EAAYqqB,EAAKrqB,UAErBsqB,GAAWD,EAAM5lB,MAEjB,IAAK,IAAIQ,KAAOmI,GAAKid,GAAO,CACxB,IAAIpoB,IAACA,EAAG8nB,KAAEA,EAAO9nB,KAAQsoB,GAAQ9lB,KAAKQ,GAEtCR,KAAKQ,GAAO,CAERhD,IAAK,CAAC,aAAc,SAASoS,SAASpP,GAChCpF,IACE,GAAImV,GAAWnV,GAAQ,CACnB,IAAIgP,EAAShP,EAAMsqB,EAAQllB,IAC3BolB,EAAKplB,GAAO4J,EACZ5M,EAAIA,IAAQ8nB,EAAOlb,EAAShP,EAChC,MACIwqB,EAAKplB,GAAOpF,EACZoC,EAAIpC,EACR,EAEFA,IACEwqB,EAAKplB,GAAOpF,EACZoC,EAAIpC,EAAM,EAElBkqB,UACGQ,EAEX,CAEA9lB,KAAKuS,KAAKhY,WAAUwrB,IAChB,GAAIA,IAAYxT,EAAM,CAElBvS,KAAKilB,eAAeznB,IAAIjC,GACpBgV,GAAWqV,EAAKtF,eAChBxd,IAAOF,MAAK,IAAMgjB,EAAKtF,aAAare,EAAIjC,KAAKsV,UAGjD,IAAK,IAAI9U,KAAOmI,GAAKid,GACjB5lB,KAAKQ,GAAK8kB,KAAKM,EAAKplB,GAE5B,IAER,CACJ,EAGJ,SAASogB,GAAUgF,EAAMlF,GACrB,IAAItW,EAAS,IAAIwb,GACjB,IAAK,IAAIplB,KAAOmI,GAAK+X,GACblgB,KAAO4J,IACPA,EAAO5J,GAAOkgB,EAAQlgB,GAAK4J,EAAO5J,KAG1C,GAAIolB,EAAKrF,MAAO,CACZnW,EAAOmW,MAAQ,CAAE,EACjB,IAAK,IAAIhO,KAAQ5J,GAAKid,EAAKrF,OACvBnW,EAAOmW,MAAMhO,GAAQqO,GAAUgF,EAAKrF,MAAMhO,GAAOmO,EAEzD,CACA,OAAOtW,CACX,CAEA,SAASub,KACL,IAAIvb,EAAS,CAAE,EAAC,IAAA,IAAA4b,EAAAtrB,UAAAC,OADEoqB,EAAIlqB,IAAAA,MAAAmrB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJlB,EAAIkB,GAAAvrB,UAAAurB,GAEtB,IAAK,IAAIL,KAAQb,EAAM,CACnB,IAAImB,EAAW,CAAE,EACjB,IAAK,IAAI1lB,IAAO,CAAC,aAAc,SACvB+P,GAAWqV,EAAKplB,MAChB0lB,EAAS1lB,GAAOolB,EAAKplB,GAAK4J,EAAO5J,KAGzC4J,EAAS,IACFA,KACAwb,KACAM,EAEX,CACA,OAAO9b,CACX,CAEA,SAASyb,GAAWD,EAAMvL,GACtB1R,GAAKid,GACAlf,QAAOlG,IAAQ+kB,GAAS/kB,EAAK6Z,IAAiB,QAAP7Z,IACvCvG,SAAQuG,UAAcolB,EAAKplB,IACpC,CAEA,SAAS+kB,GAAS/kB,EAAK6Z,GACnB,OAAOA,EAAM8L,eAAe3lB,IAAmB,MAAXA,EAAI,EAC5C,CAIA,SAAS4lB,GAAmBvqB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASygB,GAAkBxqB,GAC1B,IAAIyqB,EAEAC,EACAC,EACAC,EACAC,EAJAC,EAA0B9qB,EAAI,GAAcA,EAAI,KAAO,GAM3D,SAAS+qB,IACR,OAA2B/qB,EAAI,IAAeA,EAAI,IACnD,CAEA,MAAO,CACNmI,CAAAA,GACCsiB,EAAWxnB,EAAQ,UACnBynB,EAAIrnB,EAAKynB,GAET1mB,EAAKqmB,EAAU,QAASE,EAAwC3qB,EAAI,GAAGkjB,QAAoBljB,EAAI,KAAkBA,EAAI,IACnH,IAAiBA,EAAI,GAAG+iB,OACxB,IAAM,OAAoB/iB,EAAI,IAChC,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqoB,EAAUjoB,GACzBL,EAAOsoB,EAAUC,GAEZE,IACJC,EAAUG,EAASP,EAAU,QAASM,GACtCH,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACkC,IAApCvqB,EAAM,IAAqCoqB,KAAaA,EAA0B9qB,EAAI,GAAcA,EAAI,KAAO,KAAKyE,EAASimB,EAAGI,GAE1F,IAAtCpqB,EAAM,IAAuCiqB,KAA0BA,EAAwC3qB,EAAI,GAAGkjB,QAAoBljB,EAAI,KAAkBA,EAAI,IACtK,IAAiBA,EAAI,GAAG+iB,OACxB,IAAM,OAAoB/iB,EAAI,MAC/BoE,EAAKqmB,EAAU,QAASE,EAEzB,EACD3nB,CAAAA,CAAED,GACGA,GACHL,EAAO+nB,GAGRG,GAAU,EACVC,GACD,EAEF,CAGA,SAASK,GAAkBlrB,GAC1B,IAAIyqB,EACAE,EACAQ,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCsiB,EAAWxnB,EAAQ,UAEnBmB,EAAKqmB,EAAU,QAASE,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,KAA0BA,EAAI,GAAcA,EAAI,KAAK+iB,OAC3J,IAAiB/iB,EAAI,GAAG+iB,OACxB,IACF,EACD5Y,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqoB,EAAUjoB,GAEpBooB,IACJC,EAAU,CACTG,EAASP,EAAU,SAAS,WACvBpsB,EAA+B2B,EAAI,GAAcA,EAAI,KAAKorB,QAA2BprB,EAAI,GAAcA,EAAI,KAAKorB,MAAMC,MAAMlnB,KAAMtF,UACvI,IACA+C,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMumB,EAA6BzqB,EAAI,GAAcA,EAAI,KAAKqD,QAGpHunB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAE6C,IAA/CvqB,EAAM,IAAgDiqB,KAA0BA,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,KAA0BA,EAAI,GAAcA,EAAI,KAAK+iB,OACvN,IAAiB/iB,EAAI,GAAG+iB,OACxB,MACD3e,EAAKqmB,EAAU,QAASE,GAGrBQ,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAkD,IAAvC7G,EAAM,IAAsCyqB,EAAkB5jB,OAAOrD,KAAK,KAAyBlE,EAAI,GAAcA,EAAI,KAAKqD,KAChM,EACDL,CAAAA,CAAED,GACGA,GACHL,EAAO+nB,GAGRG,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAGA,SAASS,GAAkBtrB,GAC1B,IAAIyqB,EAEAC,EACAC,EACAC,EACAC,EAJAC,EAA0B9qB,EAAI,GAAcA,EAAI,KAAO,GAM3D,MAAO,CACNmI,CAAAA,GACCsiB,EAAWxnB,EAAQ,UACnBynB,EAAIrnB,EAAKynB,GACT1mB,EAAKqmB,EAAU,QAASE,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,KACxGyqB,EAASlH,SAA6BvjB,EAAI,EAC1C,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqoB,EAAUjoB,GACzBL,EAAOsoB,EAAUC,GAEZE,IACJC,EAAUG,EAASP,EAAU,QAA2BzqB,EAAI,KAC5D4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACkC,IAApCA,EAAM,IAAqCoqB,KAAaA,EAA0B9qB,EAAI,GAAcA,EAAI,KAAO,KAAKyE,EAASimB,EAAGI,GAEjG,GAA/BpqB,EAAM,IAA+BiqB,KAA0BA,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,MAClJoE,EAAKqmB,EAAU,QAASE,GAGQ,EAA7BjqB,EAAM,KACT+pB,EAASlH,SAA6BvjB,EAAI,GAE3C,EACDgD,CAAAA,CAAED,GACGA,GACHL,EAAO+nB,GAGRG,GAAU,EACVC,GACD,EAEF,CAGA,SAASU,GAAkBvrB,GAC1B,IAAIyqB,EACAzpB,EACAwqB,EACAb,EACAc,EACAC,EACAd,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCsiB,EAAWxnB,EAAQ,UACnBjC,EAAIiC,EAAQ,KACZmB,EAAKpD,EAAG,QAASwqB,EAAiCxrB,EAAI,GAAG6jB,KAAO,OAAoB7jB,EAAI,KACxFoE,EAAKqmB,EAAU,QAASE,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,KACxGoE,EAAKqmB,EAAU,aAAcgB,EAA4CzrB,EAAI,GAAGsJ,MAChFlF,EAAKqmB,EAAU,QAASiB,EAAuC1rB,EAAI,GAAGsJ,MACtEmhB,EAASlH,SAA4BvjB,EAAI,EACzC,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqoB,EAAUjoB,GACzBL,EAAOsoB,EAAUzpB,GAEZ4pB,IACJC,EAAUG,EAASP,EAAU,QAAkBzqB,EAAI,KACnD4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GAC6B,GAA/BA,EAAM,IAA+B8qB,KAAmBA,EAAiCxrB,EAAI,GAAG6jB,KAAO,OAAoB7jB,EAAI,MAClIoE,EAAKpD,EAAG,QAASwqB,GAGiB,GAA/B9qB,EAAM,IAA+BiqB,KAA0BA,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,MAClJoE,EAAKqmB,EAAU,QAASE,GAGM,IAA3BjqB,EAAM,IAA4B+qB,KAA+BA,EAA4CzrB,EAAI,GAAGsJ,OACvHlF,EAAKqmB,EAAU,aAAcgB,GAGC,IAA3B/qB,EAAM,IAA4BgrB,KAA0BA,EAAuC1rB,EAAI,GAAGsJ,OAC7GlF,EAAKqmB,EAAU,QAASiB,GAGO,GAA5BhrB,EAAM,KACT+pB,EAASlH,SAA4BvjB,EAAI,GAE1C,EACDgD,CAAAA,CAAED,GACGA,GACHL,EAAO+nB,GAGRG,GAAU,EACVC,GACD,EAEF,CAGA,SAASc,GAAkB3rB,GAC1B,IAAIyqB,EACAzpB,EACAwqB,EACAb,EACAc,EACAC,EACAd,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCsiB,EAAWxnB,EAAQ,UACnBjC,EAAIiC,EAAQ,KACZmB,EAAKpD,EAAG,QAASwqB,EAAiCxrB,EAAI,GAAG6jB,KAAO,OAAoB7jB,EAAI,KACxFoE,EAAKqmB,EAAU,QAASE,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,KACxGoE,EAAKqmB,EAAU,aAAcgB,EAA4CzrB,EAAI,GAAG4a,MAChFxW,EAAKqmB,EAAU,QAASiB,EAAuC1rB,EAAI,GAAG4a,MACtE6P,EAASlH,SAA4BvjB,EAAI,EACzC,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqoB,EAAUjoB,GACzBL,EAAOsoB,EAAUzpB,GAEZ4pB,IACJC,EAAUG,EAASP,EAAU,QAAkBzqB,EAAI,KACnD4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GAC6B,GAA/BA,EAAM,IAA+B8qB,KAAmBA,EAAiCxrB,EAAI,GAAG6jB,KAAO,OAAoB7jB,EAAI,MAClIoE,EAAKpD,EAAG,QAASwqB,GAGiB,GAA/B9qB,EAAM,IAA+BiqB,KAA0BA,EAAwC3qB,EAAI,GAAGkjB,OAAS,OAAoBljB,EAAI,MAClJoE,EAAKqmB,EAAU,QAASE,GAGM,IAA3BjqB,EAAM,IAA4B+qB,KAA+BA,EAA4CzrB,EAAI,GAAG4a,OACvHxW,EAAKqmB,EAAU,aAAcgB,GAGC,IAA3B/qB,EAAM,IAA4BgrB,KAA0BA,EAAuC1rB,EAAI,GAAG4a,OAC7GxW,EAAKqmB,EAAU,QAASiB,GAGO,EAA5BhrB,EAAM,KACT+pB,EAASlH,SAA4BvjB,EAAI,GAE1C,EACDgD,CAAAA,CAAED,GACGA,GACHL,EAAO+nB,GAGRG,GAAU,EACVC,GACD,EAEF,CAGA,SAASe,GAAkB5rB,GAC1B,IAAI6rB,EACAC,EACAX,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACC0jB,EAAK5oB,EAAQ,MACbmB,EAAKynB,EAAI,QAASC,EAA4B9rB,EAAI,GAAG0X,MACrD,EACDvN,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQypB,EAAIrpB,GAEdooB,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAM2nB,EAAoB7rB,EAAI,KAC7F4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACoB,GAAtBA,EAAM,IAAsBorB,KAAoBA,EAA4B9rB,EAAI,GAAG0X,QACtFtT,EAAKynB,EAAI,QAASC,GAGfX,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAsC,GAA3B7G,EAAM,IAAyByqB,EAAkB5jB,OAAOrD,KAAK,KAAsBlE,EAAI,GACzJ,EACDgD,CAAAA,CAAED,GACGA,GACHL,EAAOmpB,GAGRjB,GAAU,EACVC,GACD,EAEF,CAGA,SAASkB,GAAoB/rB,GAC5B,IAAIgsB,EAEJ,SAASC,EAAkBjsB,EAAKU,GAC/B,MAA0B,SAAXV,EAAI,IAAuB4rB,GAChB,QAAX5rB,EAAI,IAAsB2rB,GACf,QAAX3rB,EAAI,IAAsBurB,GACf,SAAXvrB,EAAI,IAAuBsrB,GACnBtrB,EAAI,GAAcA,EAAI,KAAakrB,GAChC,IAAXlrB,EAAI,IAAkBwqB,QAArC,CACD,CAEA,IAAI0B,EAAqBD,EAAkBjsB,GACvCmsB,EAAWD,GAAsBA,EAAmBlsB,GAExD,MAAO,CACNmI,CAAAA,GACKgkB,GAAUA,EAAShkB,IACvB6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACL2pB,GAAUA,EAAShiB,EAAE/H,EAAQI,GACjCD,EAAOH,EAAQ4pB,EAAiBxpB,EAChC,EACDjB,CAAAA,CAAEvB,EAAKU,GACFwrB,KAAwBA,EAAqBD,EAAkBjsB,KAASmsB,EAC3EA,EAAS5qB,EAAEvB,EAAKU,IAEZyrB,GAAUA,EAASnpB,EAAE,GACzBmpB,EAAWD,GAAsBA,EAAmBlsB,GAEhDmsB,IACHA,EAAShkB,IACTgkB,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,IAGzC,EACDhpB,CAAAA,CAAED,GACGA,GACHL,EAAOspB,GAGJG,GACHA,EAASnpB,EAAED,EAEb,EAEF,CAEA,SAASqpB,GAAkBpsB,GAC1B,IAAIqsB,EACAC,EAAa3jB,GAA8B3I,EAAI,IAC/CusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAK+qB,GAAoBxB,GAAmBvqB,EAAKssB,EAAYtrB,IAG1E,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,EAC9B,EACDjB,CAAAA,CAAEvB,EAAKU,GACN,GAAyJ,SAArJA,EAAM,GAAyJ,CAElK,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA8B3I,EAAI,IAG1CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYwgB,GAAmBvqB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAK+qB,GAAoBhiB,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAEA,KAAOrrB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAASwtB,EAAWxtB,MACjC,CACA,EACDkC,EAAGwrB,EACH9jB,EAAG8jB,EACHxpB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAAS0pB,GAAWC,EAAQC,EAASC,GACpC,IAAIjH,EACAD,EACAsD,EACA6D,EACAhN,EACAkG,EACA+G,EACAC,EACAC,EACAC,EACA1H,GACA2H,QAAEA,GAAYP,GACdnH,cAAEA,EAAakD,WAAEA,EAAUI,WAAEA,EAAUpI,WAAEA,EAAUE,cAAEA,EAAahP,KAAEA,EAAIG,SAAEA,EAAQ+B,WAAEA,EAAUyF,MAAEA,EAAKiL,WAAEA,EAAU9N,KAAEA,GAASxQ,EAAW,SAC3IzG,EAAoBitB,EAAQlH,GAAejmB,GAASqtB,EAAa,GAAI7G,EAAiBxmB,KACtFE,EAAoBitB,EAAQhE,GAAYnpB,GAASqtB,EAAa,EAAGG,EAAcxtB,KAC/EE,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,GAAI/M,EAActgB,KAChFE,EAAoBitB,EAAQhM,GAAYnhB,GAASqtB,EAAa,EAAGI,EAAcztB,KAC/EE,EAAoBitB,EAAQ9L,GAAerhB,GAASqtB,EAAa,EAAGK,EAAiB1tB,KACrFE,EAAoBitB,EAAQ9a,GAAMrS,GAASqtB,EAAa,EAAGlH,EAAQnmB,KACnEE,EAAoBitB,EAAQ3a,GAAUxS,GAASqtB,EAAa,GAAIjH,EAAYpmB,KAC5EE,EAAoBitB,EAAQ5Y,GAAYvU,GAASqtB,EAAa,GAAI5D,EAAczpB,KAChFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChFE,EAAoBitB,EAAQhW,GAAMnX,GAASqtB,EAAa,EAAGrH,EAAQhmB,KACnE,IACI4tB,EAAcC,EAAcC,EAD5B1M,EAAQhO,GAAYlD,MAEpB6d,GAAU,EAMd,SAASC,IACR,OAAO1N,EAAY9R,OAAM6D,GAAQ4K,GAAa5K,EAAMib,IACrD,CAoDA,OAvCAH,EAAOngB,MAAQogB,IACV,YAAaA,GAASC,EAAa,EAAGM,EAAUP,EAAQO,QAAQ,EAGrER,EAAO/sB,GAAG4H,OAAS,KAClB,GAAuG,UAAnGmlB,EAAO/sB,GAAGe,MAAM,KAvBb4sB,EAwBY,CAKjB,GAJAA,GAAU,EACVV,EAAa,EAAGO,GAAe,GAC/BP,EAAa,EAAGQ,GAAe,GAE3BP,EAAY5f,MAAO,CACtB,IAAIugB,EAAc7b,GAAU+T,GAC5BjkB,EAAgBmQ,EAAM8T,EAAQ7R,GAAS6R,EAAOC,EAAWqD,GAActD,GACvEkH,EAAa,EAAGO,EAAeI,KAC/B9rB,EAAgBmQ,EAAM8T,EAAQ8H,EAAa9H,EAC5C,CAEA,GAAImH,EAAYpV,IAAK,CACpB,IAAI+V,EAAc7b,GAAU+T,GAC5BjkB,EAAgBmQ,EAAM8T,EAAQ9R,GAAS8R,EAAOC,GAAYD,GAC1DkH,EAAa,EAAGQ,EAAeG,KAC/B9rB,EAAgBmQ,EAAM8T,EAAQ8H,EAAa9H,EAC5C,CAIA,GAFAkH,EAAa,EAAGS,EAAgB1M,GAASoF,EAAe9Y,OAAS0T,EAAQoF,EAAetO,MAEnF4V,IAAkBR,EAAY5f,OAAS4f,EAAYpV,KAAM,CAC7D,IAAI+V,EAAc7b,GAAU+T,GAC5BjkB,EAAgBmQ,EAAM8T,EAAQ/T,GAAUgP,GAAQ+E,GAChDkH,EAAa,EAAGS,EAAgBE,KAChC9rB,EAAgBmQ,EAAM8T,EAAQ8H,EAAa9H,EAC5C,CAEAze,IAAOF,MAAK,IAAMumB,GAAU,GAC7B,CACD,EAGM,CACNJ,EACAG,EACA3H,EACAyH,EACAC,EACAN,EACAC,EACAC,EACAC,EACA1H,EACAC,EACAkD,EACAI,EACApI,EACAE,EACAhP,EACAG,EACA+B,EACAyF,EACAiL,EACA9N,EACAiK,EAxED,WACClf,EAAgBmQ,EAAM8T,EAAQ7R,GAAS6R,EAAOC,EAAWqD,GAActD,EACxE,EAEA,WACCjkB,EAAgBmQ,EAAM8T,EAAQ9R,GAAS8R,EAAOC,GAAYD,EAC3D,EAqECC,EACAqD,EACA6D,EACA9G,EAtEqB0H,IAAMhsB,EAAgBmQ,EAAM8T,EAAQ/T,GAAUgP,GAAQ+E,GACpDxC,GAAUzhB,EAAgBiV,EAAM6O,EAAQrC,EAAQqC,GAyEzE,CAEA,MAAMmI,WAAgBphB,GACrBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAAS4oB,GAAYL,GAAmB7tB,EAAgB,CAAE2uB,QAAS,GAAK,KAAM,EAAE,GAAI,GAChG,EAKD,SAASU,GAAmB5tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,GAAKX,EAAKpI,GACb+I,CACR,CAEA,SAAS8jB,GAAmB7tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,GAAKX,EAAKpI,GACb+I,CACR,CAGA,SAAS+jB,GAAkB9tB,GAC1B,IAAI+tB,EACAC,EAGJ,OAFAD,EAAY,IAAIL,GAAQ,CAAEzoB,MAAO,CAAEioB,QAAqBltB,EAAI,MAErD,CACNmI,CAAAA,GACCsC,GAAiBsjB,EAAUpuB,GAAGkI,SAC9B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBqjB,EAAW3rB,EAAQI,GACnCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMutB,EAAoB,CAAE,EACH,EAArBvtB,IAAwButB,EAAkBf,QAAsBltB,EAAI,IACxE+tB,EAAUnhB,KAAKqhB,EACf,EACDjtB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc0lB,EAAUpuB,GAAGkI,SAAUU,GACrCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeslB,EAAUpuB,GAAGkI,SAAUU,GACtCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBijB,EAAWhrB,EAC9B,EAEF,CAGA,SAASmrB,GAAgBluB,GACxB,IAAImuB,EACAJ,EACAK,EACAJ,EAGJ,OAFAD,EAAY,IAAIL,GAAQ,CAAEzoB,MAAO,CAAEioB,QAAqBltB,EAAI,MAErD,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiBsjB,EAAUpuB,GAAGkI,UAC9BzD,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGmjB,YACvD,EACDhZ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgBqjB,EAAWI,EAAK,MAChCH,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMutB,EAAoB,CAAE,EACH,EAArBvtB,IAAwButB,EAAkBf,QAAsBltB,EAAI,IACxE+tB,EAAUnhB,KAAKqhB,KAEVD,GAA8B,EAAnBttB,GAAwB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGmjB,eAChG/e,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc0lB,EAAUpuB,GAAGkI,SAAUU,GACrCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeslB,EAAUpuB,GAAGkI,SAAUU,GACtCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRrjB,GAAkBijB,EACnB,EAEF,CAGA,SAASM,GAAoBruB,GAC5B,IAAIsuB,EACAnC,EACAH,EACAgC,EACJ,MAAMO,EAAoB,CAACL,GAAiBJ,IACtCU,EAAY,GAElB,SAASvC,EAAkBjsB,EAAKU,GAC/B,OAAgBV,EAAI,GAAGlB,OAAS,EAAU,EACnC,CACR,CAKA,OAHAwvB,EAA2BrC,EAAkBjsB,GAC7CmsB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAEtF,CACNmI,CAAAA,GACCgkB,EAAShkB,IACT6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACTgsB,EAAUF,GAA0BnkB,EAAE/H,EAAQI,GAC9CD,EAAOH,EAAQ4pB,EAAiBxpB,GAChCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,IAAI+tB,EAAuBH,EAC3BA,EAA2BrC,EAAkBjsB,GAEzCsuB,IAA6BG,EAChCD,EAAUF,GAA0B/sB,EAAEvB,EAAKU,IAE3CuH,KAEAQ,GAAe+lB,EAAUC,GAAuB,EAAG,GAAG,KACrDD,EAAUC,GAAwB,IAAI,IAGvCrmB,KACA+jB,EAAWqC,EAAUF,GAEhBnC,EAIJA,EAAS5qB,EAAEvB,EAAKU,IAHhByrB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAC7FmsB,EAAShkB,KAKVE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,GAExC,EACDhrB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOspB,GAGRwC,EAAUF,GAA0BtrB,EAAED,EACvC,EAEF,CAGA,SAAS2rB,GAAoB1uB,GAC5B,IAAImuB,EACAzD,EACA0D,EACAJ,EACAW,EAAehmB,GAA+B3I,EAAI,GAAWA,EAAI,KACjEusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAKqtB,GAAoBR,GAAmB7tB,EAAK2uB,EAAc3tB,IAG5E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCgmB,EAAMlrB,EAAQ,OAEd,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBuiB,EAAIlnB,IACJY,EAAK+pB,EAAK,QAASC,EAAkB,MAAgBpuB,EAAI,GACzD,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEpB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAIxBhsB,EAAOgsB,EAAKzD,GACZsD,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAAiC,EAA7BA,EAAgC,CAEnC,IAAIM,EAEJ,IAHA2tB,EAAehmB,GAA+B3I,EAAI,GAAWA,EAAI,KAG5DgB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAY8jB,GAAmB7tB,EAAK2uB,EAAc3tB,GAEpDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqtB,GAAoBtkB,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAKzD,GAExB,CAIA,IAFAziB,KAEKjH,EAAI2tB,EAAa7vB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC1D4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAAgC,EAArBttB,GAA0B0tB,KAAqBA,EAAkB,MAAgBpuB,EAAI,MACpGoE,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRtrB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAAS8rB,GAAkB7uB,GAC1B,IAAI8uB,EACAC,EACAf,EACA1B,EAAa3jB,GAAkBmE,GAAkB9M,EAAI,KACrDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAK0tB,GAAoBd,GAAmB5tB,EAAKssB,EAAYtrB,IAG1E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC2mB,EAAM7rB,EAAQ,OAEd,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAK0qB,EAAK,QAASC,EAA6B/uB,EAAI,GAAGokB,QACvD,EACDja,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ0sB,EAAKtsB,GAEpB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE2kB,EAAK,MAIxBd,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAGgvB,GAAW,IAARtuB,GAAMsuB,EACb,GAAiC,EAA7BtuB,EAAgC,CAEnC,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAkBmE,GAAkB9M,EAAI,KAGhDgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAY6jB,GAAmB5tB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAK0tB,GAAoB3kB,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAE2kB,EAAK,MAExB,CAIA,IAFA7mB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAA8B,EAAnBttB,GAAwBquB,KAAqBA,EAA6B/uB,EAAI,GAAGokB,WAChGhgB,EAAK0qB,EAAK,QAASC,EAEpB,EACD/tB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOosB,GAGRjsB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAASksB,GAAWvC,EAAQC,EAASC,GACpC,IAAIsC,EACApC,GACAjL,cAAEA,EAAatI,MAAEA,GAAUrT,EAAW,SAC1CzG,EAAoBitB,EAAQ7K,GAAetiB,GAASqtB,EAAa,EAAGsC,EAAiB3vB,KACrFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrE,IAAI4vB,EAAW,CAAEliB,MAAO,GAAI6U,OAAQ,GAAIrK,IAAK,IAY7C,OAVAiV,EAAO/sB,GAAG4H,OAAS,KAClB,GAAmD,GAA/CmlB,EAAO/sB,GAAGe,MAEZ,IAAK,IAAIiE,KAAOmI,GAAKqiB,GACpBvC,EAAa,EAAGuC,EAASxqB,GAAOuqB,EAAevqB,GAAK4L,MAAM,KAAK3F,KAAIwkB,GAASA,EAAM7e,MAAM,OAAO4e,EAGlG,EAGM,CAACA,EAAUrC,EAAQjL,EAAetI,EAAO2V,EACjD,CAEA,MAAMG,WAAgB/iB,GACrBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASorB,GAAYJ,GAAmBtwB,EAAgB,GACpE,EAKD,SAAS+wB,GAAiBtvB,EAAKoJ,EAAMpI,GACpC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASV,GAAkBrJ,GAC1B,IAAIuvB,EACAC,EACAxB,EACJ,IAAIyB,EAA6BzvB,EAAI,IAUrC,OAJIyvB,IACHF,EAAkBvqB,EAA2ByqB,EAJtC,CAAE,IAOH,CACNtnB,CAAAA,GACKonB,GAAiB9kB,GAAiB8kB,EAAgB5vB,GAAGkI,UACzD2nB,EAAyB/rB,GACzB,EACD0G,CAAAA,CAAE/H,EAAQI,GACL+sB,GAAiB7kB,GAAgB6kB,EAAiBntB,EAAQI,GAC9DD,EAAOH,EAAQotB,EAAwBhtB,GACvCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAA4B,EAAxBA,GAA6B+uB,KAAkBA,EAA6BzvB,EAAI,KAAM,CACzF,GAAIuvB,EAAiB,CACpBtnB,KACA,MAAMynB,EAAgBH,EAEtB9mB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIqnB,GACHF,EAAkBvqB,EAA2ByqB,EA/BzC,CAAE,GAgCNhlB,GAAiB8kB,EAAgB5vB,GAAGkI,UACpCQ,GAAcknB,EAAgB5vB,GAAGkI,SAAU,GAC3C6C,GAAgB6kB,EAAiBC,EAAuB7sB,WAAY6sB,IAEpED,EAAkB,IAEpB,CACA,EACDvuB,CAAAA,CAAEuH,GACGylB,IACAuB,GAAiBlnB,GAAcknB,EAAgB5vB,GAAGkI,SAAUU,GAChEylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACGgnB,GAAiB9mB,GAAe8mB,EAAgB5vB,GAAGkI,SAAUU,GACjEylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO8sB,GAGJD,GAAiBzkB,GAAkBykB,EAAiBxsB,EACzD,EAEF,CAEA,SAAS4sB,GAAkB3vB,GAC1B,IAAIqsB,EACA2B,EACA1B,EAAa3jB,GAAkC3I,EAAI,IACnDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqI,GAAkBimB,GAAiBtvB,EAAKssB,EAAYtrB,IAGtE,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAG4vB,GAAW,IAARlvB,GAAMkvB,EACb,GAA4B,EAAxBlvB,EAA2B,CAE9B,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAkC3I,EAAI,IAG9CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYulB,GAAiBtvB,EAAKssB,EAAYtrB,GAEhDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqI,GAAkBU,GACnCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAAS8sB,GAAWnD,EAAQC,EAASC,GACpC,IAAIkD,EACAC,EACA/Q,EACAgR,GACAnP,SAAEA,EAAQwE,WAAEA,EAAU1G,aAAEA,EAAYuG,OAAEA,EAAMzL,MAAEA,GAAUvT,EAAW,SACvEzG,EAAoBitB,EAAQ7L,GAAUthB,GAASqtB,EAAa,EAAGmD,EAAYxwB,KAC3EE,EAAoBitB,EAAQrH,GAAY9lB,GAASqtB,EAAa,EAAGoD,EAAczwB,KAC/EE,EAAoBitB,EAAQ/N,GAAcpf,GAASqtB,EAAa,EAAG5N,EAAgBzf,KACnFE,EAAoBitB,EAAQjT,GAAOla,GAASqtB,EAAa,EAAGkD,EAASvwB,KACrE,IAAIgnB,EAAiB,CAAE,EAyBvB,OAPAmG,EAAO/sB,GAAG4H,OAAS,KACsB,GAApCmlB,EAAO/sB,GAAGe,OAjBf,SAAqBie,GAChBjK,GAAWqb,IACdlb,IACC,IAAMkb,EAAU,CACf9iB,MAAO4F,GAAY8L,EAAa1R,OAChCwK,IAAK5E,GAAY8L,EAAalH,KAC9B0P,SAAUrU,GAAY6L,EAAa1R,OACnCma,OAAQtU,GAAY6L,EAAalH,KACjCf,KAAMD,GAAqBqZ,MAE5BvJ,EACArB,EAGH,CAKE+K,CAAYjR,EACb,EAGM,CAACgR,EAAanP,EAAUwE,EAAY1G,EAAclF,EAAOuF,EACjE,QAEA,cAAwB1S,GACvBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASgsB,GAAYF,GAAmBpxB,EAAgB,GACpE,GAKD,SAAS8M,GAAgBrL,GACxB,IAAImuB,EACA/J,EACA8L,EACAX,EACAnB,EACA+B,EACAC,EACAC,EACArC,EACApD,EACAC,EACJzG,EAAU,IAAIiL,GAAQ,IACtB,IAAII,EAAmCzvB,EAAI,GAY3C,OANIyvB,IACHF,EAAkBvqB,EAA2ByqB,EAJtC,CAAE,IAOVY,EAAY,IAAIC,GAAU,IAEnB,CACNnoB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiB2Z,EAAQzkB,GAAGkI,UAC5BqoB,EAAK1sB,IACD+rB,GAAiB9kB,GAAiB8kB,EAAgB5vB,GAAGkI,UACzDuoB,EAAK5sB,IACLiH,GAAiB4lB,EAAU1wB,GAAGkI,UAE9BzD,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAGojB,SAAW,IAAiBpjB,EAAI,GAAG0W,MAAyB1W,EAAI,GAC3H,IAAiBA,EAAI,GAAGskB,WACxB,KAAoBtkB,EAAI,GACxB,IAAiBA,EAAI,GAAgBA,EAAI,IACzC,KAEFoE,EAAK+pB,EAAK,OAAQgC,EAAiBpZ,GAAmB/W,EAAI,IAAM,OAAS,SACzE0E,EAAUypB,EAAK,SAAsBnuB,EAAI,GACzC,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgB0Z,EAAS+J,EAAK,MAC9BhsB,EAAOgsB,EAAK+B,GACRX,GAAiB7kB,GAAgB6kB,EAAiBpB,EAAK,MAC3D5rB,EAAOH,EAAQguB,EAAI5tB,GACnBkI,GAAgB2lB,EAAWjuB,EAAQI,GACnCwrB,GAAU,EAELpD,IACJC,EAAUG,EAAShpB,OAAQ,SAAgChC,EAAI,KAC/D4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACN,GAAmC,GAA/BA,EAAM,IAA+B+uB,KAAkBA,EAAmCzvB,EAAI,IAAK,CACtG,GAAIuvB,EAAiB,CACpBtnB,KACA,MAAMynB,EAAgBH,EAEtB9mB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIqnB,GACHF,EAAkBvqB,EAA2ByqB,EAvDzC,CAAE,GAwDNhlB,GAAiB8kB,EAAgB5vB,GAAGkI,UACpCQ,GAAcknB,EAAgB5vB,GAAGkI,SAAU,GAC3C6C,GAAgB6kB,EAAiBpB,EAAK,OAEtCoB,EAAkB,IAEpB,GAEKvB,GAAyD,EAA9CttB,EAAM,IAA6C0tB,KAAqBA,EAAmCpuB,EAAI,GAAGojB,SAAW,IAAiBpjB,EAAI,GAAG0W,MAAyB1W,EAAI,GAChM,IAAiBA,EAAI,GAAGskB,WACxB,KAAoBtkB,EAAI,GACxB,IAAiBA,EAAI,GAAgBA,EAAI,IACzC,OACDoE,EAAK+pB,EAAK,QAASC,KAGfJ,GAAgC,GAArBttB,EAAM,IAAqByvB,KAAoBA,EAAiBpZ,GAAmB/W,EAAI,IAAM,OAAS,WACrHoE,EAAK+pB,EAAK,OAAQgC,GAGQ,EAAvBzvB,EAAM,IACTgE,EAAUypB,EAAK,SAAsBnuB,EAAI,GAE1C,EACDgB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc+b,EAAQzkB,GAAGkI,SAAUU,GAC/BgnB,GAAiBlnB,GAAcknB,EAAgB5vB,GAAGkI,SAAUU,GAChEF,GAAcgoB,EAAU1wB,GAAGkI,SAAUU,GACrCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe2b,EAAQzkB,GAAGkI,SAAUU,GAChCgnB,GAAiB9mB,GAAe8mB,EAAgB5vB,GAAGkI,SAAUU,GACjEE,GAAe4nB,EAAU1wB,GAAGkI,SAAUU,GACtCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOyrB,GACPzrB,EAAO0tB,IAGRtlB,GAAkBsZ,GACdmL,GAAiBzkB,GAAkBykB,GACvCzkB,GAAkBulB,EAAWttB,GAC7B6nB,GAAU,EACVC,GACD,EAEF,CAEA,SAASzf,GAASshB,EAAQC,EAASC,GAClC,IAAI2D,EACAC,EACAC,EACAC,EACA1H,EACArD,EACAD,EACAiL,EACA5R,EACA+N,EACA8D,EACAC,EACAtL,EACAuL,GACAvQ,QAAEA,EAAU,IAAOoM,GACnB9oB,QAAEA,EAAU,CAAA,GAAO8oB,EACnBnO,EAAQ,IAAI6B,GAAME,EAAS1c,GNxmFzB,IAAoBc,EAAKwB,EAALxB,EMymFf,QNzmFoBwB,EMymFXqY,ENxmFpBpZ,IAAwBzF,GAAGwG,QAAQxE,IAAIgD,EAAKwB,GMymF5C,IAAIijB,eAAEA,EAAcZ,QAAEA,EAAOa,aAAEA,EAAYG,QAAEA,EAAO9K,QAAEA,EAAOwG,OAAEA,EAAMC,QAAEA,EAAOC,OAAEA,EAAMqD,YAAEA,EAAW7W,KAAEA,EAAIG,SAAEA,EAAQ+B,WAAEA,EAAUqC,OAAEA,EAAMoD,MAAEA,EAAK7C,KAAEA,GAAS8H,EACzJ/e,EAAoBitB,EAAQtD,GAAgB7pB,GAASqtB,EAAa,EAAGkE,EAAkBvxB,KACvFE,EAAoBitB,EAAQlE,GAASjpB,GAASqtB,EAAa,GAAI2D,EAAWhxB,KAC1EE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KACpFE,EAAoBitB,EAAQlD,GAASjqB,GAASqtB,EAAa,EAAGgE,EAAWrxB,KACzEE,EAAoBitB,EAAQhO,GAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQxH,GAAQ3lB,GAASqtB,EAAa,GAAI8D,EAAUnxB,KACxEE,EAAoBitB,EAAQvH,GAAS5lB,GAASqtB,EAAa,GAAI6D,EAAWlxB,KAC1EE,EAAoBitB,EAAQjE,GAAalpB,GAASqtB,EAAa,EAAG4D,EAAejxB,KACjFE,EAAoBitB,EAAQ9a,GAAMrS,GAASqtB,EAAa,GAAIlH,EAAQnmB,KACpEE,EAAoBitB,EAAQ3a,GAAUxS,GAASqtB,EAAa,GAAIjH,EAAYpmB,KAC5EE,EAAoBitB,EAAQ5Y,GAAYvU,GAASqtB,EAAa,GAAI5D,EAAczpB,KAChFE,EAAoBitB,EAAQvW,GAAQ5W,GAASqtB,EAAa,EAAGiE,EAAUtxB,KACvEE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQhW,GAAMnX,GAASqtB,EAAa,EAAGrH,EAAQhmB,KAGnE,IAAIwxB,EAAc,IAAKltB,GAEvB,SAASmtB,EAAU9tB,EAAM3D,GAExB,OADAif,EAAMiL,KAAKvmB,EAAM3D,GACV4E,IACR,CNtuFM,IAAsBrG,EMu0F5B,SAASmzB,IAngFV,IAAoBpb,EAogFd0a,GACH9uB,EAAgBgnB,EAAa+H,GArgFZ3a,EAqgFsC0a,GApgF5CW,aAAerb,EAAGsb,aAogFqCX,EAEpE,CAeA,ON11F4B1yB,EM8zFf,KACZmX,GAAcyb,EAAQ,EN9zFvBtrB,IAAwBzF,GAAGmI,cAAcjI,KAAK/B,GMi0F9C0H,GAAY,KACXyP,GAAcwb,GACdvb,GAAK+b,EAAmB,KAAM7L,EAAO,IAStCsH,EAAOngB,MAAQogB,IACV,YAAaA,GAASC,EAAa,GAAIrM,EAAUoM,EAAQpM,SACzD,YAAaoM,GAASC,EAAa,GAAI/oB,EAAU8oB,EAAQ9oB,QAAQ,EAGtE6oB,EAAO/sB,GAAG4H,OAAS,KAClB,GAAqC,QAAjCmlB,EAAO/sB,GAAGe,MAAM,GACnB,IAAK,IAAKwC,EAAM3D,KA1wDnB,SAAcsE,EAASktB,GACnB,IAAI1d,EAAO,GACX,IAAK,IAAI1O,KAAOmI,GAAKjJ,GACbA,EAAQc,KAASosB,EAAYpsB,IAC7B0O,EAAKxT,KAAK,CAAC8E,EAAKd,EAAQc,KAKhC,OAFApE,GAAOwwB,EAAaltB,GAEbwP,CACX,CAgwD6BA,CAAKxP,EAASktB,GACvCC,EAAU9tB,EAAM3D,EAElB,EAGM,CACNixB,EACA1D,EACA8D,EACAC,EACAtL,EACAuL,EACA1H,EACAZ,EACAa,EACAG,EACA9K,EACAwG,EACAC,EACAsD,EACA7W,EACAG,EACA+B,EACAqC,EACAoD,EACA7C,EACAua,EACA1Q,EACA1c,EACAmtB,EA1ID,SAAmB9tB,GAClB,IAAI3D,EAAQif,EAAMmL,KAAKzmB,GACvB,OAAO3D,aAAiBoQ,KAAOkD,GAAYtT,GAASA,CACrD,EAEA,WAEC,OADAif,EAAM4H,cAAczkB,IAAI,CAAEsL,WAAO9N,EAAWsY,SAAKtY,IAC1CgF,IACR,EAEA,WACC,OAAO4a,EAASnU,IAAIgP,GACrB,EAEA,SAAsBxC,GACrB,IAAK,IAAIzT,KAASob,EACjB,GAAIpb,EAAMyT,IAAMA,EACf,OAAOwC,GAAsBjW,GAI/B,OAAO,IACR,EAEA,SAAkBA,GAIjB,OAHAA,EAAQwT,GAAa,CAACxT,IAAQ,GAC9Bob,EAASlf,KAAK8D,GACd+a,EAAQ/c,IAAIod,GACLnF,GAAsBjW,EAC9B,EAEA,SAAqBA,GACpB,IAAK,IAAI6D,KAAKuX,EACb,GAAIvX,EAAE4P,IAAMzT,EAAMyT,GAIjB,OAFA7W,GAAOiH,EADP7D,EAAQwT,GAAa,CAACxT,IAAQ,IAE9B+a,EAAQ/c,IAAIod,GACLnF,GAAsBjW,GAI/B,OAAO,IACR,EAEA,SAAyByT,GACxB,IAAIga,EAAMrS,EAASsS,WAAU1tB,GAASA,EAAMyT,IAAMA,IAOlD,OALIga,GAAO,IACVrS,EAASpS,OAAOykB,EAAK,GACrB1S,EAAQ/c,IAAIod,IAGN5a,IACR,EAEA,WACC,OAAOsS,GAAqBrQ,EAAIoY,EAAM/E,OACvC,EAEA,WAEC,OADAkX,EAAcW,QAAQC,WACfptB,IACR,EAEA,SAAuB6N,EAAGqE,GACzB,IAAImb,EAAQpb,GAAsBpE,EAAGqE,GAErC,GAAImb,EAAO,CACV,IAAIC,EAAOhc,GAAW+b,EAAX/b,CAAkBzD,EAAGqE,GAEhC,OADAob,EAAK7f,KAAOiB,GAAY4e,EAAK7f,MACtB6f,CACR,CAEA,OAAO,IACR,EAEA,WAEC,OADAhwB,EAAgBmQ,EAAM8T,EAAQ9R,GAAS8R,EAAOC,GAAYD,GACnDvhB,IACR,EAEA,WAEC,OADA1C,EAAgBmQ,EAAM8T,EAAQ7R,GAAS6R,EAAOC,EAAWqD,GAActD,GAChEvhB,IACR,EAoED,CAEA,MAAMutB,WAAiBplB,GACtBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GACChH,KACAN,EACAuH,GACAC,GACA9M,EACA,CACCgiB,QAAS,GACT1c,QAAS,GACTmtB,UAAW,GACXW,UAAW,GACXC,cAAe,GACfC,UAAW,GACXC,aAAc,GACdC,SAAU,GACVC,YAAa,GACbC,gBAAiB,GACjBC,QAAS,GACTX,SAAU,GACVY,cAAe,GACf7oB,KAAM,GACNsR,KAAM,IAEP,KACA,EAAE,GAAI,GAER,CAEA,aAAIoW,GACH,OAAO7sB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,aAAI2xB,GACH,OAAOxtB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,iBAAI4xB,GACH,OAAOztB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,aAAI6xB,GACH,OAAO1tB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,gBAAI8xB,GACH,OAAO3tB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,YAAI+xB,GACH,OAAO5tB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,eAAIgyB,GACH,OAAO7tB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,mBAAIiyB,GACH,OAAO9tB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,WAAIkyB,GACH,OAAO/tB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,YAAIuxB,GACH,OAAOptB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,iBAAImyB,GACH,OAAOhuB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,QAAIsJ,GACH,OAAOnF,KAAKxE,GAAGK,IAAI,GACpB,CAEA,QAAI4a,GACH,OAAOzW,KAAKxE,GAAGK,IAAI,GACpB,SAGD,cAAoB0xB,GAChB5vB,OAAAA,GACIqC,KAAKqI,UACT,CAEA,QAAIkK,GACA,OAAOvS,KAAK+tB,SAChB,GCz9FJ,SAASE,GAAmBpyB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,GAAKX,EAAKpI,GACb+I,CACR,CAGA,SAASsoB,GAAoBryB,GAC5B,IAAImuB,EACAmE,EACAC,EACApH,EACAT,EACA0D,EACAxD,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdqvB,EAAOrvB,EAAQ,QACfynB,EAAIlnB,IACJY,EAAKkuB,EAAM,aAAcC,EAA8CvyB,EAAI,GAAG2d,OAAe3d,EAAI,KACjGoE,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAmBrkB,EAAI,GAAGsT,cACrHlP,EAAK+pB,EAAK,OAAQ,eAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBL,EAAOgsB,EAAKmE,GACZnwB,EAAOgsB,EAAKzD,GAEPE,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMouB,EAA0BtyB,EAAI,GAAG2d,OAAe3d,EAAI,MACzH4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEoC,EAAtCvqB,GAA2C6xB,KAA2BA,EAA8CvyB,EAAI,GAAG2d,OAAe3d,EAAI,MACjJoE,EAAKkuB,EAAM,aAAcC,GAGtBpH,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA+C,GAApC7G,GAAwCyqB,EAAkB5jB,OAAOrD,KAAK,KAA0BlE,EAAI,GAAG2d,OAAe3d,EAAI,KAE7J,EAA3BU,GAAgC0tB,KAAqBA,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAmBrkB,EAAI,GAAGsT,eAC1JlP,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACVC,GACD,EAEF,CAEA,SAAS2H,GAAkBxyB,GAC1B,IAAIyyB,EACAC,EACAC,EACAjI,EACAkI,EACAC,EACAC,EACAxG,EAAa3jB,GAA6B3I,EAAI,IAC9CusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqxB,GAAoBD,GAAmBpyB,EAAKssB,EAAYtrB,IAG1E,MAAO,CACNmH,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OAEf,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBuiB,EAAIlnB,IACJovB,EAAO3vB,EAAQ,OACfmB,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGqR,MACzDjN,EAAKsuB,EAAM,OAAQ,OACnBtuB,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG2jB,cACzDvf,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAG0jB,OACzD,EACDvZ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMC,GAEb,IAAK,IAAI1xB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEuoB,EAAM,MAIzBvwB,EAAOswB,EAAM/H,GACbvoB,EAAOswB,EAAMG,EACb,EACDrxB,CAAAA,CAAEvB,EAAGke,GAAW,IAARxd,GAAMwd,EACb,GAAmE,GAA/Dxd,EAAmE,CAEtE,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA6B3I,EAAI,IAGzCgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYqoB,GAAmBpyB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAKqxB,GAAoBtoB,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEuoB,EAAM,MAEzB,CAEA,KAAO1xB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAASwtB,EAAWxtB,MACjC,CAEuB,EAAnB4B,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGqR,OACtFjN,EAAKsuB,EAAM,QAASC,GAGE,EAAnBjyB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG2jB,eACtFvf,EAAKwuB,EAAM,QAASC,GAGE,EAAnBnyB,GAAwBoyB,KAAsBA,EAA8B9yB,EAAI,GAAG0jB,SACtFtf,EAAKquB,EAAM,QAASK,EAErB,EACD9xB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGR5vB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAASgwB,GAAWrG,EAAQC,EAASC,GACpC,IAAIE,EACAkG,EACAC,EACAC,GACA3Z,MAAEA,EAAK8O,eAAEA,EAAcC,iBAAEA,EAAgB6K,MAAEA,GAAUjtB,EAAW,SAMpE,OALAzG,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQrE,GAAgB9oB,GAASqtB,EAAa,EAAGsG,EAAkB3zB,KACvFE,EAAoBitB,EAAQpE,GAAkB/oB,GAASqtB,EAAa,EAAGqG,EAAoB1zB,KAC3FE,EAAoBitB,EAAQyG,GAAO5zB,GAASqtB,EAAa,EAAGoG,EAASzzB,KAE9D,CACNutB,EACAkG,EACAC,EACAC,EACA3Z,EACA8O,EACAC,EACA6K,EAEF,QAEA,cAAqB7mB,GACpBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASkvB,GAAYP,GAAmBj0B,EAAgB,GACpE,GAKD,SAAS60B,GAAkBpzB,GAC1B,IAAIqzB,EACAC,EACApD,EACA/B,EACAC,EACAjD,EACAiF,EACAmD,EACAC,EACAC,EACAzF,EACApD,EACAC,EACJ,IAAI4E,EAAiCzvB,EAAI,GAAG0zB,QAE5C,SAASC,EAAa3zB,EAAKU,GAC1B,MAAO,CACNuE,MAAO,CAAEgI,OAAO,EAAMtJ,MAAiB3D,EAAI,IAE7C,CAEIyvB,IACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UAC/K,KAGD,IAAI+0B,EAAmC5zB,EAAI,GAAG0zB,QAE9C,SAASG,EAAe7zB,EAAKU,GAC5B,MAAO,CAAEuE,MAAO,CAAEtB,MAAiB3D,EAAI,IACxC,CAUA,OARI4zB,IACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC3K,KAGM,CACNsJ,CAAAA,GACCkrB,EAAUpwB,EAAQ,WACdqwB,GAAkB7oB,GAAiB6oB,EAAiB3zB,GAAGkI,UAC3DqoB,EAAK1sB,IACL2qB,EAAMlrB,EAAQ,OACdmtB,EAAK5sB,IACD+vB,GAAkB9oB,GAAiB8oB,EAAiB5zB,GAAGkI,UAC3DzD,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGwjB,WACvDpf,EAAKivB,EAAS,QAAqBrzB,EAAI,IACvCoE,EAAKivB,EAAS,QAAmBrzB,EAAI,IACrCoE,EAAKivB,EAAS,OAAQG,EAAiCxzB,EAAI,GAAK,cAAWb,GAC3EiF,EAAKivB,EAAS,WAAYI,EAAqCzzB,EAAI,GAAK,OAAIb,EAC5E,EACDgL,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQixB,EAAS7wB,GACpB8wB,GAAkB5oB,GAAgB4oB,EAAkBD,EAAS,MACjElxB,EAAOkxB,EAASnD,GAChB/tB,EAAOkxB,EAASlF,GAChBhsB,EAAOkxB,EAASjD,GACZmD,GAAkB7oB,GAAgB6oB,EAAkBF,EAAS,MAC7CrzB,EAAI,IAAIqzB,GAC5BrF,GAAU,EAELpD,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMiqB,EAAiBnuB,EAAI,KAChF0D,EAAO2vB,EAAS,SAAS,WACpBh1B,EAAwB2B,EAAI,SAAMb,KAAyBa,EAAI,SAAMb,GAAWksB,MAAMlnB,KAAMtF,UAChG,IACD6E,EAAO2vB,EAAS,WAAW,WACtBh1B,EAAwB2B,EAAI,IAAMyO,GAAqBzO,EAAI,OAAmBA,EAAI,IAAMyO,GAAqBzO,EAAI,KAAKqrB,MAAMlnB,KAAMtF,UACtI,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACpL,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,IAAiBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,IAAiBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACtL,IACD6E,EAAO2vB,EAAS,eAAe,WAC1Bh1B,GAAasd,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,QAAQ2b,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,KAAKqrB,MAAMlnB,KAAMtF,UACzN,KAGD+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GAGV,GAFAV,EAAMirB,EAE2B,IAA7BvqB,EAAM,IAA8B+uB,KAAkBA,EAAiCzvB,EAAI,GAAG0zB,SAAU,CAC3G,GAAIJ,EAAkB,CACrBrrB,KACA,MAAMynB,EAAgB4D,EAEtB7qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIqnB,GACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UAC/K,IAEA4L,GAAiB6oB,EAAiB3zB,GAAGkI,UACrCQ,GAAcirB,EAAiB3zB,GAAGkI,SAAU,GAC5C6C,GAAgB4oB,EAAkBD,EAASnD,IAE3CoD,EAAmB,IAEpB,MAAM,GAAI7D,EAAc,CACxB,MAAMqE,EAA2B,CAAE,EACV,EAArBpzB,EAAM,KAAkBozB,EAAyBnwB,MAAkB3D,EAAI,IAC3EszB,EAAiB1mB,KAAKknB,EACvB,CAQA,KANK9F,GAAiC,EAAtBttB,EAAM,IAAqB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGwjB,aACnGpf,EAAK+pB,EAAK,QAASC,GAGhBjD,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAkC,GAAvB7G,EAAM,IAAqByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,IAEhH,IAA7BU,EAAM,IAA8BkzB,KAAoBA,EAAmC5zB,EAAI,GAAG0zB,SAAU,CAC/G,GAAIH,EAAkB,CACrBtrB,KACA,MAAMynB,EAAgB6D,EAEtB9qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIwrB,GACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,GAAI,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC3K,IAEA4L,GAAiB8oB,EAAiB5zB,GAAGkI,UACrCQ,GAAckrB,EAAiB5zB,GAAGkI,SAAU,GAC5C6C,GAAgB6oB,EAAkBF,EAAS,OAE3CE,EAAmB,IAEpB,MAAM,GAAIK,EAAgB,CAC1B,MAAMG,EAA2B,CAAE,EACV,EAArBrzB,EAAM,KAAkBqzB,EAAyBpwB,MAAkB3D,EAAI,IAC3EuzB,EAAiB3mB,KAAKmnB,EACvB,GAEK/F,GAAkC,GAAvBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAqBrzB,EAAI,MAGnCguB,GAAgC,GAArBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAmBrzB,EAAI,MAGjCguB,GAAkC,IAAvBttB,EAAM,IAAwB8yB,KAAwBA,EAAiCxzB,EAAI,GAAK,cAAWb,KAC1HiF,EAAKivB,EAAS,OAAQG,KAGlBxF,GAAkC,IAAvBttB,EAAM,IAAwB+yB,KAA4BA,EAAqCzzB,EAAI,GAAK,OAAIb,KAC3HiF,EAAKivB,EAAS,WAAYI,EAE3B,EACDzyB,CAAAA,CAAEuH,GACGylB,IACAsF,GAAkBjrB,GAAcirB,EAAiB3zB,GAAGkI,SAAUU,GAC9DgrB,GAAkBlrB,GAAckrB,EAAiB5zB,GAAGkI,SAAUU,GAClEylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACG+qB,GAAkB7qB,GAAe6qB,EAAiB3zB,GAAGkI,SAAUU,GAC/DgrB,GAAkB9qB,GAAe8qB,EAAiB5zB,GAAGkI,SAAUU,GACnEylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2wB,GAGJC,GAAkBxoB,GAAkBwoB,GACpCC,GAAkBzoB,GAAkByoB,GACpBvzB,EAAI,IAAI,MAC5B4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAASmJ,GAAWtH,EAAQC,EAASC,GACpC,IAAIqH,EACAC,EACAC,EACAC,EACAzD,EACAb,EACAuE,EACAC,EACAC,EACAzH,EACA0H,EACAC,EACAC,EACAC,EACAC,EACA/V,EACAgW,EACAC,EACAC,EACAC,EA0BAnf,EACAlS,EACAsxB,EACApwB,EACA+J,EACA8K,GA9BAX,MAAEA,GAAU4T,GACZrS,WAAEA,EAAa,CAAA,GAAOqS,GACtBuI,QAAEA,GAAU,GAAUvI,GACtBnS,MAAEA,EAAQ,IAAOmS,GACjBwI,aAAEA,EAAY9b,gBAAEA,EAAe6H,gBAAEA,EAAe/D,qBAAEA,EAAoBC,eAAEA,EAAc+D,WAAEA,EAAUC,WAAEA,EAAU9H,aAAEA,EAAYW,gBAAEA,EAAeoH,cAAEA,EAAaC,gBAAEA,EAAeC,gBAAEA,EAAe/F,UAAEA,EAASjC,MAAEA,EAAKE,MAAEA,EAAKD,eAAEA,EAAc6P,aAAEA,GAAYE,UAAEA,GAAS6L,cAAEA,GAAaC,WAAEA,GAAUjQ,OAAEA,IAAWlf,EAAW,SACvTzG,EAAoBitB,EAAQyI,GAAc51B,GAASqtB,EAAa,GAAIuH,EAAgB50B,KACpFE,EAAoBitB,EAAQrT,GAAiB9Z,GAASqtB,EAAa,GAAI6H,EAAmBl1B,KAC1FE,EAAoBitB,EAAQxL,GAAiB3hB,GAASqtB,EAAa,GAAIyH,EAAmB90B,KAC1FE,EAAoBitB,EAAQvP,GAAsB5d,GAASqtB,EAAa,GAAIkI,EAAwBv1B,KACpGE,EAAoBitB,EAAQtP,GAAgB7d,GAASqtB,EAAa,GAAIgI,EAAkBr1B,KACxFE,EAAoBitB,EAAQvL,GAAY5hB,GAASqtB,EAAa,GAAIqH,EAAc10B,KAChFE,EAAoBitB,EAAQtL,GAAY7hB,GAASqtB,EAAa,GAAIiI,EAAct1B,KAChFE,EAAoBitB,EAAQpT,GAAc/Z,GAASqtB,EAAa,GAAI4H,EAAgBj1B,KACpFE,EAAoBitB,EAAQzS,GAAiB1a,GAASqtB,EAAa,GAAI8H,EAAmBn1B,KAC1FE,EAAoBitB,EAAQrL,GAAe9hB,GAASqtB,EAAa,GAAI0H,EAAiB/0B,KACtFE,EAAoBitB,EAAQpL,GAAiB/hB,GAASqtB,EAAa,EAAGmI,EAAmBx1B,KACzFE,EAAoBitB,EAAQnL,GAAiBhiB,GAASqtB,EAAa,GAAIoI,EAAmBz1B,KAC1FE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQjT,GAAOla,GAASqtB,EAAa,GAAIkD,EAASvwB,KACtEE,EAAoBitB,EAAQlT,GAAgBja,GAASqtB,EAAa,GAAI2H,EAAkBh1B,KACxFE,EAAoBitB,EAAQrD,IAAc9pB,GAASqtB,EAAa,EAAG+D,EAAgBpxB,KACnFE,EAAoBitB,EAAQnD,IAAWhqB,GAASqtB,EAAa,GAAI+H,EAAap1B,KAC9EE,EAAoBitB,EAAQ0I,IAAe71B,GAASqtB,EAAa,GAAIsH,EAAiB30B,KACtFE,EAAoBitB,EAAQ2I,IAAY91B,GAASqtB,EAAa,GAAIwH,EAAc70B,KAOhF,IAEIuY,GACAwd,GAHAta,GAAS,EACTkC,IAAS,EAqBb,SAASqY,GAAcz3B,EAAIga,GAC1B,OAAQ6D,GAAY7D,IAAYpD,GAAW5W,GACzCuR,GAAWvR,EAAG,CACd6F,MAAOiW,GAAsBjW,GAC7BkS,KACAxG,UACAqH,KAAMD,GAAqBqZ,UAE3B3wB,CACH,CAiJA,OA3KAmG,GAAQ,KACHoP,GAAW4f,IACdA,EAAe,CACd3wB,MAAOiW,GAAsBjW,GAC7B+V,WACA7D,KACAa,KAAMD,GAAqBqZ,IAE7B,IAGDtqB,GAAY,KACPkP,GAAW2f,KAAsB1Y,GAAY7D,KAChD5C,IAAK,IAAMmf,EAAiB,CAAE3d,KAAMD,GAAqBqZ,MAAY,MAAO1K,GAC7E,IAsFDsH,EAAOngB,MAAQogB,IACV,UAAWA,GAASC,EAAa,GAAI7T,EAAQ4T,EAAQ5T,OACrD,eAAgB4T,GAASC,EAAa,GAAItS,EAAaqS,EAAQrS,YAC/D,YAAaqS,GAASC,EAAa,GAAIsI,EAAUvI,EAAQuI,SACzD,UAAWvI,GAASC,EAAa,GAAIpS,EAAQmS,EAAQnS,MAAM,EAGhEkS,EAAO/sB,GAAG4H,OAAS,KAKlB,GAJmC,EAA/BmlB,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAGjpB,EAAQoV,EAAMpV,OAG4B,GAAvD+oB,EAAO/sB,GAAGe,MAAM,GAAkM,QAAtJgsB,EAAO/sB,GAAGe,MAAM,GAC/E,CACCksB,EAAa,EAAG9U,GAAUnU,EAAMmU,SAGhC,IAAI0d,EAAU7xB,EAAMqU,iBAAmBqF,GAAwB1Z,EAAOkb,IAAeiW,GAAyBD,EAE1GY,EAAW9xB,EAAMuU,WAAaqF,GAAkB5Z,EAAOkb,IAAe+V,EAE1E,GAAI7Y,GAAQjE,IACX8U,EAAa,EAAG/nB,EAAQ,cAA2B,IAAbkU,EAAM1H,WAAiB0H,EAAM1H,KAAO,aACpE,CACN,IAAIqkB,EAAY1a,GAEhB,GAAIrX,EAAMgyB,QAAS,CAElB,IAAKA,EAASC,GAAUjyB,EAAMgyB,QAE1B5c,EAAMnH,MAAQgkB,EAAO,IAAM7c,EAAMnH,MAAQgkB,EAAOjb,IAAI,KACvD+a,EAAYC,EAEd,CAEA/I,EAAa,EAAG/nB,EAAQ,cAA2B,IAAbkU,EAAM1H,WAAoC,GAAlB0H,EAAM1H,KAAO,oBAA6BqkB,OACzG,CAEIF,GACH5I,EAAa,EAAG/nB,GAAS,oBAAoB2wB,MAG1CC,GACH7I,EAAa,EAAG/nB,GAAS,SAAS4wB,MAG/BvY,IACH0P,EAAa,EAAG/nB,GAAS,sBAG1B+nB,EAAa,EAAG/nB,GAASlB,EAAMyU,OAAOyd,KAAK,MAE3CjJ,EAAa,EAAGqI,EAAU,CACzBlZ,GAAQjE,IAAWgV,EAAO/Q,QAAU+Q,EAAOnpB,SACxCgxB,EAAW,GAAIhxB,MACfqW,GAAmB0a,EAAkB/wB,EAAOmsB,IAC9C+F,KAAK,KACR,CAGmC,EAAhCnJ,EAAO/sB,GAAGe,MAAM,GAA6G,MAAzFgsB,EAAO/sB,GAAGe,MAAM,IAEvDksB,EAAa,GAAIlT,EAAU9K,GAAWwK,GAAmBL,EAAO0b,EAAkBD,EAAe1H,EAAQyH,EAAiBzE,GAASlhB,GAG/F,EAAjC8d,EAAO/sB,GAAGe,MAAM,GAA0D,IAArCgsB,EAAO/sB,GAAGe,MAAM,IAExDksB,EAAa,EAAG0I,GAAUC,GAActB,EAAanc,IACtD,EAGM,CACNnU,EACAmU,GACAgV,EACAjX,EACAof,EACApwB,EACA+J,EACA0mB,GACA3E,EACAoE,EACAC,EACAG,EACA9b,EACA6H,EACA/D,EACAC,EACA+D,EACAC,EACA9H,EACAW,EACAoH,EACAC,EACAC,EACA/F,EACAjC,EACAE,EACAD,EACA6P,GACAE,GACA6L,GACAC,GACAE,GA/KD,SAA2BO,EAAaC,GACvC,OAAOD,EAAYxE,OACjBjiB,GAAWshB,EAAcW,OAAO0E,KAAKryB,EAAO0L,EAAS0mB,EAAQb,EAAUd,EAAc,KAAM,CAACte,GAAKD,GAAIiF,IAAMhF,GAAKE,GAASH,EAAI,IAAIiF,IAAKN,GAAQzB,EAAMC,mBACpJ7Z,CACH,EA6KC4Z,EACAuB,EACA4a,EACA1a,EA9KD,WACM3E,IAIL+W,EAAa,GAAI5R,GAASH,GAAgB9B,EAAOuB,EAAYnE,GAAON,MAE9C,IAAlBse,EAOL,WACC,IAAI3C,EAAQxb,GAASH,EAAI,GACrBogB,EAAI9f,GAAOqb,GAASrb,GAAOqb,EAAM0E,mBA4BtC,SAAoB1E,GACnB,IAAIyE,EAAI,EAER,IAAK,IAAIj1B,EAAI,EAAGA,EAAI+X,EAAM1H,OACzB4kB,EAAIl1B,GAAIk1B,EAAG9f,GAAOqb,EAAM2E,mBACxB3E,EAAQA,EAAM4E,sBAFmBp1B,GASlC,OAAOi1B,CACR,CAzC2DI,CAAW7E,GACrE5E,EAAa,GAAI1P,GAASnE,EAAMgC,OAASkb,GACzC,IAAI1uB,GAAS,EAGb,IAAK,IAAIqK,KAAQmH,EAAMyB,MAAO,CAC7B,IAAI8b,EAAepC,EAAetiB,EAAKC,WAEvC,GAAIykB,EAAc,CACjB,IAAI9oB,EAAO8oB,EAAa9oB,KAEpB0P,GACHoZ,EAAa3uB,IAAIoR,EAAMpV,OAEvB2yB,EAAa9tB,OAAOuQ,EAAMpV,OAGvB6J,IAAS8oB,EAAa9oB,OACzBjG,GAAS,EAEX,CACD,CAEIA,GACH6tB,GAAczzB,IAAIuyB,EAEpB,CAlCEqC,GAEA3J,EAAa,GAAI1P,IAAS,GAE5B,EAoKClC,GACAkC,GACA+W,EACAnE,EACAyE,EACAC,EACAC,EACAC,EACAC,EACAC,EACA/V,EACAgW,EACAC,EAjID,SAAyB0B,GACxBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EA+HD,QAEA,cAAoBvJ,GACnBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GACChH,KACAN,EACAmwB,GACAZ,GACA70B,EACA,CACCwa,MAAO,GACPuB,WAAY,GACZ4a,QAAS,GACT1a,MAAO,GACPc,WAAY,IAEb,KACA,EAAE,GAAI,GAER,CAEA,cAAIA,GACH,OAAOnX,KAAKxE,GAAGK,IAAI,GACpB,GAKD,SAASy2B,GAAmBz2B,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAAS2sB,GAAoBC,EAAO32B,GACnC,IAAIoK,EACAzG,EACAqqB,EAMJ,OAJArqB,EAAQ,IAAIizB,GAAM,CAChB3xB,MAAO,CAAE8T,MAAiB/Y,EAAI,IAAKk1B,SAAS,KAGvC,CACNvwB,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAM4L,EAAgB,CAAE,EACM,EAA1Bn2B,IAA6Bm2B,EAAc9d,MAAkB/Y,EAAI,KACrE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGRU,GAAkBnH,EAAOZ,EAC1B,EAEF,CAEA,SAAS+zB,GAAkB92B,GAC1B,IAAIyyB,EACAC,EACAvO,EACA4S,EACA5L,EACA+E,EACA1xB,EACA4xB,EACA4G,EACArE,EACAsE,EACArE,EAGAC,EACAC,EACA9E,EACApD,EACAC,EANA0B,EAAc,GACd2K,EAAgB,IAAIttB,IAMpB0iB,EAAa3jB,GAAoC3I,EAAI,IACzD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC9C,IAAI+I,EAAY0sB,GAAmBz2B,EAAKssB,EAAYtrB,GAChD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAK01B,GAAoB/xB,EAAKoF,GAClE,CAEA,MAAO,CACN5B,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACfkhB,EAAOlhB,EAAQ,QACfitB,EAAK1sB,IACLhF,EAAIyE,EAAQ,KACZmtB,EAAK/sB,EAAK,KACV4zB,EAAKzzB,IACLovB,EAAO3vB,EAAQ,OAEf,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAK+f,EAAM,WAAY4S,EAAsBjkB,GAA4B9S,EAAI,GAAI,KACjFoE,EAAK5F,EAAG,OAAQ,UAChB4F,EAAK5F,EAAG,WAAY,KACpB4F,EAAK5F,EAAG,aAAcw4B,EAAqCh3B,EAAI,GAAGm3B,OAClE/yB,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGsjB,SACzDlf,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAGwY,QACzDpU,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAGo3B,OACzDhzB,EAAKquB,EAAM,QAAmBzyB,EAAI,GAClC,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMC,GACbvwB,EAAOuwB,EAAMvO,GACbhiB,EAAOuwB,EAAMxC,GACb/tB,EAAOuwB,EAAMl0B,GACb2D,EAAO3D,EAAG4xB,GACVjuB,EAAOswB,EAAMwE,GACb90B,EAAOswB,EAAMG,GAEb,IAAK,IAAI5xB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAIR5yB,EAAI,IAAIyyB,GACzBzE,GAAU,EAELpD,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMigB,EAA2BnkB,EAAI,GAAG2d,OAAuB3d,EAAI,MACxH0D,EAAOlF,EAAG,QAASwF,EAA2BhE,EAAI,MAClD0D,EAAOlF,EAAG,UAAWiQ,GAAmBzO,EAAI,MAC5C4B,EAAiBuN,GAAajL,KAAK,KAAMuuB,EAAM,gBAC/C/uB,EAAO+uB,EAAM,cAAezuB,EAAyChE,EAAI,MACzE0D,EAAO+uB,EAAM,qBAAmDzyB,EAAI,MAGrE4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAG4e,GAAW,IAARle,GAAMke,IACRoP,GAAmC,EAAxBttB,GAA6Bq2B,KAAyBA,EAAsBjkB,GAA4B9S,EAAI,GAAI,OAC/HoE,EAAK+f,EAAM,WAAY4S,GAGpB5L,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAqD,GAA1C7G,GAA8CyqB,EAAkB5jB,OAAOrD,KAAK,KAA2BlE,EAAI,GAAG2d,OAAuB3d,EAAI,OAEtMguB,GAAmC,GAAxBttB,GAA8Bs2B,KAAwBA,EAAqCh3B,EAAI,GAAGm3B,SACjH/yB,EAAK5F,EAAG,aAAcw4B,KAGlBhJ,GAA8B,GAAnBttB,GAAyBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGsjB,WACnGlf,EAAKsuB,EAAM,QAASC,GAGS,EAA1BjyB,IACH4rB,EAAa3jB,GAAoC3I,EAAI,IACrDiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAKssB,EAAY4K,EAAetE,EAAM9pB,GAAyB4tB,GAAqB,KAAMD,IAC1JruB,QAGI4lB,GAA8B,GAAnBttB,GAAyBmyB,KAAsBA,EAA8B7yB,EAAI,GAAGwY,UACnGpU,EAAKwuB,EAAM,QAASC,KAGhB7E,GAA8B,GAAnBttB,GAAyBoyB,KAAsBA,EAA8B9yB,EAAI,GAAGo3B,SACnGhzB,EAAKquB,EAAM,QAASK,KAGhB9E,GAA6B,EAAlBttB,IACf0D,EAAKquB,EAAM,QAAmBzyB,EAAI,GAEnC,EACDgB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGR,IAAK,IAAIzxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,IAGChD,EAAI,IAAI,MACzB4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAAS4B,GAAWC,EAAQC,EAASC,GACpC,IAAI+D,EACAyD,EACAiD,EACAvK,EACAwK,EACAtK,EAQAnX,GAPA6K,WAAEA,EAAUnH,MAAEA,EAAK8P,aAAEA,EAAYkO,gBAAEA,EAAelC,WAAEA,EAAUmC,aAAEA,GAAiBtxB,EAAW,SAChGzG,EAAoBitB,EAAQhM,GAAYnhB,GAASqtB,EAAa,EAAGI,EAAcztB,KAC/EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KACpFE,EAAoBitB,EAAQ6K,GAAiBh4B,GAASqtB,EAAa,EAAG0K,EAAmB/3B,KACzFE,EAAoBitB,EAAQ2I,GAAY91B,GAASqtB,EAAa,EAAGwH,EAAc70B,KAC/EE,EAAoBitB,EAAQ8K,GAAcj4B,GAASqtB,EAAa,EAAGyK,EAAgB93B,KAEnF,IAAIsF,EAAQ,GA6CZ,SAASyW,IAEJzF,IACH+W,EAAa,EAAG/nB,EAAQ,IAGxBoC,IAAOF,MAAK,KACPswB,EAAcv4B,OAlDrB,WACC,IAMI24B,EAiBA3c,EAvBA0W,EAAQxb,GAASH,EAAI,GACrB6hB,EAAS1hB,GAASwb,EAAO,GACzBmG,EAAY7hB,GAAKD,GACjB+hB,EAAU9hB,GAAK0b,GACfqG,EAAW/hB,GAAK4hB,GAIpB,GAHA9K,EAAa,EAAG/nB,EAAQ,IAGpB8yB,EAAUG,OAASD,EAASC,MAAO,CACtCL,EAAOI,EAASJ,KAAOG,EAAQH,KAC/B,IAAIM,EAAQH,EAAQG,MAAQF,EAASE,MACrCnL,EAAa,EAAG/nB,GAAS,SAASkzB,OACnC,MACCN,GAAQG,EAAQE,MAAQH,EAAUG,OAAS,EAEvCF,EAAQH,KAAOA,EAAOI,EAASJ,KAClCA,EAAOI,EAASJ,KAAOG,EAAQH,KACrBG,EAAQH,KAAOA,EAAOE,EAAUG,MAAQD,EAASE,QAC3DN,EAAOI,EAASE,MAAQH,EAAQH,KAAOE,EAAUG,OAOnD,GAHAlL,EAAa,EAAG/nB,GAAS,QAAQ4yB,QAG7BE,EAAUxhB,QAAU0hB,EAAS1hB,OAAQ,CACxC2E,EAAM+c,EAAS/c,IAAM8c,EAAQ9c,IAC7B,IAAIC,EAAS6c,EAAQ7c,OAAS8c,EAAS9c,OACvC6R,EAAa,EAAG/nB,GAAS,UAAUkW,OACpC,MACCD,GAAO8c,EAAQzhB,OAASwhB,EAAUxhB,QAAU,EAExCyhB,EAAQ9c,IAAMA,EAAM+c,EAAS/c,IAChCA,EAAM+c,EAAS/c,IAAM8c,EAAQ9c,IACnB8c,EAAQ9c,IAAMA,EAAM6c,EAAUxhB,OAAS0hB,EAAS9c,SAC1DD,EAAM+c,EAAS9c,OAAS6c,EAAQ9c,IAAM6c,EAAUxhB,QAIlDyW,EAAa,EAAG/nB,GAAS,OAAOiW,OACjC,CAUIkd,GAEAb,GACD,IAGH,CAEA,SAASA,EAAM3vB,GACd/F,EAAgB4zB,EAAYjB,EAAc,KAAMA,EACjD,CA2BA,OATA1H,EAAO/sB,GAAG4H,OAAS,KACsB,EAApCmlB,EAAO/sB,GAAGe,OACT22B,GAEH/b,GAEF,EAGM,CACN+b,EACAxhB,EACAhR,EACAuvB,EACAtH,EACAwK,EACAtK,EACAtM,EACAnH,EACA8P,EACAkO,EACAlC,EACAmC,EACAL,EAvCD,SAAkC3vB,GACjC2vB,IACAxG,EAAcW,QAAQ2G,SACvB,EAEA,SAA6Bt0B,GAC5B0C,EAAOnC,KAAKC,KAAMuoB,EAAQ/oB,EAC3B,EAEA,SAAsB6yB,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EA8BD,CAEA,MAAMqiB,WAAc5rB,GACnBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAAS4oB,GAAYqK,GAAmBv4B,EAAgB,GACpE,EAKD,SAASgsB,GAAmBvqB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAItB,OAHAuJ,EAAU,IAAMX,EAAKpI,GACrB+I,EAAU,IAAMX,EAChBW,EAAU,IAAM/I,EACT+I,CACR,CAEA,SAAS8jB,GAAmB7tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASouB,GAAkBn4B,GAC1B,IAAIsyB,EACA8F,EACAjN,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCmqB,EAAOrvB,EAAQ,QACfmB,EAAKkuB,EAAM,QAAS8F,EAA8Bp4B,EAAI,IAAIq4B,WAC1D,EACDluB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQkwB,EAAM9vB,GAEhBooB,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMouB,EAAqBtyB,EAAI,MAC9F4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACoB,OAAtBA,EAAM,IAA0B03B,KAAsBA,EAA8Bp4B,EAAI,IAAIq4B,aAC/Fj0B,EAAKkuB,EAAM,QAAS8F,GAGjBjN,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAqC,MAA1B7G,EAAM,IAA2ByqB,EAAkB5jB,OAAOrD,KAAK,KAAqBlE,EAAI,IAC1J,EACDgD,CAAAA,CAAED,GACGA,GACHL,EAAO4vB,GAGR1H,GAAU,EACVC,GACD,EAEF,CAGA,SAASyN,GAAkBt4B,GAC1B,IAEIqsB,EACA2B,EAHAzB,EAAc,GACd2K,EAAgB,IAAIttB,IAGpB+kB,EAAehmB,GAAkC3I,EAAI,KACzD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAChD,IAAI+I,EAAY8jB,GAAmB7tB,EAAK2uB,EAAc3tB,GAClD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAKqtB,GAAoB1pB,EAAKoF,GAClE,CAEA,MAAO,CACN5B,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACyB,KAA3BA,EAAM,KACTiuB,EAAehmB,GAAkC3I,EAAI,KACrDiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAK2uB,EAAcuI,EAAe7K,EAAc1pB,WAAYmG,GAAyBulB,GAAqBhC,EAAewB,IACzLzlB,KAED,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGR,IAAK,IAAIrrB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,EAAED,EAEnB,EAEF,CAGA,SAASsrB,GAAoBsI,EAAO32B,GACnC,IAAIoK,EACAzG,EACAqqB,EAGJ,OAFArqB,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO,CAAE8T,MAAiB/Y,EAAI,OAE3C,CACN2E,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAM4L,EAAgB,CAAE,EACO,KAA3Bn2B,EAAM,KAA2Bm2B,EAAc9d,MAAkB/Y,EAAI,KACzE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGRU,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAASuoB,GAAkBtrB,GAC1B,IACI0qB,EAEA6N,EACAvK,EAJAwK,EAAwBx4B,EAAI,GAAG,IAAMgT,GAAuBhT,EAAI,GAAG,GAAG4R,KAAe5R,EAAI,IAEzFy4B,EAAsBz4B,EAAI,GAAG,IAAMgT,GAAuBhT,EAAI,GAAG,GAAG4R,KAAe5R,EAAI,IAGvF04B,EAAYF,GAAahO,GAAkBxqB,GAC3C24B,EAAYF,GAAWvN,GAAkBlrB,GAE7C,MAAO,CACNmI,CAAAA,GACKuwB,GAAWA,EAAUvwB,IACzBuiB,EAAIlnB,IACAm1B,GAAWA,EAAUxwB,IACzBowB,EAAmB90B,GACnB,EACD0G,CAAAA,CAAE/H,EAAQI,GACLk2B,GAAWA,EAAUvuB,EAAE/H,EAAQI,GACnCD,EAAOH,EAAQsoB,EAAGloB,GACdm2B,GAAWA,EAAUxuB,EAAE/H,EAAQI,GACnCD,EAAOH,EAAQm2B,EAAkB/1B,GACjCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GAC2B,EAA7BA,EAAM,KAA0B83B,EAAwBx4B,EAAI,GAAG,IAAMgT,GAAuBhT,EAAI,GAAG,GAAG4R,KAAe5R,EAAI,KAEzHw4B,EACCE,GACHA,EAAUn3B,EAAEvB,EAAKU,GAEgB,EAA7BA,EAAM,IACT2H,GAAcqwB,EAAW,KAG1BA,EAAYlO,GAAkBxqB,GAC9B04B,EAAUvwB,IACVE,GAAcqwB,EAAW,GACzBA,EAAUvuB,EAAEugB,EAAE/nB,WAAY+nB,IAEjBgO,IACVzwB,KAEAQ,GAAeiwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBtwB,MAGgC,EAA7B1H,EAAM,KAA0B+3B,EAAsBz4B,EAAI,GAAG,IAAMgT,GAAuBhT,EAAI,GAAG,GAAG4R,KAAe5R,EAAI,KAEvHy4B,EACCE,GACHA,EAAUp3B,EAAEvB,EAAKU,GAEgB,EAA7BA,EAAM,IACT2H,GAAcswB,EAAW,KAG1BA,EAAYzN,GAAkBlrB,GAC9B24B,EAAUxwB,IACVE,GAAcswB,EAAW,GACzBA,EAAUxuB,EAAEouB,EAAiB51B,WAAY41B,IAEhCI,IACV1wB,KAEAQ,GAAekwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBvwB,KAED,EACDpH,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcqwB,GACdrwB,GAAcswB,GACd3K,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeiwB,GACfjwB,GAAekwB,GACf3K,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOgoB,GACPhoB,EAAO61B,IAGJG,GAAWA,EAAU11B,EAAED,GACvB41B,GAAWA,EAAU31B,EAAED,EAC5B,EAEF,CAGA,SAASynB,GAAkBxqB,GAC1B,IAAImuB,EACAxqB,EACAyqB,EACAJ,EAGJ,OAFArqB,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO,CAAE8T,MAAmB/Y,EAAI,GAAG,MAEhD,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiB9G,EAAMhE,GAAGkI,UAC1BzD,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,IAAIwY,OACxD,EACDrO,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgB/G,EAAOwqB,EAAK,MAC5BH,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMm2B,EAAgB,CAAE,EACG,EAAvBn2B,EAAM,KAAoBm2B,EAAc9d,MAAoB/Y,EAAI,GAAG,IACvE2D,EAAMiJ,KAAKiqB,KAEN7I,GAAiC,OAAtBttB,EAAM,IAA0B0tB,KAAqBA,EAA6BpuB,EAAI,IAAIwY,UACzGpU,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRrjB,GAAkBnH,EACnB,EAEF,CAGA,SAASunB,GAAkBlrB,GAC1B,IAAImuB,EACAxqB,EACAyqB,EACAJ,EAGJ,OAFArqB,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO,CAAE8T,MAAmB/Y,EAAI,GAAG,MAEhD,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiB9G,EAAMhE,GAAGkI,UAC1BzD,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,IAAIwY,OAAS,IAAiBxY,EAAI,IAAI44B,QAChG,EACDzuB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgB/G,EAAOwqB,EAAK,MAC5BH,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMm2B,EAAgB,CAAE,EACG,EAAvBn2B,EAAM,KAAoBm2B,EAAc9d,MAAoB/Y,EAAI,GAAG,IACvE2D,EAAMiJ,KAAKiqB,KAEN7I,GAAiC,OAAtBttB,EAAM,IAA0B0tB,KAAqBA,EAAmCpuB,EAAI,IAAIwY,OAAS,IAAiBxY,EAAI,IAAI44B,WACjJx0B,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRrjB,GAAkBnH,EACnB,EAEF,CAGA,SAAS4nB,GAAkBvrB,GAC1B,IAEIqsB,EACA2B,EAHAzB,EAAc,GACd2K,EAAgB,IAAIttB,IAGpB0iB,EAAa3jB,GAAgC3I,EAAI,IACrD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC9C,IAAI+I,EAAYwgB,GAAmBvqB,EAAKssB,EAAYtrB,GAChD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAK+qB,GAAoBpnB,EAAKoF,GAClE,CAEA,MAAO,CACN5B,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACgD,MAAlDA,EAAM,KACT4rB,EAAa3jB,GAAgC3I,EAAI,IACjDiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAKssB,EAAY4K,EAAe7K,EAAc1pB,WAAYmG,GAAyBijB,GAAqBM,EAAe9B,IACvLniB,KAED,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGR,IAAK,IAAIrrB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,EAAED,EAEnB,EAEF,CAGA,SAASgpB,GAAoB4K,EAAO32B,GACnC,IAAIoK,EACAzG,EAEAqqB,EADAhtB,EAAUhB,EAAI,IAElB,MAAM64B,EAAeA,IAAwB74B,EAAI,IAAI2D,EAAO3C,GACtD83B,EAAiBA,IAAwB94B,EAAI,IAAI,KAAMgB,GAE7D,IAAI+3B,EAAc,CACjBhgB,MAAiB/Y,EAAI,IACrBsa,WAA2Bta,EAAI,GAC/Bwa,MAAiBxa,EAAI,IAMtB,OAHA2D,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO8zB,IAC3BF,IAEO,CACNl0B,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GAGNM,KAFJhB,EAAMirB,GAEc,MACnB6N,IACA93B,EAAUhB,EAAI,IACd64B,KAGD,MAAMhC,EAAgB,CAAE,EACK,GAAzBn2B,EAAM,KAAuBm2B,EAAc9d,MAAkB/Y,EAAI,KACvC,EAA1BU,EAAM,KAAuBm2B,EAAcvc,WAA4Bta,EAAI,IACtD,EAArBU,EAAM,KAAkBm2B,EAAcrc,MAAkBxa,EAAI,IAChE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGR0uB,IACAhuB,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAAS4oB,GAAkB3rB,GAC1B,IAAIo3B,EACApJ,EAGJ,OAFAoJ,EAAQ,IAAIc,GAAM,IAEX,CACN/vB,CAAAA,GACCsC,GAAiB2sB,EAAMz3B,GAAGkI,SAC1B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB0sB,EAAOh1B,EAAQI,GAC/BwrB,GAAU,CACV,EACDhtB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc+uB,EAAMz3B,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe2uB,EAAMz3B,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBssB,EAAOr0B,EAC1B,EAEF,CAGA,SAASmrB,GAAgBluB,GACxB,IAAIxB,EACA2sB,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACC3J,EAAIyE,EAAQ,KACZmB,EAAK5F,EAAG,OAAQ,UAChB4F,EAAK5F,EAAG,WAAY,KACpB4F,EAAK5F,EAAG,gBAAiB,OACzB,EACD2L,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ5D,EAAGgE,GAEbooB,IACJC,EAAU,CACTnnB,EAAOlF,EAAG,QAASwF,EAA8BhE,EAAI,MACrD0D,EAAOlF,EAAG,UAAWiQ,GAAsBzO,EAAI,MAC/C0D,EAAOlF,EAAG,cAAewF,EAAyChE,EAAI,MACtE4B,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAM1F,EAAgBwB,EAAI,OAGhF4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACFyqB,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAmC,MAAxB7G,EAAM,IAAyByqB,EAAkB5jB,OAAOrD,KAAK,KAAmBlE,EAAI,IACtJ,EACDgD,CAAAA,CAAED,GACGA,GACHL,EAAOlE,GAGRosB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAASuB,GAAkBpsB,GAC1B,IAAIg5B,EACAtG,EACAvO,EACA4S,EACA5L,EACA+E,EACAyC,EACAvC,EACAwC,EACAC,EACAoE,EACAgC,EACAxG,EACAK,EACAoG,EACAC,EACAC,EACAC,EACAC,EACAtL,EACApD,EACAC,EACA6N,EAA+B14B,EAAI,IAAMm4B,GAAkBn4B,GAC3D24B,GAA0B34B,EAAI,IAAMs4B,GAAkBt4B,GACtDu5B,GAA0Bv5B,EAAI,IAAMsrB,GAAkBtrB,GACtDw5B,GAA0Bx5B,EAAI,IAAMurB,GAAkBvrB,GACtDy5B,EAA0Bz5B,EAAI,IAAM2rB,KACpC+N,GAA0B15B,EAAI,IAAuBA,EAAI,GAAGwN,MAAQ0gB,GAAgBluB,GAExF,MAAO,CACNmI,CAAAA,GACC6wB,EAAO/1B,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACfkhB,EAAOlhB,EAAQ,QACfitB,EAAK1sB,IACDk1B,GAAWA,EAAUvwB,IACzBioB,EAAK5sB,IACLovB,EAAO3vB,EAAQ,OACX01B,GAAWA,EAAUxwB,IACzB8uB,EAAKzzB,IACD+1B,GAAWA,EAAUpxB,IACzB8wB,EAAKz1B,IACLivB,EAAOxvB,EAAQ,OACXu2B,GAAWA,EAAUrxB,IACzB+wB,EAAK11B,IACDi2B,GAAWA,EAAUtxB,IACzBgxB,EAAK31B,IACL41B,EAAOn2B,EAAQ,OACXy2B,GAAWA,EAAUvxB,IACzB/D,EAAK+f,EAAM,WAAY4S,EAAsBjkB,GAAqB9S,EAAI,GAAI,KAC1EoE,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,IAAIsjB,SAC1Dlf,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,IAAIgjB,UAC1D5e,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,IAAIwY,QAC1DpU,EAAKg1B,EAAM,QAASC,EAA8Br5B,EAAI,IAAI25B,SAE1Dv1B,EAAK40B,EAAM,QAASM,EAAoCt5B,EAAI,IAAIsR,IAAM,IAAiBtR,EAAI,IAAIqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,IACxJ,IAAiBA,EAAI,IAAI2gB,MACzB,KAAsB3gB,EAAI,IAC1B,IAAiBA,EAAI,IAAIgkB,WACzB,KAAqBhkB,EAAI,IACzB,IAAiBA,EAAI,IAAI4jB,UACzB,KAAoB5jB,EAAI,GACxB,IAAiBA,EAAI,IAAIujB,SACzB,KAEFnf,EAAK40B,EAAM,OAAQ,OACnB,EACD7uB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ42B,EAAMx2B,GACrBL,EAAO62B,EAAMtG,GACbvwB,EAAOuwB,EAAMvO,GACbhiB,EAAOuwB,EAAMxC,GACTwI,GAAWA,EAAUvuB,EAAEuoB,EAAM,MACjCvwB,EAAO62B,EAAM5I,GACbjuB,EAAO62B,EAAMpG,GACT+F,GAAWA,EAAUxuB,EAAEyoB,EAAM,MACjCzwB,EAAO62B,EAAM/B,GACTsC,GAAWA,EAAUpvB,EAAE6uB,EAAM,MACjC72B,EAAO62B,EAAMC,GACb92B,EAAO62B,EAAMvG,GACT+G,GAAWA,EAAUrvB,EAAEsoB,EAAM,MACjCtwB,EAAO62B,EAAME,GACTO,GAAWA,EAAUtvB,EAAE6uB,EAAM,MACjC72B,EAAO62B,EAAMG,GACbh3B,EAAO62B,EAAMI,GACTM,GAAWA,EAAUvvB,EAAEivB,EAAM,MAChBp5B,EAAI,IAAIg5B,GACzBhL,GAAU,EAELpD,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMigB,EAAwBnkB,EAAI,IAAI2d,OAAgB3d,EAAI,MAC/G0D,EAAOs1B,EAAM,eAAe,WACvB36B,EAA8B2B,EAAI,IAAIsxB,QAAQsI,SAA2B55B,EAAI,IAAIsxB,QAAQsI,OAAOvO,MAAMlnB,KAAMtF,UACjH,KAGD+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,IAED+C,GAA+B,EAApBttB,EAAM,IAAmBq2B,KAAyBA,EAAsBjkB,GAAqB9S,EAAI,GAAI,OACpHoE,EAAK+f,EAAM,WAAY4S,GAGpB5L,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA8C,OAAnC7G,EAAM,IAAqCyqB,EAAkB5jB,OAAOrD,KAAK,KAAwBlE,EAAI,IAAI2d,OAAgB3d,EAAI,KAExKA,EAAI,GACtB04B,EACHA,EAAUn3B,EAAEvB,EAAKU,IAEjBg4B,EAAYP,GAAkBn4B,GAC9B04B,EAAUvwB,IACVuwB,EAAUvuB,EAAEuoB,EAAM,OAETgG,IACVA,EAAU11B,EAAE,GACZ01B,EAAY,QAGR1K,GAAiC,OAAtBttB,EAAM,IAA0BiyB,KAAsBA,EAA8B3yB,EAAI,IAAIsjB,WAC3Glf,EAAKsuB,EAAM,QAASC,GAGH3yB,EAAI,GAaX24B,IACV1wB,KAEAQ,GAAekwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBvwB,MAnBIuwB,GACHA,EAAUp3B,EAAEvB,EAAKU,GAEW,GAAxBA,EAAM,IACT2H,GAAcswB,EAAW,KAG1BA,EAAYL,GAAkBt4B,GAC9B24B,EAAUxwB,IACVE,GAAcswB,EAAW,GACzBA,EAAUxuB,EAAEyoB,EAAM,SAYf5E,GAAiC,OAAtBttB,EAAM,IAA0BmyB,KAAsBA,EAA8B7yB,EAAI,IAAIgjB,YAC3G5e,EAAKwuB,EAAM,QAASC,GAGH7yB,EAAI,GAaXu5B,IACVtxB,KAEAQ,GAAe8wB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBnxB,MAnBImxB,GACHA,EAAUh4B,EAAEvB,EAAKU,GAEW,GAAxBA,EAAM,IACT2H,GAAckxB,EAAW,KAG1BA,EAAYjO,GAAkBtrB,GAC9Bu5B,EAAUpxB,IACVE,GAAckxB,EAAW,GACzBA,EAAUpvB,EAAE6uB,EAAMC,IAYFj5B,EAAI,GAaXw5B,IACVvxB,KAEAQ,GAAe+wB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBpxB,MAnBIoxB,GACHA,EAAUj4B,EAAEvB,EAAKU,GAEW,GAAxBA,EAAM,IACT2H,GAAcmxB,EAAW,KAG1BA,EAAYjO,GAAkBvrB,GAC9Bw5B,EAAUrxB,IACVE,GAAcmxB,EAAW,GACzBA,EAAUrvB,EAAEsoB,EAAM,SAYfzE,GAAiC,OAAtBttB,EAAM,IAA0BoyB,KAAsBA,EAA8B9yB,EAAI,IAAIwY,UAC3GpU,EAAKquB,EAAM,QAASK,GAGH9yB,EAAI,GACjBy5B,EAC0B,IAAzB/4B,EAAM,IACT2H,GAAcoxB,EAAW,IAG1BA,EAAY9N,KACZ8N,EAAUtxB,IACVE,GAAcoxB,EAAW,GACzBA,EAAUtvB,EAAE6uB,EAAMG,IAETM,IACVxxB,KAEAQ,GAAegxB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBrxB,OAGiBpI,EAAI,IAAuBA,EAAI,GAAGwN,KAC/CksB,EACHA,EAAUn4B,EAAEvB,EAAKU,IAEjBg5B,EAAYxL,GAAgBluB,GAC5B05B,EAAUvxB,IACVuxB,EAAUvvB,EAAEivB,EAAM,OAETM,IACVA,EAAU12B,EAAE,GACZ02B,EAAY,QAGR1L,GAAiC,OAAtBttB,EAAM,IAA0B24B,KAAsBA,EAA8Br5B,EAAI,IAAI25B,WAC3Gv1B,EAAKg1B,EAAM,QAASC,KAGhBrL,GAAiF,OAAtEttB,EAAM,IAA0E44B,KAAsBA,EAAoCt5B,EAAI,IAAIsR,IAAM,IAAiBtR,EAAI,IAAIqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,IAC1P,IAAiBA,EAAI,IAAI2gB,MACzB,KAAsB3gB,EAAI,IAC1B,IAAiBA,EAAI,IAAIgkB,WACzB,KAAqBhkB,EAAI,IACzB,IAAiBA,EAAI,IAAI4jB,UACzB,KAAoB5jB,EAAI,GACxB,IAAiBA,EAAI,IAAIujB,SACzB,OACDnf,EAAK40B,EAAM,QAASM,EAErB,EACDt4B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcswB,GACdtwB,GAAckxB,GACdlxB,GAAcmxB,GACdnxB,GAAcoxB,GACdzL,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAekwB,GACflwB,GAAe8wB,GACf9wB,GAAe+wB,GACf/wB,GAAegxB,GACfzL,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOs2B,GAGJN,GAAWA,EAAU11B,IACrB21B,GAAWA,EAAU31B,IACrBu2B,GAAWA,EAAUv2B,IACrBw2B,GAAWA,EAAUx2B,IACrBy2B,GAAWA,EAAUz2B,IACrB02B,GAAWA,EAAU12B,IACRhD,EAAI,IAAI,MACzB4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAASoE,GAAWvC,EAAQC,EAASC,GACpC,IAAIiN,EACAjU,EACAkU,EACAzC,EACAjD,EACA2F,EACA7F,EACArH,EACAmN,EACAC,EACAC,EACApN,EACA6D,EACAwJ,EAsBAtkB,EACAukB,EAAWC,EACXC,EAAStW,EAAYJ,EAAWL,GAvBhC3R,KAAEA,GAAS+a,GACXzT,OAAEA,GAAWyT,GACb4N,SAAEA,GAAa5N,GACfrS,WAAEA,GAAeqS,GACjB6N,QAAEA,EAAU,IAAO7N,GACnBnS,MAAEA,GAAUmS,GACV/a,KAAM4b,EAAW2H,aAAEA,EAAYpT,iBAAEA,EAAgBJ,SAAEA,EAAQ8Y,gBAAEA,EAAelhB,MAAEA,EAAKiL,WAAEA,EAAUkW,YAAEA,EAAWC,kBAAEA,EAAiBvF,cAAEA,EAAawF,aAAEA,EAAYvF,WAAEA,EAAUmC,aAAEA,EAAYtP,OAAEA,EAAMmB,aAAEA,GAAiBnjB,EAAW,SAClOzG,EAAoBitB,EAAQc,GAAajuB,GAASqtB,EAAa,GAAIqN,EAAe16B,KAClFE,EAAoBitB,EAAQ3K,GAAkBxiB,GAASqtB,EAAa,GAAIoN,EAAoBz6B,KAC5FE,EAAoBitB,EAAQ/K,GAAUpiB,GAASqtB,EAAa,GAAIhH,EAAYrmB,KAC5EE,EAAoBitB,EAAQ+N,GAAiBl7B,GAASqtB,EAAa,GAAImN,EAAmBx6B,KAC1FE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,GAAIE,EAASvtB,KACtEE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChFE,EAAoBitB,EAAQgO,GAAan7B,GAASqtB,EAAa,GAAIkN,EAAev6B,KAClFE,EAAoBitB,EAAQiO,GAAmBp7B,GAASqtB,EAAa,GAAIiN,EAAqBt6B,KAC9FE,EAAoBitB,EAAQ0I,GAAe71B,GAASqtB,EAAa,GAAIsH,EAAiB30B,KACtFE,EAAoBitB,EAAQkO,GAAcr7B,GAASqtB,EAAa,GAAIuN,EAAgB56B,KACpFE,EAAoBitB,EAAQ2I,GAAY91B,GAASqtB,EAAa,GAAIwH,EAAc70B,KAChFE,EAAoBitB,EAAQ8K,GAAcj4B,GAASqtB,EAAa,GAAIyK,EAAgB93B,KACpFE,EAAoBitB,EAAQxE,GAAQ3oB,GAASqtB,EAAa,GAAIsN,EAAU36B,KACxEE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KAIpF,IAEIs7B,EACAC,EACAzC,EAJA/B,GAAe,IAAIlvB,IACnB2zB,GAAW,GAIX3f,GAAO,GAMX,SAAS4f,KACR,IAAIC,EAAUvoB,GAAOf,GAAUC,IAC3BsH,EAASkhB,EAAUlT,OAAO5M,EAAW1I,EAAKC,YAAYqH,QAAU,IACpEzX,EAAgB+1B,EAAcH,EAAgBne,EAAOtO,KAAImO,GAASxY,GAAO,CAAE,EAAEwY,EAAOD,GAAiBC,EAAMpV,MAAOiO,EAAMqpB,GAAU,CAAE5pB,KAAM,EAAGmJ,MAAO,CAAC5I,OAAUuH,MAAK,CAAC3a,EAAGC,IAAMD,EAAEsc,IAAMrc,EAAEqc,MAAMuc,EAC/L,CAkIA,OAxGA3K,EAAOngB,MAAQogB,IACV,SAAUA,GAASC,EAAa,EAAGhb,EAAO+a,EAAQ/a,MAClD,WAAY+a,GAASC,EAAa,GAAI1T,EAASyT,EAAQzT,QACvD,aAAcyT,GAASC,EAAa,GAAI2N,EAAW5N,EAAQ4N,UAC3D,eAAgB5N,GAASC,EAAa,EAAGtS,EAAaqS,EAAQrS,YAC9D,YAAaqS,GAASC,EAAa,EAAG4N,EAAU7N,EAAQ6N,SACxD,UAAW7N,GAASC,EAAa,EAAGpS,EAAQmS,EAAQnS,MAAM,EAG/DkS,EAAO/sB,GAAG4H,OAAS,KAKlB,GAJkC,EAA9BmlB,EAAO/sB,GAAGe,MAAM,GAAuD,KAArCgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,EAAGrJ,EAAW/G,GAAa5K,EAAMib,IAGsB,IAAjEH,EAAO/sB,GAAGe,MAAM,GAAiG,GAA1CgsB,EAAO/sB,GAAGe,MAAM,KACrF6iB,EAAU,CACdqJ,EAAa,EAAGwN,EAAY,IAC5BxN,EAAa,GAAIyN,EAAcE,EAAS1vB,QAAOqwB,GAAWloB,GAAWkoB,EAAQtpB,KAAMA,MACnF0kB,GAAa1uB,QACPglB,EAAa,EAAG0J,IAAe1J,EAAa,EAAGrJ,GAAYqJ,EAAa,GAAI2N,GAAY3N,EAAa,EAAGhb,GAAQgb,EAAa,GAAI1T,GAAU0T,EAAa,EAAGwN,GAAaxN,EAAa,GAAIC,GAE/L,IAAK,IAAI9T,KAASG,EACblG,GAAW+F,EAAMnH,KAAMA,IAC1BwoB,EAAUv6B,KAAKkZ,EAIlB,CAmBD,GAhBgD,IAA5C2T,EAAO/sB,GAAGe,MAAM,IACnBe,EAAgB2zB,EAAelB,EAAetiB,EAAKC,WAAaykB,GAAcpC,GAG7C,EAA9BxH,EAAO/sB,GAAGe,MAAM,GAAmD,MAAjCgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,GAAI0N,EAAUtnB,GAAWpB,EAAMsoB,IAGX,EAA9BxN,EAAO/sB,GAAGe,MAAM,GAAwD,MAAtCgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,GAAI5I,EAAapS,EAAKO,gBAAkB8nB,EAAa9nB,eAGjC,EAA9Bua,EAAO/sB,GAAGe,MAAM,GAA6D,MAA3CgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,GAAIhJ,EAAYoW,EAAkBve,MAAKzY,GAAKgQ,GAAWhQ,EAAG4O,MAGpB,IAAhD8a,EAAO/sB,GAAGe,MAAM,GAAgG,KAA1DgsB,EAAO/sB,GAAGe,MAAM,KACpE6iB,GAAY2Q,GAAkBoC,GAAa9oB,KAAM,CAErD,IAAInK,EAAO,IAAMizB,GAAa9oB,KAAO,QAGpCof,EAAa,GAAImO,GADdhB,EACyBrlB,GAAWqlB,GACrCA,EAAiB,CAAEoB,IAAK7E,GAAa9oB,KAAMnK,SAC3C02B,EAE0B12B,EAE9B,CA2BD,GAxBkC,EAA9BqpB,EAAO/sB,GAAGe,MAAM,GAAuD,KAArCgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,EAAGiO,EAAYzG,GAAephB,GAAWpB,EAAMwiB,IAGC,IAA1D1H,EAAO/sB,GAAGe,MAAM,IACfm6B,GAAavgB,GAAc8f,GAE9BnzB,IAAOF,KAAKi0B,IAIkC,GAA5CtO,EAAO/sB,GAAGe,MAAM,IAEfmV,GACHN,GAAWM,GAAI,KAAO,CACrB2B,QAAQ,EACR5F,OACA8J,cAAUvc,EACVqyB,MAAO3b,EACP0N,eAK+C,IAA9CmJ,EAAO/sB,GAAGe,MAAM,GAAyG,IAArEgsB,EAAO/sB,GAAGe,MAAM,KAEtEksB,EAAa,EAAGkO,EAAiBhB,GAAgBloB,EAAK0B,cAAgBsS,EAAY,EAAI,IAElFkV,GAAgB,CACnB,IAAI9pB,ED31DT,SAAuBY,EAAM+P,GAEzB/P,EAAOD,GAAUC,GACD,GAAZ+P,EAEA/P,EAAKU,WAAWV,EAAKW,aAAe,EAAIX,EAAK0B,aAI7C1B,EAAKU,WAAWV,EAAKW,aAAe,GAAKX,EAAK0B,aAAe,IAGjE,IAAI8nB,EAAY,IAAIzrB,KAAKA,KAAKK,IAAI4B,EAAKM,iBAAiB,EAAE,IAE1D,OAAOpR,KAAK0T,OAAQ5C,EAAOwpB,GAAa,IAAO5rB,GAAkB,GAAK,EAC1E,CC40DgB6rB,CAAczpB,EAAMgU,GAG9BgH,EAAa,GAAIyL,EADdwB,EAC2BnlB,GAAWmlB,GACvCA,EAAmB,CAAEjoB,KAAMiB,GAAYjB,GAAOZ,SAC9C6oB,EAE4B,IAAMxiB,OAAOrG,GAAMsqB,SAAS,EAAG,KAE/D,CAEF,EAGM,CACN1pB,EACA0I,EACAkgB,EACAhgB,EACA3E,EACAukB,EACA7W,EACA+S,GACAuE,EACAC,EACAT,EACAC,EACAtW,EACAJ,EACAmX,GACA1C,EACAjd,GACA0R,EACA6D,EACAwJ,EACA3M,EACAzL,EACAJ,EACA8Y,EACAlhB,EACAiL,EACAkW,EACAC,EACAvF,EACAwF,EACAvF,EACAmC,EACAtP,EACAmB,EA5KD,WACC5nB,EAAgB4zB,EAAYjB,EAAcxiB,EAAMwiB,EACjD,EA4KClb,EACAqhB,EArKD,WACMhX,GACJpI,GAAcC,GAAMgf,EAEtB,EAmKCP,EACAjU,EACAkU,EACA1F,EACA2F,EACA7F,EACArH,EACAmN,EACAC,EACAC,EA1KD,SAA6Bv2B,GAC5B0C,EAAOnC,KAAKC,KAAMuoB,EAAQ/oB,EAC3B,EAEA,SAAuB6yB,EAASx1B,GAC/BuF,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/Cpb,GAAKpa,GAAKw1B,EACV5J,EAAa,GAAIxR,GAAK,GAExB,EAEA,SAAsBob,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EA+JD,QAEA,cAAkBvJ,GACjBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GACChH,KACAN,EACAorB,GACA7C,GACA7tB,EACA,CACCqT,KAAM,EACNsH,OAAQ,GACRqhB,SAAU,GACVjgB,WAAY,EACZkgB,QAAS,EACThgB,MAAO,EACPc,WAAY,IAEb,KACA,EAAE,GAAI,GAER,CAEA,cAAIA,GACH,OAAOnX,KAAKxE,GAAGK,IAAI,GACpB,GAKD,SAAS4tB,GAAmB5tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAItB,OAHAuJ,EAAU,IAAMX,EAAKpI,GACrB+I,EAAU,IAAMX,EAChBW,EAAU,IAAM/I,EACT+I,CACR,CAGA,SAAS2kB,GAAoB1uB,GAC5B,IAAIsR,EAEA0c,EADAhtB,EAAUhB,EAAI,IAElB,MAAMu7B,EAAaA,IAAsBv7B,EAAI,IAAIsR,EAAKtQ,GAChDw6B,EAAeA,IAAsBx7B,EAAI,IAAI,KAAMgB,GAEzD,IAAIy6B,EAAY,CACf7pB,KAAe5R,EAAI,IACnBkZ,OAAmBlZ,EAAI,GACvBu6B,SAAuBv6B,EAAI,GAC3Bsa,WAA2Bta,EAAI,GAC/Bw6B,QAAqBx6B,EAAI,GACzBwa,MAAiBxa,EAAI,IAMtB,OAHAsR,EAAM,IAAIoqB,GAAI,CAAEz2B,MAAOw2B,IACvBF,IAEO,CACNpzB,CAAAA,GACCsC,GAAiB6G,EAAI3R,GAAGkI,SACxB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4G,EAAKlP,EAAQI,GAC7BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACFM,IAAYhB,EAAI,MACnBw7B,IACAx6B,EAAUhB,EAAI,IACdu7B,KAGD,MAAMI,EAAc,CAAE,EACA,EAAlBj7B,IAAqBi7B,EAAY/pB,KAAgB5R,EAAI,KAClC,EAAnBU,IAAsBi7B,EAAYziB,OAAoBlZ,EAAI,IACrC,EAArBU,IAAwBi7B,EAAYpB,SAAwBv6B,EAAI,IACzC,EAAvBU,IAA0Bi7B,EAAYrhB,WAA4Bta,EAAI,IAClD,GAApBU,IAAwBi7B,EAAYnB,QAAsBx6B,EAAI,IAC5C,EAAlBU,IAAqBi7B,EAAYnhB,MAAkBxa,EAAI,IAC3DsR,EAAI1E,KAAK+uB,EACT,EACD36B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAciJ,EAAI3R,GAAGkI,SAAUU,GAC/BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6I,EAAI3R,GAAGkI,SAAUU,GAChCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACDy4B,IACA1wB,GAAkBwG,EAAKvO,EACxB,EAEF,CAEA,SAAS8rB,GAAkB7uB,GAC1B,IAAImuB,EACAC,EACAJ,EACApD,EACAC,EACAyB,EAAa3jB,GAA4B3I,EAAI,IAC7CusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAK0tB,GAAoBd,GAAmB5tB,EAAKssB,EAAYtrB,IAG1E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCgmB,EAAMlrB,EAAQ,OAEd,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGqR,MACvDjN,EAAK+pB,EAAK,OAAQ,MAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEpB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAIxBH,GAAU,EAELpD,IACJC,EAAUnnB,EAAO1B,OAAQ,SAAyBhC,EAAI,KACtD4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAG8lB,GAAW,IAARplB,GAAMolB,EACb,GAAmE,GAA/DplB,EAAmE,CAEtE,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA4B3I,EAAI,IAGxCgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAY6jB,GAAmB5tB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAK0tB,GAAoB3kB,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAExB,CAIA,IAFAlmB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAA8B,GAAnBttB,GAAyB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGqR,QACjGjN,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRtrB,EAAa0pB,EAAaxpB,GAC1B6nB,GAAU,EACVC,GACD,EAEF,CAEA,SAASgF,GAAWnD,EAAQC,EAASC,GACpC,IAAIsH,EACAlL,EACA4S,EACA/c,EACAgd,EACA9c,EACA8N,EACAC,GACAtS,MAAEA,GAAUmS,GACZjO,QAAEA,EAAO4K,SAAEA,EAAQnE,QAAEA,EAAOiQ,cAAEA,EAAa5Z,UAAEA,EAASkG,0BAAEA,EAAyB5N,WAAEA,EAAUyF,MAAEA,EAAKiL,WAAEA,GAAete,EAAW,SACpIzG,EAAoBitB,EAAQhO,GAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQpD,GAAU/pB,GAASqtB,EAAa,GAAIgP,EAAYr8B,KAC5EE,EAAoBitB,EAAQ0I,GAAe71B,GAASqtB,EAAa,GAAIsH,EAAiB30B,KACtFE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQhL,GAA2BniB,GAASqtB,EAAa,GAAIiP,EAA6Bt8B,KAC9GE,EAAoBitB,EAAQ5Y,GAAYvU,GAASqtB,EAAa,GAAI5D,EAAczpB,KAChFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChF,IAAI2Z,EAAQqhB,EAAUjgB,EAClBrN,EACAwK,EAF8B+iB,EAAU,GAGxCpf,EAAO,GACPmL,EAAiB,CAAE,EAEvB,SAASjL,IACRzG,IAAS,IAAMsG,GAAcC,EAAMZ,IAAQ+L,EAAgBpB,EAC5D,CAuEA,OA9DAuH,EAAOngB,MAAQogB,IACV,UAAWA,GAASC,EAAa,EAAGpS,EAAQmS,EAAQnS,MAAM,EAG/DkS,EAAO/sB,GAAG4H,OAAS,KAQlB,GAP6C,SAAzCmlB,EAAO/sB,GAAGe,QAEZksB,EAAa,GAAI3f,EAAQyP,GAAalC,EAAM,GAAIqS,IAChDD,EAAa,GAAInV,EAAM/E,GAAOf,GAAU+K,GAAalC,EAAMG,IAAI,GAAIkS,OAIiD,SAAlHH,EAAO/sB,GAAGe,MAAkH,CAE9HksB,EAAa,EAAG1T,EAAS,IACzB0T,EAAa,EAAG2N,EAAW,IAE3B,IAAK,IAAI52B,KAASob,EACjB,GAAIxD,GAAgB5X,EAAOsJ,EAAOwK,EAAKokB,EAA6Bhd,OAAa1f,GAAY,CAC5F,IAAI4Z,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,GAEvCsE,GAAQpY,EAAMmU,SACbnU,EAAM6T,QACT+iB,EAAS16B,KAAKkZ,GAGfG,EAAOrZ,KAAKkZ,EAEd,CAGDsB,GAAmBkgB,EAAUvR,GAC7B4D,EAAa,EAAGtS,EAAaD,GAAmBnB,EAAQ8P,IAGxD1N,GAEF,CAE6D,QAAzDoR,EAAO/sB,GAAGe,OACbksB,EAAa,EAAG4N,EAAUoB,EAAUhxB,KAAIjH,IACvC,IAAIoV,EASJ,OAPIpV,GAAS4X,GAAgB5X,EAAOsJ,EAAOwK,IAC1CsB,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,GACvC4C,GAAmB,CAACtB,GAAQiQ,IAE5BjQ,EAAQ,KAGFA,CAAK,KAI2B,OAArC2T,EAAO/sB,GAAGe,OACTwzB,GAEHjtB,IAAOF,KAAKuU,EAEd,EAGM,CACNd,EACAtB,EACAqhB,EACAjgB,EACAkgB,EACApf,EACA0R,EACApO,EACA4K,EACA8L,EACA5Z,EACAkG,EACA5N,EACAyF,EACAiL,EACAlJ,EACArO,EACAwK,EACAyc,EACAlL,EACA4S,EACA/c,EACAgd,EACA9c,EACA8N,EA9FD,SAAqB2J,EAASx1B,GAC7BuF,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/Cpb,EAAKpa,GAAKw1B,EACV5J,EAAa,EAAGxR,EAAK,GAEvB,EA4FD,QAEA,cAAmB9O,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASgsB,GAAYhB,GAAmBtwB,EAAgB,CAAEic,MAAO,GAC7E,GAKD,SAAS8U,GAAiBtvB,EAAKoJ,EAAMpI,GACpC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASV,GAAkBrJ,GAC1B,IAAIgR,EACAgd,EAGJ,OAFAhd,EAAO,IAAI8qB,GAAK,CAAE72B,MAAO,CAAEuV,MAAiBxa,EAAI,OAEzC,CACNmI,CAAAA,GACCsC,GAAiBuG,EAAKrR,GAAGkI,SACzB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBsG,EAAM5O,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMq7B,EAAe,CAAE,EACD,EAAlBr7B,IAAqBq7B,EAAavhB,MAAkBxa,EAAI,KAC5DgR,EAAKpE,KAAKmvB,EACV,EACD/6B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc2I,EAAKrR,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeuI,EAAKrR,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBkG,EAAMjO,EACzB,EAEF,CAEA,SAAS4sB,GAAkB3vB,GAC1B,IAAI4yB,EACAF,EACAC,EACAE,EACA7E,EACA1B,EAAa3jB,GAA4B3I,EAAI,IAC7CusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqI,GAAkBimB,GAAiBtvB,EAAKssB,EAAYtrB,IAGtE,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OAEf,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG4O,SAEzDxK,EAAKwuB,EAAM,QAASC,EAAoC7yB,EAAI,GAAGijB,OAAqC,IAAXjjB,EAAI,GAC3F,IAAiBA,EAAI,GAAGg8B,QACxB,IACF,EACD7xB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBL,EAAOywB,EAAMF,GAEb,IAAK,IAAI1xB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEuoB,EAAM,MAIR1yB,EAAI,IAAI4yB,GACzB5E,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAGylB,GAAW,IAAR/kB,GAAM+kB,EACb,GAAsB,EAAlB/kB,EAAqB,CAExB,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA4B3I,EAAI,IAGxCgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYulB,GAAiBtvB,EAAKssB,EAAYtrB,GAEhDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqI,GAAkBU,GACnCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEuoB,EAAM,MAEzB,CAIA,IAFAzqB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG4O,WAClGxK,EAAKsuB,EAAM,QAASC,KAGhB3E,GAA6C,EAAlCttB,GAAuCmyB,KAAsBA,EAAoC7yB,EAAI,GAAGijB,OAAqC,IAAXjjB,EAAI,GACpJ,IAAiBA,EAAI,GAAGg8B,QACxB,OACD53B,EAAKwuB,EAAM,QAASC,EAErB,EACD7xB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOkwB,GAGR/vB,EAAa0pB,EAAaxpB,GACT/C,EAAI,IAAI,KAC1B,EAEF,CAEA,SAASoL,GAASshB,EAAQC,EAASC,GAClC,IAAI/M,EACAsU,EACAD,EACAlL,EACA8D,EACAyD,EAQAxf,EACAM,GARAmX,QAAEA,EAAOM,WAAEA,EAAUsM,cAAEA,EAAaD,aAAEA,EAAYrhB,WAAEA,EAAUyF,MAAEA,GAAUrT,EAAW,SAqCzF,OApCAzG,EAAoBitB,EAAQlE,GAASjpB,GAASqtB,EAAa,EAAG2D,EAAWhxB,KACzEE,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,GAAI/M,EAActgB,KAChFE,EAAoBitB,EAAQ0I,GAAe71B,GAASqtB,EAAa,GAAIsH,EAAiB30B,KACtFE,EAAoBitB,EAAQyI,GAAc51B,GAASqtB,EAAa,EAAGuH,EAAgB50B,KACnFE,EAAoBitB,EAAQ5Y,GAAYvU,GAASqtB,EAAa,GAAI5D,EAAczpB,KAChFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAWrEmtB,EAAO/sB,GAAG4H,OAAS,KAClB,GAA+E,KAA3EmlB,EAAO/sB,GAAGe,MAAuE,CAEnFksB,EAAa,EAAG7b,EAAQ,IACxB6b,EAAa,GAAIvb,EAAO,EAAI2X,EAAYlqB,QACxC2C,EAAgB2zB,EAAelB,EAAiB,CAAA,EAAIA,GAEpD,IAAK,IAAIlzB,EAAI,EAAGA,EAAI6e,EAAY/gB,OAASuS,IAAQrQ,EAAG,CACnD,IAAIwZ,EAAQ,GAEZ,IAAK,IAAIyhB,EAAI,EAAGA,EAAI5qB,IAAQ4qB,EAC3BzhB,EAAM3a,KAAKggB,EAAY7e,EAAIqQ,EAAO4qB,IAGnClrB,EAAMlR,KAAK2a,EACZ,CAEF,GAGM,CACNzJ,EACAojB,EACArH,EACAyD,EACA/H,EACAM,EACAsM,EACAD,EACArhB,EACAyF,EACAlI,EACAwO,EACAmJ,EAxCD,SAAsBwN,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/CjG,EAAWiG,EACXhO,EAAQ7mB,IAAI4uB,EAAS,GAEvB,EAsCD,QAEA,cAAmBjkB,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASuH,GAAUukB,GAAmBpxB,EAAgB,GAClE,GAKD,SAAS8M,GAAgBrL,GACxB,IAAI0jB,EACAgH,EACAzH,EACA+K,EAIJ,OAHAtK,EAAS,IAAIwY,GAAO,IACpBjZ,EAAO,IAAIkZ,GAAK,IAET,CACNh0B,CAAAA,GACCsC,GAAiBiZ,EAAO/jB,GAAGkI,UAC3B6iB,EAAIlnB,IACJiH,GAAiBwY,EAAKtjB,GAAGkI,SACzB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBgZ,EAAQthB,EAAQI,GAChCD,EAAOH,EAAQsoB,EAAGloB,GAClBkI,GAAgBuY,EAAM7gB,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,EAAG3D,EACHoD,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcqb,EAAO/jB,GAAGkI,SAAUU,GAClCF,GAAc4a,EAAKtjB,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeib,EAAO/jB,GAAGkI,SAAUU,GACnCE,GAAewa,EAAKtjB,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOgoB,GAGR5f,GAAkB4Y,EAAQ3gB,GAC1B+H,GAAkBmY,EAAMlgB,EACzB,EAEF,QAEA,cAAmBuJ,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAAS,KAAMwH,GAAiB9M,EAAgB,GAC5D,GAGD,IAAImO,GAAQ,CACRkY,aAAAA,CAAc/gB,GACVA,EAAQsxB,cAAe,EACvBtxB,EAAQu4B,cAAgB,CAAC9qB,IAAK,WAC9BzN,EAAQw4B,iBAAmB,CAACjrB,MAAO,OAAQE,IAAK,UAAWJ,KAAM,WACjErN,EAAQ42B,qBAAkBt7B,EAE1B0E,EAAQ6c,WAAW4b,aAAe,QAClCz4B,EAAQ6c,WAAWyW,MAAQ,QAC3BtzB,EAAQ0V,MAAMyiB,QAAU,aACxBn4B,EAAQ0V,MAAMogB,QAAU,cACxB91B,EAAQ0V,MAAM6d,MAAQ,WACtBvzB,EAAQ0V,MAAM8e,WAAa,iBAC3Bx0B,EAAQ6S,KAAO,eACf7S,EAAQ62B,aAAc,EACtB72B,EAAQ82B,uBAAoBx7B,EAC5B0E,EAAQ6gB,MAAM4X,aAAe,CACzB5b,WAAYvE,GACZzc,UAAW68B,GACXzb,gBAAiB,CAACC,QAAS,SAC3BC,yBAA0B,CAACD,QAAS,QACpC1H,iBAAiB,EACjBtH,SAAU,CAACZ,OAAQ,GACnBoI,MAAO+C,GAAU,6BACjBiI,YAAa,CAACrT,KAAM,UAAWE,MAAO,QAE7C,EAEDwY,YAAAA,CAAapL,GACTA,EAAM2U,MA9uFd,SAAc3U,GACV,OAAO/Q,GAAQ,CAAC+Q,EAAM5M,KAAM4M,EAAMmD,SAAUnD,EAAM1K,aAAa8J,IAAqC,IAAnC8H,EAAOE,EAAWoD,GAAYpL,EACvFvM,EAAO,GACPC,EAAMK,GAAU+T,GAChB3kB,EAAM,EAEV,KAAOuQ,EAAIgC,cAAgBsS,GAAa7kB,GACpCsR,GAAYf,KACVvQ,EAEN,IAAK,IAAIC,EAAI,EAAGA,EAAI,IAAKA,EAChBgoB,EAAYjV,SAASzC,EAAIgC,cAC1BjC,EAAKxR,KAAK8R,GAAUL,IAExBoB,GAAOpB,GAGX,OAAOD,CAAI,GAEnB,CA2tFsBA,CAAKmN,GACnBA,EAAMoc,aAAend,GAAKe,EAAMd,OAAQc,EAAM4d,eAC9C5d,EAAM+Y,gBAAkB9Z,GAAKe,EAAMd,OAAQc,EAAM6d,kBACjD7d,EAAM4W,cAAgBloB,GAAS,IAC/BsR,EAAM6W,WAAanoB,GAAS,MAC5BsR,EAAMgZ,aAAetqB,GAAS,GAClC,GCnvFJ,SAASkf,GAAkBpsB,GAC1B,IAAIqzB,EACAX,EACAC,EACAjI,EACAkI,EACAC,EACA1H,EACAqI,EACAC,EACA7I,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCkrB,EAAUpwB,EAAQ,WAClByvB,EAAOzvB,EAAQ,OACfynB,EAAIlnB,IACJovB,EAAO3vB,EAAQ,OACfmB,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGw8B,UACzDp4B,EAAKsuB,EAAM,QAAmB1yB,EAAI,IAClCoE,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAGwjB,WACzDpf,EAAKivB,EAAS,QAAqBrzB,EAAI,IACvCoE,EAAKivB,EAAS,OAAQG,EAAiCxzB,EAAI,GAAK,cAAWb,GAC3EiF,EAAKivB,EAAS,WAAYI,EAAqCzzB,EAAI,GAAK,OAAIb,EAC5E,EACDgL,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQixB,EAAS7wB,GACxBL,EAAOkxB,EAASX,GAChBvwB,EAAOkxB,EAAS3I,GAChBvoB,EAAOkxB,EAAST,GACI5yB,EAAI,IAAIqzB,GAEvBzI,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAM0uB,EAAkB5yB,EAAI,KACjF0D,EAAO2vB,EAAS,SAAS,WACpBh1B,EAAwB2B,EAAI,KAAiBA,EAAI,GAAGqrB,MAAMlnB,KAAMtF,UACpE,IACD6E,EAAO2vB,EAAS,WAAW,WACtBh1B,EAAwB2B,EAAI,IAAMyO,GAAqBzO,EAAI,OAAmBA,EAAI,IAAMyO,GAAqBzO,EAAI,KAAKqrB,MAAMlnB,KAAMtF,UACtI,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UAC5I,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UAC5I,IACD6E,EAAO2vB,EAAS,eAAe,WAC1Bh1B,EAA8B2B,EAAI,GAAGsxB,QAAQmL,WAA6Bz8B,EAAI,GAAGsxB,QAAQmL,SAASpR,MAAMlnB,KAAMtF,UACnH,KAGD+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEoB,EAAtBvqB,EAAM,IAAqBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGw8B,WACzFp4B,EAAKsuB,EAAM,QAASC,GAGI,EAArBjyB,EAAM,IACT0D,EAAKsuB,EAAM,QAAmB1yB,EAAI,IAGT,EAAtBU,EAAM,IAAqBmyB,KAAsBA,EAA8B7yB,EAAI,GAAGwjB,YACzFpf,EAAKwuB,EAAM,QAASC,GAGjB1H,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAkC,GAAvB7G,EAAM,IAAqByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,IAEtH,EAAvBU,EAAM,IACT0D,EAAKivB,EAAS,QAAqBrzB,EAAI,IAGb,GAAvBU,EAAM,IAAuB8yB,KAAwBA,EAAiCxzB,EAAI,GAAK,cAAWb,IAC7GiF,EAAKivB,EAAS,OAAQG,GAGI,GAAvB9yB,EAAM,IAAuB+yB,KAA4BA,EAAqCzzB,EAAI,GAAK,OAAIb,IAC9GiF,EAAKivB,EAAS,WAAYI,EAE3B,EACDzyB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAO2wB,GAGYrzB,EAAI,IAAI,MAC5B4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAASoE,GAAWvC,EAAQC,EAASC,GACpC,IAAIqH,EACAnE,EACAuE,EACAC,EACAC,EACAzH,EACA0H,EACAC,EACAC,EACAE,EACA/V,EACAgW,EACAC,EACAC,EACAC,EACArE,EAmBA9a,EACAlS,EACAsxB,EACApwB,EACA+J,EACA8K,EACA4b,GAxBAvc,MAAEA,GAAU4T,GACZtT,gBAAEA,EAAe6H,gBAAEA,EAAe/D,qBAAEA,EAAoBC,eAAEA,EAAcgE,WAAEA,EAAU9H,aAAEA,EAAYW,gBAAEA,EAAekH,WAAEA,EAAUE,cAAEA,EAAaC,gBAAEA,EAAeC,gBAAEA,EAAe/F,UAAEA,EAASjC,MAAEA,EAAKE,MAAEA,EAAKD,eAAEA,EAAc6P,aAAEA,EAAYjE,OAAEA,GAAWlf,EAAW,SA0CnQ,SAASqvB,EAAcz3B,GACtB,OAAO4W,GAAW5W,GAChBuR,GAAWvR,EAAG,CACd6F,MAAOiW,GAAsBjW,GAC7BkS,KACAxG,UACAqH,KAAMD,GAAqBqZ,UAE3B3wB,CACH,CAqDA,OAvGAM,EAAoBitB,EAAQrT,GAAiB9Z,GAASqtB,EAAa,GAAI6H,EAAmBl1B,KAC1FE,EAAoBitB,EAAQxL,GAAiB3hB,GAASqtB,EAAa,GAAIyH,EAAmB90B,KAC1FE,EAAoBitB,EAAQvP,GAAsB5d,GAASqtB,EAAa,GAAIkI,EAAwBv1B,KACpGE,EAAoBitB,EAAQtP,GAAgB7d,GAASqtB,EAAa,GAAIgI,EAAkBr1B,KACxFE,EAAoBitB,EAAQtL,GAAY7hB,GAASqtB,EAAa,GAAIiI,EAAct1B,KAChFE,EAAoBitB,EAAQpT,GAAc/Z,GAASqtB,EAAa,GAAI4H,EAAgBj1B,KACpFE,EAAoBitB,EAAQzS,GAAiB1a,GAASqtB,EAAa,GAAI8H,EAAmBn1B,KAC1FE,EAAoBitB,EAAQvL,GAAY5hB,GAASqtB,EAAa,GAAIqH,EAAc10B,KAChFE,EAAoBitB,EAAQrL,GAAe9hB,GAASqtB,EAAa,GAAI0H,EAAiB/0B,KACtFE,EAAoBitB,EAAQpL,GAAiB/hB,GAASqtB,EAAa,EAAGmI,EAAmBx1B,KACzFE,EAAoBitB,EAAQnL,GAAiBhiB,GAASqtB,EAAa,EAAGoI,EAAmBz1B,KACzFE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQjT,GAAOla,GAASqtB,EAAa,GAAIkD,EAASvwB,KACtEE,EAAoBitB,EAAQlT,GAAgBja,GAASqtB,EAAa,GAAI2H,EAAkBh1B,KACxFE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,EAAG+D,EAAgBpxB,KASnF+F,GAAQ,KACHoP,GAAW4f,IACdA,EAAe,CACd3wB,MAAOiW,GAAsBjW,GAC7B+V,WACA7D,KACAa,KAAMD,GAAqBqZ,IAE7B,IAGDtqB,GAAY,KACPkP,GAAW2f,IACdnf,IAAK,IAAMmf,EAAiB,CAAE3d,KAAMD,GAAqBqZ,MAAY,MAAO1K,EAC7E,IAqBDsH,EAAOngB,MAAQogB,IACV,UAAWA,GAASC,EAAa,GAAI7T,EAAQ4T,EAAQ5T,MAAM,EAGhE2T,EAAO/sB,GAAG4H,OAAS,KAKlB,GAJmC,SAA/BmlB,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,GAAIjpB,EAAQoV,EAAMpV,OAG0B,UAAtD+oB,EAAO/sB,GAAGe,MAAM,GAA6J,IAA3GgsB,EAAO/sB,GAAGe,MAAM,GACrF,CAECksB,EAAa,EAAG/nB,EAAQ,IAExB,IAAI2wB,EAAU7xB,EAAMqU,iBAAmBqF,GAAwB1Z,EAAOkb,IAAeiW,GAAyBD,EAE1GW,GACH5I,EAAa,EAAG/nB,EAAQ,oBAAoB2wB,MAG7C,IAAIC,EAAW9xB,EAAMuU,WAAaqF,GAAkB5Z,EAAOkb,IAAe+V,EAEtEa,GACH7I,EAAa,EAAG/nB,GAAS,SAAS4wB,MAGnC7I,EAAa,EAAG/nB,GAASlB,EAAMyU,OAAOyd,KAAK,MAC3CjJ,EAAa,EAAGqI,EAAU,CAACnI,EAAOnpB,SAAUqW,GAAmB0a,EAAkB/wB,EAAOmsB,IAAS+F,KAAK,KACvG,CAGmE,WAAhEnJ,EAAO/sB,GAAGe,MAAM,GAAsH,EAAzDgsB,EAAO/sB,GAAGe,MAAM,IAG/FksB,EAAa,GAAIlT,EAAU9K,GAAWwK,GAAmBL,EAAO0b,EAAkBD,EAAe1H,EAAQyH,EAAiBzE,GAASlhB,GAI5F,UAArC8d,EAAO/sB,GAAGe,MAAM,IAEnBksB,EAAa,EAAG0I,EAAUC,EAActB,GACzC,EAGM,CACNnH,EACAjX,EACAof,EACApwB,EACA+J,EACA0mB,EACAP,EACAC,EACArE,EACAtX,EACA6H,EACA/D,EACAC,EACAgE,EACA9H,EACAW,EACAkH,EACAE,EACAC,EACAC,EACA/F,EACAjC,EACAE,EACAD,EACA6P,EACAkM,EACAxc,EACApV,EACAswB,EACAnE,EACAyE,EACAC,EACAC,EACAC,EACAE,EACA/V,EACAgW,EACAC,EAzFD,SAAyB0B,GACxBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAuFD,QAEA,cAAoBvJ,GACnBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASorB,GAAY7C,GAAmB7tB,EAAgB,CAAEwa,MAAO,IAAM,KAAM,EAAE,GAAI,GAC/F,GAKD,SAAS6U,GAAmB5tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAAS6hB,GAAkB5rB,GAC1B,IAAImuB,EACAuO,EACAC,EACAxR,EACA+E,EACA0M,EACAC,EACAC,EACAC,EACA3M,EAGAhC,EACAJ,EACApD,EACAC,EALA0B,EAAc,GACd2K,EAAgB,IAAIttB,IAKpB0iB,EAAa3jB,GAA6B3I,EAAI,IAClD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC9C,IAAI+I,EAAY6jB,GAAmB5tB,EAAKssB,EAAYtrB,GAChD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAK0tB,GAAoB/pB,EAAKoF,GAClE,CAEA,MAAO,CACN5B,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdy5B,EAAKz5B,EAAQ,MACb05B,EAAQ15B,EAAQ,QAChBitB,EAAK1sB,IACLo5B,EAAQ35B,EAAQ,QAChBmtB,EAAK5sB,IAEL,IAAK,IAAIxC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAKu4B,EAAO,WAAyB38B,EAAI,IACzCoE,EAAKw4B,EAAO,QAASC,EAA+B78B,EAAI,GAAGg9B,SAC3D54B,EAAKw4B,EAAO,WAAyB58B,EAAI,IACzCoE,EAAKs4B,EAAI,QAASK,EAA4B/8B,EAAI,GAAGsjB,SAErDlf,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,GAAG2gB,MAAQ,KAAqB3gB,EAAI,GAClN,IAAiBA,EAAI,GAAG4jB,UACxB,KAEFxf,EAAK+pB,EAAK,OAAQ,WAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBL,EAAOgsB,EAAKuO,GACZv6B,EAAOu6B,EAAIC,GACXx6B,EAAOu6B,EAAIxM,GACX/tB,EAAOu6B,EAAIE,GACXz6B,EAAOgsB,EAAKiC,GAEZ,IAAK,IAAIpvB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAIRnuB,EAAI,IAAImuB,GACxBH,GAAU,EAELpD,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMy4B,EAAyB38B,EAAI,GAAG2d,OAAgB3d,EAAI,MAC/G4B,EAAiBk7B,EAAsBnuB,GAAWzK,KAAK,KAAM04B,EAA6B58B,EAAI,GAAG2d,OAAgB3d,EAAI,MACrH0D,EAAOyqB,EAAK,eAAe,WACtB9vB,EAA8B2B,EAAI,GAAGsxB,QAAQsI,SAA2B55B,EAAI,GAAGsxB,QAAQsI,OAAOvO,MAAMlnB,KAAMtF,UAC/G,KAGD+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,IAED+C,GAAgC,GAArBttB,IACf0D,EAAKu4B,EAAO,WAAyB38B,EAAI,IAGtCmrB,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA2C,IAAhC7G,GAAqCyqB,EAAkB5jB,OAAOrD,KAAK,KAAwBlE,EAAI,GAAG2d,OAAgB3d,EAAI,OAEnLguB,GAA8B,GAAnBttB,GAAyBm8B,KAAuBA,EAA+B78B,EAAI,GAAGg9B,WACrG54B,EAAKw4B,EAAO,QAASC,KAGjB7O,GAAgC,GAArBttB,IACf0D,EAAKw4B,EAAO,WAAyB58B,EAAI,IAGtC88B,GAAuBz+B,EAAYy+B,EAAoBv1B,SAA+C,IAApC7G,GAAyCo8B,EAAoBv1B,OAAOrD,KAAK,KAA4BlE,EAAI,GAAG2d,OAAgB3d,EAAI,OAEjMguB,GAA8B,GAAnBttB,GAAyBq8B,KAAoBA,EAA4B/8B,EAAI,GAAGsjB,WAC/Flf,EAAKs4B,EAAI,QAASK,GAGI,EAAnBr8B,IACH4rB,EAAa3jB,GAA6B3I,EAAI,IAC9CiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAKssB,EAAY4K,EAAe/I,EAAKrlB,GAAyB4lB,GAAqB,KAAMd,IACzJxlB,QAGI4lB,GAAwD,GAA7CttB,GAAmD0tB,KAAqBA,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,GAAG2gB,MAAQ,KAAqB3gB,EAAI,GACvR,IAAiBA,EAAI,GAAG4jB,UACxB,OACDxf,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGR,IAAK,IAAIntB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,IAGAhD,EAAI,IAAI,MACxB4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAGA,SAAS6D,GAAoBiI,EAAO32B,GACnC,IAAIoK,EACAzG,EACAqqB,EAGJ,OAFArqB,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO,CAAE8T,MAAiB/Y,EAAI,OAE3C,CACN2E,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAM4L,EAAgB,CAAE,EACD,EAAnBn2B,IAAsBm2B,EAAc9d,MAAkB/Y,EAAI,KAC9D2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGRU,GAAkBnH,EAAOZ,EAC1B,EAEF,CAEA,SAAS8rB,GAAkB7uB,GAC1B,IAAIgsB,EACAgC,EACA7B,EAAsBnsB,EAAI,GAAGlB,QAAU8sB,GAAkB5rB,GAE7D,MAAO,CACNmI,CAAAA,GACKgkB,GAAUA,EAAShkB,IACvB6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACL2pB,GAAUA,EAAShiB,EAAE/H,EAAQI,GACjCD,EAAOH,EAAQ4pB,EAAiBxpB,GAChCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAG4d,GAAW,IAARld,GAAMkd,EACE5d,EAAI,GAAGlB,OACjBqtB,GACHA,EAAS5qB,EAAEvB,EAAKU,GAEO,EAAnBA,GACH2H,GAAc8jB,EAAU,KAGzBA,EAAWP,GAAkB5rB,GAC7BmsB,EAAShkB,IACTE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,IAE9BG,IACVlkB,KAEAQ,GAAe0jB,EAAU,EAAG,GAAG,KAC9BA,EAAW,IAAI,IAGhB/jB,KAED,EACDpH,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOspB,GAGJG,GAAUA,EAASnpB,EAAED,EAC1B,EAEF,CAEA,SAAS8sB,GAAWnD,EAAQC,EAASC,GACpC,IAAI/N,EACAgd,EACA9c,EACA8N,EACAmN,EACAE,EACApN,EACA6D,EACAsM,EACAC,EAaArnB,GAZAjE,KAAEA,GAAS+a,GACXjO,QAAEA,EAAO2K,aAAEA,EAAY8T,aAAEA,EAAYC,iBAAEA,EAAgBlV,OAAEA,EAAM1M,UAAEA,EAASkG,0BAAEA,EAAyBK,iBAAEA,EAAgBxI,MAAEA,EAAKiL,WAAEA,GAAete,EAAW,SAC9JzG,EAAoBitB,EAAQhO,GAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,EAAG+D,EAAgBpxB,KACnFE,EAAoBitB,EAAQyQ,GAAc59B,GAASqtB,EAAa,EAAGqQ,EAAgB19B,KACnFE,EAAoBitB,EAAQ0Q,GAAkB79B,GAASqtB,EAAa,EAAGsQ,EAAoB39B,KAC3FE,EAAoBitB,EAAQxE,GAAQ3oB,GAASqtB,EAAa,GAAIsN,EAAU36B,KACxEE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQhL,GAA2BniB,GAASqtB,EAAa,GAAIiP,EAA6Bt8B,KAC9GE,EAAoBitB,EAAQ3K,GAAkBxiB,GAASqtB,EAAa,GAAIoN,EAAoBz6B,KAC5FE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAEhF,IACI+6B,EAAS1W,EAAWL,EACpB8Z,EAFAnkB,EAAS,GA+Db,OApDAwT,EAAOngB,MAAQogB,IACV,SAAUA,GAASC,EAAa,EAAGhb,EAAO+a,EAAQ/a,KAAK,EAG5D8a,EAAO/sB,GAAG4H,OAAS,KAiBlB,GAhBwC,SAApCmlB,EAAO/sB,GAAGe,OACbksB,EAAa,EAAG0N,EAAUtnB,GAAWpB,EAAMsoB,IAGM,SAA9CxN,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGhJ,EAAYoW,EAAkBve,MAAKzY,GAAKgQ,GAAWhQ,EAAG4O,MAG3B,SAAxC8a,EAAO/sB,GAAGe,OACbksB,EAAa,GAAIrJ,EAAW/G,GAAa5K,EAAMib,IAGjB,EAA3BH,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGyQ,EAAWvqB,GAAYlB,EAAM,KAGqD,SAA/F8a,EAAO/sB,GAAGe,QACR6iB,EAAU,CACdqJ,EAAa,EAAG1T,EAAS,IACzB,IAAIjM,EAAQ2E,EACR6F,EAAM/E,GAAOf,GAAUC,IAE3B,IAAK,IAAIjO,KAASob,EACjB,IAAKhD,GAAQpY,EAAMmU,UAAYyD,GAAgB5X,EAAOsJ,EAAOwK,EAAKokB,EAA6Bhd,OAAa1f,GAAY,CACvH,IAAI4Z,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,GAC3CyB,EAAOrZ,KAAKkZ,EACb,CAGDE,GAAgBC,EACjB,CAG4C,QAAzCwT,EAAO/sB,GAAGe,OAETmV,GACHN,GAAWM,GAAI,KAAO,CACrB2B,QAAQ,EACR5F,OACA8J,cAAUvc,EACVqyB,MAAO3b,EACP0N,cAGH,EAGM,CACN3R,EACAiE,EACAqD,EACAohB,EACA1W,EACAyZ,EACAvQ,EACA6D,EACAsM,EACAC,EACAxe,EACA2K,EACA8T,EACAC,EACAlV,EACA1M,EACAkG,EACAK,EACAxI,EACAiL,EACAjB,EACA1E,EACAgd,EACA9c,EACA8N,EACAmN,EACAE,EAtFD,SAAqB1D,GACpBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAoFD,QAEA,cAAkBvJ,GACjBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASgsB,GAAYhB,GAAmBtwB,EAAgB,CAAEqT,KAAM,GAC5E,GAKD,SAAS0d,GAAiBtvB,EAAKoJ,EAAMpI,GACpC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAAS+jB,GAAkB9tB,GAC1B,IAAIqsB,EACA2B,EACA1B,EAAa3jB,GAAkC3I,EAAI,IACnDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqI,GAAkBimB,GAAiBtvB,EAAKssB,EAAYtrB,IAGtE,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAA4B,EAAxBA,EAA2B,CAE9B,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAkC3I,EAAI,IAG9CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYulB,GAAiBtvB,EAAKssB,EAAYtrB,GAEhDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqI,GAAkBU,GACnCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAASmrB,GAAgBluB,GACxB,IAAImuB,EACAC,EACAjD,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdmB,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGs9B,SACvD,EACDnzB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEfooB,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMiqB,EAAiBnuB,EAAI,KAChF0D,EAAOyqB,EAAK,QAAyBnuB,EAAI,MAG1C4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACiB,EAAnBA,GAAwB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGs9B,WACpFl5B,EAAK+pB,EAAK,QAASC,GAGhBjD,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA+B,EAApB7G,GAAuByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,GAC7I,EACDgB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAGA,SAASxhB,GAAkBrJ,GAC1B,IAAIsR,EACA0c,EAGJ,OAFA1c,EAAM,IAAIoqB,GAAI,CAAEz2B,MAAO,CAAE2M,KAAe5R,EAAI,OAErC,CACNmI,CAAAA,GACCsC,GAAiB6G,EAAI3R,GAAGkI,SACxB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4G,EAAKlP,EAAQI,GAC7BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMi7B,EAAc,CAAE,EACM,EAAxBj7B,IAA2Bi7B,EAAY/pB,KAAgB5R,EAAI,KAC/DsR,EAAI1E,KAAK+uB,EACT,EACD36B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAciJ,EAAI3R,GAAGkI,SAAUU,GAC/BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6I,EAAI3R,GAAGkI,SAAUU,GAChCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBwG,EAAKvO,EACxB,EAEF,CAEA,SAAS4sB,GAAkB3vB,GAC1B,IAAI4yB,EACAF,EACApE,EACAnC,EACAwG,EACAE,EACA7E,EACJ,MAAMO,EAAoB,CAACL,GAAiBJ,IACtCU,EAAY,GAElB,SAASvC,EAAkBjsB,EAAKU,GAC/B,OAAiBV,EAAI,GAAW,EACzB,CACR,CAKA,OAHAsuB,EAA2BrC,EAAkBjsB,GAC7CmsB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAEtF,CACNmI,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACfkpB,EAAShkB,IACT/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG4O,SACzDxK,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAGijB,KACzD,EACD9Y,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBL,EAAOywB,EAAMF,GACblE,EAAUF,GAA0BnkB,EAAEuoB,EAAM,MAC3B1yB,EAAI,IAAI4yB,GACzB5E,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAGke,GAAW,IAARxd,GAAMwd,EACTuQ,EAAuBH,EAC3BA,EAA2BrC,EAAkBjsB,GAEzCsuB,IAA6BG,EAChCD,EAAUF,GAA0B/sB,EAAEvB,EAAKU,IAE3CuH,KAEAQ,GAAe+lB,EAAUC,GAAuB,EAAG,GAAG,KACrDD,EAAUC,GAAwB,IAAI,IAGvCrmB,KACA+jB,EAAWqC,EAAUF,GAEhBnC,EAIJA,EAAS5qB,EAAEvB,EAAKU,IAHhByrB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAC7FmsB,EAAShkB,KAKVE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAEuoB,EAAM,SAGb1E,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG4O,WAClGxK,EAAKsuB,EAAM,QAASC,KAGhB3E,GAA8B,EAAnBttB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAGijB,QAClG7e,EAAKwuB,EAAM,QAASC,EAErB,EACD7xB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOkwB,GAGRpE,EAAUF,GAA0BtrB,IACnBhD,EAAI,IAAI,KAC1B,EAEF,CAEA,SAASoL,GAASshB,EAAQC,EAASC,GAClC,IAAIkD,EACAyN,EACAC,EACAze,EACAc,EACAiN,EACAyD,EASA+M,EAAU1uB,GARV4Z,QAAEA,EAAO9J,QAAEA,EAAOjF,MAAEA,EAAKqP,WAAEA,EAAU2U,cAAEA,EAAaC,gBAAEA,EAAenkB,MAAEA,GAAUrT,EAAW,SA0DhG,OAzDAzG,EAAoBitB,EAAQlE,GAASjpB,GAASqtB,EAAa,EAAG2D,EAAWhxB,KACzEE,EAAoBitB,EAAQhO,GAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQjT,GAAOla,GAASqtB,EAAa,GAAIkD,EAASvwB,KACtEE,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,EAAG/M,EAActgB,KAC/EE,EAAoBitB,EAAQ+Q,GAAel+B,GAASqtB,EAAa,GAAI2Q,EAAiBh+B,KACtFE,EAAoBitB,EAAQgR,GAAiBn+B,GAASqtB,EAAa,GAAI4Q,EAAmBj+B,KAC1FE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAmBrEmtB,EAAO/sB,GAAG4H,OAAS,KAClB,GAAgD,MAA5CmlB,EAAO/sB,GAAGe,QAEZksB,EAAa,EAAG0Q,GAAW,GAEvBzd,EAAY/gB,QAAQ,CACvB,IAAImO,EAAQ4S,EAAY,GACpBpI,EAAM/E,GAAOf,GAAUkO,EAAYlF,IAAI,KAE3C,IAAK,IAAIhX,KAASob,EACjB,IAAKhD,GAAQpY,EAAMmU,UAAYnU,EAAMsJ,MAAQwK,GAAO9T,EAAM8T,IAAMxK,EAAO,CACtE2f,EAAa,EAAG0Q,GAAW,GAC3B,KACD,CAEF,CAIkD,KAAhD5Q,EAAO/sB,GAAGe,QAEZksB,EAAa,EAAGhe,EAAU8F,GAAW8oB,GACnCA,IACAA,GAEqB,iBAAZ5uB,GACVge,EAAa,EAAGhe,EAAU,CAAEK,KAAML,IAGrC,EAGM,CACNA,EACAiR,EACAyd,EACAxQ,EACAyD,EACA/H,EACA9J,EACAjF,EACAqP,EACA2U,EACAC,EACAnkB,EA5DD,SAAqBlK,GAChBqF,GAAW6oB,IACdA,EAAe,CACdluB,UACAqH,KAAMD,GAAqBqZ,IAG9B,EAuDC0N,EACAze,EAtDD,SAAsByX,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/CjG,EAAWiG,EACXhO,EAAQ7mB,IAAI4uB,EAAS,GAEvB,EAoDD,QAEA,cAAmBjkB,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASuH,GAAUukB,GAAmBpxB,EAAgB,GAClE,GAKD,SAAS8M,GAAgBrL,GACxB,IAAIijB,EACA+K,EAGJ,OAFA/K,EAAO,IAAIkZ,GAAK,IAET,CACNh0B,CAAAA,GACCsC,GAAiBwY,EAAKtjB,GAAGkI,SACzB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBuY,EAAM7gB,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,EAAG3D,EACHoD,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc4a,EAAKtjB,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAewa,EAAKtjB,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBmY,EAAMlgB,EACzB,EAEF,QAEA,cAAmBuJ,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAAS,KAAMwH,GAAiB9M,EAAgB,GAC5D,GAGD,IAAImO,GAAQ,CACXkY,aAAAA,CAAc/gB,GAEbA,EAAQ6c,WAAWid,QAAU,OAC7B95B,EAAQ6c,WAAWkd,SAAW,OAC9B/5B,EAAQ6c,WAAWmd,UAAY,OAC/Bh6B,EAAQ6c,WAAWod,SAAW,OAC9Bj6B,EAAQk6B,cAAgB,CAAChd,QAAS,QAClCld,EAAQm6B,kBAAoB,CAAC9sB,KAAM,UAAWE,MAAO,OAAQE,IAAK,WAClEzN,EAAQ45B,mBAAgBt+B,EACxB0E,EAAQ65B,gBAAkB,YAC1B75B,EAAQ0V,MAAMyjB,QAAU,cACxBn5B,EAAQ0V,MAAMijB,SAAW,eACzB34B,EAAQ0V,MAAM+jB,SAAW,eACzBz5B,EAAQ6S,KAAO,WACf7S,EAAQ6gB,MAAMiZ,QAAU,CACvBjd,WAAY1E,GACZtc,UAAW68B,GACXxqB,SAAU,CAACV,KAAM,GACjBkI,MAAO+C,GAAU,wBAElBzY,EAAQ6gB,MAAMkZ,SAAW,CACxBld,WAAYxE,GACZxc,UAAW68B,GACXxqB,SAAU,CAAChB,MAAO,GAClBwI,MAAO+C,GAAU,yBAElBzY,EAAQ6gB,MAAMmZ,UAAY,CACzBnd,WAAYvE,GACZzc,UAAW68B,GACXxqB,SAAU,CAACZ,OAAQ,GACnBoI,MAAO+C,GAAU,0BAElBzY,EAAQ6gB,MAAMoZ,SAAW,CACxBpd,WAAYtE,GACZ1c,UAAW68B,GACXxqB,SAAU,CAACd,MAAO,GAClBsI,MAAO+C,GAAU,wBAElB,EAEDsN,YAAAA,CAAapL,GACZA,EAAM2e,aAAe1f,GAAKe,EAAMd,OAAQc,EAAMuf,eAC9Cvf,EAAM4e,iBAAmB3f,GAAKe,EAAMd,OAAQc,EAAMwf,kBACnD,GCjgCD,MAAMC,GAAyBv9B,IAAK,CAAO,GACrCw9B,GAAyBl+B,IAAG,CAAO,GAEzC,SAASm+B,GAAmBn+B,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,GAAKX,EAAKpI,GACb+I,CACR,CAGA,SAASq0B,GAAoBp+B,GAC5B,IAAIq+B,EACAC,EACAC,EACApT,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCk2B,EAASp7B,EAAQ,QACjBmB,EAAKi6B,EAAQ,QAASC,EAAgCt+B,EAAI,GAAGmkB,MAC7D/f,EAAKi6B,EAAQ,WAAYE,EAAiCv+B,EAAI,GAAG,GACjE,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQi8B,EAAQ77B,GAElBooB,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMm6B,EAAiBr+B,EAAI,GAAG,GAAcA,EAAI,GAAG,GAAK,KACvH4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEiB,EAAnBvqB,GAAwB49B,KAAwBA,EAAgCt+B,EAAI,GAAGmkB,OAC1F/f,EAAKi6B,EAAQ,QAASC,GAGC,EAApB59B,GAAyB69B,KAA2BA,EAAiCv+B,EAAI,GAAG,KAC/FoE,EAAKi6B,EAAQ,WAAYE,GAGtBpT,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA+B,EAApB7G,GAAuByqB,EAAkB5jB,OAAOrD,KAAK,KAAelE,EAAI,GAAG,GAAcA,EAAI,GAAG,GAAK,GACvK,EACDgD,CAAAA,CAAED,GACGA,GACHL,EAAO27B,GAGRzT,GAAU,EACVC,GACD,EAEF,CAEA,SAAS2T,GAAkBx+B,GAC1B,IAAI4yB,EACAF,EACAC,EACAxH,EACA+E,EACA2C,EACAzC,EACAgJ,EACA3G,EACAK,EACAmE,EACAoC,EACArL,EACApD,EACAC,EACAyB,EAAa3jB,GAA8B3I,EAAI,IAC/CusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKo9B,GAAoBD,GAAmBn+B,EAAKssB,EAAYtrB,IAG1E,MAAMy9B,EAAiCz+B,EAAI,GAAG+jB,MACxC2a,EAAa5+B,EAAY2+B,EAAqBz+B,EAAiBA,EAAI,GAAIk+B,IACvES,EAAmC3+B,EAAI,GAAG4+B,QAC1CC,EAAe/+B,EAAY6+B,EAAuB3+B,EAAiBA,EAAI,GAAI,MAEjF,MAAO,CACNmI,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACfitB,EAAK1sB,IAEL,IAAK,IAAIxC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBioB,EAAK5sB,IACL41B,EAAOn2B,EAAQ,OACfwvB,EAAOxvB,EAAQ,OACXy7B,GAAYA,EAAWv2B,IAC3B8uB,EAAKzzB,IACDq7B,GAAcA,EAAa12B,IAC/B/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGkkB,cACzD9f,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAGikB,SACzD7f,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAG+jB,OACzD3f,EAAKg1B,EAAM,QAASC,EAA8Br5B,EAAI,GAAGqR,MACzDjN,EAAKg1B,EAAM,OAAQ,MACnB,EACDjvB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBL,EAAOywB,EAAMF,GACbvwB,EAAOywB,EAAM1C,GAEb,IAAK,IAAIlvB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAIzBrwB,EAAOH,EAAQguB,EAAI5tB,GACnBD,EAAOH,EAAQg3B,EAAM52B,GACrBL,EAAOi3B,EAAM3G,GAETiM,GACHA,EAAWv0B,EAAEsoB,EAAM,MAGpBtwB,EAAOi3B,EAAMnC,GAET4H,GACHA,EAAa10B,EAAEivB,EAAM,MAGtBpL,GAAU,EAELpD,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMwuB,EAAqB1yB,EAAI,KAC9F4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAG4d,GAAW,IAARld,GAAMkd,EAOb,KANKoQ,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGkkB,gBAClG9f,EAAKsuB,EAAM,QAASC,GAGjBxH,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAkC,EAAvB7G,GAA0ByqB,EAAkB5jB,OAAOrD,KAAK,KAAqBlE,EAAI,IAEnH,EAA5BU,EAA+B,CAElC,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA8B3I,EAAI,IAG1CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYo0B,GAAmBn+B,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAKo9B,GAAoBr0B,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAEzB,CAEA,KAAO5xB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAASwtB,EAAWxtB,MACjC,GAEKkvB,GAA8B,EAAnBttB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAGikB,WAClG7f,EAAKwuB,EAAM,QAASC,GAGjB6L,GACCA,EAAWn9B,KAAOysB,GAA+B,IAApBttB,IAChCO,EACCy9B,EACAD,EACAz+B,EACYA,EAAI,GACfguB,EAECvtB,EAAiBg+B,EAAiCz+B,EAAI,GAAIU,EAAOu9B,IADjEz8B,EAAqCxB,EAAI,IAE3Ck+B,MAKElQ,GAA8B,EAAnBttB,GAAwBoyB,KAAsBA,EAA8B9yB,EAAI,GAAG+jB,SAClG3f,EAAKquB,EAAM,QAASK,GAGjB+L,GACCA,EAAat9B,KAAOysB,GAA+B,IAApBttB,IAClCO,EACC49B,EACAF,EACA3+B,EACYA,EAAI,GACfguB,EAECvtB,EAAiBk+B,EAAmC3+B,EAAI,GAAIU,EAAO,MADnEc,EAAqCxB,EAAI,IAE3C,QAKEguB,GAA8B,EAAnBttB,GAAwB24B,KAAsBA,EAA8Br5B,EAAI,GAAGqR,QAClGjN,EAAKg1B,EAAM,QAASC,EAErB,EACDr4B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcq2B,EAAYn2B,GAC1BF,GAAcw2B,EAAct2B,GAC5BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAei2B,EAAYn2B,GAC3BE,GAAeo2B,EAAct2B,GAC7BylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOkwB,GACPlwB,EAAO0tB,GACP1tB,EAAO02B,IAGRv2B,EAAa0pB,EAAaxpB,GACtB27B,GAAYA,EAAW17B,EAAED,GACzB87B,GAAcA,EAAa77B,EAAED,GACjC6nB,GAAU,EACVC,GACD,EAEF,CAEA,SAASiU,GAAWpS,EAAQC,EAASC,GACpC,IAAImS,EACAjS,EACAkS,EAMAC,GALEC,QAASC,EAAQ,CAAE,EAAAl/B,QAAEA,GAAY0sB,GACnCnM,cAAEA,EAAajH,MAAEA,EAAK6lB,OAAEA,GAAWl5B,EAAW,SAgBlD,OAfAzG,EAAoBitB,EAAQlM,GAAejhB,GAASqtB,EAAa,EAAGmS,EAAiBx/B,KACrFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQ0S,GAAQ7/B,GAASqtB,EAAa,EAAGoS,EAAUz/B,KAGvEmtB,EAAOngB,MAAQogB,IACV,YAAaA,GAASC,EAAa,EAAG3sB,EAAU0sB,EAAQ1sB,QAAQ,EAGrEysB,EAAO/sB,GAAG4H,OAAS,KACuB,GAArCmlB,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGqS,EAhRnB,SAA6Bze,GACzB,IACI5R,EADAvL,EAAO,UAaX,OAXImd,GACA5R,EAAU8F,GAAW8L,GAAiBA,EAAc,CAACnd,SAASmd,EACvC,iBAAZ5R,IACPA,EAAU,CAACK,KAAML,KAGrBA,EAAU,CACNK,KAAM5L,GAIPuL,CACX,CAiQgCywB,CAAoBN,GAClD,EAGM,CACNE,EACAnS,EACAkS,EACAxe,EACAjH,EACA6lB,EACAL,EACA9+B,EACAk/B,EAEF,CAEA,MAAMG,WAAgBhzB,GACrBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASi7B,GAAYN,GAAmBjgC,EAAgB,GACpE,EAKD,SAAS6zB,GAAmBpyB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASw1B,GAAsBv/B,GAC9B,IAAIguB,EACJ,MAAM2Q,EAAmC3+B,EAAI,IAAI4+B,QAC3CC,EAAe/+B,EAAY6+B,EAAuB3+B,EAAiBA,EAAI,IAAK,MAElF,MAAO,CACNmI,CAAAA,GACK02B,GAAcA,EAAa12B,GAC/B,EACDgC,CAAAA,CAAE/H,EAAQI,GACLq8B,GACHA,EAAa10B,EAAE/H,EAAQI,GAGxBwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACFm+B,GACCA,EAAat9B,KAAOysB,GAA+B,OAApBttB,IAClCO,EACC49B,EACAF,EACA3+B,EACYA,EAAI,IACfguB,EAECvtB,EAAiBk+B,EAAmC3+B,EAAI,IAAKU,EAAO,MADpEc,EAAqCxB,EAAI,KAE3C,KAIH,EACDgB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcw2B,EAAct2B,GAC5BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeo2B,EAAct2B,GAC7BylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACG87B,GAAcA,EAAa77B,EAAED,EAClC,EAEF,CAGA,SAASsvB,GAAoBryB,GAC5B,IAAImuB,EACAC,EAEJ,MAAO,CACNjmB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdmB,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAG8jB,KACvD,EACD3Z,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,EACpB,EACDjB,CAAAA,CAAEvB,EAAKU,GACiB,EAAnBA,GAAwB0tB,KAAqBA,EAA6BpuB,EAAI,GAAG8jB,OACpF1f,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,EAET,EAEF,CAGA,SAASqR,GAAkBx/B,GAC1B,IAAIqsB,EACAC,EAAa3jB,GAA4B3I,EAAI,IAC7CusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqxB,GAAoBD,GAAmBpyB,EAAKssB,EAAYtrB,IAG1E,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,EAC9B,EACDjB,CAAAA,CAAEvB,EAAKU,GACN,GAA8B,GAA1BA,EAA8B,CAEjC,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA4B3I,EAAI,IAGxCgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYqoB,GAAmBpyB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAKqxB,GAAoBtoB,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAEA,KAAOrrB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAASwtB,EAAWxtB,MACjC,CACA,EACDkE,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAAS08B,GAAkBz/B,GAC1B,IAAI4yB,EACAF,EACAgN,EACA/M,EACAE,EACA7E,EAYJ,OAVA0R,EAAU,IAAIJ,GAAQ,CACpBr6B,MAAO,CACNi6B,QAAS,CACRnb,MAAO,CAACyb,IACRZ,QAAS,CAACW,KAEXt/B,QAAS,CAAED,UAIP,CACNmI,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACfwH,GAAiBi1B,EAAQ//B,GAAGkI,UAC5BzD,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG4O,SAEzDxK,EAAKwuB,EAAM,QAASC,EAAoC7yB,EAAI,GAAGijB,MAAoBjjB,EAAI,GACrF,IAAiBA,EAAI,GAAGqjB,QACxB,IACF,EACDlZ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBL,EAAOywB,EAAMF,GACbhoB,GAAgBg1B,EAAShN,EAAM,MACd1yB,EAAI,IAAI4yB,GACzB5E,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAGke,GAAW,IAARxd,GAAMwd,EACb,MAAMyhB,EAAkB,CAAE,EAEa,OAAnCj/B,IACHi/B,EAAgB1/B,QAAU,CAAES,QAAOV,QAGpC0/B,EAAQ9yB,KAAK+yB,KAER3R,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG4O,WAClGxK,EAAKsuB,EAAM,QAASC,KAGhB3E,GAAuC,GAA5BttB,GAAkCmyB,KAAsBA,EAAoC7yB,EAAI,GAAGijB,MAAoBjjB,EAAI,GACzI,IAAiBA,EAAI,GAAGqjB,QACxB,OACDjf,EAAKwuB,EAAM,QAASC,EAErB,EACD7xB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcq3B,EAAQ//B,GAAGkI,SAAUU,GACnCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAei3B,EAAQ//B,GAAGkI,SAAUU,GACpCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOkwB,GAGR9nB,GAAkB40B,GACD1/B,EAAI,IAAI,KAC1B,EAEF,CAEA,SAAS4/B,GAAWlT,EAAQC,EAASC,GACpC,IAAIiT,EACA3gB,EACAE,EACA0gB,EACAjgB,EACAmf,EACAzO,EACAzD,EAWAjX,EACAwN,GAXE6b,QAASC,EAAQ,CAAE,EAAAl/B,QAAEA,GAAY0sB,GACnCnE,QAAEA,EAAOM,WAAEA,EAAUiX,gBAAEA,EAAeX,OAAEA,EAAM9c,WAAEA,EAAUC,aAAEA,EAAYE,WAAEA,EAAUlJ,MAAEA,GAAUrT,EAAW,SAC/GzG,EAAoBitB,EAAQlE,GAASjpB,GAASqtB,EAAa,GAAI2D,EAAWhxB,KAC1EE,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,GAAI/M,EAActgB,KAChFE,EAAoBitB,EAAQqT,GAAiBxgC,GAASqtB,EAAa,GAAIxN,EAAmB7f,KAC1FE,EAAoBitB,EAAQ0S,GAAQ7/B,GAASqtB,EAAa,GAAIoS,EAAUz/B,KACxEE,EAAoBitB,EAAQpK,GAAY/iB,GAASqtB,EAAa,GAAIkT,EAAcvgC,KAChFE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,GAAI1N,EAAgB3f,KACpFE,EAAoBitB,EAAQjK,GAAYljB,GAASqtB,EAAa,GAAIiT,EAActgC,KAChFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAGrE,IAAIwkB,EAAQ,GAoCZ,OAvBA2I,EAAOngB,MAAQogB,IACV,YAAaA,GAASC,EAAa,GAAI3sB,EAAU0sB,EAAQ1sB,QAAQ,EAGtEysB,EAAO/sB,GAAG4H,OAAS,KACW,EAAzBmlB,EAAO/sB,GAAGe,OACbe,EAAgB+mB,EAAS+H,EAAW1a,EAAI0a,GAGQ,MAA7C7D,EAAO/sB,GAAGe,QAEZksB,EAAa,EAAGvJ,EAAUnE,EAAc9O,SAAW,MACnDwc,EAAa,EAAG7I,EAAMjlB,OAASkgC,EAAQlgC,OAAQilB,IAIM,MAAnD2I,EAAO/sB,GAAGe,OACTmV,GA3BL+W,EAAa,EAAG/W,EAAGmqB,YAAcF,EAAY1vB,QAAUgP,EAAiB3K,IAAIrE,SAAW8O,EAAc9O,QAAU,IAAOyvB,EAAahqB,EA8BnI,EAGM,CACNA,EACAwN,EACAU,EACA+I,EACAtE,EACAM,EACAiX,EACAX,EACA9c,EACAC,EACAE,EACAlJ,EACA2F,EACA4gB,EACAjgB,EACAmf,EACAG,EA/CD,SAAsB3I,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EA4CC5V,EAEF,QAEA,cAAmBqM,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAAS+7B,GAAYH,GAAmBlhC,EAAgB,GACpE,GAKD,SAASi0B,GAAkBxyB,GAC1B,IAAIqzB,EACAC,EACApD,EACA/B,EACAC,EACAjD,EACAiF,EACAmD,EACAC,EACAC,EACAzF,EACApD,EACAC,EACJ,IAAI4E,EAAiCzvB,EAAI,IAAI0zB,QAE7C,SAASC,EAAa3zB,EAAKU,GAC1B,MAAO,CACNuE,MAAO,CAAEgI,OAAO,EAAMtJ,MAAiB3D,EAAI,IAE7C,CAEIyvB,IACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UACjL,KAGD,IAAI+0B,EAAmC5zB,EAAI,IAAI0zB,QAE/C,SAASG,EAAe7zB,EAAKU,GAC5B,MAAO,CAAEuE,MAAO,CAAEtB,MAAiB3D,EAAI,IACxC,CAUA,OARI4zB,IACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC7K,KAGM,CACNsJ,CAAAA,GACCkrB,EAAUpwB,EAAQ,WACdqwB,GAAkB7oB,GAAiB6oB,EAAiB3zB,GAAGkI,UAC3DqoB,EAAK1sB,IACL2qB,EAAMlrB,EAAQ,OACdmtB,EAAK5sB,IACD+vB,GAAkB9oB,GAAiB8oB,EAAiB5zB,GAAGkI,UAC3DzD,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGwjB,WACvDpf,EAAKivB,EAAS,QAAqBrzB,EAAI,IACvCoE,EAAKivB,EAAS,QAAmBrzB,EAAI,IACrCoE,EAAKivB,EAAS,OAAQG,EAAiCxzB,EAAI,GAAK,cAAWb,GAC3EiF,EAAKivB,EAAS,WAAYI,EAAqCzzB,EAAI,GAAK,OAAIb,EAC5E,EACDgL,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQixB,EAAS7wB,GACpB8wB,GAAkB5oB,GAAgB4oB,EAAkBD,EAAS,MACjElxB,EAAOkxB,EAASnD,GAChB/tB,EAAOkxB,EAASlF,GAChBhsB,EAAOkxB,EAASjD,GACZmD,GAAkB7oB,GAAgB6oB,EAAkBF,EAAS,MAC7CrzB,EAAI,IAAIqzB,GAC5BrF,GAAU,EAELpD,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMiqB,EAAiBnuB,EAAI,KAChF0D,EAAO2vB,EAAS,SAAS,WACpBh1B,EAAwB2B,EAAI,KAAiBA,EAAI,GAAGqrB,MAAMlnB,KAAMtF,UACpE,IACD6E,EAAO2vB,EAAS,WAAW,WACtBh1B,EAAwB2B,EAAI,IAAMyO,GAAqBzO,EAAI,OAAmBA,EAAI,IAAMyO,GAAqBzO,EAAI,KAAKqrB,MAAMlnB,KAAMtF,UACtI,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACpL,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACpL,IACD6E,EAAO2vB,EAAS,eAAe,WAC1Bh1B,GAAa0d,GAAoB/b,EAAI,MAAQ2b,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,SAAS+b,GAAoB/b,EAAI,MAAQ2b,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,MAAMqrB,MAAMlnB,KAAMtF,UAC3R,KAGD+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GAGV,GAFAV,EAAMirB,EAE2B,KAA7BvqB,EAAM,IAA+B+uB,KAAkBA,EAAiCzvB,EAAI,IAAI0zB,SAAU,CAC7G,GAAIJ,EAAkB,CACrBrrB,KACA,MAAMynB,EAAgB4D,EAEtB7qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIqnB,GACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UACjL,IAEA4L,GAAiB6oB,EAAiB3zB,GAAGkI,UACrCQ,GAAcirB,EAAiB3zB,GAAGkI,SAAU,GAC5C6C,GAAgB4oB,EAAkBD,EAASnD,IAE3CoD,EAAmB,IAEpB,MAAM,GAAI7D,EAAc,CACxB,MAAMqE,EAA2B,CAAE,EACV,EAArBpzB,EAAM,KAAkBozB,EAAyBnwB,MAAkB3D,EAAI,IAC3EszB,EAAiB1mB,KAAKknB,EACvB,CAQA,KANK9F,GAAiC,EAAtBttB,EAAM,IAAqB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGwjB,aACnGpf,EAAK+pB,EAAK,QAASC,GAGhBjD,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAkC,GAAvB7G,EAAM,IAAqByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,IAEhH,KAA7BU,EAAM,IAA+BkzB,KAAoBA,EAAmC5zB,EAAI,IAAI0zB,SAAU,CACjH,GAAIH,EAAkB,CACrBtrB,KACA,MAAMynB,EAAgB6D,EAEtB9qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIwrB,GACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC7K,IAEA4L,GAAiB8oB,EAAiB5zB,GAAGkI,UACrCQ,GAAckrB,EAAiB5zB,GAAGkI,SAAU,GAC5C6C,GAAgB6oB,EAAkBF,EAAS,OAE3CE,EAAmB,IAEpB,MAAM,GAAIK,EAAgB,CAC1B,MAAMG,EAA2B,CAAE,EACV,EAArBrzB,EAAM,KAAkBqzB,EAAyBpwB,MAAkB3D,EAAI,IAC3EuzB,EAAiB3mB,KAAKmnB,EACvB,GAEK/F,GAAkC,GAAvBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAqBrzB,EAAI,MAGnCguB,GAAgC,GAArBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAmBrzB,EAAI,MAGjCguB,GAAkC,IAAvBttB,EAAM,IAAwB8yB,KAAwBA,EAAiCxzB,EAAI,GAAK,cAAWb,KAC1HiF,EAAKivB,EAAS,OAAQG,KAGlBxF,GAAkC,IAAvBttB,EAAM,IAAwB+yB,KAA4BA,EAAqCzzB,EAAI,GAAK,OAAIb,KAC3HiF,EAAKivB,EAAS,WAAYI,EAE3B,EACDzyB,CAAAA,CAAEuH,GACGylB,IACAsF,GAAkBjrB,GAAcirB,EAAiB3zB,GAAGkI,SAAUU,GAC9DgrB,GAAkBlrB,GAAckrB,EAAiB5zB,GAAGkI,SAAUU,GAClEylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACG+qB,GAAkB7qB,GAAe6qB,EAAiB3zB,GAAGkI,SAAUU,GAC/DgrB,GAAkB9qB,GAAe8qB,EAAiB5zB,GAAGkI,SAAUU,GACnEylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2wB,GAGJC,GAAkBxoB,GAAkBwoB,GACpCC,GAAkBzoB,GAAkByoB,GACpBvzB,EAAI,IAAI,MAC5B4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAASoV,GAAWvT,EAAQC,EAASC,GACpC,IAAIqH,EACAnE,EACAuE,EACAC,EACAC,EACAzH,EACA0H,EACAC,EACAC,EACAC,EACAuL,EACAtL,EACA/V,EACAgW,EACAC,EACA+K,EACAzgB,EACAF,EACA6V,EACAC,EACArE,EAyBA9a,EACAlS,EACAmU,EACAmd,EACApwB,EACA+J,EACA8K,EACA4b,GA/BA1jB,KAAEA,GAAS+a,GACX5T,MAAEA,GAAU4T,GACZtT,gBAAEA,EAAe6H,gBAAEA,EAAe/D,qBAAEA,EAAoBC,eAAEA,EAAcgE,WAAEA,EAAU9H,aAAEA,EAAY6H,WAAEA,EAAUE,cAAEA,EAAapH,gBAAEA,EAAeqH,gBAAEA,EAAeC,gBAAEA,EAAeiB,iBAAEA,EAAgBD,aAAEA,EAAYE,WAAEA,EAAUjH,UAAEA,EAASjC,MAAEA,GAAKE,MAAEA,GAAKD,eAAEA,GAAc6P,aAAEA,GAAYE,UAAEA,GAASwW,gBAAEA,GAAe3a,OAAEA,IAAWlf,EAAW,SAgD3U,SAASqvB,GAAcz3B,EAAIga,GAC1B,OAAQ6D,GAAY7D,IAAYpD,GAAW5W,GACzCuR,GAAWvR,EAAG,CACd6F,MAAOiW,GAAsBjW,GAC7BkS,KACAxG,UACAqH,KAAMD,GAAqBqZ,UAE3B3wB,CACH,CA8EA,OAtIAM,EAAoBitB,EAAQrT,GAAiB9Z,GAASqtB,EAAa,GAAI6H,EAAmBl1B,KAC1FE,EAAoBitB,EAAQxL,GAAiB3hB,GAASqtB,EAAa,GAAIyH,EAAmB90B,KAC1FE,EAAoBitB,EAAQvP,GAAsB5d,GAASqtB,EAAa,GAAIkI,EAAwBv1B,KACpGE,EAAoBitB,EAAQtP,GAAgB7d,GAASqtB,EAAa,GAAIgI,EAAkBr1B,KACxFE,EAAoBitB,EAAQtL,GAAY7hB,GAASqtB,EAAa,GAAIiI,EAAct1B,KAChFE,EAAoBitB,EAAQpT,GAAc/Z,GAASqtB,EAAa,GAAI4H,EAAgBj1B,KACpFE,EAAoBitB,EAAQvL,GAAY5hB,GAASqtB,EAAa,GAAIqH,EAAc10B,KAChFE,EAAoBitB,EAAQrL,GAAe9hB,GAASqtB,EAAa,GAAI0H,EAAiB/0B,KACtFE,EAAoBitB,EAAQzS,GAAiB1a,GAASqtB,EAAa,GAAI8H,EAAmBn1B,KAC1FE,EAAoBitB,EAAQpL,GAAiB/hB,GAASqtB,EAAa,EAAGmI,EAAmBx1B,KACzFE,EAAoBitB,EAAQnL,GAAiBhiB,GAASqtB,EAAa,EAAGoI,EAAmBz1B,KACzFE,EAAoBitB,EAAQlK,GAAkBjjB,GAASqtB,EAAa,GAAIsT,EAAoB3gC,KAC5FE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,GAAI1N,EAAgB3f,KACpFE,EAAoBitB,EAAQjK,GAAYljB,GAASqtB,EAAa,GAAIiT,EAActgC,KAChFE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQnT,IAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQjT,IAAOla,GAASqtB,EAAa,GAAIkD,EAASvwB,KACtEE,EAAoBitB,EAAQlT,IAAgBja,GAASqtB,EAAa,GAAI2H,EAAkBh1B,KACxFE,EAAoBitB,EAAQrD,IAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KACpFE,EAAoBitB,EAAQnD,IAAWhqB,GAASqtB,EAAa,GAAI+H,EAAap1B,KAC9EE,EAAoBitB,EAAQqT,IAAiBxgC,GAASqtB,EAAa,GAAIxN,EAAmB7f,KAU1F+F,GAAQ,KACHoP,GAAW4f,IACdA,EAAe,CACd3wB,MAAOiW,GAAsBjW,GAC7B+V,WACA7D,KACAa,KAAMD,GAAqBqZ,IAE7B,IAGDtqB,GAAY,KACPkP,GAAW2f,KAAsB1Y,GAAY7D,IAChD5C,IAAK,IAAMmf,EAAiB,CAAE3d,KAAMD,GAAqBqZ,MAAY,MAAO1K,GAC7E,IA2BDsH,EAAOngB,MAAQogB,IACV,SAAUA,GAASC,EAAa,GAAIhb,EAAO+a,EAAQ/a,MACnD,UAAW+a,GAASC,EAAa,GAAI7T,EAAQ4T,EAAQ5T,MAAM,EAGhE2T,EAAO/sB,GAAG4H,OAAS,KAKlB,GAJmC,GAA/BmlB,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAGjpB,EAAQoV,EAAMpV,OAG4B,GAAvD+oB,EAAO/sB,GAAGe,MAAM,GAAyP,QAA7MgsB,EAAO/sB,GAAGe,MAAM,GAC/E,CACCksB,EAAa,EAAG9U,EAAUnU,EAAMmU,SAGhC,IAAIqoB,EAAOjhB,EAAc9O,QAErB8K,EAASkE,EAAiB3K,IAAIrE,QAC9BnD,GAAS8L,EAAM9L,MAAQ2E,GAAQ,IAC/B6F,GAAOsB,EAAMtB,IAAM7F,GAAQ,IAC3BkJ,GAAO7N,EAAQiO,GAAUilB,EAAON,EAChC1pB,GAAUsB,EAAMxK,GAASkzB,EAAON,GAAeA,EAC/CO,GAAahhB,EAAiBre,IAAIqP,QAAUnD,GAASkzB,EAAON,EAC5DrK,EAAU7xB,EAAMqU,iBAAmBqF,GAAwB1Z,EAAOkb,IAAeiW,GAAyBD,EAC1GY,EAAW9xB,EAAMuU,WAAaqF,GAAkB5Z,EAAOkb,IAAe+V,EAC1EhI,EAAa,EAAG/nB,EAAQ,OAAOiW,kBAAyB3E,cAAwBA,kBAA4BiqB,QAExG5K,GACH5I,EAAa,EAAG/nB,GAAS,oBAAoB2wB,MAG1CC,GACH7I,EAAa,EAAG/nB,GAAS,SAAS4wB,QAG9B1Z,GAAQjE,KAAa6D,GAAY7D,IAAY+D,GAAW/D,KAC5D8U,EAAa,EAAG/nB,GAAS,WAAWkU,EAAMsnB,OAAS,UAAe,IAAMtnB,EAAMqW,MAAMkR,QAAQxhC,OAASia,EAAMsnB,iBAAsB,IAAMtnB,EAAMqW,MAAMkR,QAAQxhC,QAAUohC,EACnK,IAAO,EAAInnB,EAAMqW,MAAMkR,QAAQxhC,OAASia,EAAMsnB,QAC9C,QAGHzT,EAAa,EAAG/nB,GAASlB,EAAMyU,OAAOyd,KAAK,MAG3CjJ,EAAa,EAAGqI,EAAU,CACzBlZ,GAAQjE,GAAWgV,EAAO/Q,QAAU+Q,EAAOnpB,SACxCgxB,EAAW,GAAIhxB,MACfqW,GAAmB0a,EAAkB/wB,EAAOmsB,IAC9C+F,KAAK,KACR,CAGmC,EAAhCnJ,EAAO/sB,GAAGe,MAAM,GAA6G,IAAzFgsB,EAAO/sB,GAAGe,MAAM,IAEvDksB,EAAa,GAAIlT,EAAU9K,GAAWwK,GAAmBL,EAAO0b,EAAkBD,EAAe1H,EAAQyH,EAAiBzE,GAASlhB,GAG/F,EAAjC8d,EAAO/sB,GAAGe,MAAM,GAA0D,GAArCgsB,EAAO/sB,GAAGe,MAAM,IAExDksB,EAAa,EAAG0I,GAAWvZ,GAAQjE,IAAYyd,GAActB,EAAanc,GAC3E,EAGM,CACNnU,EACAmU,EACAgV,EACAjX,EACAof,EACApwB,EACA+J,EACA0mB,EACAP,EACAC,EACArE,EACAtX,EACA6H,EACA/D,EACAC,EACAgE,EACA9H,EACA6H,EACAE,EACApH,EACAqH,EACAC,EACAiB,EACAD,EACAE,EACAjH,EACAjC,GACAE,GACAD,GACA6P,GACAE,GACAwW,GACAxK,GA7GD,SAA2BO,EAAaC,GACvC,OAAOD,EAAYxE,OACjBjiB,GAAWymB,EAAYxE,OAAO0E,KAAKryB,EAAO0L,EAAS0mB,OAAQ52B,OAAWA,EAAW4Z,EAAMC,mBACvF7Z,CACH,EA2GCyS,EACAmH,EACAkb,EACAnE,EACAyE,EACAC,EACAC,EACAC,EACAC,EACAuL,EACAtL,EACA/V,EACAgW,EACAC,EACA+K,EACAzgB,EACAF,EAzHD,SAAyBsX,GACxBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAuHD,CAEA,IAAI0qB,GAAU,cAAoBj0B,GACjCgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASo8B,GAAYzN,GAAmBj0B,EAAgB,CAAEqT,KAAM,GAAImH,MAAO,IAAM,KAAM,EAAE,GAAI,GACzG,GAKD,SAASqa,GAAkBpzB,GAC1B,IAAImuB,EACAC,EAEJ,MAAO,CACNjmB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdmB,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGkiB,cACvDxd,EAAUypB,EAAK,MAAenuB,EAAI,GAAK,KACvC,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,EACpB,EACDjB,CAAAA,CAAEvB,EAAG4e,GAAW,IAARle,GAAMke,EACU,EAAnBle,GAAwB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGkiB,eACpF9d,EAAK+pB,EAAK,QAASC,GAGA,EAAhB1tB,GACHgE,EAAUypB,EAAK,MAAenuB,EAAI,GAAK,KAExC,EACDgB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,EAET,EAEF,CAEA,SAAS4E,GAAWrG,EAAQC,EAASC,GACpC,IAAIiT,EACAzgB,EACAF,EACAgb,EACA/R,EACA2E,EAQA7f,GAPAsV,aAAEA,EAAYE,WAAEA,EAAUlJ,MAAEA,EAAKuO,KAAEA,EAAII,OAAEA,EAAM6X,gBAAEA,GAAoB75B,EAAW,SACpFzG,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,GAAI1N,EAAgB3f,KACpFE,EAAoBitB,EAAQjK,GAAYljB,GAASqtB,EAAa,EAAGiT,EAActgC,KAC/EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQ5E,GAAMvoB,GAASqtB,EAAa,GAAIzE,EAAQ5oB,KACpEE,EAAoBitB,EAAQxE,GAAQ3oB,GAASqtB,EAAa,GAAIsN,EAAU36B,KACxEE,EAAoBitB,EAAQqT,GAAiBxgC,GAASqtB,EAAa,GAAIxN,EAAmB7f,KAE1F,IAAIub,EAAM,EAkBV,OAhBA4R,EAAO/sB,GAAG4H,OAAS,KAKlB,GAJyC,MAArCmlB,EAAO/sB,GAAGe,OACbksB,EAAa,EAAG3f,GAASkb,EAAQ+R,GAAW,IAAO,IAG0B,KAA1ExN,EAAO/sB,GAAGe,MACb,CAEC,IAAIy/B,EAAOjhB,EAAc9O,QAAU,GAE/B8K,EAASkE,EAAiB3K,IAAIrE,QAAU,GAC5Cwc,EAAa,EAAG9R,GAAO7N,EAAQiO,GAAUilB,EAAON,EACjD,CACD,EAGM,CACN/kB,EACAgS,EACAvK,EACAE,EACAlJ,EACAuO,EACAI,EACA6X,EACA9yB,EACA4yB,EACAzgB,EACAF,EACAgb,EACA/R,EAEF,CAEA,MAAMqY,WAAqBl0B,GAC1BgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASkvB,GAAYK,GAAmB70B,EAAgB,GACpE,EAKD,SAASk4B,GAAmBz2B,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAAS02B,GAAqBzgC,EAAKoJ,EAAMpI,GACxC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASmhB,GAAkBlrB,GAC1B,IAEIqsB,EACA2B,EAHAzB,EAAc,GACd2K,EAAgB,IAAIttB,IAGpB+kB,EAAehmB,GAA+B3I,EAAI,IACtD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAChD,IAAI+I,EAAY02B,GAAqBzgC,EAAK2uB,EAAc3tB,GACpD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAK0/B,GAAsB/7B,EAAKoF,GACpE,CAEA,MAAO,CACN5B,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GAC4B,EAA9BA,EAAM,KACTiuB,EAAehmB,GAA+B3I,EAAI,IAClDiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAK2uB,EAAcuI,EAAe7K,EAAc1pB,WAAYmG,GAAyB43B,GAAuBrU,EAAeoU,IAC3Lr4B,KAED,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGR,IAAK,IAAIrrB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,EAAED,EAEnB,EAEF,CAGA,SAAS29B,GAAsB/J,EAAO32B,GACrC,IAAIoK,EACAzG,EACAqqB,EASJ,OAPArqB,EAAQ,IAAI48B,GAAQ,CAClBt7B,MAAO,CACN2M,KAAe5R,EAAI,GACnB+Y,MAAiB/Y,EAAI,OAIjB,CACN2E,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAM4L,EAAgB,CAAE,EACA,EAApBn2B,EAAM,KAAiBm2B,EAAcjlB,KAAgB5R,EAAI,IACjC,EAAxBU,EAAM,KAAqBm2B,EAAc9d,MAAkB/Y,EAAI,KACnE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGRU,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAAS49B,GAAoB3gC,GAC5B,IAAIkwB,EAGAE,EACAmI,EACAvK,EAJAzB,EAAc,GACd2K,EAAgB,IAAIttB,IAIpB8uB,EAAwB14B,EAAI,GAAG,IAAMsrB,GAAkBtrB,GACvDssB,EAAa3jB,GAA6B3I,EAAI,IAClD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC9C,IAAI+I,EAAY0sB,GAAmBz2B,EAAKssB,EAAYtrB,GAChD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAK01B,GAAoB/xB,EAAKoF,GAClE,CAEA,IAAI4uB,EAAwB34B,EAAI,GAAG,KAAmBA,EAAI,GAAG,GAAG2D,MAAM6T,QAAUopB,GAAoB5gC,GAEpG,MAAO,CACNmI,CAAAA,GACKuwB,GAAWA,EAAUvwB,IACzB+nB,EAAK1sB,IAEL,IAAK,IAAIxC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBioB,EAAK5sB,IACDm1B,GAAWA,EAAUxwB,IACzBowB,EAAmB90B,GACnB,EACD0G,CAAAA,CAAE/H,EAAQI,GACLk2B,GAAWA,EAAUvuB,EAAE/H,EAAQI,GACnCD,EAAOH,EAAQ8tB,EAAI1tB,GAEnB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQguB,EAAI5tB,GACfm2B,GAAWA,EAAUxuB,EAAE/H,EAAQI,GACnCD,EAAOH,EAAQm2B,EAAkB/1B,GACjCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACUV,EAAI,GAAG,GAClB04B,GACHA,EAAUn3B,EAAEvB,EAAKU,GAEU,GAAvBA,EAAM,IACT2H,GAAcqwB,EAAW,KAG1BA,EAAYpN,GAAkBtrB,GAC9B04B,EAAUvwB,IACVE,GAAcqwB,EAAW,GACzBA,EAAUvuB,EAAE+lB,EAAGvtB,WAAYutB,IAElBwI,IACVzwB,KAEAQ,GAAeiwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBtwB,MAG+B,EAA5B1H,EAAM,KACT4rB,EAAa3jB,GAA6B3I,EAAI,IAC9CiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAKssB,EAAY4K,EAAe9G,EAAGztB,WAAYmG,GAAyB4tB,GAAqBtG,EAAIqG,IACjKruB,MAGepI,EAAI,GAAG,KAAmBA,EAAI,GAAG,GAAG2D,MAAM6T,OACrDmhB,GACHA,EAAUp3B,EAAEvB,EAAKU,GAEU,GAAvBA,EAAM,IACT2H,GAAcswB,EAAW,KAG1BA,EAAYiI,GAAoB5gC,GAChC24B,EAAUxwB,IACVE,GAAcswB,EAAW,GACzBA,EAAUxuB,EAAEouB,EAAiB51B,WAAY41B,IAEhCI,IACV1wB,KAEAQ,GAAekwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBvwB,KAED,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CACA3lB,GAAcqwB,GAEd,IAAK,IAAI13B,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BqH,GAAcswB,GACd3K,GAAU,CARG,CASb,EACDtlB,CAAAA,CAAEH,GACDE,GAAeiwB,GAEf,IAAK,IAAI13B,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5ByH,GAAekwB,GACf3K,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOwtB,GACPxtB,EAAO0tB,GACP1tB,EAAO61B,IAGJG,GAAWA,EAAU11B,EAAED,GAE3B,IAAK,IAAI/B,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,EAAED,GAGd41B,GAAWA,EAAU31B,EAAED,EAC5B,EAEF,CAGA,SAASuoB,GAAkBtrB,GAC1B,IAAI2D,EACAqqB,EASJ,OAPArqB,EAAQ,IAAI48B,GAAQ,CAClBt7B,MAAO,CACN2M,KAAe5R,EAAI,GACnB+Y,MAAmB/Y,EAAI,GAAG,MAItB,CACNmI,CAAAA,GACCsC,GAAiB9G,EAAMhE,GAAGkI,SAC1B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMm2B,EAAgB,CAAE,EACA,EAApBn2B,EAAM,KAAiBm2B,EAAcjlB,KAAgB5R,EAAI,IAClC,GAAvBU,EAAM,KAAqBm2B,EAAc9d,MAAoB/Y,EAAI,GAAG,IACxE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAAS2zB,GAAoBC,EAAO32B,GACnC,IAAIoK,EACAzG,EACAqqB,EASJ,OAPArqB,EAAQ,IAAI48B,GAAQ,CAClBt7B,MAAO,CACN2M,KAAe5R,EAAI,GACnB+Y,MAAiB/Y,EAAI,OAIjB,CACN2E,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAM4L,EAAgB,CAAE,EACA,EAApBn2B,EAAM,KAAiBm2B,EAAcjlB,KAAgB5R,EAAI,IACnC,EAAtBU,EAAM,KAAmBm2B,EAAc9d,MAAkB/Y,EAAI,KACjE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGRU,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAAS69B,GAAoB5gC,GAC5B,IAAI2D,EACAqqB,EASJ,OAPArqB,EAAQ,IAAI48B,GAAQ,CAClBt7B,MAAO,CACN2M,KAAe5R,EAAI,GACnB+Y,MAAmB/Y,EAAI,GAAG,MAItB,CACNmI,CAAAA,GACCsC,GAAiB9G,EAAMhE,GAAGkI,SAC1B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMm2B,EAAgB,CAAE,EACA,EAApBn2B,EAAM,KAAiBm2B,EAAcjlB,KAAgB5R,EAAI,IAClC,GAAvBU,EAAM,KAAqBm2B,EAAc9d,MAAoB/Y,EAAI,GAAG,IACxE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAAS89B,GAAkB7gC,GAC1B,IAAI8gC,EACA9S,EAGJ,OAFA8S,EAAe,IAAIN,GAAa,IAEzB,CACNr4B,CAAAA,GACCsC,GAAiBq2B,EAAanhC,GAAGkI,SACjC,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBo2B,EAAc1+B,EAAQI,GACtCwrB,GAAU,CACV,EACDhtB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcy4B,EAAanhC,GAAGkI,SAAUU,GACxCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeq4B,EAAanhC,GAAGkI,SAAUU,GACzCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBg2B,EAAc/9B,EACjC,EAEF,CAEA,SAAS+zB,GAAkB92B,GAC1B,IAAIo5B,EACA1G,EACAC,EACAzC,EACA0C,EACAC,EACAzC,EACAqC,EACAK,EACAuG,EACArL,EACApD,EACAC,EACA6N,GAA0B14B,EAAI,IAAMkrB,GAAkBlrB,GACtD24B,GAA0B34B,EAAI,IAAM2gC,GAAoB3gC,GACxDu5B,EAA8Bv5B,EAAI,KAAmBA,EAAI,KAAoBA,EAAI,IAAM6gC,KAE3F,MAAO,CACN14B,CAAAA,GACCixB,EAAOn2B,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACXy1B,GAAWA,EAAUvwB,IACzB+nB,EAAK1sB,IACLovB,EAAO3vB,EAAQ,OACX01B,GAAWA,EAAUxwB,IACzBioB,EAAK5sB,IACLivB,EAAOxvB,EAAQ,OACXs2B,GAAWA,EAAUpxB,IACzB/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGgjB,UACzD5e,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAGwY,QACzDpU,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAGyjB,OAEzDrf,EAAKg1B,EAAM,QAASC,EAAoCr5B,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,GAAG2gB,MAAQ,KAAqB3gB,EAAI,GACpN,IAAiBA,EAAI,GAAG4jB,UACxB,KAAoB5jB,EAAI,GACxB,IAAiBA,EAAI,GAAGujB,SACxB,KAEFnf,EAAKg1B,EAAM,OAAQ,OACnB,EACDjvB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQg3B,EAAM52B,GACrBL,EAAOi3B,EAAM1G,GACTgG,GAAWA,EAAUvuB,EAAEuoB,EAAM,MACjCvwB,EAAOi3B,EAAMlJ,GACb/tB,EAAOi3B,EAAMxG,GACT+F,GAAWA,EAAUxuB,EAAEyoB,EAAM,MACjCzwB,EAAOi3B,EAAMhJ,GACbjuB,EAAOi3B,EAAM3G,GACT8G,GAAWA,EAAUpvB,EAAEsoB,EAAM,MAChBzyB,EAAI,IAAIo5B,GACzBpL,GAAU,EAELpD,IACJC,EAAUnnB,EAAO01B,EAAM,eAAe,WACjC/6B,EAA0B2B,EAAI,QAEhCb,EADkBa,EAAI,GAAGsxB,QAAQsI,UACN55B,EAAI,QAE/Bb,EADkBa,EAAI,GAAGsxB,QAAQsI,QACtBvO,MAAMlnB,KAAMtF,UAC1B,IAEA+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,IACVV,EAAMirB,GAEgB,GAaXyN,IACVzwB,KAEAQ,GAAeiwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBtwB,MAnBIswB,GACHA,EAAUn3B,EAAEvB,EAAKU,GAEW,GAAxBA,EAAM,IACT2H,GAAcqwB,EAAW,KAG1BA,EAAYxN,GAAkBlrB,GAC9B04B,EAAUvwB,IACVE,GAAcqwB,EAAW,GACzBA,EAAUvuB,EAAEuoB,EAAM,SAYf1E,GAAiC,IAAtBttB,EAAM,IAAuBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGgjB,YACvG5e,EAAKsuB,EAAM,QAASC,GAGH3yB,EAAI,GAaX24B,IACV1wB,KAEAQ,GAAekwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBvwB,MAnBIuwB,GACHA,EAAUp3B,EAAEvB,EAAKU,GAEW,GAAxBA,EAAM,IACT2H,GAAcswB,EAAW,KAG1BA,EAAYgI,GAAoB3gC,GAChC24B,EAAUxwB,IACVE,GAAcswB,EAAW,GACzBA,EAAUxuB,EAAEyoB,EAAM,SAYf5E,GAAiC,IAAtBttB,EAAM,IAAuBmyB,KAAsBA,EAA8B7yB,EAAI,GAAGwY,UACvGpU,EAAKwuB,EAAM,QAASC,GAGC7yB,EAAI,KAAmBA,EAAI,KAAoBA,EAAI,GACpEu5B,EACiD,KAAhD74B,EAAM,IACT2H,GAAckxB,EAAW,IAG1BA,EAAYsH,KACZtH,EAAUpxB,IACVE,GAAckxB,EAAW,GACzBA,EAAUpvB,EAAEsoB,EAAM,OAET8G,IACVtxB,KAEAQ,GAAe8wB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBnxB,QAGI4lB,GAAiC,IAAtBttB,EAAM,IAAuBoyB,KAAsBA,EAA8B9yB,EAAI,GAAGyjB,SACvGrf,EAAKquB,EAAM,QAASK,KAGhB9E,GAAqE,IAA1DttB,EAAM,IAA2D24B,KAAsBA,EAAoCr5B,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,GAAG2gB,MAAQ,KAAqB3gB,EAAI,GACvS,IAAiBA,EAAI,GAAG4jB,UACxB,KAAoB5jB,EAAI,GACxB,IAAiBA,EAAI,GAAGujB,SACxB,OACDnf,EAAKg1B,EAAM,QAASC,EAErB,EACDr4B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcqwB,GACdrwB,GAAcswB,GACdtwB,GAAckxB,GACdvL,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeiwB,GACfjwB,GAAekwB,GACflwB,GAAe8wB,GACfvL,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO02B,GAGJV,GAAWA,EAAU11B,IACrB21B,GAAWA,EAAU31B,IACrBu2B,GAAWA,EAAUv2B,IACRhD,EAAI,IAAI,MACzB4qB,GAAU,EACVC,GACD,EAEF,CAEA,SAASmJ,GAAWtH,EAAQC,EAASC,GACpC,IAAIiT,EACA3gB,EACAE,EACAwc,EACA7c,EACAF,EACAgd,EACAhP,EACAmN,EACAE,EACApN,EACA6D,EACAoQ,EAiBAlrB,GAhBAjE,KAAEA,GAAS+a,GACXjR,SAAEA,GAAyBiR,GAC3BjO,QAAEA,EAAO4K,SAAEA,EAAQvH,iBAAEA,EAAgBG,aAAEA,EAAYK,aAAEA,EAAYE,WAAEA,EAAUf,0BAAEA,EAAyBnI,MAAEA,EAAKiC,UAAEA,EAASgJ,WAAEA,EAAU6E,aAAEA,EAAYnB,OAAEA,EAAM6X,gBAAEA,GAAoB75B,EAAW,SACjMzG,EAAoBitB,EAAQhO,GAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQpD,GAAU/pB,GAASqtB,EAAa,GAAIgP,EAAYr8B,KAC5EE,EAAoBitB,EAAQ3K,GAAkBxiB,GAASqtB,EAAa,GAAIoN,EAAoBz6B,KAC5FE,EAAoBitB,EAAQxK,GAAc3iB,GAASqtB,EAAa,GAAImU,EAAgBxhC,KACpFE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,GAAI1N,EAAgB3f,KACpFE,EAAoBitB,EAAQjK,GAAYljB,GAASqtB,EAAa,GAAIiT,EAActgC,KAChFE,EAAoBitB,EAAQhL,GAA2BniB,GAASqtB,EAAa,GAAIiP,EAA6Bt8B,KAC9GE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChFE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,EAAG+D,EAAgBpxB,KACnFE,EAAoBitB,EAAQxE,GAAQ3oB,GAASqtB,EAAa,GAAIsN,EAAU36B,KACxEE,EAAoBitB,EAAQqT,GAAiBxgC,GAASqtB,EAAa,GAAIxN,EAAmB7f,KAE1F,IAAI2Z,EAAQqhB,EACRD,EAAS1W,EAAWL,EACpByd,EACA/zB,EAAOwK,EAHW+iB,EAAU,GAKhC,SAASrI,EAAcngB,EAAGqE,GAGzB,OAFAA,GAAKP,GAAKD,GAAIiF,IAEP,CACNtD,QAAQ,EACR5F,KAAME,GAAYA,GAAYH,GAAUC,GAAOwN,EAAiB3K,KAAMyK,EAAe3K,GAAM8B,EAAIwpB,IAC/FnkB,WACA8V,MAAO3b,EACP0N,WAEF,CA4EA,OAnEAmJ,EAAOngB,MAAQogB,IACV,SAAUA,GAASC,EAAa,EAAGhb,EAAO+a,EAAQ/a,MAClD,aAAc+a,GAASC,EAAa,GAAIlR,EAAWiR,EAAQjR,SAAS,EAGzEgR,EAAO/sB,GAAG4H,OAAS,KAwBlB,GAvBkC,EAA9BmlB,EAAO/sB,GAAGe,MAAM,GAAmD,GAAjCgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,EAAG0N,EAAUtnB,GAAWpB,EAAMsoB,IAGV,EAA9BxN,EAAO/sB,GAAGe,MAAM,GAA6D,EAA3CgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,EAAGhJ,EAAYoW,EAAkBve,MAAKzY,GAAKgQ,GAAWhQ,EAAG4O,MAGrC,EAA9B8a,EAAO/sB,GAAGe,MAAM,GAAuD,EAArCgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,EAAGrJ,EAAW/G,GAAa5K,EAAMib,IAGe,UAA1DH,EAAO/sB,GAAGe,MAAM,KACd6iB,IACJqJ,EAAa,GAAI3f,EAAQ6E,GAAYH,GAAUC,GAAOwN,EAAiB3K,MACvEmY,EAAa,GAAInV,EAAM3F,GAAYH,GAAUC,GAAOwN,EAAiBre,QAIjC,SAAlC2rB,EAAO/sB,GAAGe,MAAM,GAA6F,EAAhEgsB,EAAO/sB,GAAGe,MAAM,IAChEksB,EAAa,GAAIoU,EAAiBtlB,IAAamgB,EAA6Bhd,OAAa1f,IAGI,WAA1FutB,EAAO/sB,GAAGe,MAAM,KACd6iB,EAAU,CACdqJ,EAAa,EAAG1T,EAAS,IACzB0T,EAAa,EAAG2N,EAAW,IAE3B,IAAK,IAAI52B,KAASob,EACjB,KAAMpb,EAAM6T,QAAUuE,GAAQpY,EAAMmU,WAAayD,GAAgB5X,EAAOsJ,EAAOwK,EAAKupB,GAAiB,CACpG,IAAIjoB,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,GAE3C,GACM,eADE9T,EAAMmU,QAEZyiB,EAAS16B,KAAKkZ,QAGdG,EAAOrZ,KAAKkZ,EAEf,EA31DL,SAA0BG,GACtB,IAAKA,EAAOpa,OACR,OAGJma,GAAgBC,GAGhB,IAAIkW,EAAQ,CACRkR,QAAS,GACT7oB,IAAKyB,EAAO,GAAGzB,KAEnB,IAAK,IAAIsB,KAASG,EAAQ,CACtB,IAAI/Q,EAAI,EACR,GAAI4Q,EAAM9L,MAAQmiB,EAAM3X,IAAK,CACzB,KAAOtP,EAAIinB,EAAMkR,QAAQxhC,UACjBswB,EAAMkR,QAAQn4B,GAAGwS,IAAI,GAAGlD,KAAOsB,EAAM9L,SADV9E,GAK/B4Q,EAAMtB,IAAM2X,EAAM3X,MAClB2X,EAAM3X,IAAMsB,EAAMtB,IAE1B,MACI2X,EAAQ,CACJkR,QAAS,GACT7oB,IAAKsB,EAAMtB,KAIf2X,EAAMkR,QAAQxhC,OAASqJ,EAAI,GAC3BinB,EAAMkR,QAAQzgC,KAAK,IAEvBuvB,EAAMkR,QAAQn4B,GAAGtI,KAAKkZ,GAEtBA,EAAMqW,MAAQA,EACdrW,EAAMsnB,OAASl4B,CACnB,CACJ,CAwzDI84B,CAAiB/nB,EAClB,CAGsE,UAAnEwT,EAAO/sB,GAAGe,MAAM,KACd6iB,GACJqJ,EAAa,EAAG4N,EAAUoB,EAAUhxB,KAAIjH,GAASA,GAAS4X,GAAgB5X,EAAOsJ,EAAOwK,EAAKiE,GAC3F5C,GAAiBnV,EAAOsJ,EAAOwK,GAC/B,SAI4B,EAA5BiV,EAAO/sB,GAAGe,MAAM,IACfmV,GACHN,GAAWM,EAAIsc,EAEjB,EAGM,CACNvgB,EACAiE,EACAqD,EACAqhB,EACAhX,EACAiX,EACAF,EACA1W,EACAkJ,EACA6D,EACAoQ,EACAriB,EACA4K,EACAvH,EACAG,EACAK,EACAE,EACAf,EACAnI,EACAiC,EACAgJ,EACA6E,EACAnB,EACA6X,EACArkB,EACAslB,EACA/zB,EACAwK,EACA2H,EACAwc,EACA7c,EACAF,EACAgd,EACAhP,EACAmN,EACAE,EA9GD,SAAsB1D,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EA4GD,CAEA,IAAIqrB,GAAQ,cAAkB50B,GAC7BgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASmwB,GAAY8C,GAAmBv4B,EAAgB,CAAEqT,KAAM,EAAG8J,SAAU,IAAM,KAAM,EAAE,GAAI,GAC3G,GAKD,SAAS0Q,GAAkBpsB,GAC1B,IAAIqzB,EACAC,EACApD,EACA/B,EACAC,EACAjD,EACAiF,EACAmD,EACAC,EACAC,EACAzF,EACApD,EACAC,EACJ,IAAI4E,EAAiCzvB,EAAI,IAAI0zB,QAE7C,SAASC,EAAa3zB,EAAKU,GAC1B,MAAO,CACNuE,MAAO,CAAEgI,OAAO,EAAMtJ,MAAiB3D,EAAI,IAE7C,CAEIyvB,IACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UACjL,KAGD,IAAI+0B,EAAmC5zB,EAAI,IAAI0zB,QAE/C,SAASG,EAAe7zB,EAAKU,GAC5B,MAAO,CAAEuE,MAAO,CAAEtB,MAAiB3D,EAAI,IACxC,CAUA,OARI4zB,IACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC7K,KAGM,CACNsJ,CAAAA,GACCkrB,EAAUpwB,EAAQ,WACdqwB,GAAkB7oB,GAAiB6oB,EAAiB3zB,GAAGkI,UAC3DqoB,EAAK1sB,IACL2qB,EAAMlrB,EAAQ,OACdmtB,EAAK5sB,IACD+vB,GAAkB9oB,GAAiB8oB,EAAiB5zB,GAAGkI,UAC3DzD,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGwjB,WACvDpf,EAAKivB,EAAS,QAAqBrzB,EAAI,IACvCoE,EAAKivB,EAAS,QAAmBrzB,EAAI,IACrCoE,EAAKivB,EAAS,OAAQG,EAAiCxzB,EAAI,GAAK,cAAWb,GAC3EiF,EAAKivB,EAAS,WAAYI,EAAqCzzB,EAAI,GAAK,OAAIb,EAC5E,EACDgL,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQixB,EAAS7wB,GACpB8wB,GAAkB5oB,GAAgB4oB,EAAkBD,EAAS,MACjElxB,EAAOkxB,EAASnD,GAChB/tB,EAAOkxB,EAASlF,GAChBhsB,EAAOkxB,EAASjD,GACZmD,GAAkB7oB,GAAgB6oB,EAAkBF,EAAS,MAC7CrzB,EAAI,IAAIqzB,GAC5BrF,GAAU,EAELpD,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMiqB,EAAiBnuB,EAAI,KAChF0D,EAAO2vB,EAAS,SAAS,WACpBh1B,EAAwB2B,EAAI,KAAiBA,EAAI,GAAGqrB,MAAMlnB,KAAMtF,UACpE,IACD6E,EAAO2vB,EAAS,WAAW,WACtBh1B,EAAwB2B,EAAI,IAAMyO,GAAqBzO,EAAI,OAAmBA,EAAI,IAAMyO,GAAqBzO,EAAI,KAAKqrB,MAAMlnB,KAAMtF,UACtI,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACpL,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACpL,IACD6E,EAAO2vB,EAAS,eAAe,WAC1Bh1B,GAAasd,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,SAAS2b,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,MAAMqrB,MAAMlnB,KAAMtF,UAC3N,KAGD+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GAGV,GAFAV,EAAMirB,EAE2B,KAA7BvqB,EAAM,IAA+B+uB,KAAkBA,EAAiCzvB,EAAI,IAAI0zB,SAAU,CAC7G,GAAIJ,EAAkB,CACrBrrB,KACA,MAAMynB,EAAgB4D,EAEtB7qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIqnB,GACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UACjL,IAEA4L,GAAiB6oB,EAAiB3zB,GAAGkI,UACrCQ,GAAcirB,EAAiB3zB,GAAGkI,SAAU,GAC5C6C,GAAgB4oB,EAAkBD,EAASnD,IAE3CoD,EAAmB,IAEpB,MAAM,GAAI7D,EAAc,CACxB,MAAMqE,EAA2B,CAAE,EACV,EAArBpzB,EAAM,KAAkBozB,EAAyBnwB,MAAkB3D,EAAI,IAC3EszB,EAAiB1mB,KAAKknB,EACvB,CAQA,KANK9F,GAAiC,EAAtBttB,EAAM,IAAqB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGwjB,aACnGpf,EAAK+pB,EAAK,QAASC,GAGhBjD,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAkC,GAAvB7G,EAAM,IAAqByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,IAEhH,KAA7BU,EAAM,IAA+BkzB,KAAoBA,EAAmC5zB,EAAI,IAAI0zB,SAAU,CACjH,GAAIH,EAAkB,CACrBtrB,KACA,MAAMynB,EAAgB6D,EAEtB9qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIwrB,GACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC7K,IAEA4L,GAAiB8oB,EAAiB5zB,GAAGkI,UACrCQ,GAAckrB,EAAiB5zB,GAAGkI,SAAU,GAC5C6C,GAAgB6oB,EAAkBF,EAAS,OAE3CE,EAAmB,IAEpB,MAAM,GAAIK,EAAgB,CAC1B,MAAMG,EAA2B,CAAE,EACV,EAArBrzB,EAAM,KAAkBqzB,EAAyBpwB,MAAkB3D,EAAI,IAC3EuzB,EAAiB3mB,KAAKmnB,EACvB,GAEK/F,GAAkC,GAAvBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAqBrzB,EAAI,MAGnCguB,GAAgC,GAArBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAmBrzB,EAAI,MAGjCguB,GAAkC,IAAvBttB,EAAM,IAAwB8yB,KAAwBA,EAAiCxzB,EAAI,GAAK,cAAWb,KAC1HiF,EAAKivB,EAAS,OAAQG,KAGlBxF,GAAkC,IAAvBttB,EAAM,IAAwB+yB,KAA4BA,EAAqCzzB,EAAI,GAAK,OAAIb,KAC3HiF,EAAKivB,EAAS,WAAYI,EAE3B,EACDzyB,CAAAA,CAAEuH,GACGylB,IACAsF,GAAkBjrB,GAAcirB,EAAiB3zB,GAAGkI,SAAUU,GAC9DgrB,GAAkBlrB,GAAckrB,EAAiB5zB,GAAGkI,SAAUU,GAClEylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACG+qB,GAAkB7qB,GAAe6qB,EAAiB3zB,GAAGkI,SAAUU,GAC/DgrB,GAAkB9qB,GAAe8qB,EAAiB5zB,GAAGkI,SAAUU,GACnEylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2wB,GAGJC,GAAkBxoB,GAAkBwoB,GACpCC,GAAkBzoB,GAAkByoB,GACpBvzB,EAAI,IAAI,MAC5B4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAAS4B,GAAWC,EAAQC,EAASC,GACpC,IAAIqH,EACAnE,EACAuE,EACAC,EACAC,EACAzH,EACA0H,EACAC,EACAC,EACAC,EACAC,EACA/V,EACAgW,EACAC,EACAC,EACAC,EACArE,EAqBA9a,EACAlS,EACAsxB,EACApwB,EACA+J,EACA8K,GAzBAX,MAAEA,GAAU4T,GACZrS,WAAEA,EAAa,CAAA,GAAOqS,GACtBtT,gBAAEA,EAAe6H,gBAAEA,EAAe/D,qBAAEA,EAAoBC,eAAEA,EAAc+D,WAAEA,EAAUC,WAAEA,EAAU9H,aAAEA,EAAYW,gBAAEA,EAAeoH,cAAEA,EAAaC,gBAAEA,EAAeC,gBAAEA,EAAe/F,UAAEA,EAASjC,MAAEA,EAAKE,MAAEA,EAAKD,eAAEA,EAAc6P,aAAEA,EAAYE,UAAEA,EAASnE,OAAEA,GAAWlf,EAAW,SAC9QzG,EAAoBitB,EAAQrT,GAAiB9Z,GAASqtB,EAAa,GAAI6H,EAAmBl1B,KAC1FE,EAAoBitB,EAAQxL,GAAiB3hB,GAASqtB,EAAa,GAAIyH,EAAmB90B,KAC1FE,EAAoBitB,EAAQvP,GAAsB5d,GAASqtB,EAAa,GAAIkI,EAAwBv1B,KACpGE,EAAoBitB,EAAQtP,GAAgB7d,GAASqtB,EAAa,GAAIgI,EAAkBr1B,KACxFE,EAAoBitB,EAAQvL,GAAY5hB,GAASqtB,EAAa,GAAIqH,EAAc10B,KAChFE,EAAoBitB,EAAQtL,GAAY7hB,GAASqtB,EAAa,GAAIiI,EAAct1B,KAChFE,EAAoBitB,EAAQpT,GAAc/Z,GAASqtB,EAAa,GAAI4H,EAAgBj1B,KACpFE,EAAoBitB,EAAQzS,GAAiB1a,GAASqtB,EAAa,GAAI8H,EAAmBn1B,KAC1FE,EAAoBitB,EAAQrL,GAAe9hB,GAASqtB,EAAa,GAAI0H,EAAiB/0B,KACtFE,EAAoBitB,EAAQpL,GAAiB/hB,GAASqtB,EAAa,EAAGmI,EAAmBx1B,KACzFE,EAAoBitB,EAAQnL,GAAiBhiB,GAASqtB,EAAa,EAAGoI,EAAmBz1B,KACzFE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQjT,GAAOla,GAASqtB,EAAa,GAAIkD,EAASvwB,KACtEE,EAAoBitB,EAAQlT,GAAgBja,GAASqtB,EAAa,GAAI2H,EAAkBh1B,KACxFE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KACpFE,EAAoBitB,EAAQnD,GAAWhqB,GAASqtB,EAAa,GAAI+H,EAAap1B,KAO9E,IACIuY,EACAwd,EAFAta,EAAS,EAqBb,SAASua,GAAcz3B,EAAIga,GAC1B,OAAQ6D,GAAY7D,IAAYpD,GAAW5W,GACzCuR,GAAWvR,EAAG,CACd6F,MAAOiW,GAAsBjW,GAC7BkS,KACAxG,UACAqH,KAAMD,GAAqBqZ,UAE3B3wB,CACH,CA6EA,OAvGAmG,GAAQ,KACHoP,GAAW4f,IACdA,EAAe,CACd3wB,MAAOiW,GAAsBjW,GAC7B+V,WACA7D,KACAa,KAAMD,GAAqBqZ,IAE7B,IAGDtqB,GAAY,KACPkP,GAAW2f,KAAsB1Y,GAAY7D,IAChD5C,IAAK,IAAMmf,EAAiB,CAAE3d,KAAMD,GAAqBqZ,MAAY,MAAO1K,EAC7E,IAmCDsH,EAAOngB,MAAQogB,IACV,UAAWA,GAASC,EAAa,GAAI7T,EAAQ4T,EAAQ5T,OACrD,eAAgB4T,GAASC,EAAa,GAAItS,EAAaqS,EAAQrS,WAAW,EAG/EoS,EAAO/sB,GAAG4H,OAAS,KAKlB,GAJmC,WAA/BmlB,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAGjpB,EAAQoV,EAAMpV,OAGmC,WAA9D+oB,EAAO/sB,GAAGe,MAAM,GAAkM,MAAvIgsB,EAAO/sB,GAAGe,MAAM,GAC9F,CACCksB,EAAa,EAAG9U,EAAUnU,EAAMmU,SAGhC,IAAI0d,EAAU7xB,EAAMqU,iBAAmBqF,GAAwB1Z,EAAOkb,IAAeiW,GAAyBD,EAE1GY,EAAW9xB,EAAMuU,WAAaqF,GAAkB5Z,EAAOkb,IAAe+V,EAEtE7Y,GAAQjE,GACX8U,EAAa,EAAG/nB,EAAQ,cAA2B,IAAbkU,EAAM1H,WAAiB0H,EAAM1H,KAAO,SAE1Eub,EAAa,EAAG/nB,EAAQ,cAA2B,IAAbkU,EAAM1H,WAAoC,GAAlB0H,EAAM1H,KAAO,oBAA6B1N,EAAMgyB,SAAW3a,QAGtHwa,GACH5I,EAAa,EAAG/nB,GAAS,oBAAoB2wB,MAG1CC,GACH7I,EAAa,EAAG/nB,GAAS,SAAS4wB,MAGnC7I,EAAa,EAAG/nB,GAASlB,EAAMyU,OAAOyd,KAAK,MAE3CjJ,EAAa,EAAGqI,EAAU,CACzBlZ,GAAQjE,GAAWgV,EAAO/Q,QAAU+Q,EAAOnpB,SACxCgxB,EAAW,GAAIhxB,MACfqW,GAAmB0a,EAAkB/wB,EAAOmsB,IAC9C+F,KAAK,KACR,CAG0C,WAAvCnJ,EAAO/sB,GAAGe,MAAM,GAAsH,IAAlFgsB,EAAO/sB,GAAGe,MAAM,IAEvEksB,EAAa,GAAIlT,EAAU9K,GAAWwK,GAAmBL,EAAO0b,EAAkBD,EAAe1H,EAAQyH,EAAiBzE,GAASlhB,GAG/F,EAAjC8d,EAAO/sB,GAAGe,MAAM,GAA0D,EAArCgsB,EAAO/sB,GAAGe,MAAM,IAExDksB,EAAa,EAAG0I,EAAUC,GAActB,EAAanc,GACtD,EAGM,CACNnU,EACAmU,EACAgV,EACAjX,EACAof,EACApwB,EACA+J,EACA0mB,EACAP,EACAC,EACArE,EACAtX,EACA6H,EACA/D,EACAC,EACA+D,EACAC,EACA9H,EACAW,EACAoH,EACAC,EACAC,EACA/F,EACAjC,EACAE,EACAD,EACA6P,EACAE,EACAgM,GAxGD,SAA2BO,EAAaC,GACvC,OAAOD,EAAYxE,OACjBjiB,GAAWymB,EAAYxE,OAAO0E,KAAKryB,EAAO0L,EAAS0mB,EAAQ,KAAMjgB,GAAKD,GAAIiF,IAAMhF,GAAKE,GAASH,EAAI,IAAIiF,IAAK/B,EAAMC,mBACjH7Z,CACH,EAsGC4Z,EACAuB,EArGD,WACMzE,GAIL+W,EAAa,GAAI5R,EAASH,GAAgB9B,EAAOuB,EAAYnE,GAAON,IACrE,EAiGCmF,EACAiZ,EACAnE,EACAyE,EACAC,EACAC,EACAC,EACAC,EACAC,EACA/V,EACAgW,EACAC,EA1GD,SAAyB0B,GACxBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAwGD,QAEA,cAAoBvJ,GACnBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GACChH,KACAN,EACA4oB,GACAL,GACA7tB,EACA,CACCwa,MAAO,GACPuB,WAAY,GACZgB,WAAY,IAEb,KACA,EAAE,GAAI,GAER,CAEA,cAAIA,GACH,OAAOnX,KAAKxE,GAAGK,IAAI,GACpB,GAKD,SAASuqB,GAAmBvqB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAItB,OAHAuJ,EAAU,IAAMX,EAAKpI,GACrB+I,EAAU,IAAMX,EAChBW,EAAU,IAAM/I,EACT+I,CACR,CAEA,SAASo3B,GAAqBnhC,EAAKoJ,EAAMpI,GACxC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASwhB,GAAkBvrB,GAC1B,IAEIqsB,EACA2B,EAHAzB,EAAc,GACd2K,EAAgB,IAAIttB,IAGpB+kB,EAAehmB,GAAkC3I,EAAI,IACzD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAChD,IAAI+I,EAAYo3B,GAAqBnhC,EAAK2uB,EAAc3tB,GACpD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAKogC,GAAsBz8B,EAAKoF,GACpE,CAEA,MAAO,CACN5B,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACsB,GAAxBA,IACHiuB,EAAehmB,GAAkC3I,EAAI,IACrDiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAK2uB,EAAcuI,EAAe7K,EAAc1pB,WAAYmG,GAAyBs4B,GAAuB/U,EAAe8U,IAC3L/4B,KAED,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGR,IAAK,IAAIrrB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,EAAED,EAEnB,EAEF,CAGA,SAASq+B,GAAsBzK,EAAO32B,GACrC,IAAIoK,EACAzG,EACAqqB,EAGJ,OAFArqB,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO,CAAE8T,MAAiB/Y,EAAI,OAE3C,CACN2E,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAM4L,EAAgB,CAAE,EACI,GAAxBn2B,IAA4Bm2B,EAAc9d,MAAkB/Y,EAAI,KACpE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGRU,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAAS4oB,GAAkB3rB,GAC1B,IAAImuB,EACAxqB,EACAyqB,EACAJ,EAGJ,OAFArqB,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO,CAAE8T,MAAmB/Y,EAAI,GAAG,MAEhD,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiB9G,EAAMhE,GAAGkI,UAC1BzD,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,IAAIwY,OAAS,IAAiBxY,EAAI,IAAI44B,QAChG,EACDzuB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgB/G,EAAOwqB,EAAK,MAC5BH,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMm2B,EAAgB,CAAE,EACA,EAApBn2B,IAAuBm2B,EAAc9d,MAAoB/Y,EAAI,GAAG,IACpE2D,EAAMiJ,KAAKiqB,KAEN7I,GAA8B,KAAnBttB,GAA2B0tB,KAAqBA,EAAmCpuB,EAAI,IAAIwY,OAAS,IAAiBxY,EAAI,IAAI44B,WAC5Ix0B,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRrjB,GAAkBnH,EACnB,EAEF,CAGA,SAASioB,GAAkB5rB,GAC1B,IAEIqsB,EACA2B,EAHAzB,EAAc,GACd2K,EAAgB,IAAIttB,IAGpB0iB,EAAa3jB,GAAgC3I,EAAI,IACrD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC9C,IAAI+I,EAAYwgB,GAAmBvqB,EAAKssB,EAAYtrB,GAChD2D,EAAMuE,EAAQa,GAClBmtB,EAAcv1B,IAAIgD,EAAK4nB,EAAYvrB,GAAK+qB,GAAoBpnB,EAAKoF,GAClE,CAEA,MAAO,CACN5B,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACsC,IAAxCA,IACH4rB,EAAa3jB,GAAgC3I,EAAI,IACjDiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAOwI,EAAS,EAAGlJ,EAAKssB,EAAY4K,EAAe7K,EAAc1pB,WAAYmG,GAAyBijB,GAAqBM,EAAe9B,IACvLniB,KAED,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGR,IAAK,IAAIrrB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,EAAED,EAEnB,EAEF,CAGA,SAASgpB,GAAoB4K,EAAO32B,GACnC,IAAIoK,EACAzG,EAEAqqB,EADAhtB,EAAUhB,EAAI,IAElB,MAAM64B,EAAeA,IAAwB74B,EAAI,IAAI2D,EAAO3C,GACtD83B,EAAiBA,IAAwB94B,EAAI,IAAI,KAAMgB,GAE7D,IAAI+3B,EAAc,CACjBhgB,MAAiB/Y,EAAI,IACrBsa,WAA2Bta,EAAI,IAMhC,OAHA2D,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO8zB,IAC3BF,IAEO,CACNl0B,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GAGNM,KAFJhB,EAAMirB,GAEc,MACnB6N,IACA93B,EAAUhB,EAAI,IACd64B,KAGD,MAAMhC,EAAgB,CAAE,EACE,GAAtBn2B,IAA0Bm2B,EAAc9d,MAAkB/Y,EAAI,KACvC,EAAvBU,IAA0Bm2B,EAAcvc,WAA4Bta,EAAI,IAC5E2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGR0uB,IACAhuB,GAAkBnH,EAAOZ,EAC1B,EAEF,CAEA,SAAS8rB,GAAkB7uB,GAC1B,IAAIyyB,EACAC,EACAC,EACAzC,EAEAE,EACAwC,EACAC,EACAC,EACA9E,EACApD,EACAC,EAPA4N,EAAsBz4B,EAAI,GAAG,IAAMgT,GAAuBhT,EAAI,GAAG,GAAG4R,KAAe5R,EAAI,MAAqBA,EAAI,GAQhH04B,GAA0B14B,EAAI,IAAMurB,GAAkBvrB,GACtD24B,EAAYF,GAAW9M,GAAkB3rB,GACzCu5B,GAA0Bv5B,EAAI,IAAM4rB,GAAkB5rB,GAE1D,MAAO,CACNmI,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACXy1B,GAAWA,EAAUvwB,IACzB+nB,EAAK1sB,IACDm1B,GAAWA,EAAUxwB,IACzBioB,EAAK5sB,IACLovB,EAAO3vB,EAAQ,OACXs2B,GAAWA,EAAUpxB,IACzB/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,IAAIgjB,UAC1D5e,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,IAAIwY,QAE1DpU,EAAKquB,EAAM,QAASK,EAAoC9yB,EAAI,IAAIsR,IAAM,IAAiBtR,EAAI,IAAIqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,IAAI2gB,MAAQ,KAAqB3gB,EAAI,GACvN,IAAiBA,EAAI,IAAI4jB,UACzB,KAAoB5jB,EAAI,GACxB,IAAiBA,EAAI,IAAIujB,SACzB,KAEFnf,EAAKquB,EAAM,OAAQ,OACnB,EACDtoB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMC,GACTgG,GAAWA,EAAUvuB,EAAEuoB,EAAM,MACjCvwB,EAAOswB,EAAMvC,GACTyI,GAAWA,EAAUxuB,EAAEsoB,EAAM,MACjCtwB,EAAOswB,EAAMrC,GACbjuB,EAAOswB,EAAMG,GACT2G,GAAWA,EAAUpvB,EAAEyoB,EAAM,MAChB5yB,EAAI,IAAIyyB,GACzBzE,GAAU,EAELpD,IACJC,EAAUnnB,EAAO+uB,EAAM,eAAe,WACjCp0B,EAA0B2B,EAAI,QAEhCb,EADkBa,EAAI,IAAIsxB,QAAQsI,UACP55B,EAAI,QAE/Bb,EADkBa,EAAI,IAAIsxB,QAAQsI,QACvBvO,MAAMlnB,KAAMtF,UAC1B,IAEA+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAAOnF,GAAW,IAARplB,GAAMolB,GACjB9lB,EAAMirB,GAEgB,GAaXyN,IACVzwB,KAEAQ,GAAeiwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBtwB,MAnBIswB,GACHA,EAAUn3B,EAAEvB,EAAKU,GAEQ,GAArBA,GACH2H,GAAcqwB,EAAW,KAG1BA,EAAYnN,GAAkBvrB,GAC9B04B,EAAUvwB,IACVE,GAAcqwB,EAAW,GACzBA,EAAUvuB,EAAEuoB,EAAM,SAYf1E,GAA8B,KAAnBttB,GAA2BiyB,KAAsBA,EAA8B3yB,EAAI,IAAIgjB,YACtG5e,EAAKsuB,EAAM,QAASC,GAGmB,GAApCjyB,IAAwC+3B,EAAsBz4B,EAAI,GAAG,IAAMgT,GAAuBhT,EAAI,GAAG,GAAG4R,KAAe5R,EAAI,MAAqBA,EAAI,IAExJy4B,EACCE,GACHA,EAAUp3B,EAAEvB,EAAKU,GAEuB,GAApCA,GACH2H,GAAcswB,EAAW,KAG1BA,EAAYhN,GAAkB3rB,GAC9B24B,EAAUxwB,IACVE,GAAcswB,EAAW,GACzBA,EAAUxuB,EAAEsoB,EAAMrC,IAETuI,IACV1wB,KAEAQ,GAAekwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBvwB,MAGiBpI,EAAI,GAaXu5B,IACVtxB,KAEAQ,GAAe8wB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBnxB,MAnBImxB,GACHA,EAAUh4B,EAAEvB,EAAKU,GAEQ,GAArBA,GACH2H,GAAckxB,EAAW,KAG1BA,EAAY3N,GAAkB5rB,GAC9Bu5B,EAAUpxB,IACVE,GAAckxB,EAAW,GACzBA,EAAUpvB,EAAEyoB,EAAM,SAYf5E,GAA8B,KAAnBttB,GAA2BmyB,KAAsBA,EAA8B7yB,EAAI,IAAIwY,UACtGpU,EAAKwuB,EAAM,QAASC,KAGhB7E,GAAkE,KAAvDttB,GAA+DoyB,KAAsBA,EAAoC9yB,EAAI,IAAIsR,IAAM,IAAiBtR,EAAI,IAAIqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,IAAI2gB,MAAQ,KAAqB3gB,EAAI,GACxS,IAAiBA,EAAI,IAAI4jB,UACzB,KAAoB5jB,EAAI,GACxB,IAAiBA,EAAI,IAAIujB,SACzB,OACDnf,EAAKquB,EAAM,QAASK,EAErB,EACD9xB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcqwB,GACdrwB,GAAcswB,GACdtwB,GAAckxB,GACdvL,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeiwB,GACfjwB,GAAekwB,GACflwB,GAAe8wB,GACfvL,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGJiG,GAAWA,EAAU11B,IACrB21B,GAAWA,EAAU31B,IACrBu2B,GAAWA,EAAUv2B,IACRhD,EAAI,IAAI,MACzB4qB,GAAU,EACVC,GACD,EAEF,CAEA,SAASoE,GAAWvC,EAAQC,EAASC,GACpC,IAAIC,EACAmN,EACAE,EACApN,EACA6D,EAaA9a,EACAukB,EAAWC,EACXC,EAAS1W,EAAWL,GAdpB3R,KAAEA,GAAS+a,GACXzT,OAAEA,GAAWyT,GACb4N,SAAEA,GAAa5N,GACfrS,WAAEA,GAAeqS,GACjB6N,QAAEA,EAAU,IAAO7N,GACnBjR,SAAEA,GAAyBiR,GAC3B5K,iBAAEA,EAAgBxI,MAAEA,EAAKiL,WAAEA,EAAU6E,aAAEA,EAAYnB,OAAEA,GAAWhiB,EAAW,SAC/EzG,EAAoBitB,EAAQ3K,GAAkBxiB,GAASqtB,EAAa,GAAIoN,EAAoBz6B,KAC5FE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,GAAIE,EAASvtB,KACtEE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChFE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KACpFE,EAAoBitB,EAAQxE,GAAQ3oB,GAASqtB,EAAa,GAAIsN,EAAU36B,KAIxE,IAAI6b,EAAO,GAkEX,OA5CAsR,EAAOngB,MAAQogB,IACV,SAAUA,GAASC,EAAa,EAAGhb,EAAO+a,EAAQ/a,MAClD,WAAY+a,GAASC,EAAa,GAAI1T,EAASyT,EAAQzT,QACvD,aAAcyT,GAASC,EAAa,GAAI2N,EAAW5N,EAAQ4N,UAC3D,eAAgB5N,GAASC,EAAa,EAAGtS,EAAaqS,EAAQrS,YAC9D,YAAaqS,GAASC,EAAa,EAAG4N,EAAU7N,EAAQ6N,SACxD,aAAc7N,GAASC,EAAa,GAAIlR,EAAWiR,EAAQjR,SAAS,EAGzEgR,EAAO/sB,GAAG4H,OAAS,KACqB,OAAnCmlB,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGwN,EAAYlhB,EAAOrO,QAAOkO,GAAS/F,GAAW+F,EAAMnH,KAAMA,MAGlC,OAArC8a,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGyN,EAAcE,EAAS1vB,QAAOqwB,GAAWloB,GAAWkoB,EAAQtpB,KAAMA,MAG3C,QAApC8a,EAAO/sB,GAAGe,OACbksB,EAAa,EAAG0N,EAAUtnB,GAAWpB,EAAMsoB,IAGM,QAA9CxN,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGhJ,EAAYoW,EAAkBve,MAAKzY,GAAKgQ,GAAWhQ,EAAG4O,MAG3B,QAAxC8a,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGrJ,EAAW/G,GAAa5K,EAAMib,IAGQ,OAAnDH,EAAO/sB,GAAGe,OAETmV,GACHN,GAAWM,GAAI,KAAO,CACrB2B,QAAQ,EACR5F,OACA8J,WACA8V,MAAO3b,EACP0N,cAGH,EAGM,CACN3R,EACA0I,EACAkgB,EACA3kB,EACA0N,EACA6W,EACAC,EACAC,EACA1W,EACAxI,EACA0R,EACA6D,EACA5O,EACAxI,EACAiL,EACA6E,EACAnB,EACAhP,EACAqhB,EACA7e,EApFD,WACM6H,GACJpI,GAAcC,EAAMgf,EAEtB,EAkFCvN,EACAmN,EACAE,EAlFD,SAAuB1D,EAASx1B,GAC/BuF,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/Cpb,EAAKpa,GAAKw1B,EACV5J,EAAa,EAAGxR,EAAK,GAEvB,EAEA,SAAsBob,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EA0ED,QAEA,cAAkBvJ,GACjBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GAAKhH,KAAMN,EAASorB,GAAYJ,GAAmBtwB,EAAgB,CAClEqT,KAAM,EACNsH,OAAQ,GACRqhB,SAAU,GACVjgB,WAAY,EACZkgB,QAAS,EACT9e,SAAU,GACVJ,WAAY,IAEd,CAEA,cAAIA,GACH,OAAOnX,KAAKxE,GAAGK,IAAI,GACpB,GAKD,SAAS4tB,GAAmB5tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAItB,OAHAuJ,EAAU,IAAMX,EAAKpI,GACrB+I,EAAU,IAAMX,EAChBW,EAAU,IAAM/I,EACT+I,CACR,CAGA,SAAS2kB,GAAoB1uB,GAC5B,IAAIsR,EAEA0c,EADAhtB,EAAUhB,EAAI,IAElB,MAAMu7B,EAAaA,IAAsBv7B,EAAI,IAAIsR,EAAKtQ,GAChDw6B,EAAeA,IAAsBx7B,EAAI,IAAI,KAAMgB,GAEzD,IAAIy6B,EAAY,CACf7pB,KAAe5R,EAAI,IACnBkZ,OAAmBlZ,EAAI,GACvBu6B,SAAuBv6B,EAAI,GAC3Bsa,WAA2Bta,EAAI,GAC/Bw6B,QAAqBx6B,EAAI,GACzB0b,SAAuB1b,EAAI,IAM5B,OAHAsR,EAAM,IAAIoqB,GAAI,CAAEz2B,MAAOw2B,IACvBF,IAEO,CACNpzB,CAAAA,GACCsC,GAAiB6G,EAAI3R,GAAGkI,SACxB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4G,EAAKlP,EAAQI,GAC7BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACFM,IAAYhB,EAAI,MACnBw7B,IACAx6B,EAAUhB,EAAI,IACdu7B,KAGD,MAAMI,EAAc,CAAE,EACA,EAAlBj7B,IAAqBi7B,EAAY/pB,KAAgB5R,EAAI,KAClC,EAAnBU,IAAsBi7B,EAAYziB,OAAoBlZ,EAAI,IACrC,EAArBU,IAAwBi7B,EAAYpB,SAAwBv6B,EAAI,IACzC,GAAvBU,IAA2Bi7B,EAAYrhB,WAA4Bta,EAAI,IACnD,GAApBU,IAAwBi7B,EAAYnB,QAAsBx6B,EAAI,IACzC,EAArBU,IAAwBi7B,EAAYjgB,SAAwB1b,EAAI,IACpEsR,EAAI1E,KAAK+uB,EACT,EACD36B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAciJ,EAAI3R,GAAGkI,SAAUU,GAC/BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6I,EAAI3R,GAAGkI,SAAUU,GAChCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACDy4B,IACA1wB,GAAkBwG,EAAKvO,EACxB,EAEF,CAEA,SAAS4sB,GAAkB3vB,GAC1B,IAAIqsB,EACA2B,EACApD,EACAC,EACAyB,EAAa3jB,GAA4B3I,EAAI,IAC7CusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAK0tB,GAAoBd,GAAmB5tB,EAAKssB,EAAYtrB,IAG1E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,EAELpD,IACJC,EAAUnnB,EAAO1B,OAAQ,SAAyBhC,EAAI,KACtD4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAGylB,GAAW,IAAR/kB,GAAM+kB,EACb,GAA6E,IAAzE/kB,EAA8E,CAEjF,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA4B3I,EAAI,IAGxCgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAY6jB,GAAmB5tB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAK0tB,GAAoB3kB,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,GAC1B6nB,GAAU,EACVC,GACD,EAEF,CAEA,SAASgF,GAAWnD,EAAQC,EAASC,GACpC,IAAI5D,EACA4S,EACA7c,EACAF,EACAgd,EACAhP,GACArS,MAAEA,GAAUmS,GACZjR,SAAEA,GAAyBiR,GAC3BjO,QAAEA,EAAO4K,SAAEA,EAAQnE,QAAEA,EAAOrR,WAAEA,EAAU0H,UAAEA,EAASkG,0BAAEA,EAAyB8C,WAAEA,GAAete,EAAW,SAC9GzG,EAAoBitB,EAAQhO,GAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQpD,GAAU/pB,GAASqtB,EAAa,GAAIgP,EAAYr8B,KAC5EE,EAAoBitB,EAAQ5Y,GAAYvU,GAASqtB,EAAa,GAAI5D,EAAczpB,KAChFE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQhL,GAA2BniB,GAASqtB,EAAa,GAAIiP,EAA6Bt8B,KAC9GE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChF,IAAI2Z,EAAQqhB,EAAUjgB,EAClBrN,EACAwK,EAEAupB,EAJ8BxG,EAAU,GAGxCpf,EAAO,GAEPmL,EAAiB,CAAE,EAEvB,SAASjL,IACRzG,IAAS,IAAMsG,GAAcC,EAAMZ,IAAQ+L,EAAgBpB,EAC5D,CAmEA,OA1DAuH,EAAOngB,MAAQogB,IACV,UAAWA,GAASC,EAAa,EAAGpS,EAAQmS,EAAQnS,OACpD,aAAcmS,GAASC,EAAa,EAAGlR,EAAWiR,EAAQjR,SAAS,EAGxEgR,EAAO/sB,GAAG4H,OAAS,KAYlB,GAX6C,QAAzCmlB,EAAO/sB,GAAGe,QAEZksB,EAAa,GAAI3f,EAAQyP,GAAalC,EAAM,GAAIqS,IAChDD,EAAa,GAAInV,EAAM/E,GAAOf,GAAU+K,GAAalC,EAAMG,IAAI,GAAIkS,OAIM,QAAvEH,EAAO/sB,GAAGe,OACbksB,EAAa,GAAIoU,EAAiBtlB,IAAamgB,EAA6Bhd,OAAa1f,IAGI,OAA1FutB,EAAO/sB,GAAGe,MAAwF,CAEpGksB,EAAa,EAAG1T,EAAS,IACzB0T,EAAa,EAAG2N,EAAW,IAE3B,IAAK,IAAI52B,KAASob,EACjB,GAAIpb,EAAM6T,QAAU+D,GAAgB5X,EAAOsJ,EAAOwK,EAAKupB,GAAiB,CACvE,IAAIjoB,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,GAEvCsE,GAAQpY,EAAMmU,SACjByiB,EAAS16B,KAAKkZ,GAEdG,EAAOrZ,KAAKkZ,EAEd,CAGDsB,GAAmBkgB,EAAUvR,GAC7B4D,EAAa,EAAGtS,EAAaD,GAAmBnB,EAAQ8P,IAGxD1N,GAEF,CAEuE,OAAnEoR,EAAO/sB,GAAGe,OACbksB,EAAa,EAAG4N,EAAUoB,EAAUhxB,KAAIjH,IACvC,IAAIoV,EASJ,OAPIpV,GAASA,EAAM6T,QAAU+D,GAAgB5X,EAAOsJ,EAAOwK,EAAKiE,IAC/D3C,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,GACvC4C,GAAmB,CAACtB,GAAQiQ,IAE5BjQ,EAAQ,KAGFA,CAAK,IAEd,EAGM,CACNyB,EACAkB,EACAxC,EACAqhB,EACAjgB,EACAkgB,EACApf,EACAsD,EACA4K,EACAxV,EACA0H,EACAkG,EACA8C,EACAlJ,EACArO,EACAwK,EACAupB,EACAhY,EACA4S,EACA7c,EACAF,EACAgd,EACAhP,EAxFD,SAAqB2J,EAASx1B,GAC7BuF,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/Cpb,EAAKpa,GAAKw1B,EACV5J,EAAa,EAAGxR,EAAK,GAEvB,EAsFD,CAEA,MAAM0gB,WAAaxvB,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASgsB,GAAYF,GAAmBpxB,EAAgB,CAAEic,MAAO,EAAGkB,SAAU,GAC1F,EAKD,SAAS4T,GAAiBtvB,EAAKoJ,EAAMpI,GACpC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAAS8jB,GAAmB7tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASskB,GAAoBruB,GAC5B,IAAImuB,EACAhK,EACA4S,EACAsK,EACAlW,EACAT,EACA0D,EACAxD,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdkhB,EAAOlhB,EAAQ,QACfynB,EAAIlnB,IACJY,EAAK+f,EAAM,WAAY4S,EAAsBjkB,GAAqB9S,EAAI,IAAK,KAC3EoE,EAAK+f,EAAM,aAAckd,EAA8CrhC,EAAI,GAAG2d,OAAgB3d,EAAI,MAClGoE,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,IAAIsT,cACvHlP,EAAK+pB,EAAK,OAAQ,eAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBL,EAAOgsB,EAAKhK,GACZhiB,EAAOgsB,EAAKzD,GAEPE,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMigB,EAA0BnkB,EAAI,GAAG2d,OAAgB3d,EAAI,OAC1H4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEsB,EAAxBvqB,GAA6Bq2B,KAAyBA,EAAsBjkB,GAAqB9S,EAAI,IAAK,MAC7GoE,EAAK+f,EAAM,WAAY4S,GAGuB,EAA3Cr2B,GAAgD2gC,KAA2BA,EAA8CrhC,EAAI,GAAG2d,OAAgB3d,EAAI,OACvJoE,EAAK+f,EAAM,aAAckd,GAGtBlW,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAoD,GAAzC7G,GAA6CyqB,EAAkB5jB,OAAOrD,KAAK,KAA0BlE,EAAI,GAAG2d,OAAgB3d,EAAI,MAE9J,EAAhCU,GAAqC0tB,KAAqBA,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,IAAIsT,eACjKlP,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACVC,GACD,EAEF,CAGA,SAASyW,GAAsBthC,GAC9B,IAAIqsB,EACAsC,EAAehmB,GAAkC3I,EAAI,IACrDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAKqtB,GAAoBR,GAAmB7tB,EAAK2uB,EAAc3tB,IAG5E,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,EAC9B,EACDjB,CAAAA,CAAEvB,EAAKU,GACN,GAAwE,GAApEA,EAAwE,CAE3E,IAAIM,EAEJ,IAHA2tB,EAAehmB,GAAkC3I,EAAI,IAGhDgB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAY8jB,GAAmB7tB,EAAK2uB,EAAc3tB,GAEpDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAKqtB,GAAoBtkB,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAEA,KAAOrrB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAAS6vB,EAAa7vB,MACnC,CACA,EACDkE,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAASmrB,GAAgBluB,GACxB,IAAIyyB,EACAG,EACA8M,EACAhV,EACAgI,EACAC,EACAE,EACAC,EACA9E,EASJ,OAPA0R,EAAU,IAAIJ,GAAQ,CACpBr6B,MAAO,CACNi6B,QAAS,CAAEN,QAAS,CAAC2C,KACrBthC,QAAS,CAAED,UAIP,CACNmI,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACf2vB,EAAO3vB,EAAQ,OACfwH,GAAiBi1B,EAAQ//B,GAAGkI,UAC5B6iB,EAAIlnB,IACJkvB,EAAOzvB,EAAQ,OACfmB,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG2jB,cACzDvf,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG4O,SACzDxK,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAGwX,OACzD,EACDrN,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMG,GACbloB,GAAgBg1B,EAAS9M,EAAM,MAC/BzwB,EAAOywB,EAAMlI,GACbvoB,EAAOywB,EAAMF,GACb1E,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMi/B,EAAkB,CAAE,EAEW,MAAjCj/B,IACHi/B,EAAgB1/B,QAAU,CAAES,QAAOV,QAGpC0/B,EAAQ9yB,KAAK+yB,KAER3R,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG2jB,gBAClGvf,EAAKsuB,EAAM,QAASC,KAGhB3E,GAA8B,EAAnBttB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG4O,WAClGxK,EAAKwuB,EAAM,QAASC,KAGhB7E,GAA8B,EAAnBttB,GAAwBoyB,KAAsBA,EAA8B9yB,EAAI,GAAGwX,UAClGpT,EAAKquB,EAAM,QAASK,EAErB,EACD9xB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcq3B,EAAQ//B,GAAGkI,SAAUU,GACnCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAei3B,EAAQ//B,GAAGkI,SAAUU,GACpCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGR3nB,GAAkB40B,EACnB,EAEF,CAGA,SAAS6B,GAAsBvhC,GAC9B,IAAIgR,EACAgd,EAGJ,OAFAhd,EAAO,IAAI8qB,GAAK,CAAE72B,MAAO,CAAEuV,MAAuBxa,EAAI,MAE/C,CACNmI,CAAAA,GACCsC,GAAiBuG,EAAKrR,GAAGkI,SACzB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBsG,EAAM5O,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMq7B,EAAe,CAAE,EACK,EAAxBr7B,IAA2Bq7B,EAAavhB,MAAwBxa,EAAI,IACxEgR,EAAKpE,KAAKmvB,EACV,EACD/6B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc2I,EAAKrR,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeuI,EAAKrR,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBkG,EAAMjO,EACzB,EAEF,CAGA,SAASsG,GAAkBrJ,GAC1B,IAAIsR,EACA0c,EAGJ,OAFA1c,EAAM,IAAI4vB,GAAM,CAAEj8B,MAAO,CAAE2M,KAAe5R,EAAI,OAEvC,CACNmI,CAAAA,GACCsC,GAAiB6G,EAAI3R,GAAGkI,SACxB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4G,EAAKlP,EAAQI,GAC7BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMi7B,EAAc,CAAE,EACM,EAAxBj7B,IAA2Bi7B,EAAY/pB,KAAgB5R,EAAI,KAC/DsR,EAAI1E,KAAK+uB,EACT,EACD36B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAciJ,EAAI3R,GAAGkI,SAAUU,GAC/BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6I,EAAI3R,GAAGkI,SAAUU,GAChCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBwG,EAAKvO,EACxB,EAEF,CAGA,SAASy+B,GAAoBxhC,GAC5B,IAAIqsB,EACA2B,EACA1B,EAAa3jB,GAAkC3I,EAAI,IACnDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqI,GAAkBimB,GAAiBtvB,EAAKssB,EAAYtrB,IAGtE,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAA4B,EAAxBA,EAA2B,CAE9B,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAkC3I,EAAI,IAG9CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYulB,GAAiBtvB,EAAKssB,EAAYtrB,GAEhDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqI,GAAkBU,GACnCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAASsI,GAAgBrL,GACxB,IAAI4yB,EACA8M,EACAxP,EACAwC,EACAC,EACAE,EACAzC,EACA6G,EACAhU,EACA+K,EAEJ0R,EAAU,IAAIJ,GAAQ,CACpBr6B,MAAO,CACNi6B,QAAS,CAAEN,QAAS,CAAC0C,KACrBrhC,QAAS,CAAED,UAId,IAAImsB,EAA2BnsB,EAAI,IAAMkuB,GAAgBluB,GASzD,OAPAijB,EAAO,IAAIkZ,GAAK,CACdl3B,MAAO,CACNi6B,QAAS,CAAEN,QAAS,CAAC4C,KACrBvhC,QAAS,CAAED,UAIP,CACNmI,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfwH,GAAiBi1B,EAAQ//B,GAAGkI,UAC5BqoB,EAAK1sB,IACLkvB,EAAOzvB,EAAQ,OACfmtB,EAAK5sB,IACD2oB,GAAUA,EAAShkB,IACvB8uB,EAAKzzB,IACLiH,GAAiBwY,EAAKtjB,GAAGkI,UACzBzD,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG2jB,cACzDvf,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG0jB,OACzD,EACDvZ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBkI,GAAgBg1B,EAAS9M,EAAM,MAC/BzwB,EAAOywB,EAAM1C,GACb/tB,EAAOywB,EAAMF,GACbnwB,EAAOH,EAAQguB,EAAI5tB,GACf2pB,GAAUA,EAAShiB,EAAE/H,EAAQI,GACjCD,EAAOH,EAAQ60B,EAAIz0B,GACnBkI,GAAgBuY,EAAM7gB,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAG+oB,GAAW,IAARroB,GAAMqoB,EACb,MAAM4W,EAAkB,CAAE,EAEuD,MAA7Ej/B,IACHi/B,EAAgB1/B,QAAU,CAAES,QAAOV,QAGpC0/B,EAAQ9yB,KAAK+yB,KAER3R,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG2jB,gBAClGvf,EAAKsuB,EAAM,QAASC,KAGhB3E,GAA8B,EAAnBttB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG0jB,UAClGtf,EAAKwuB,EAAM,QAASC,GAGD7yB,EAAI,GACnBmsB,GACHA,EAAS5qB,EAAEvB,EAAKU,GAEY,GAAxBA,GACH2H,GAAc8jB,EAAU,KAGzBA,EAAW+B,GAAgBluB,GAC3BmsB,EAAShkB,IACTE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE8sB,EAAGt0B,WAAYs0B,IAEjB9K,IACVlkB,KAEAQ,GAAe0jB,EAAU,EAAG,GAAG,KAC9BA,EAAW,IAAI,IAGhB/jB,MAGD,MAAMq5B,EAAe,CAAE,EAEc,MAAjC/gC,IACH+gC,EAAaxhC,QAAU,CAAES,QAAOV,QAGjCijB,EAAKrW,KAAK60B,EACV,EACDzgC,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcq3B,EAAQ//B,GAAGkI,SAAUU,GACnCF,GAAc8jB,GACd9jB,GAAc4a,EAAKtjB,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAei3B,EAAQ//B,GAAGkI,SAAUU,GACpCE,GAAe0jB,GACf1jB,GAAewa,EAAKtjB,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOkwB,GACPlwB,EAAO0tB,GACP1tB,EAAOu0B,IAGRnsB,GAAkB40B,GACdvT,GAAUA,EAASnpB,EAAED,GACzB+H,GAAkBmY,EAAMlgB,EACzB,EAEF,CAEA,SAASqI,GAASshB,EAAQC,EAASC,GAClC,IAAIE,EACAjN,EACAoT,EACAC,EACAwO,GACA5Y,WAAEA,EAAUT,eAAEA,EAAcC,iBAAEA,EAAgB7H,WAAEA,EAAUlH,MAAEA,GAAUrT,EAAW,SAOrF,OANAzG,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,EAAG/M,EAActgB,KAC/EE,EAAoBitB,EAAQrE,GAAgB9oB,GAASqtB,EAAa,EAAGsG,EAAkB3zB,KACvFE,EAAoBitB,EAAQpE,GAAkB/oB,GAASqtB,EAAa,EAAGqG,EAAoB1zB,KAC3FE,EAAoBitB,EAAQjM,GAAYlhB,GAASqtB,EAAa,EAAG8U,EAAcniC,KAC/EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAE9D,CACNutB,EACAjN,EACAoT,EACAC,EACAwO,EACA5Y,EACAT,EACAC,EACA7H,EACAlH,EAEF,QAEA,cAAmBjN,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASuH,GAAUC,GAAiB9M,EAAgB,GAChE,GAGD,IAAImO,GAAQ,CACXkY,aAAAA,CAAc/gB,GAEbA,EAAQ6c,WAAWihB,YAAc,MACjC99B,EAAQ6c,WAAWkhB,aAAe,OAClC/9B,EAAQ6S,KAAO,eACf7S,EAAQ6gB,MAAMid,YAAc,CAC3BjhB,WAAY1E,GACZtc,UAAW68B,GACXzb,gBAAiB,CAACC,QAAS,QAC3BhP,SAAU,CAACV,KAAM,GACjBkI,MAAO+C,GAAU,4BACjBiI,YAAa,CAACrT,KAAM,UAAWE,MAAO,OAAQE,IAAK,YAEpDzN,EAAQ6gB,MAAMkd,aAAe,CAC5BlhB,WAAYxE,GACZxc,UAAW68B,GACXxqB,SAAU,CAAChB,MAAO,GAClBwI,MAAO+C,GAAU,6BAElB,EAEDsN,YAAAA,CAAapL,GACZA,EAAMuhB,gBA1xHR,SAAwBvhB,GACpB,OAAO/Q,GACH,CAAC+Q,EAAMqE,YAAarE,EAAMoE,YAAapE,EAAMoD,uBAAwBpD,EAAMsK,WAAYtK,EAAME,UAC7FwK,GAAQzJ,MAAwByJ,IAExC,CAqxH0B2Y,CAAerjB,GACvCA,EAAM4gB,OAlyHR,SAAe5gB,GACX,OAAO/Q,GACH,CAAC+Q,EAAM+D,aAAc/D,EAAMkE,kBAAmBlE,EAAMuhB,gBAAiBvhB,EAAM4J,iBAC3Ec,GAAQjK,GAAYtM,GAAYlD,SAAkByZ,IAE1D,CA6xHiB5J,CAAMd,EACtB,GCjyHD,SAASmR,GAAkB3vB,GAC1B,IAAIsyB,EACAnH,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCmqB,EAAOrvB,EAAQ,QACfmB,EAAKkuB,EAAM,aAA4BtyB,EAAI,GAC3C,EACDmK,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQkwB,EAAM9vB,GACJxC,EAAI,GAAGsyB,GAEnB1H,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMouB,EAAkBtyB,EAAI,KAC3F4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAG4d,GAAW,IAARld,GAAMkd,EACa,EAAtBld,GACH0D,EAAKkuB,EAAM,aAA4BtyB,EAAI,IAGxCmrB,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA+B,EAApB7G,GAAuByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,GAC7I,EACDgB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAO4vB,GAGStyB,EAAI,GAAG,MACxB4qB,GAAU,EACVC,GACD,EAEF,CAEA,SAASgF,GAAWnD,EAAQC,EAASC,GACpC,IAAIqG,EACA6O,EACAC,GACArmB,SAAEA,GAAaiR,GACf/a,KAAEA,GAAqB+a,GACvBxK,qBAAEA,EAAoBC,sBAAEA,EAAqBkG,iBAAEA,GAAqBpiB,EAAW,SACnFzG,EAAoBitB,EAAQvK,GAAsB5iB,GAASqtB,EAAa,EAAGmV,EAAwBxiC,KACnGE,EAAoBitB,EAAQtK,GAAuB7iB,GAASqtB,EAAa,GAAIkV,EAAyBviC,KACtGE,EAAoBitB,EAAQpE,GAAkB/oB,GAASqtB,EAAa,GAAIqG,EAAoB1zB,KAC5F,MAAMyiC,EAAWt8B,IACjB,IAAImQ,EACAjH,EACAqzB,EAiDJ,OA/CA38B,GAAQ,KACHoP,GAAWotB,IACdA,EAAuB,CACtBpmB,WACA9J,KAAMA,EAAOiB,GAAYjB,QAAQzS,EACjC0W,MAEF,IAGDrQ,GAAY,KACPoM,EACHgb,EAAa,EAAGqV,EAAYhP,EAAkBtV,OAAO/L,GAAQ,KAAOiE,EAAG/G,YAEvE8d,EAAa,EAAGqV,OAAY9iC,GAC5B6iC,EAAS,OAAQnsB,EAAG/G,WACrB,IAUD4d,EAAOngB,MAAQogB,IACV,aAAcA,GAASC,EAAa,EAAGlR,EAAWiR,EAAQjR,UAC1D,SAAUiR,GAASC,EAAa,EAAGhb,EAAO+a,EAAQ/a,KAAK,EAG5D8a,EAAO/sB,GAAG4H,OAAS,KAC8C,IAA5DmlB,EAAO/sB,GAAGe,OAGZksB,EAAa,EAAGhe,EADbmzB,EACuBrtB,GAAWqtB,GACnCA,EAAsB,CACtBrmB,WACA9J,KAAMA,EAAOiB,GAAYjB,QAAQzS,IAEjC4iC,EAEwBrmB,EAAShE,MAErC,EAGM,CACN7B,EACAjH,EACAqzB,EACA9f,EACAC,EACAkG,EACA5M,EACA9J,EACAmwB,EArCD,SAAsBvL,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAmCD,QAEA,cAAoBvJ,GACnBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASgsB,GAAYF,GAAmBpxB,EAAgB,CAAEmd,SAAU,EAAG9J,KAAM,GACzF,GAKD,SAAS0d,GAAiBtvB,EAAKoJ,EAAMpI,GACpC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAAS8jB,GAAmB7tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAASm4B,GAAmBliC,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAASo4B,GAAmBniC,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAASq4B,GAAmBpiC,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAASs4B,GAAmBriC,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAGtB,OAFAuJ,EAAU,IAAMX,EAAKpI,GACrB+I,EAAU,IAAM/I,EACT+I,CACR,CAEA,SAASu4B,GAAmBtiC,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASw4B,GAAoBviC,GAC5B,IAAImuB,EACA5O,EACA6O,EACAJ,EASJ,OAHAzO,EAAQ,IAAIijB,GAAM,CAAEv9B,MAAO,CAAEyW,SAAoB1b,EAAI,OACrDuf,EAAM9S,IAAI,QALV,WAA+B,IAAA,IAAA7N,EAAAC,UAAAC,OAANoqB,EAAIlqB,IAAAA,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAJiqB,EAAIjqB,GAAAJ,UAAAI,GAC5B,OAAwBe,EAAI,IAAUA,EAAI,OAAQkpB,EACnD,IAKO,CACN/gB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiB8U,EAAM5f,GAAGkI,UAC1BzD,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGsR,IACvD,EACDnH,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgB6U,EAAO4O,EAAK,MAC5BH,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAMwX,EAAgB,CAAE,EACC,EAArB/hC,EAAM,KAAkB+hC,EAAc/mB,SAAqB1b,EAAI,KACnEuf,EAAM3S,KAAK61B,KAENzU,GAAiC,GAAtBttB,EAAM,IAAsB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGsR,OACpGlN,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAckX,EAAM5f,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe8W,EAAM5f,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRrjB,GAAkByU,EACnB,EAEF,CAGA,SAAS2L,GAAkBlrB,GAC1B,IAAImuB,EACAhK,EACA4S,EACAsK,EACAlW,EACAiD,EACAxD,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdkhB,EAAOlhB,EAAQ,QACfmB,EAAK+f,EAAM,WAAY4S,EAAsBjkB,GAAsB9S,EAAI,IAAK,KAC5EoE,EAAK+f,EAAM,aAAckd,EAA8CrhC,EAAI,GAAG2d,OAAiB3d,EAAI,MACnGoE,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAqBrkB,EAAI,IAAIsT,aACxH,EACDnJ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBL,EAAOgsB,EAAKhK,GAEPyG,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMigB,EAA0BnkB,EAAI,GAAG2d,OAAiB3d,EAAI,OAC3H4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEmB,EAArBvqB,EAAM,IAAoBq2B,KAAyBA,EAAsBjkB,GAAsB9S,EAAI,IAAK,MAC3GoE,EAAK+f,EAAM,WAAY4S,GAGoB,GAAxCr2B,EAAM,IAAwC2gC,KAA2BA,EAA8CrhC,EAAI,GAAG2d,OAAiB3d,EAAI,OACtJoE,EAAK+f,EAAM,aAAckd,GAGtBlW,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAiD,IAAtC7G,EAAM,IAAqCyqB,EAAkB5jB,OAAOrD,KAAK,KAA0BlE,EAAI,GAAG2d,OAAiB3d,EAAI,MAEhK,GAA7BU,EAAM,IAA6B0tB,KAAqBA,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAqBrkB,EAAI,IAAIsT,eAChKlP,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACVC,GACD,EAEF,CAGA,SAASU,GAAkBvrB,GAC1B,IAAImuB,EACAC,EACAJ,EACA0U,EAAe/5B,GAA4B3I,EAAI,GAAG,IAClDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAI0hC,EAAa5jC,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAK2hC,GAAoBL,GAAmBtiC,EAAK0iC,EAAc1hC,IAG5E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCgmB,EAAMlrB,EAAQ,OAEd,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGqR,KACvD,EACDlH,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEpB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAIxBH,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAA2G,IAAvGA,EAAM,GAAsG,CAE/G,IAAIM,EAEJ,IAHA0hC,EAAe/5B,GAA4B3I,EAAI,GAAG,IAG7CgB,EAAI,EAAGA,EAAI0hC,EAAa5jC,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAYu4B,GAAmBtiC,EAAK0iC,EAAc1hC,GAEpDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAK2hC,GAAoB54B,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAExB,CAIA,IAFAlmB,KAEKjH,EAAI0hC,EAAa5jC,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC1D4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAAiC,GAAtBttB,EAAM,IAAsB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGqR,QACpGjN,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI0hC,EAAa5jC,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRtrB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAAS6/B,GAAoB5iC,GAC5B,IAAImuB,EACAhK,EACA4S,EACAsK,EACAlW,EACAT,EACA0D,EACAxD,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdkhB,EAAOlhB,EAAQ,QACfynB,EAAIlnB,IACJY,EAAK+f,EAAM,WAAY4S,EAAsBjkB,GAAsB9S,EAAI,IAAK,KAC5EoE,EAAK+f,EAAM,aAAckd,EAAwB,IAAyBrhC,EAAI,GAASA,EAAI,KAA6BA,EAAI,GAAG2d,OAAiB3d,EAAI,OACpJoE,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAqBrkB,EAAI,IAAIsT,cACxHlP,EAAK+pB,EAAK,OAAQ,eAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBL,EAAOgsB,EAAKhK,GACZhiB,EAAOgsB,EAAKzD,GAEPE,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMigB,EAA0BnkB,EAAI,GAAG2d,OAAiB3d,EAAI,OAC3H4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEmB,EAArBvqB,EAAM,IAAoBq2B,KAAyBA,EAAsBjkB,GAAsB9S,EAAI,IAAK,MAC3GoE,EAAK+f,EAAM,WAAY4S,GAGoC,GAAxDr2B,EAAM,IAAwD2gC,KAA2BA,EAAwB,IAAyBrhC,EAAI,GAASA,EAAI,KAA6BA,EAAI,GAAG2d,OAAiB3d,EAAI,QACvNoE,EAAK+f,EAAM,aAAckd,GAGtBlW,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAiD,IAAtC7G,EAAM,IAAqCyqB,EAAkB5jB,OAAOrD,KAAK,KAA0BlE,EAAI,GAAG2d,OAAiB3d,EAAI,MAEhK,GAA7BU,EAAM,IAA6B0tB,KAAqBA,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAqBrkB,EAAI,IAAIsT,eAChKlP,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACVC,GACD,EAEF,CAGA,SAASS,GAAkBtrB,GAC1B,IAAImuB,EACA5O,EACAmL,EACA0D,EACAJ,EASJ,OAPAzO,EAAQ,IAAIijB,GAAM,CAChBv9B,MAAO,CACNyW,SAAoB1b,EAAI,IACxB4R,KAAgB5R,EAAI,OAIhB,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiB8U,EAAM5f,GAAGkI,UAC1B6iB,EAAIlnB,IACJY,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGsR,KACvDlN,EAAK+pB,EAAK,OAAQ,eAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgB6U,EAAO4O,EAAK,MAC5BhsB,EAAOgsB,EAAKzD,GACZsD,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAM+hC,EAAgB,CAAE,EACC,EAArB/hC,EAAM,KAAkB+hC,EAAc/mB,SAAqB1b,EAAI,KAC1C,EAArBU,EAAM,KAAkB+hC,EAAc7wB,KAAiB5R,EAAI,KAC/Duf,EAAM3S,KAAK61B,KAENzU,GAAiC,GAAtBttB,EAAM,IAAsB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGsR,OACpGlN,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAckX,EAAM5f,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe8W,EAAM5f,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRrjB,GAAkByU,EACnB,EAEF,CAGA,SAASojB,GAAoB3iC,GAC5B,IAAIsuB,EACAnC,EACAH,EACAgC,EACJ,MAAMO,EAAoB,CAACjD,GAAmBsX,IACxCpU,EAAY,GAElB,SAASqU,EAAoB7iC,EAAKU,GACjC,OAA6BV,EAAI,GAAW,EACrC,CACR,CAKA,OAHAsuB,EAA2BuU,EAAoB7iC,GAC/CmsB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAEtF,CACNmI,CAAAA,GACCgkB,EAAShkB,IACT6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACTgsB,EAAUF,GAA0BnkB,EAAE/H,EAAQI,GAC9CD,EAAOH,EAAQ4pB,EAAiBxpB,GAChCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,IAAI+tB,EAAuBH,EAC3BA,EAA2BuU,EAAoB7iC,GAE3CsuB,IAA6BG,EAChCD,EAAUF,GAA0B/sB,EAAEvB,EAAKU,IAE3CuH,KAEAQ,GAAe+lB,EAAUC,GAAuB,EAAG,GAAG,KACrDD,EAAUC,GAAwB,IAAI,IAGvCrmB,KACA+jB,EAAWqC,EAAUF,GAEhBnC,EAIJA,EAAS5qB,EAAEvB,EAAKU,IAHhByrB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAC7FmsB,EAAShkB,KAKVE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,GAExC,EACDhrB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOspB,GAGRwC,EAAUF,GAA0BtrB,EAAED,EACvC,EAEF,CAGA,SAAS+/B,GAAoB9iC,GAC5B,IAAImuB,EACAG,EACAoK,EACAxI,EACAE,EACAhC,EACAJ,EACJ,MAAMO,EAAoB,CAACrD,GAAmBqX,IACxC/T,EAAY,GAElB,SAASvC,EAAkBjsB,EAAKU,GAC/B,OAA6BV,EAAI,GAAW,EACrC,CACR,CAEAsuB,EAA2BrC,EAAkBjsB,GAC7C04B,EAAYlK,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAC9F,IAAI24B,EAAsB34B,EAAI,GAAG,GAAGlB,OAAS,GAAKysB,GAAkBvrB,GAEpE,MAAO,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdy1B,EAAUvwB,IACV+nB,EAAK1sB,IACDm1B,GAAWA,EAAUxwB,IACzBioB,EAAK5sB,IACLY,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAG0b,SACvD,EACDvR,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBgsB,EAAUF,GAA0BnkB,EAAEgkB,EAAK,MAC3ChsB,EAAOgsB,EAAK+B,GACRyI,GAAWA,EAAUxuB,EAAEgkB,EAAK,MAChChsB,EAAOgsB,EAAKiC,GACZpC,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,IAAI+tB,EAAuBH,EAC3BA,EAA2BrC,EAAkBjsB,GAEzCsuB,IAA6BG,EAChCD,EAAUF,GAA0B/sB,EAAEvB,EAAKU,IAE3CuH,KAEAQ,GAAe+lB,EAAUC,GAAuB,EAAG,GAAG,KACrDD,EAAUC,GAAwB,IAAI,IAGvCrmB,KACAswB,EAAYlK,EAAUF,GAEjBoK,EAIJA,EAAUn3B,EAAEvB,EAAKU,IAHjBg4B,EAAYlK,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAC9F04B,EAAUvwB,KAKXE,GAAcqwB,EAAW,GACzBA,EAAUvuB,EAAEgkB,EAAK+B,IAGJlwB,EAAI,GAAG,GAAGlB,OAAS,EAC5B65B,GACHA,EAAUp3B,EAAEvB,EAAKU,GAEQ,EAArBA,EAAM,IACT2H,GAAcswB,EAAW,KAG1BA,EAAYpN,GAAkBvrB,GAC9B24B,EAAUxwB,IACVE,GAAcswB,EAAW,GACzBA,EAAUxuB,EAAEgkB,EAAKiC,IAERuI,IACV1wB,KAEAQ,GAAekwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBvwB,QAGI4lB,GAAiC,GAAtBttB,EAAM,IAAsB0tB,KAAqBA,EAA6BpuB,EAAI,GAAG0b,YACpGtX,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcqwB,GACdrwB,GAAcswB,GACd3K,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeiwB,GACfjwB,GAAekwB,GACf3K,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRK,EAAUF,GAA0BtrB,IAChC21B,GAAWA,EAAU31B,GAC1B,EAEF,CAGA,SAASs+B,GAAsBthC,GAC9B,IAAIqsB,EACA2B,EACA+U,EAAep6B,GAA4B3I,EAAI,GAAG,IAClDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAI+hC,EAAajkC,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAK8hC,GAAoBT,GAAmBriC,EAAK+iC,EAAc/hC,IAG5E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAA2G,IAAvGA,EAAM,GAAsG,CAE/G,IAAIM,EAEJ,IAHA+hC,EAAep6B,GAA4B3I,EAAI,GAAG,IAG7CgB,EAAI,EAAGA,EAAI+hC,EAAajkC,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAYs4B,GAAmBriC,EAAK+iC,EAAc/hC,GAEpDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAK8hC,GAAoB/4B,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAI+hC,EAAajkC,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC1D4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI+hC,EAAajkC,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAASmrB,GAAgBluB,GACxB,IAAIyyB,EACAG,EACA8M,EACAhV,EACAgI,EACAC,EACAE,EACAC,EACA9E,EASJ,OAPA0R,EAAU,IAAIJ,GAAQ,CACpBr6B,MAAO,CACNi6B,QAAS,CAAEN,QAAS,CAAC2C,KACrBthC,QAAS,CAAED,UAIP,CACNmI,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACf2vB,EAAO3vB,EAAQ,OACfwH,GAAiBi1B,EAAQ//B,GAAGkI,UAC5B6iB,EAAIlnB,IACJkvB,EAAOzvB,EAAQ,OACfmB,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG2jB,cACzDvf,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG4O,SACzDxK,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAGwX,OACzD,EACDrN,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMG,GACbloB,GAAgBg1B,EAAS9M,EAAM,MAC/BzwB,EAAOywB,EAAMlI,GACbvoB,EAAOywB,EAAMF,GACb1E,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMi/B,EAAkB,CAAE,EAEoD,GAA1Ej/B,EAAM,GAAgG,GAAvBA,EAAM,KACxFi/B,EAAgB1/B,QAAU,CAAES,QAAOV,QAGpC0/B,EAAQ9yB,KAAK+yB,KAER3R,GAAiC,GAAtBttB,EAAM,IAAsBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG2jB,gBACtGvf,EAAKsuB,EAAM,QAASC,KAGhB3E,GAAiC,GAAtBttB,EAAM,IAAsBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG4O,WACtGxK,EAAKwuB,EAAM,QAASC,KAGhB7E,GAAiC,GAAtBttB,EAAM,IAAsBoyB,KAAsBA,EAA8B9yB,EAAI,GAAGwX,UACtGpT,EAAKquB,EAAM,QAASK,EAErB,EACD9xB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcq3B,EAAQ//B,GAAGkI,SAAUU,GACnCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAei3B,EAAQ//B,GAAGkI,SAAUU,GACpCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGR3nB,GAAkB40B,EACnB,EAEF,CAGA,SAAS5R,GAAkB9tB,GAC1B,IAAIqsB,EACA2B,EACAgV,EAAer6B,GAAsC3I,EAAI,IACzDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIgiC,EAAalkC,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAKiiC,GAAoBf,GAAmBliC,EAAKgjC,EAAchiC,IAG5E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAAwD,GAApDA,EAAM,GAAkD,CAE3D,IAAIM,EAEJ,IAHAgiC,EAAer6B,GAAsC3I,EAAI,IAGpDgB,EAAI,EAAGA,EAAIgiC,EAAalkC,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAYm4B,GAAmBliC,EAAKgjC,EAAchiC,GAEpDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKiiC,GAAoBl5B,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAIgiC,EAAalkC,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC1D4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIgiC,EAAalkC,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAAS4oB,GAAkB3rB,GAC1B,IAAIqsB,EACA2B,EACAkV,EAAev6B,GAAkC3I,EAAI,IACrDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIkiC,EAAapkC,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAKmiC,GAAoBhB,GAAmBniC,EAAKkjC,EAAcliC,IAG5E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAAwD,GAApDA,EAAM,GAAkD,CAE3D,IAAIM,EAEJ,IAHAkiC,EAAev6B,GAAkC3I,EAAI,IAGhDgB,EAAI,EAAGA,EAAIkiC,EAAapkC,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAYo4B,GAAmBniC,EAAKkjC,EAAcliC,GAEpDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKmiC,GAAoBp5B,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAIkiC,EAAapkC,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC1D4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIkiC,EAAapkC,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAASkgC,GAAoBjjC,GAC5B,IAAImuB,EACAnd,EACA0Z,EACA0D,EACAJ,EASJ,OAPAhd,EAAO,IAAI8qB,GAAK,CACd72B,MAAO,CACNuV,MAAuBxa,EAAI,GAC3B0b,SAAuB1b,EAAI,OAIvB,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdwH,GAAiBuG,EAAKrR,GAAGkI,UACzB6iB,EAAIlnB,IACJY,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAG0b,SACvD,EACDvR,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBkI,GAAgBsG,EAAMmd,EAAK,MAC3BhsB,EAAOgsB,EAAKzD,GACZsD,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMq7B,EAAe,CAAE,EACQ,EAA3Br7B,EAAM,KAAwBq7B,EAAavhB,MAAwBxa,EAAI,IACxC,EAA/BU,EAAM,KAA4Bq7B,EAAargB,SAAwB1b,EAAI,KAC/EgR,EAAKpE,KAAKmvB,KAEL/N,GAAiC,GAAtBttB,EAAM,IAAsB0tB,KAAqBA,EAA6BpuB,EAAI,GAAG0b,YACpGtX,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc2I,EAAKrR,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeuI,EAAKrR,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRrjB,GAAkBkG,EACnB,EAEF,CAGA,SAASoyB,GAAoBpjC,GAC5B,IAAIgR,EACAgd,EASJ,OAPAhd,EAAO,IAAI8qB,GAAK,CACd72B,MAAO,CACNuV,MAAO,CAAUxa,EAAI,KACrB0b,SAAuB1b,EAAI,OAIvB,CACNmI,CAAAA,GACCsC,GAAiBuG,EAAKrR,GAAGkI,SACzB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBsG,EAAM5O,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMq7B,EAAe,CAAE,EACQ,EAA3Br7B,EAAM,KAAwBq7B,EAAavhB,MAAQ,CAAUxa,EAAI,MAClC,EAA/BU,EAAM,KAA4Bq7B,EAAargB,SAAwB1b,EAAI,KAC/EgR,EAAKpE,KAAKmvB,EACV,EACD/6B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc2I,EAAKrR,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAeuI,EAAKrR,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBkG,EAAMjO,EACzB,EAEF,CAGA,SAASogC,GAAoBnjC,GAC5B,IAAImuB,EACAzD,EACA0D,EACAJ,EACAqV,EAAe16B,GAAsC3I,EAAI,IACzDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIqiC,EAAavkC,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAKoiC,GAAoBhB,GAAmBpiC,EAAKqjC,EAAcriC,IAG5E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCgmB,EAAMlrB,EAAQ,OAEd,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBuiB,EAAIlnB,IACJY,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAG0b,SACvD,EACDvR,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEpB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAIxBhsB,EAAOgsB,EAAKzD,GACZsD,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAAgD,EAA5CA,EAAM,GAAyC,CAElD,IAAIM,EAEJ,IAHAqiC,EAAe16B,GAAsC3I,EAAI,IAGpDgB,EAAI,EAAGA,EAAIqiC,EAAavkC,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAYq4B,GAAmBpiC,EAAKqjC,EAAcriC,GAEpDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKoiC,GAAoBr5B,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAKzD,GAExB,CAIA,IAFAziB,KAEKjH,EAAIqiC,EAAavkC,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC1D4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAAiC,GAAtBttB,EAAM,IAAsB0tB,KAAqBA,EAA6BpuB,EAAI,GAAG0b,YACpGtX,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIqiC,EAAavkC,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRtrB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAASw+B,GAAsBvhC,GAC9B,IAAIsuB,EACAnC,EACAH,EACAgC,EACJ,MAAMO,EAAoB,CAAC5C,GAAmBmC,IACxCU,EAAY,GAElB,SAAS8U,EAAoBtjC,EAAKU,GACjC,OAA6BV,EAAI,GAAW,EACrC,CACR,CAKA,OAHAsuB,EAA2BgV,EAAoBtjC,GAC/CmsB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAEtF,CACNmI,CAAAA,GACCgkB,EAAShkB,IACT6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACTgsB,EAAUF,GAA0BnkB,EAAE/H,EAAQI,GAC9CD,EAAOH,EAAQ4pB,EAAiBxpB,GAChCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,IAAI+tB,EAAuBH,EAC3BA,EAA2BgV,EAAoBtjC,GAE3CsuB,IAA6BG,EAChCD,EAAUF,GAA0B/sB,EAAEvB,EAAKU,IAE3CuH,KAEAQ,GAAe+lB,EAAUC,GAAuB,EAAG,GAAG,KACrDD,EAAUC,GAAwB,IAAI,IAGvCrmB,KACA+jB,EAAWqC,EAAUF,GAEhBnC,EAIJA,EAAS5qB,EAAEvB,EAAKU,IAHhByrB,EAAWqC,EAAUF,GAA4BC,EAAkBD,GAA0BtuB,GAC7FmsB,EAAShkB,KAKVE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,GAExC,EACDhrB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOspB,GAGRwC,EAAUF,GAA0BtrB,EAAED,EACvC,EAEF,CAGA,SAASsrB,GAAoBruB,GAC5B,IAAIsR,EACA0c,EAaJ,OAXA1c,EAAM,IAAIoqB,GAAI,CACZz2B,MAAO,CACN2M,KAA+B5R,EAAI,GACvBA,EAAI,IACJA,EAAI,IAChB0b,SAAmC1b,EAAI,GAC3BA,EAAI,IACJA,EAAI,OAIZ,CACNmI,CAAAA,GACCsC,GAAiB6G,EAAI3R,GAAGkI,SACxB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4G,EAAKlP,EAAQI,GAC7BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMi7B,EAAc,CAAE,EAEyB,GAA3Cj7B,EAAM,KAAyCi7B,EAAY/pB,KAAgC5R,EAAI,GACvFA,EAAI,IACJA,EAAI,KAE+B,GAA3CU,EAAM,KAAyCi7B,EAAYjgB,SAAoC1b,EAAI,GAC3FA,EAAI,IACJA,EAAI,KAEhBsR,EAAI1E,KAAK+uB,EACT,EACD36B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAciJ,EAAI3R,GAAGkI,SAAUU,GAC/BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6I,EAAI3R,GAAGkI,SAAUU,GAChCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBwG,EAAKvO,EACxB,EAEF,CAGA,SAASsG,GAAkBrJ,GAC1B,IAAImuB,EACAzD,EACA0D,EACAJ,EACAW,EAAehmB,GAA4B3I,EAAI,GAAG,IAClDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAKqtB,GAAoBR,GAAmB7tB,EAAK2uB,EAAc3tB,IAG5E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCgmB,EAAMlrB,EAAQ,OAEd,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBuiB,EAAIlnB,IACJY,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAG0b,SACvD,EACDvR,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEpB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAIxBhsB,EAAOgsB,EAAKzD,GACZsD,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAA+C,GAA3CA,EAAM,GAAyC,CAElD,IAAIM,EAEJ,IAHA2tB,EAAehmB,GAA4B3I,EAAI,GAAG,IAG7CgB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAY8jB,GAAmB7tB,EAAK2uB,EAAc3tB,GAEpDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqtB,GAAoBtkB,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAKzD,GAExB,CAIA,IAFAziB,KAEKjH,EAAI2tB,EAAa7vB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC1D4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAAiC,GAAtBttB,EAAM,IAAsB0tB,KAAqBA,EAA6BpuB,EAAI,GAAG0b,YACpGtX,EAAK+pB,EAAK,QAASC,EAEpB,EACDptB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRtrB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAASy+B,GAAoBxhC,GAC5B,IAAIqsB,EACA2B,EACA1B,EAAa3jB,GAA4B3I,EAAI,GAAG,IAChDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqI,GAAkBimB,GAAiBtvB,EAAKssB,EAAYtrB,IAGtE,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,GAAuD,GAAnDA,EAAM,GAAiD,CAE1D,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAA4B3I,EAAI,GAAG,IAG3CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYulB,GAAiBtvB,EAAKssB,EAAYtrB,GAEhDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqI,GAAkBU,GACnCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAIA,IAFApkB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,CACA,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAEA,SAASsI,GAAgBrL,GACxB,IAAI4yB,EACA8M,EACAxP,EACAwC,EACAC,EACAE,EACAzC,EACA6G,EACAhU,EACA+K,EAEJ0R,EAAU,IAAIJ,GAAQ,CACpBr6B,MAAO,CACNi6B,QAAS,CAAEN,QAAS,CAAC0C,KACrBrhC,QAAS,CAAED,UAId,IAAImsB,EAA2BnsB,EAAI,IAAMkuB,GAAgBluB,GASzD,OAPAijB,EAAO,IAAIkZ,GAAK,CACdl3B,MAAO,CACNi6B,QAAS,CAAEN,QAAS,CAAC4C,KACrBvhC,QAAS,CAAED,UAIP,CACNmI,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfwH,GAAiBi1B,EAAQ//B,GAAGkI,UAC5BqoB,EAAK1sB,IACLkvB,EAAOzvB,EAAQ,OACfmtB,EAAK5sB,IACD2oB,GAAUA,EAAShkB,IACvB8uB,EAAKzzB,IACLiH,GAAiBwY,EAAKtjB,GAAGkI,UACzBzD,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG2jB,cACzDvf,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG0jB,OACzD,EACDvZ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBkI,GAAgBg1B,EAAS9M,EAAM,MAC/BzwB,EAAOywB,EAAM1C,GACb/tB,EAAOywB,EAAMF,GACbnwB,EAAOH,EAAQguB,EAAI5tB,GACf2pB,GAAUA,EAAShiB,EAAE/H,EAAQI,GACjCD,EAAOH,EAAQ60B,EAAIz0B,GACnBkI,GAAgBuY,EAAM7gB,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMi/B,EAAkB,CAAE,EAEiF,IAAvGj/B,EAAM,GAA8H,GAAvBA,EAAM,KACtHi/B,EAAgB1/B,QAAU,CAAES,QAAOV,QAGpC0/B,EAAQ9yB,KAAK+yB,KAER3R,GAAiC,GAAtBttB,EAAM,IAAsBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG2jB,gBACtGvf,EAAKsuB,EAAM,QAASC,KAGhB3E,GAAiC,GAAtBttB,EAAM,IAAsBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG0jB,UACtGtf,EAAKwuB,EAAM,QAASC,GAGD7yB,EAAI,GACnBmsB,GACHA,EAAS5qB,EAAEvB,EAAKU,GAEe,IAA3BA,EAAM,IACT2H,GAAc8jB,EAAU,KAGzBA,EAAW+B,GAAgBluB,GAC3BmsB,EAAShkB,IACTE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE8sB,EAAGt0B,WAAYs0B,IAEjB9K,IACVlkB,KAEAQ,GAAe0jB,EAAU,EAAG,GAAG,KAC9BA,EAAW,IAAI,IAGhB/jB,MAGD,MAAMq5B,EAAe,CAAE,EAEgC,GAAnD/gC,EAAM,GAAyE,GAAvBA,EAAM,KACjE+gC,EAAaxhC,QAAU,CAAES,QAAOV,QAGjCijB,EAAKrW,KAAK60B,EACV,EACDzgC,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcq3B,EAAQ//B,GAAGkI,SAAUU,GACnCF,GAAc8jB,GACd9jB,GAAc4a,EAAKtjB,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAei3B,EAAQ//B,GAAGkI,SAAUU,GACpCE,GAAe0jB,GACf1jB,GAAewa,EAAKtjB,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOkwB,GACPlwB,EAAO0tB,GACP1tB,EAAOu0B,IAGRnsB,GAAkB40B,GACdvT,GAAUA,EAASnpB,EAAED,GACzB+H,GAAkBmY,EAAMlgB,EACzB,EAEF,CAEA,SAASqI,GAASshB,EAAQC,EAASC,GAClC,IAAI/M,EACA0jB,EACAC,EACA1W,EACAmG,EACAC,EACAwO,EASA+B,GARAC,oBAAEA,EAAmB5a,WAAEA,EAAU6a,eAAEA,EAActb,eAAEA,EAAcC,iBAAEA,EAAgB7H,WAAEA,EAAUlH,MAAEA,GAAUrT,EAAW,SAC1HzG,EAAoBitB,EAAQgX,GAAqBnkC,GAASqtB,EAAa,EAAG4W,EAAuBjkC,KACjGE,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,EAAG/M,EAActgB,KAC/EE,EAAoBitB,EAAQiX,GAAgBpkC,GAASqtB,EAAa,EAAG2W,EAAkBhkC,KACvFE,EAAoBitB,EAAQrE,GAAgB9oB,GAASqtB,EAAa,EAAGsG,EAAkB3zB,KACvFE,EAAoBitB,EAAQpE,GAAkB/oB,GAASqtB,EAAa,EAAGqG,EAAoB1zB,KAC3FE,EAAoBitB,EAAQjM,GAAYlhB,GAASqtB,EAAa,EAAG8U,EAAcniC,KAC/EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAErE,IAAIqkC,EAAiB,GAWrB,OARAlX,EAAO/sB,GAAG4H,OAAS,KAC8D,EAA5EmlB,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAG6W,EAAQD,EACtB,CAAC3jB,EAAa0jB,GACd,CAACA,EAAiB1jB,GACrB,EAGM,CACNA,EACA0jB,EACAC,EACAC,EACAG,EACA9W,EACAmG,EACAC,EACAwO,EACAgC,EACA5a,EACA6a,EACAtb,EACAC,EACA7H,EACAlH,EA1BoBsqB,CAAC7iC,EAAGwG,IAAMolB,EAAa,EAAGgX,EAAe5iC,GAAKwG,EAAE5B,OAAS,KAAMg+B,GA6BrF,QAEA,cAAmBt3B,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASuH,GAAUC,GAAiB9M,EAAgB,CAAE,EAAE,KAAM,EAAE,GAAI,GAChF,GAGD,IAAImO,GAAQ,CACRkY,aAAAA,CAAc/gB,GACVA,EAAQ6/B,qBAAsB,EAE9B7/B,EAAQ6c,WAAWojB,oBAAsB,YACzCjgC,EAAQ6c,WAAWqjB,qBAAuB,YAC1ClgC,EAAQ6S,KAAO,uBACf7S,EAAQ6gB,MAAMof,oBAAsB,CAChCpjB,WAAY1E,GACZtc,UAAW68B,GACXxqB,SAAU,CAACV,KAAM,GACjBkI,MAAO+C,GAAU,sCAErBzY,EAAQ6gB,MAAMqf,qBAAuB,CACjCrjB,WAAYxE,GACZxc,UAAW68B,GACXxqB,SAAU,CAAChB,MAAO,GAClBwI,MAAO+C,GAAU,sCAExB,EAEDsN,YAAAA,CAAapL,GACH,WAAYA,GACdwlB,GAASpa,aAAapL,GAEpB,mBAAoBA,IACtBA,EAAMmlB,eAAiBplB,GAAcC,GAE7C,GC/qDJ,SAASggB,GAAkBx+B,GAC1B,IAAIsyB,EACAnH,EACAP,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCmqB,EAAOrvB,EAAQ,OACf,EACDkH,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQkwB,EAAM9vB,GACJxC,EAAI,GAAGsyB,GAEnB1H,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMouB,EAAkBtyB,EAAI,KAC3F4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAG4e,GAAW,IAARle,GAAMke,EACTuM,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA+B,EAApB7G,GAAuByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,GAC7I,EACDgB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAO4vB,GAGStyB,EAAI,GAAG,MACxB4qB,GAAU,EACVC,GACD,EAEF,CAEA,SAASiU,GAAWpS,EAAQC,EAASC,GACpC,IAAIkV,EACAC,EAMAlsB,EACAjH,GANA8M,SAAEA,GAAaiR,GACf/a,KAAEA,GAAqB+a,GACvBxK,qBAAEA,EAAoBC,sBAAEA,GAA0Blc,EAAW,SA4CjE,OA3CAzG,EAAoBitB,EAAQvK,GAAsB5iB,GAASqtB,EAAa,EAAGmV,EAAwBxiC,KACnGE,EAAoBitB,EAAQtK,GAAuB7iB,GAASqtB,EAAa,EAAGkV,EAAyBviC,KAIrG+F,GAAQ,KACHoP,GAAWotB,IACdA,EAAuB,CACtBpmB,WACA9J,KAAMA,EAAOiB,GAAYjB,QAAQzS,EACjC0W,MAEF,IAUD6W,EAAOngB,MAAQogB,IACV,aAAcA,GAASC,EAAa,EAAGlR,EAAWiR,EAAQjR,UAC1D,SAAUiR,GAASC,EAAa,EAAGhb,EAAO+a,EAAQ/a,KAAK,EAG5D8a,EAAO/sB,GAAG4H,OAAS,KAC8C,IAA5DmlB,EAAO/sB,GAAGe,OAGZksB,EAAa,EAAGhe,EADbmzB,EACuBrtB,GAAWqtB,GACnCA,EAAsB,CACtBrmB,WACA9J,KAAMA,EAAOiB,GAAYjB,QAAQzS,IAEjC4iC,EAEwBrmB,EAAShE,MAErC,EAGM,CACN7B,EACAjH,EACAuT,EACAC,EACA1G,EACA9J,EACAmwB,EAnCD,SAAsBvL,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAiCD,CAEA,MAAM2sB,WAAcl2B,GACnBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASi7B,GAAYN,GAAmBjgC,EAAgB,CAAEmd,SAAU,EAAG9J,KAAM,GACzF,EAKD,SAASusB,GAAmBn+B,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,GAAKX,EAAKpI,GACb+I,CACR,CAGA,SAASq0B,GAAoBp+B,GAC5B,IAAIsyB,EACA8F,EAEJ,MAAO,CACNjwB,CAAAA,GACCmqB,EAAOrvB,EAAQ,QACfmB,EAAKkuB,EAAM,QAAS8F,EAA8Bp4B,EAAI,GAAGikC,SACzD,EACD95B,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQkwB,EAAM9vB,EACrB,EACDjB,CAAAA,CAAEvB,EAAKU,GACiB,EAAnBA,GAAwB03B,KAAsBA,EAA8Bp4B,EAAI,GAAGikC,WACtF7/B,EAAKkuB,EAAM,QAAS8F,EAErB,EACDp1B,CAAAA,CAAED,GACGA,GACHL,EAAO4vB,EAET,EAEF,CAGA,SAAS4R,GAAkBlkC,GAC1B,IAAIkjB,EACAihB,EACAvZ,EACAC,EAEJ,SAASoB,EAAkBjsB,EAAKU,GAC/B,OAAgBV,EAAI,GAAGid,SAAiB0jB,GACjCyD,EACR,CAEA,IAAIlY,EAAqBD,EAAkBjsB,GACvCmsB,EAAWD,EAAmBlsB,GAElC,MAAO,CACNmI,CAAAA,GACC+a,EAASjgB,EAAQ,UACjBkpB,EAAShkB,IACT/D,EAAK8e,EAAQ,QAASihB,EAAgCnkC,EAAI,GAAGkjB,OAC7D,EACD/Y,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ8gB,EAAQ1gB,GACvB2pB,EAAShiB,EAAE+Y,EAAQ,MAEd0H,IACJC,EAAUnnB,EAAOwf,EAAQ,QAAyBljB,EAAI,IACtD4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACFwrB,KAAwBA,EAAqBD,EAAkBjsB,MAClEmsB,EAASnpB,EAAE,GACXmpB,EAAWD,EAAmBlsB,GAE1BmsB,IACHA,EAAShkB,IACTgkB,EAAShiB,EAAE+Y,EAAQ,QAIE,EAAnBxiB,GAAwByjC,KAAwBA,EAAgCnkC,EAAI,GAAGkjB,SAC1F9e,EAAK8e,EAAQ,QAASihB,EAEvB,EACDnhC,CAAAA,CAAED,GACGA,GACHL,EAAOwgB,GAGRiJ,EAASnpB,IACT4nB,GAAU,EACVC,GACD,EAEF,CAGA,SAASuZ,GAAoBpkC,GAC5B,IAAI0qB,EAEJ,MAAO,CACNviB,CAAAA,GACCuiB,EAAIrnB,EAAK,IACT,EACD8G,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQsoB,EAAGloB,EAClB,EACDQ,CAAAA,CAAED,GACGA,GACHL,EAAOgoB,EAET,EAEF,CAGA,SAASiW,GAAoB3gC,GAC5B,IAAI0qB,EAEJ,MAAO,CACNviB,CAAAA,GACCuiB,EAAIrnB,EAAK,IACT,EACD8G,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQsoB,EAAGloB,EAClB,EACDQ,CAAAA,CAAED,GACGA,GACHL,EAAOgoB,EAET,EAEF,CAEA,SAAS+U,GAAkBz/B,GAC1B,IAAI0qB,EACA4H,EACA8F,EACA9L,EAAa3jB,GAAkB3J,MAAkBgB,EAAI,GAAG6c,QACxD0P,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKo9B,GAAoBD,GAAmBn+B,EAAKssB,EAAYtrB,IAG1E,IAAImrB,EAAuBnsB,EAAI,GAAGmM,SAASrN,QAAUolC,GAAkBlkC,GAEvE,MAAO,CACNmI,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBuiB,EAAIlnB,IACJ8uB,EAAOrvB,EAAQ,QACXkpB,GAAUA,EAAShkB,IACvB/D,EAAKkuB,EAAM,QAAS8F,EAA8Bp4B,EAAI,GAAGikC,SACzD,EACD95B,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQsoB,EAAGloB,GAClBD,EAAOH,EAAQkwB,EAAM9vB,GACjB2pB,GAAUA,EAAShiB,EAAEmoB,EAAM,KAC/B,EACD/wB,CAAAA,CAAEvB,EAAG8lB,GAAW,IAARplB,GAAMolB,EACb,GAAgC,EAA5BplB,EAA+B,CAElC,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAkB3J,MAAkBgB,EAAI,GAAG6c,QAGnD7b,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYo0B,GAAmBn+B,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAKo9B,GAAoBr0B,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEugB,EAAE/nB,WAAY+nB,GAEjC,CAEA,KAAO1pB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAASwtB,EAAWxtB,MACjC,CAEgBkB,EAAI,GAAGmM,SAASrN,OAC3BqtB,EACHA,EAAS5qB,EAAEvB,EAAKU,IAEhByrB,EAAW+X,GAAkBlkC,GAC7BmsB,EAAShkB,IACTgkB,EAAShiB,EAAEmoB,EAAM,OAERnG,IACVA,EAASnpB,EAAE,GACXmpB,EAAW,MAGW,EAAnBzrB,GAAwB03B,KAAsBA,EAA8Bp4B,EAAI,GAAGikC,WACtF7/B,EAAKkuB,EAAM,QAAS8F,EAErB,EACDp3B,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,IACHL,EAAOgoB,GACPhoB,EAAO4vB,IAGRzvB,EAAa0pB,EAAaxpB,GACtBopB,GAAUA,EAASnpB,GACxB,EAEF,CAEA,SAAS48B,GAAWlT,EAAQC,EAASC,GACpC,IAAIE,GACApR,SAAEA,GAAaiR,GACfnR,UAAEA,EAASjC,MAAEA,GAAUrT,EAAW,SACtCzG,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrE,IAAIiW,EAAU,CAAE,EAQhB,SAAS6uB,EAAOl4B,EAAUm4B,GACzB,IAAK,IAAIC,KAASp4B,EAAU,CAC3B,IAAIqJ,EAAUC,GAAW8uB,GACzB/uB,EAAQ0H,QAAUonB,EAEd9uB,EAAQyH,UACXonB,EAAO7uB,EAAQrJ,SAAUm4B,EAE3B,CACD,CAYA,OAVA5X,EAAOngB,MAAQogB,IACV,aAAcA,GAASC,EAAa,EAAGlR,EAAWiR,EAAQjR,SAAS,EAGxEgR,EAAO/sB,GAAG4H,OAAS,KACiB,GAA/BmlB,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGpX,EAAUC,GAAWiG,GACtC,EAGM,CAAClG,EAASsX,EAAQvT,EA3BzB,WACCqT,EAAa,EAAGpX,EAAQyH,UAAYzH,EAAQyH,SAAUzH,GACtD6uB,EAAO7uB,EAAQrJ,SAAUqJ,EAAQyH,UACjCzB,EAAUjU,OAAOqN,GAClB,EAuB6C8G,EAC9C,CAEA,MAAM8oB,WAAiBl4B,GACtBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAAS+7B,GAAYH,GAAmBlhC,EAAgB,CAAEmd,SAAU,GAChF,EAKD,SAAS0W,GAAmBpyB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAAS06B,GAAkBzkC,GAC1B,IAAIikC,EACAjW,EAMJ,OAJAiW,EAAW,IAAIO,GAAS,CACtBv/B,MAAO,CAAEyW,SAAuB1b,EAAI,OAG/B,CACNmI,CAAAA,GACCsC,GAAiBw5B,EAAStkC,GAAGkI,SAC7B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgBu5B,EAAU7hC,EAAQI,GAClCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMgkC,EAAmB,CAAE,EACK,EAA5BhkC,IAA+BgkC,EAAiBhpB,SAAwB1b,EAAI,KAChFikC,EAASr3B,KAAK83B,EACd,EACD1jC,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc47B,EAAStkC,GAAGkI,SAAUU,GACpCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAew7B,EAAStkC,GAAGkI,SAAUU,GACrCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBm5B,EAAUlhC,EAC7B,EAEF,CAGA,SAASsvB,GAAoBryB,GAC5B,IAAImuB,EACA+B,EACA3Q,EACA6Q,EACAhC,EACAJ,EACA7B,EAAiCnsB,EAAI,IAAMykC,GAAkBzkC,GAMjE,OAJAuf,EAAQ,IAAIijB,GAAM,CAChBv9B,MAAO,CAAEyW,SAAuB1b,EAAI,OAG/B,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACVkpB,GAAUA,EAAShkB,IACvB+nB,EAAK1sB,IACLiH,GAAiB8U,EAAM5f,GAAGkI,UAC1BuoB,EAAK5sB,IACLY,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAG0b,UACvDhX,EAAUypB,EAAK,aAAcptB,GAAgBf,EAAI,GAAGoG,IAAiBpG,EAAI,MAAQ,EAAG,IAAM,MAC1FoE,EAAK+pB,EAAK,OAAQ,YAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAChB2pB,GAAUA,EAAShiB,EAAEgkB,EAAK,MAC9BhsB,EAAOgsB,EAAK+B,GACZxlB,GAAgB6U,EAAO4O,EAAK,MAC5BhsB,EAAOgsB,EAAKiC,GACZpC,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACoBV,EAAI,GACzBmsB,GACHA,EAAS5qB,EAAEvB,EAAKU,GAEkB,GAA9BA,GACH2H,GAAc8jB,EAAU,KAGzBA,EAAWsY,GAAkBzkC,GAC7BmsB,EAAShkB,IACTE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAEgkB,EAAK+B,IAEP/D,IACVlkB,KAEAQ,GAAe0jB,EAAU,EAAG,GAAG,KAC9BA,EAAW,IAAI,IAGhB/jB,MAGD,MAAMq6B,EAAgB,CAAE,EACQ,EAA5B/hC,IAA+B+hC,EAAc/mB,SAAwB1b,EAAI,KAC7Euf,EAAM3S,KAAK61B,KAENzU,GAA8B,EAAnBttB,GAAwB0tB,KAAqBA,EAA6BpuB,EAAI,GAAG0b,YAChGtX,EAAK+pB,EAAK,QAASC,KAGfJ,GAAgD,GAArCttB,IACfgE,EAAUypB,EAAK,aAAcptB,GAAgBf,EAAI,GAAGoG,IAAiBpG,EAAI,MAAQ,EAAG,IAAM,KAE3F,EACDgB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd9jB,GAAckX,EAAM5f,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf1jB,GAAe8W,EAAM5f,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGJhC,GAAUA,EAASnpB,IACvB8H,GAAkByU,EACnB,EAEF,CAEA,SAASiT,GAAkBxyB,GAC1B,IAAIyyB,EACAC,EACAC,EACAjI,EACAkI,EACAC,EACAC,EACA9E,EACA1B,EAAa3jB,GAAsC3I,EAAI,IACvDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqxB,GAAoBD,GAAmBpyB,EAAKssB,EAAYtrB,IAG1E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACfynB,EAAIlnB,IACJovB,EAAO3vB,EAAQ,OAEf,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGkkB,cACzDxf,EAAUguB,EAAM,aAA8B1yB,EAAI,GAAK,MACvDoE,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG4O,SACzDxK,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAGikB,QACzD,EACD9Z,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMC,GACbvwB,EAAOswB,EAAM/H,GACbvoB,EAAOswB,EAAMG,GAEb,IAAK,IAAI5xB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAIR5yB,EAAI,IAAI4yB,GACzB5E,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAGylB,GAAW,IAAR/kB,GAAM+kB,EASb,KARKuI,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGkkB,gBAClG9f,EAAKsuB,EAAM,QAASC,KAGhB3E,GAAmC,EAAxBttB,IACfgE,EAAUguB,EAAM,aAA8B1yB,EAAI,GAAK,MAGY,GAAhEU,EAAoE,CAEvE,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAsC3I,EAAI,IAGlDgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYqoB,GAAmBpyB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqxB,GAAoBtoB,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAEzB,CAIA,IAFA3qB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAA8B,EAAnBttB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG4O,WAClGxK,EAAKwuB,EAAM,QAASC,KAGhB7E,GAA8B,EAAnBttB,GAAwBoyB,KAAsBA,EAA8B9yB,EAAI,GAAGikB,WAClG7f,EAAKquB,EAAM,QAASK,EAErB,EACD9xB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGR5vB,EAAa0pB,EAAaxpB,GACT/C,EAAI,IAAI,KAC1B,EAEF,CAEA,SAASigC,GAAWvT,EAAQC,EAASC,GACpC,IAAI+X,EACA7X,EACA8X,EACArB,EACAsB,EACAC,GACAnB,eAAEA,EAAcoB,UAAEA,EAASC,OAAEA,EAAMC,WAAEA,EAAUC,iBAAEA,EAAgB3rB,MAAEA,GAAUrT,EAAW,SAC5FzG,EAAoBitB,EAAQiX,GAAgBpkC,GAASqtB,EAAa,EAAG2W,EAAkBhkC,KACvFE,EAAoBitB,EAAQqY,GAAWxlC,GAASqtB,EAAa,GAAI+X,EAAaplC,KAC9EE,EAAoBitB,EAAQsY,GAAQzlC,GAASqtB,EAAa,EAAGiY,EAAUtlC,KACvEE,EAAoBitB,EAAQuY,GAAY1lC,GAASqtB,EAAa,EAAGgY,EAAcrlC,KAC/EE,EAAoBitB,EAAQwY,GAAkB3lC,GAASqtB,EAAa,EAAGkY,EAAoBvlC,KAC3FE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrE,IAAI4lC,EAAc,EAalB,OAXA3/B,GAAY,KACXonB,EAAa,EAAGuY,EAAcR,EAAWxT,aAAa,IAUhD,CACNgU,EACArY,EACA8X,EACArB,EACAsB,EACAC,EACAnB,EACAoB,EACAC,EACAC,EACAC,EACA3rB,EAnBD,SAAsBid,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/CoO,EAAcpO,EACdyO,EAAWtjC,IAAIijC,EAAY,GAE7B,EAiBD,CAEA,MAAMQ,WAAgB94B,GACrBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASo8B,GAAYzN,GAAmBj0B,EAAgB,GACpE,EAKD,SAASk4B,GAAmBz2B,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAAS02B,GAAqBzgC,EAAKoJ,EAAMpI,GACxC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAAS+jB,GAAkB9tB,GAC1B,IAAImuB,EACAkQ,EACAE,EACA8G,EACAla,EACAiD,EACAxD,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdo7B,EAASp7B,EAAQ,QACjBmB,EAAKi6B,EAAQ,WAAYE,EAAwBzrB,GAAqB9S,EAAI,IAAK,KAC/EoE,EAAKi6B,EAAQ,aAAcgH,EAAgDrlC,EAAI,GAAG2d,OAAgB3d,EAAI,MACtGoE,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGmkB,MACvD/f,EAAK+pB,EAAK,OAAQ,eAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBL,EAAOgsB,EAAKkQ,GAEPzT,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMm6B,EAA4Br+B,EAAI,GAAG2d,OAAgB3d,EAAI,OAC5H4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEsB,EAAxBvqB,GAA6B69B,KAA2BA,EAAwBzrB,GAAqB9S,EAAI,IAAK,MACjHoE,EAAKi6B,EAAQ,WAAYE,GAGqB,GAA3C79B,GAAiD2kC,KAA6BA,EAAgDrlC,EAAI,GAAG2d,OAAgB3d,EAAI,OAC5JoE,EAAKi6B,EAAQ,aAAcgH,GAGxBla,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAoD,GAAzC7G,GAA6CyqB,EAAkB5jB,OAAOrD,KAAK,KAA0BlE,EAAI,GAAG2d,OAAgB3d,EAAI,MAE3K,EAAnBU,GAAwB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGmkB,OACpF/f,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACVC,GACD,EAEF,CAGA,SAASgW,GAAkB7gC,GAC1B,IAAI0yB,EACA2L,EACAE,EACA8G,EACAla,EACAwH,EACAjI,EACAkI,EACAC,EACAjI,EACAC,EACA8D,EAAehmB,GAAiC3I,EAAI,GAAYA,EAAI,IAAI6R,YACxE0a,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAK0/B,GAAsBD,GAAqBzgC,EAAK2uB,EAAc3tB,IAGhF,MAAO,CACNmH,CAAAA,GACCuqB,EAAOzvB,EAAQ,OACfo7B,EAASp7B,EAAQ,QACjBynB,EAAIlnB,IACJovB,EAAO3vB,EAAQ,OAEf,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAKi6B,EAAQ,WAAYE,EAAwBzrB,GAAqB9S,EAAI,IAAK,KAC/EoE,EAAKi6B,EAAQ,aAAcgH,EAAgDrlC,EAAI,GAAG2d,OAAgB3d,EAAI,MACtGoE,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGsjB,SACzDlf,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAGsf,MACzD,EACDnV,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQswB,EAAMlwB,GACrBL,EAAOuwB,EAAM2L,GACb97B,EAAOH,EAAQsoB,EAAGloB,GAClBD,EAAOH,EAAQwwB,EAAMpwB,GAErB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAIpBhI,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMm6B,EAA4Br+B,EAAI,GAAG2d,OAAgB3d,EAAI,OAC5H4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GAiBV,GAhBAV,EAAMirB,EAEsB,EAAxBvqB,GAA6B69B,KAA2BA,EAAwBzrB,GAAqB9S,EAAI,IAAK,MACjHoE,EAAKi6B,EAAQ,WAAYE,GAGqB,GAA3C79B,GAAiD2kC,KAA6BA,EAAgDrlC,EAAI,GAAG2d,OAAgB3d,EAAI,OAC5JoE,EAAKi6B,EAAQ,aAAcgH,GAGxBla,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAoD,GAAzC7G,GAA6CyqB,EAAkB5jB,OAAOrD,KAAK,KAA0BlE,EAAI,GAAG2d,OAAgB3d,EAAI,MAE3K,EAAnBU,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGsjB,UACtFlf,EAAKsuB,EAAM,QAASC,GAG2B,GAA5CjyB,EAAgD,CAEnD,IAAIM,EAEJ,IAHA2tB,EAAehmB,GAAiC3I,EAAI,GAAYA,EAAI,IAAI6R,YAGnE7Q,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAY02B,GAAqBzgC,EAAK2uB,EAAc3tB,GAEtDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAK0/B,GAAsB32B,GACvCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAEzB,CAEA,KAAO5xB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAAS6vB,EAAa7vB,MACnC,CAEuB,EAAnB4B,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAGsf,QACtFlb,EAAKwuB,EAAM,QAASC,EAErB,EACD7vB,CAAAA,CAAED,GACGA,IACHL,EAAOgwB,GACPhwB,EAAOgoB,GACPhoB,EAAOkwB,IAGR/vB,EAAa0pB,EAAaxpB,GAC1B6nB,GAAU,EACVC,GACD,EAEF,CAGA,SAAS6V,GAAsB1gC,GAC9B,IAAImuB,EACAkQ,EACAE,EACApT,EACAT,EACA0D,EACAxD,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdo7B,EAASp7B,EAAQ,QACjBynB,EAAIlnB,IACJY,EAAKi6B,EAAQ,WAAYE,EAAiCv+B,EAAI,IAAI,IAClEoE,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGmkB,MACvD/f,EAAK+pB,EAAK,OAAQ,eAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpBL,EAAOgsB,EAAKkQ,GACZl8B,EAAOgsB,EAAKzD,GAEPE,IACJC,EAAUjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMm6B,EAAiBr+B,EAAI,IAAI,KAC9F4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EAEkC,GAApCvqB,GAA0C69B,KAA2BA,EAAiCv+B,EAAI,IAAI,KACjHoE,EAAKi6B,EAAQ,WAAYE,GAGtBpT,GAAqB9sB,EAAY8sB,EAAkB5jB,SAA+C,GAApC7G,GAAwCyqB,EAAkB5jB,OAAOrD,KAAK,KAAelE,EAAI,IAAI,IAExI,EAAnBU,GAAwB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGmkB,OACpF/f,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACVC,GACD,EAEF,CAGA,SAAS6L,GAAoB12B,GAC5B,IAAImuB,EACAsK,EACA/N,EACA0D,EAEJ,SAASnC,EAAkBjsB,EAAKU,GAG/B,OAF8B,EAA1BA,IAA6B+3B,EAAU,MAC5B,MAAXA,IAAiBA,IAAY9kB,GAA4B3T,EAAI,KAC7Dy4B,EAAgBoI,GACb/S,EACR,CAEA,IAAI5B,EAAqBD,EAAkBjsB,GAAM,GAC7CmsB,EAAWD,EAAmBlsB,GAElC,MAAO,CACNmI,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdkpB,EAAShkB,IACTuiB,EAAIlnB,IACJY,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,IAAIsT,aACvH,EACDnJ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GACpB2pB,EAAShiB,EAAEgkB,EAAK,MAChBhsB,EAAOgsB,EAAKzD,EACZ,EACDnpB,CAAAA,CAAEvB,EAAKU,GACFwrB,KAAwBA,EAAqBD,EAAkBjsB,EAAKU,KAAWyrB,EAClFA,EAAS5qB,EAAEvB,EAAKU,IAEhByrB,EAASnpB,EAAE,GACXmpB,EAAWD,EAAmBlsB,GAE1BmsB,IACHA,EAAShkB,IACTgkB,EAAShiB,EAAEgkB,EAAKzD,KAIkB,EAAhChqB,GAAqC0tB,KAAqBA,EAAmCpuB,EAAI,GAAGsR,IAAM,IAAiBtR,EAAI,GAAGqkB,WAAoBrkB,EAAI,IAAIsT,eACjKlP,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRhC,EAASnpB,GACV,EAEF,CAEA,SAASowB,GAAkBpzB,GAC1B,IAAIyyB,EACAC,EACAC,EACAjI,EACAkI,EACAC,EACAC,EACAxG,EAAa3jB,GAAkC3I,EAAI,IACnDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAK01B,GAAoBD,GAAmBz2B,EAAKssB,EAAYtrB,IAG1E,MAAO,CACNmH,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OAEf,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBuiB,EAAIlnB,IACJovB,EAAO3vB,EAAQ,OACfmB,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAGqR,MACzDjN,EAAKsuB,EAAM,OAAQ,OACnBtuB,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG2jB,cACzDvf,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAG0jB,OACzD,EACDvZ,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMC,GAEb,IAAK,IAAI1xB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEuoB,EAAM,MAIzBvwB,EAAOswB,EAAM/H,GACbvoB,EAAOswB,EAAMG,GACI5yB,EAAI,IAAIyyB,EACzB,EACDlxB,CAAAA,CAAEvB,EAAG+oB,GAAW,IAARroB,GAAMqoB,EACb,GAAmG,IAA/FroB,EAAoG,CAEvG,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAkC3I,EAAI,IAG9CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAY0sB,GAAmBz2B,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAK01B,GAAoB3sB,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEuoB,EAAM,MAEzB,CAEA,KAAO1xB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAASwtB,EAAWxtB,MACjC,CAEuB,EAAnB4B,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAGqR,OACtFjN,EAAKsuB,EAAM,QAASC,GAGE,EAAnBjyB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG2jB,eACtFvf,EAAKwuB,EAAM,QAASC,GAGE,EAAnBnyB,GAAwBoyB,KAAsBA,EAA8B9yB,EAAI,GAAG0jB,SACtFtf,EAAKquB,EAAM,QAASK,EAErB,EACD9xB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGR5vB,EAAa0pB,EAAaxpB,GACT/C,EAAI,IAAI,KAC1B,EAEF,CAEA,SAAS+yB,GAAWrG,EAAQC,EAASC,GACpC,IAAIE,EACA6X,EACA9kB,EACAX,EACA+T,EACAC,EACAoS,GACAP,UAAEA,EAAS1c,eAAEA,EAAcC,iBAAEA,EAAgBid,UAAEA,EAASzc,WAAEA,EAAUvG,aAAEA,EAAYhJ,MAAEA,GAAUrT,EAAW,SAgB7G,OAfAzG,EAAoBitB,EAAQqY,GAAWxlC,GAASqtB,EAAa,EAAG+X,EAAaplC,KAC7EE,EAAoBitB,EAAQrE,GAAgB9oB,GAASqtB,EAAa,EAAGsG,EAAkB3zB,KACvFE,EAAoBitB,EAAQpE,GAAkB/oB,GAASqtB,EAAa,EAAGqG,EAAoB1zB,KAC3FE,EAAoBitB,EAAQ6Y,GAAWhmC,GAASqtB,EAAa,EAAG0Y,EAAa/lC,KAC7EE,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,EAAG/M,EAActgB,KAC/EE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,EAAG1N,EAAgB3f,KACnFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAS9D,CACNutB,EACA6X,EACA9kB,EACAX,EACA+T,EACAC,EACAoS,EACAP,EACA1c,EACAC,EACAid,EACAzc,EACAvG,EACAhJ,EArBD,SAAsBid,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/CmO,EAAanO,EACbuO,EAAUpjC,IAAIgjC,EAAW,GAE3B,EAmBD,CAEA,MAAMzI,WAAe5vB,GACpBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASkvB,GAAYK,GAAmB70B,EAAgB,GACpE,EAGD,SAAS8b,GAAmBnB,EAAQ2G,EAAa2lB,EAAiBtmB,GAC9D,IAAI5E,EAAa,CAAE,EACfmrB,EAAiB,GAErB,GAAIvsB,EAAOpa,OAAQ,CACfma,GAAgBC,GAEhB,IACIqB,EADA4lB,EAAOxsB,GAAUuL,GAErB,IAAK,IAAInG,KAASG,EAAQ,CACtB,IAAIwsB,EACJ,GAAIvF,EAAM,CACN,IAAIhB,EAAQ,EACZ,IAAK,IAAIn+B,EAAI,EAAGA,EAAI6e,EAAY/gB,SAAUkC,EAAG,CACzC,IAAI6gC,EAAiB8D,GAAkBH,EAAiB3lB,EAAY7e,IAChE4kC,EAAW9zB,GAAYH,GAAUkO,EAAY7e,IAAK6gC,EAAeptB,KACjEoxB,EAAS/zB,GAAYH,GAAUkO,EAAY7e,IAAK6gC,EAAe9gC,KACnE,GAAKgY,EAAMnH,KAkBJ,CACH,GAAImH,EAAMtB,KAAOmuB,EAAU,CAEvB7sB,EAAMtB,IAAMiuB,EACZ,KACJ,CAEA,IAAI/gC,EAAMkb,EAAY7e,GAAG6Q,UAOzB,GANIyI,EAAW3V,GACX2V,EAAW3V,GAAK9E,KAAKkZ,GAErBuB,EAAW3V,GAAO,CAACoU,KAGnBA,EAAMtB,IAAMouB,GAET,CACH1G,GAASpmB,EAAMtB,IAAMmuB,EACrB,KACJ,CAJIzG,GAAS0G,EAASD,CAK1B,MArCI,GAAI7sB,EAAM9L,MAAQ44B,GAAU9sB,EAAMtB,IAAMmuB,EAAU,CAU9C,GARA7sB,EAAMnH,KAAOiO,EAAY7e,GACrB+X,EAAM9L,MAAQ24B,IAEd7sB,EAAM9L,MAAQ24B,GAGlB7sB,EAAMmC,QAAUnC,EAAM9L,MAAQ24B,GAAY,IAAOzF,IAE7CpnB,EAAMtB,IAAMouB,GAET,CACH1G,GAASpmB,EAAMtB,IAAMsB,EAAM9L,OAAgB,IAAPkzB,EACpC,KACJ,CAJIhB,GAAS0G,EAAS9sB,EAAM9L,KAKhC,CAsBJy4B,EAAaG,CACjB,CACA9sB,EAAMomB,MAAQA,EAAQ,IAAOgB,CACjC,KAAO,CAEH,IAAI9uB,EAAO,EACX,IAAK,IAAIrQ,EAAI,EAAGA,EAAI6e,EAAY/gB,SAAUkC,EAAG,CACzC,IAAI4kC,EAAW/lB,EAAY7e,GACvB6kC,EAASnzB,GAAOf,GAAUi0B,IAC9B,GAAK7sB,EAAMnH,KAUJ,CACH,GAAImH,EAAMtB,KAAOmuB,EAAU,CAEvB7sB,EAAMtB,IAAMiuB,EACZ,KACJ,CAEA,IAAI/gC,EAAMihC,EAAS/zB,UACfyI,EAAW3V,GACX2V,EAAW3V,GAAK9E,KAAKkZ,GAErBuB,EAAW3V,GAAO,CAACoU,KAErB1H,CACN,MAvBQ0H,EAAM9L,MAAQ44B,IAEd9sB,EAAMnH,KAAOg0B,EACT7sB,EAAM9L,MAAQ24B,IAEd7sB,EAAM9L,MAAQ24B,KAEhBv0B,GAiBVq0B,EAAaG,CACjB,CACA9sB,EAAM1H,KAAOA,CACjB,CAEK0H,EAAMnH,OAKP2I,GAAavH,GAAWuH,EAAU3I,KAAMmH,EAAMnH,QAC9CmH,EAAM6B,KAAOL,GAEjBA,EAAYxB,EACZ0sB,EAAe5lC,KAAKkZ,GACxB,CACJ,CAEA,MAAO,CAAC0sB,EAAgBnrB,EAC5B,CAyBA,SAASqrB,GAAkBH,EAAiB5zB,GACxC,OAAO4zB,EAAgB5zB,EAAKC,YAAc,CAAC4C,IAAKtE,GAAe,GAAIpP,IAAKoP,GAAe,GAC3F,CAIA,SAASyb,GAAkB5rB,GAC1B,IAAIqzB,EACAC,EACApD,EACA/B,EACAC,EACAjD,EACAiF,EACAmD,EACAC,EACAC,EACAzF,EACApD,EACAC,EACJ,IAAI4E,EAAiCzvB,EAAI,IAAI0zB,QAE7C,SAASC,EAAa3zB,EAAKU,GAC1B,MAAO,CACNuE,MAAO,CAAEgI,OAAO,EAAMtJ,MAAiB3D,EAAI,IAE7C,CAEIyvB,IACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UACjL,KAGD,IAAI+0B,EAAmC5zB,EAAI,IAAI0zB,QAE/C,SAASG,EAAe7zB,EAAKU,GAC5B,MAAO,CAAEuE,MAAO,CAAEtB,MAAiB3D,EAAI,IACxC,CAUA,OARI4zB,IACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC7K,KAGM,CACNsJ,CAAAA,GACCkrB,EAAUpwB,EAAQ,WACdqwB,GAAkB7oB,GAAiB6oB,EAAiB3zB,GAAGkI,UAC3DqoB,EAAK1sB,IACL2qB,EAAMlrB,EAAQ,OACdmtB,EAAK5sB,IACD+vB,GAAkB9oB,GAAiB8oB,EAAiB5zB,GAAGkI,UAC3DzD,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGwjB,WACvDpf,EAAKivB,EAAS,QAAqBrzB,EAAI,IACvCoE,EAAKivB,EAAS,QAAmBrzB,EAAI,IACrCoE,EAAKivB,EAAS,OAAQG,EAAiCxzB,EAAI,GAAK,cAAWb,GAC3EiF,EAAKivB,EAAS,WAAYI,EAAqCzzB,EAAI,GAAK,OAAIb,EAC5E,EACDgL,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQixB,EAAS7wB,GACpB8wB,GAAkB5oB,GAAgB4oB,EAAkBD,EAAS,MACjElxB,EAAOkxB,EAASnD,GAChB/tB,EAAOkxB,EAASlF,GAChBhsB,EAAOkxB,EAASjD,GACZmD,GAAkB7oB,GAAgB6oB,EAAkBF,EAAS,MAC7CrzB,EAAI,IAAIqzB,GAC5BrF,GAAU,EAELpD,IACJC,EAAU,CACTjpB,EAAiBupB,EAAoBxc,GAAWzK,KAAK,KAAMiqB,EAAiBnuB,EAAI,KAChF0D,EAAO2vB,EAAS,SAAS,WACpBh1B,EAAwB2B,EAAI,KAAiBA,EAAI,GAAGqrB,MAAMlnB,KAAMtF,UACpE,IACD6E,EAAO2vB,EAAS,WAAW,WACtBh1B,EAAwB2B,EAAI,IAAMyO,GAAqBzO,EAAI,OAAmBA,EAAI,IAAMyO,GAAqBzO,EAAI,KAAKqrB,MAAMlnB,KAAMtF,UACtI,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,GAAgBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACpL,IACD6E,EAAO2vB,EAAS,cAAc,WACzBh1B,EAA8B2B,EAAI,IAAyBA,EAAI,IAAiBA,EAAI,MAAwBA,EAAI,IAAyBA,EAAI,IAAiBA,EAAI,IAAIqrB,MAAMlnB,KAAMtF,UACtL,IACD6E,EAAO2vB,EAAS,eAAe,WAC1Bh1B,GAAa0d,GAAoB/b,EAAI,MAAQ2b,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,SAAS+b,GAAoB/b,EAAI,MAAQ2b,GAAwB3b,EAAI,KAA6BA,EAAI,IAAsBA,EAAI,MAAMqrB,MAAMlnB,KAAMtF,UAC3R,KAGD+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GAGV,GAFAV,EAAMirB,EAE2B,KAA7BvqB,EAAM,IAA+B+uB,KAAkBA,EAAiCzvB,EAAI,IAAI0zB,SAAU,CAC7G,GAAIJ,EAAkB,CACrBrrB,KACA,MAAMynB,EAAgB4D,EAEtB7qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIqnB,GACH6D,EAAmBtuB,EAA2ByqB,EAAckE,EAAa3zB,IAEzEszB,EAAiB7mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,YAAkCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAUqrB,MAAMlnB,KAAMtF,UACjL,IAEA4L,GAAiB6oB,EAAiB3zB,GAAGkI,UACrCQ,GAAcirB,EAAiB3zB,GAAGkI,SAAU,GAC5C6C,GAAgB4oB,EAAkBD,EAASnD,IAE3CoD,EAAmB,IAEpB,MAAM,GAAI7D,EAAc,CACxB,MAAMqE,EAA2B,CAAE,EACV,EAArBpzB,EAAM,KAAkBozB,EAAyBnwB,MAAkB3D,EAAI,IAC3EszB,EAAiB1mB,KAAKknB,EACvB,CAQA,KANK9F,GAAiC,EAAtBttB,EAAM,IAAqB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGwjB,aACnGpf,EAAK+pB,EAAK,QAASC,GAGhBjD,GAAqB9sB,EAAY8sB,EAAkB5jB,SAAkC,IAAvB7G,EAAM,IAAsByqB,EAAkB5jB,OAAOrD,KAAK,KAAkBlE,EAAI,IAEjH,KAA7BU,EAAM,IAA+BkzB,KAAoBA,EAAmC5zB,EAAI,IAAI0zB,SAAU,CACjH,GAAIH,EAAkB,CACrBtrB,KACA,MAAMynB,EAAgB6D,EAEtB9qB,GAAeinB,EAAc/vB,GAAGkI,SAAU,EAAG,GAAG,KAC/CiD,GAAkB4kB,EAAe,EAAE,IAGpCtnB,IACD,CAEIwrB,GACHL,EAAmBvuB,EAA2B4uB,EAAgBC,EAAe7zB,IAE7EuzB,EAAiB9mB,IAAI,eAAe,WAC/BpO,EAAkC2B,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,UAAgCA,EAAI,IAAsBA,EAAI,IAAK,CAAC,IAAK,QAAQqrB,MAAMlnB,KAAMtF,UAC7K,IAEA4L,GAAiB8oB,EAAiB5zB,GAAGkI,UACrCQ,GAAckrB,EAAiB5zB,GAAGkI,SAAU,GAC5C6C,GAAgB6oB,EAAkBF,EAAS,OAE3CE,EAAmB,IAEpB,MAAM,GAAIK,EAAgB,CAC1B,MAAMG,EAA2B,CAAE,EACV,EAArBrzB,EAAM,KAAkBqzB,EAAyBpwB,MAAkB3D,EAAI,IAC3EuzB,EAAiB3mB,KAAKmnB,EACvB,GAEK/F,GAAkC,GAAvBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAqBrzB,EAAI,MAGnCguB,GAAgC,GAArBttB,EAAM,KACrB0D,EAAKivB,EAAS,QAAmBrzB,EAAI,MAGjCguB,GAAkC,IAAvBttB,EAAM,IAAwB8yB,KAAwBA,EAAiCxzB,EAAI,GAAK,cAAWb,KAC1HiF,EAAKivB,EAAS,OAAQG,KAGlBxF,GAAkC,IAAvBttB,EAAM,IAAwB+yB,KAA4BA,EAAqCzzB,EAAI,GAAK,OAAIb,KAC3HiF,EAAKivB,EAAS,WAAYI,EAE3B,EACDzyB,CAAAA,CAAEuH,GACGylB,IACAsF,GAAkBjrB,GAAcirB,EAAiB3zB,GAAGkI,SAAUU,GAC9DgrB,GAAkBlrB,GAAckrB,EAAiB5zB,GAAGkI,SAAUU,GAClEylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACG+qB,GAAkB7qB,GAAe6qB,EAAiB3zB,GAAGkI,SAAUU,GAC/DgrB,GAAkB9qB,GAAe8qB,EAAiB5zB,GAAGkI,SAAUU,GACnEylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO2wB,GAGJC,GAAkBxoB,GAAkBwoB,GACpCC,GAAkBzoB,GAAkByoB,GACpBvzB,EAAI,IAAI,MAC5B4qB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAEA,SAASiM,GAAkB92B,GAC1B,IAAIgsB,EACAgC,EACA7B,EAAqBnsB,EAAI,GAAK,GAAK4rB,GAAkB5rB,GAEzD,MAAO,CACNmI,CAAAA,GACKgkB,GAAUA,EAAShkB,IACvB6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACL2pB,GAAUA,EAAShiB,EAAE/H,EAAQI,GACjCD,EAAOH,EAAQ4pB,EAAiBxpB,GAChCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACQV,EAAI,GAAK,EAClBmsB,GACHA,EAAS5qB,EAAEvB,EAAKU,GAES,EAArBA,EAAM,IACT2H,GAAc8jB,EAAU,KAGzBA,EAAWP,GAAkB5rB,GAC7BmsB,EAAShkB,IACTE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,IAE9BG,IACVlkB,KAEAQ,GAAe0jB,EAAU,EAAG,GAAG,KAC9BA,EAAW,IAAI,IAGhB/jB,KAED,EACDpH,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOspB,GAGJG,GAAUA,EAASnpB,EAAED,EAC1B,EAEF,CAEA,SAASixB,GAAWtH,EAAQC,EAASC,GACpC,IAAI1N,EACA+U,EACAnE,EACAuE,EACAC,EACAC,EACAzH,EACA0H,EACAC,EACAC,EACAC,EACAC,EACA/V,EACAgW,EACAC,EACAgR,EACA/Q,EACAC,EACArE,EAyBA9a,EACAlS,EACAmU,EACAmd,EACApwB,EACA+J,EACA8K,EACA4b,GA/BAvc,MAAEA,GAAU4T,GACZyN,UAAEA,EAAY,IAAOzN,GACrBrS,WAAEA,EAAa,CAAA,GAAOqS,GACtBjR,SAAEA,GAAyBiR,GAC3BtT,gBAAEA,EAAe6H,gBAAEA,EAAe/D,qBAAEA,EAAoBC,eAAEA,EAAcgE,WAAEA,EAAU9H,aAAEA,EAAY6H,WAAEA,EAAUE,cAAEA,EAAapH,gBAAEA,EAAeqH,gBAAEA,EAAeC,gBAAEA,EAAe/F,UAAEA,EAAS+G,aAAEA,EAAYO,UAAEA,EAASvJ,MAAEA,EAAKE,MAAEA,GAAKD,eAAEA,GAAc6P,aAAEA,GAAYE,UAAEA,GAASnE,OAAEA,IAAWlf,EAAW,SACvSzG,EAAoBitB,EAAQrT,GAAiB9Z,GAASqtB,EAAa,GAAI6H,EAAmBl1B,KAC1FE,EAAoBitB,EAAQxL,GAAiB3hB,GAASqtB,EAAa,GAAIyH,EAAmB90B,KAC1FE,EAAoBitB,EAAQvP,GAAsB5d,GAASqtB,EAAa,GAAIkI,EAAwBv1B,KACpGE,EAAoBitB,EAAQtP,GAAgB7d,GAASqtB,EAAa,GAAIgI,EAAkBr1B,KACxFE,EAAoBitB,EAAQtL,GAAY7hB,GAASqtB,EAAa,GAAIiI,EAAct1B,KAChFE,EAAoBitB,EAAQpT,GAAc/Z,GAASqtB,EAAa,GAAI4H,EAAgBj1B,KACpFE,EAAoBitB,EAAQvL,GAAY5hB,GAASqtB,EAAa,GAAIqH,EAAc10B,KAChFE,EAAoBitB,EAAQrL,GAAe9hB,GAASqtB,EAAa,GAAI0H,EAAiB/0B,KACtFE,EAAoBitB,EAAQzS,GAAiB1a,GAASqtB,EAAa,GAAI8H,EAAmBn1B,KAC1FE,EAAoBitB,EAAQpL,GAAiB/hB,GAASqtB,EAAa,EAAGmI,EAAmBx1B,KACzFE,EAAoBitB,EAAQnL,GAAiBhiB,GAASqtB,EAAa,GAAIoI,EAAmBz1B,KAC1FE,EAAoBitB,EAAQlR,GAAWjc,GAASqtB,EAAa,GAAI/N,EAAatf,KAC9EE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,GAAI1N,EAAgB3f,KACpFE,EAAoBitB,EAAQ5J,GAAWvjB,GAASqtB,EAAa,GAAIkZ,EAAavmC,KAC9EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQjT,IAAOla,GAASqtB,EAAa,GAAIkD,EAASvwB,KACtEE,EAAoBitB,EAAQlT,IAAgBja,GAASqtB,EAAa,GAAI2H,EAAkBh1B,KACxFE,EAAoBitB,EAAQrD,IAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KACpFE,EAAoBitB,EAAQnD,IAAWhqB,GAASqtB,EAAa,GAAI+H,EAAap1B,KAS9E,IAAIyb,GAASW,GAAY5C,EAAMpV,MAAMmU,SAAW,EAAI,EAChDggB,GAAQ,EAmBZ,SAASvC,GAAcz3B,EAAIga,GAC1B,OAAQ6D,GAAY7D,IAAYpD,GAAW5W,GACzCuR,GAAWvR,EAAG,CACd6F,MAAOiW,GAAsBjW,GAC7BkS,KACAxG,UACAqH,KAAMD,GAAqBqZ,UAE3B3wB,CACH,CAkGA,OA5HAmG,GAAQ,KACHoP,GAAW4f,IACdA,EAAe,CACd3wB,MAAOiW,GAAsBjW,GAC7B+V,WACA7D,KACAa,KAAMD,GAAqBqZ,IAE7B,IAGDtqB,GAAY,KACPkP,GAAW2f,KAAsB1Y,GAAY7D,IAChD5C,IAAK,IAAMmf,EAAiB,CAAE3d,KAAMD,GAAqBqZ,MAAY,MAAO1K,GAC7E,IAqCDsH,EAAOngB,MAAQogB,IACV,UAAWA,GAASC,EAAa,GAAI7T,EAAQ4T,EAAQ5T,OACrD,cAAe4T,GAASC,EAAa,GAAIwN,EAAYzN,EAAQyN,WAC7D,eAAgBzN,GAASC,EAAa,GAAItS,EAAaqS,EAAQrS,YAC/D,aAAcqS,GAASC,EAAa,GAAIlR,EAAWiR,EAAQjR,SAAS,EAGzEgR,EAAO/sB,GAAG4H,OAAS,KAKlB,GAJmC,EAA/BmlB,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAGjpB,EAAQoV,EAAMpV,OAGmC,GAA9D+oB,EAAO/sB,GAAGe,MAAM,GAAuN,QAApKgsB,EAAO/sB,GAAGe,MAAM,GACtF,CAIC,GAHAksB,EAAa,EAAG9U,EAAUnU,EAAMmU,SAG5B,UAAWiB,EAAO,CACrB,IAAI0e,EAAO1e,EAAMmC,OAAS4qB,EAC1BlZ,EAAa,EAAGkL,GAAQ/e,EAAMomB,MAAQ2G,GACtClZ,EAAa,EAAG/nB,EAAQ,QAAQ4yB,aAAqBK,QACtD,MAEClL,EAAa,EAAGkL,GAAqB,IAAb/e,EAAM1H,MAE9Bub,EAAa,EAAG/nB,EAAQ,SAASizB,QAGlC,IAAItC,EAAU7xB,EAAMqU,iBAAmBqF,GAAwB1Z,EAAOkb,IAAeiW,GAAyBD,EAC1GY,EAAW9xB,EAAMuU,WAAaqF,GAAkB5Z,EAAOkb,IAAe+V,EACtEc,EAAY1a,GAEhB,GAAIrX,EAAMgyB,QAAS,CAElB,IAAKA,EAASoQ,GAAapiC,EAAMgyB,QAE7Bja,IAAaqqB,IAChBrQ,EAAYC,EAEd,CAEA/I,EAAa,EAAG/nB,GAAS,cAAc6wB,QAEnCF,GACH5I,EAAa,EAAG/nB,GAAS,oBAAoB2wB,MAG1CC,GACH7I,EAAa,EAAG/nB,GAAS,SAAS4wB,MAGnC7I,EAAa,EAAG/nB,GAASlB,EAAMyU,OAAOyd,KAAK,MAG3CjJ,EAAa,EAAGqI,EAAU,CACzBlZ,GAAQjE,GAAWgV,EAAO/Q,QAAU+Q,EAAOnpB,SACxCgxB,EAAW,GAAIhxB,MACfqW,GAAmB0a,EAAkB/wB,EAAOmsB,IAC9C+F,KAAK,KACR,CAGmC,EAAhCnJ,EAAO/sB,GAAGe,MAAM,GAA6G,KAAzFgsB,EAAO/sB,GAAGe,MAAM,IAEvDksB,EAAa,GAAIlT,EAAU9K,GAAWwK,GAAmBL,EAAO0b,EAAkBD,EAAe1H,EAAQyH,EAAiBzE,GAASlhB,GAG/F,EAAjC8d,EAAO/sB,GAAGe,MAAM,GAA0D,IAArCgsB,EAAO/sB,GAAGe,MAAM,IAExDksB,EAAa,EAAG0I,GAAWvZ,GAAQjE,IAAYyd,GAActB,EAAanc,GAC3E,EAGM,CACNnU,EACAmU,EACAggB,GACAhL,EACAjX,EACAof,EACApwB,EACA+J,EACA0mB,EACAP,EACAC,EACArE,EACAtX,EACA6H,EACA/D,EACAC,EACAgE,EACA9H,EACA6H,EACAE,EACApH,EACAqH,EACAC,EACA/F,EACA+G,EACAO,EACAvJ,EACAE,GACAD,GACA6P,GACAE,GACAgM,GAhID,SAA2BO,EAAaC,GACvC,OAAOD,EAAYxE,OACjBjiB,GAAWymB,EAAYxE,OAAO0E,KAAKryB,EAAO0L,EAAS0mB,OAAQ52B,EAAW,CAAC6b,GAAQU,GAAW3C,EAAMC,mBAChG7Z,CACH,EA8HC4Z,EACAqhB,EACA9f,EACAoB,EA/HD,WACC,IAAK7F,EACJ,OAAO,EAGR,IAAIogB,EAAI9f,GAAON,GAEf,OADA+W,EAAa,GAAI5R,GAjYnB,SAAyBjC,EAAOqhB,EAAW9f,EAAYnE,EAAQqB,GAC3DuB,EAAM+B,IAAM,EACZ/B,EAAMgC,OAAS5E,EACf,IAAI6E,EAAS,EACTrW,EAAMoU,EAAMnH,KAAKC,UACrByI,EAAaA,IAAa3V,IAAQ,GAClC,IAAIuU,EAAS,IAAIkhB,KAAc9f,GAC/BpB,EAAOC,MAAK,CAAC3a,EAAGC,KAAOD,EAAEsc,KAAO,IAAMrc,EAAEqc,KAAO,IAAMtc,EAAEyO,MAAQxO,EAAEwO,OAASxO,EAAEkF,MAAM6T,OAAShZ,EAAEmF,MAAM6T,SACnG,IAAK,IAAIwuB,KAAY9sB,EACjB,GAAI8sB,IAAajtB,IAGZvB,GAAUuB,EAAM9L,MAAQ+4B,EAASvuB,KAAOsB,EAAMtB,IAAMuuB,EAAS/4B,QAAU8L,EAAM+B,IAAMkrB,EAASjrB,QAAUhC,EAAMgC,OAASirB,EAASlrB,IAAK,CACpI,IAAII,EAAS8qB,EAASjrB,OAAShC,EAAM+B,IAAM,EAC3CE,GAAUE,EACVnC,EAAM+B,KAAOI,EACbnC,EAAMgC,QAAUG,CACpB,CAGJ,OAAOF,CACX,CA4W4BH,CAAgB9B,EAAOqhB,EAAW9f,EAAY2b,GAAItiB,GAAUuL,KAC/ElE,GAASib,CACjB,EAyHCjb,GACAiZ,EACAnE,EACAyE,EACAC,EACAC,EACAC,EACAC,EACAC,EACA/V,EACAgW,EACAC,EACAgR,EAnID,SAAyBtP,GACxBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAiID,CAEA,MAAM+gB,WAActqB,GACnBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GACChH,KACAN,EACAmwB,GACA8C,GACAv4B,EACA,CACCwa,MAAO,GACPqhB,UAAW,GACX9f,WAAY,GACZoB,SAAU,GACVJ,WAAY,IAEb,KACA,EAAE,GAAI,GAER,CAEA,cAAIA,GACH,OAAOnX,KAAKxE,GAAGK,IAAI,GACpB,EAKD,SAASuqB,GAAmBvqB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAItB,OAHAuJ,EAAU,IAAMX,EAAKpI,GACrB+I,EAAU,IAAMX,EAChBW,EAAU,IAAM/I,EACT+I,CACR,CAEA,SAASo3B,GAAqBnhC,EAAKoJ,EAAMpI,GACxC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASmkB,GAAgBluB,GACxB,IAEIkwB,EAEAE,EAGA6G,EAEAsB,EACAvK,EAVAiY,EAAgB,GAChBC,EAAe,IAAIt8B,IAEnB4uB,EAAwBx4B,EAAI,GAAkBA,EAAI,MAA4BA,EAAI,IAAgBA,EAAI,GAAkBA,EAAI,MAE5HusB,EAAc,GACd4Z,EAAe,IAAIv8B,IAEnB6uB,EAAsBz4B,EAAI,GAAG,IAA0BA,EAAI,IAAgBA,EAAI,GAAG,IAGlF2uB,EAAehmB,GAAkC3I,EAAI,IACzD,MAAMkJ,EAAUlJ,GAAiBA,EAAI,IAAI2D,MAEzC,IAAK,IAAI3C,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAChD,IAAI+I,EAAYo3B,GAAqBnhC,EAAK2uB,EAAc3tB,GACpD2D,EAAMuE,EAAQa,GAClBm8B,EAAavkC,IAAIgD,EAAKshC,EAAcjlC,GAAKogC,GAAsBz8B,EAAKoF,GACrE,CAEA,IAAI2uB,EAAYF,GAAajN,GAAkBvrB,GAC3CssB,EAAa3jB,GAAgC3I,EAAI,IACrD,MAAMomC,EAAYpmC,GAAiBA,EAAI,IAAI2D,MAE3C,IAAK,IAAI3C,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC9C,IAAI+I,EAAYwgB,GAAmBvqB,EAAKssB,EAAYtrB,GAChD2D,EAAMyhC,EAAUr8B,GACpBo8B,EAAaxkC,IAAIgD,EAAK4nB,EAAYvrB,GAAK+qB,GAAoBpnB,EAAKoF,GACjE,CAEA,IAAI4uB,EAAYF,GAAW9M,GAAkB3rB,GAE7C,MAAO,CACNmI,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIilC,EAAcnnC,OAAQkC,GAAK,EAC9CilC,EAAcjlC,GAAGmH,IAGlB+nB,EAAK1sB,IACDk1B,GAAWA,EAAUvwB,IACzBioB,EAAK5sB,IAEL,IAAK,IAAIxC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB8uB,EAAKzzB,IACDm1B,GAAWA,EAAUxwB,IACzBowB,EAAmB90B,GACnB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIilC,EAAcnnC,OAAQkC,GAAK,EAC1CilC,EAAcjlC,IACjBilC,EAAcjlC,GAAGmJ,EAAE/H,EAAQI,GAI7BD,EAAOH,EAAQ8tB,EAAI1tB,GACfk2B,GAAWA,EAAUvuB,EAAE/H,EAAQI,GACnCD,EAAOH,EAAQguB,EAAI5tB,GAEnB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQ60B,EAAIz0B,GACfm2B,GAAWA,EAAUxuB,EAAE/H,EAAQI,GACnCD,EAAOH,EAAQm2B,EAAkB/1B,GACjCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACyB,IAA3BA,EAAM,KACTiuB,EAAehmB,GAAkC3I,EAAI,IACrDiI,KACAg+B,EAAgBj9B,GAAkBi9B,EAAevlC,EAAOwI,EAAS,EAAGlJ,EAAK2uB,EAAcuX,EAAchW,EAAGvtB,WAAYmG,GAAyBs4B,GAAuBlR,EAAIiR,IACxK/4B,MAGsC,MAAnC1H,EAAM,KAAoC83B,EAAwBx4B,EAAI,GAAkBA,EAAI,MAA4BA,EAAI,IAAgBA,EAAI,GAAkBA,EAAI,OAEtKw4B,EACCE,GACHA,EAAUn3B,EAAEvB,EAAKU,GAEsB,MAAnCA,EAAM,IACT2H,GAAcqwB,EAAW,KAG1BA,EAAYnN,GAAkBvrB,GAC9B04B,EAAUvwB,IACVE,GAAcqwB,EAAW,GACzBA,EAAUvuB,EAAEimB,EAAGztB,WAAYytB,IAElBsI,IACVzwB,KAEAQ,GAAeiwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBtwB,MAGwD,KAArD1H,EAAM,KACT4rB,EAAa3jB,GAAgC3I,EAAI,IACjDiI,KACAskB,EAAcvjB,GAAkBujB,EAAa7rB,EAAO0lC,EAAW,EAAGpmC,EAAKssB,EAAY6Z,EAAclP,EAAGt0B,WAAYmG,GAAyBijB,GAAqBkL,EAAI1M,IAClKniB,MAG0B,EAAvB1H,EAAM,KAAoB+3B,EAAsBz4B,EAAI,GAAG,IAA0BA,EAAI,IAAgBA,EAAI,GAAG,KAE5Gy4B,EACCE,GACHA,EAAUp3B,EAAEvB,EAAKU,GAEU,EAAvBA,EAAM,IACT2H,GAAcswB,EAAW,KAG1BA,EAAYhN,GAAkB3rB,GAC9B24B,EAAUxwB,IACVE,GAAcswB,EAAW,GACzBA,EAAUxuB,EAAEouB,EAAiB51B,WAAY41B,IAEhCI,IACV1wB,KAEAQ,GAAekwB,EAAW,EAAG,GAAG,KAC/BA,EAAY,IAAI,IAGjBvwB,KAED,EACDpH,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CqH,GAAc49B,EAAcjlC,IAG7BqH,GAAcqwB,GAEd,IAAK,IAAI13B,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BqH,GAAcswB,GACd3K,GAAU,CAbG,CAcb,EACDtlB,CAAAA,CAAEH,GACD,IAAK,IAAIvH,EAAI,EAAGA,EAAIilC,EAAcnnC,OAAQkC,GAAK,EAC9CyH,GAAew9B,EAAcjlC,IAG9ByH,GAAeiwB,GAEf,IAAK,IAAI13B,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5ByH,GAAekwB,GACf3K,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOwtB,GACPxtB,EAAO0tB,GACP1tB,EAAOu0B,GACPv0B,EAAO61B,IAGR,IAAK,IAAIv3B,EAAI,EAAGA,EAAIilC,EAAcnnC,OAAQkC,GAAK,EAC9CilC,EAAcjlC,GAAGgC,EAAED,GAGhB21B,GAAWA,EAAU11B,EAAED,GAE3B,IAAK,IAAI/B,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGgC,EAAED,GAGd41B,GAAWA,EAAU31B,EAAED,EAC5B,EAEF,CAGA,SAASq+B,GAAsBzK,EAAO32B,GACrC,IAAIoK,EACAzG,EACAqqB,EAGJ,OAFArqB,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO,CAAE8T,MAAiB/Y,EAAI,OAE3C,CACN2E,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,EACN,MAAM4L,EAAgB,CAAE,EACO,IAA3Bn2B,EAAM,KAA0Bm2B,EAAc9d,MAAkB/Y,EAAI,KACxE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGRU,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAASwoB,GAAkBvrB,GAC1B,IAAI2D,EACAqqB,EAQJ,OANArqB,EAAQ,IAAIizB,GAAM,CAChB3xB,MAAO,CACN8T,MAAmB/Y,EAAI,GAAkBA,EAAI,QAIzC,CACNmI,CAAAA,GACCsC,GAAiB9G,EAAMhE,GAAGkI,SAC1B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMm2B,EAAgB,CAAE,EACe,MAAnCn2B,EAAM,KAAoCm2B,EAAc9d,MAAoB/Y,EAAI,GAAkBA,EAAI,MAC1G2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAASgpB,GAAoB4K,EAAO32B,GACnC,IAAIoK,EACAzG,EAEAqqB,EADAhtB,EAAUhB,EAAI,IAElB,MAAM64B,EAAeA,IAAwB74B,EAAI,IAAI2D,EAAO3C,GACtD83B,EAAiBA,IAAwB94B,EAAI,IAAI,KAAMgB,GAE7D,IAAI+3B,EAAc,CACjBhgB,MAAiB/Y,EAAI,IACrBo6B,UAAyBp6B,EAAI,GAC7Bsa,WAA2Bta,EAAI,GAC/B0b,SAAuB1b,EAAI,IAM5B,OAHA2D,EAAQ,IAAIizB,GAAM,CAAE3xB,MAAO8zB,IAC3BF,IAEO,CACNl0B,IAAKgyB,EACLvsB,MAAO,KACPjC,CAAAA,GACCiC,EAAQ3G,IACRgH,GAAiB9G,EAAMhE,GAAGkI,UAC1B1D,KAAKiG,MAAQA,CACb,EACDD,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQgI,EAAO5H,GACtBkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAE0pB,EAASvqB,GAGNM,KAFJhB,EAAMirB,GAEc,MACnB6N,IACA93B,EAAUhB,EAAI,IACd64B,KAGD,MAAMhC,EAAgB,CAAE,EACK,IAAzBn2B,EAAM,KAAwBm2B,EAAc9d,MAAkB/Y,EAAI,KACzC,IAAzBU,EAAM,KAAwBm2B,EAAcuD,UAA0Bp6B,EAAI,IAChD,EAA1BU,EAAM,KAAuBm2B,EAAcvc,WAA4Bta,EAAI,IACnD,EAAxBU,EAAM,KAAqBm2B,EAAcnb,SAAwB1b,EAAI,IACzE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO0H,GAGR0uB,IACAhuB,GAAkBnH,EAAOZ,EAC1B,EAEF,CAGA,SAAS4oB,GAAkB3rB,GAC1B,IAAI2D,EACAqqB,EASJ,OAPArqB,EAAQ,IAAIizB,GAAM,CAChB3xB,MAAO,CACN8T,MAAmB/Y,EAAI,GAAG,GAC1B0b,SAAuB1b,EAAI,MAIvB,CACNmI,CAAAA,GACCsC,GAAiB9G,EAAMhE,GAAGkI,SAC1B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB/G,EAAOvB,EAAQI,GAC/BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAMm2B,EAAgB,CAAE,EACG,EAAvBn2B,EAAM,KAAoBm2B,EAAc9d,MAAoB/Y,EAAI,GAAG,IAC3C,EAAxBU,EAAM,KAAqBm2B,EAAcnb,SAAwB1b,EAAI,IACzE2D,EAAMiJ,KAAKiqB,EACX,EACD71B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc1E,EAAMhE,GAAGkI,SAAUU,GACjCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe9E,EAAMhE,GAAGkI,SAAUU,GAClCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBnH,EAAOZ,EAC1B,EAEF,CAEA,SAASqpB,GAAkBpsB,GAC1B,IAAI4yB,EACAF,EACAC,EACAE,EACA7E,EACApD,EACAC,EACAsB,GAAyBnsB,EAAI,KAAOkuB,GAAgBluB,GAExD,MAAO,CACNmI,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OACXkpB,GAAUA,EAAShkB,IACvB/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,IAAIwY,QAE1DpU,EAAKwuB,EAAM,QAASC,EAAoC7yB,EAAI,IAAIsR,IAAM,IAAiBtR,EAAI,IAAIqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,IAAI2gB,MAAQ,KAAqB3gB,EAAI,IACvN,IAAiBA,EAAI,IAAI4jB,UACzB,KAAoB5jB,EAAI,IACxB,IAAiBA,EAAI,IAAIujB,SACzB,KAEF7e,EAAUkuB,EAAM,YAAwB5yB,EAAI,GAC1C,KACAwU,IAAMb,GAA6B3T,EAAI,IAAIe,KAAO4S,GAA6B3T,EAAI,IAAIyU,MAAQd,GAA4B3T,EAAI,MAEjIoE,EAAKwuB,EAAM,OAAQ,OACnB,EACDzoB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBL,EAAOywB,EAAMF,GACTvG,GAAUA,EAAShiB,EAAEuoB,EAAM,MACd1yB,EAAI,IAAI4yB,GACzB5E,GAAU,EAELpD,IACJC,EAAUnnB,EAAOkvB,EAAM,eAAe,WACjCv0B,EAA8B2B,EAAI,IAAIsxB,QAAQsI,SAA2B55B,EAAI,IAAIsxB,QAAQsI,OAAOvO,MAAMlnB,KAAMtF,UACjH,IAEA+rB,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,IACVV,EAAMirB,GAEgB,IAaXkB,IACVlkB,KAEAQ,GAAe0jB,EAAU,EAAG,GAAG,KAC9BA,EAAW,IAAI,IAGhB/jB,MAnBI+jB,GACHA,EAAS5qB,EAAEvB,EAAKU,GAEY,KAAxBA,EAAM,IACT2H,GAAc8jB,EAAU,KAGzBA,EAAW+B,GAAgBluB,GAC3BmsB,EAAShkB,IACTE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAEuoB,EAAM,SAYd1E,GAAiC,MAAtBttB,EAAM,IAAyBiyB,KAAsBA,EAA8B3yB,EAAI,IAAIwY,UAC1GpU,EAAKsuB,EAAM,QAASC,KAGhB3E,GAAqE,MAA1DttB,EAAM,IAA6DmyB,KAAsBA,EAAoC7yB,EAAI,IAAIsR,IAAM,IAAiBtR,EAAI,IAAIqkB,WAAoBrkB,EAAI,GAAGsT,cAA4BtT,EAAI,GAAK,IAAiBA,EAAI,IAAI2gB,MAAQ,KAAqB3gB,EAAI,IAC5S,IAAiBA,EAAI,IAAI4jB,UACzB,KAAoB5jB,EAAI,IACxB,IAAiBA,EAAI,IAAIujB,SACzB,OACDnf,EAAKwuB,EAAM,QAASC,KAGhB7E,GAAgE,KAArDttB,EAAM,KACrBgE,EAAUkuB,EAAM,YAAwB5yB,EAAI,GAC1C,KACAwU,IAAMb,GAA6B3T,EAAI,IAAIe,KAAO4S,GAA6B3T,EAAI,IAAIyU,MAAQd,GAA4B3T,EAAI,KAElI,EACDgB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOkwB,GAGJzG,GAAUA,EAASnpB,IACNhD,EAAI,IAAI,MACzB4qB,GAAU,EACVC,GACD,EAEF,CAEA,SAAS4B,GAAWC,EAAQC,EAASC,GACpC,IAAIkZ,EACA5mB,EACAsmB,EACA3Y,EACAmN,EACAE,EACApN,EACA6D,EAgBA9a,EACAukB,EAAWC,EACXC,EAAS1W,EAAWL,GAjBpB3R,KAAEA,GAAS+a,GACXjR,SAAEA,GAAaiR,GACfzT,OAAEA,GAAWyT,GACb4N,SAAEA,GAAa5N,GACfrS,WAAEA,GAAeqS,GACjB6N,QAAEA,EAAU,IAAO7N,GACnB5K,iBAAEA,EAAgBQ,aAAEA,EAAYO,UAAEA,EAASvJ,MAAEA,EAAKiL,WAAEA,EAAU6E,aAAEA,EAAYnB,OAAEA,EAAMme,eAAEA,GAAmBngC,EAAW,SACxHzG,EAAoBitB,EAAQ3K,GAAkBxiB,GAASqtB,EAAa,GAAIoN,EAAoBz6B,KAC5FE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,EAAG1N,EAAgB3f,KACnFE,EAAoBitB,EAAQ5J,GAAWvjB,GAASqtB,EAAa,GAAIkZ,EAAavmC,KAC9EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,GAAIE,EAASvtB,KACtEE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChFE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,GAAI+D,EAAgBpxB,KACpFE,EAAoBitB,EAAQxE,GAAQ3oB,GAASqtB,EAAa,GAAIsN,EAAU36B,KACxEE,EAAoBitB,EAAQ2Z,GAAgB9mC,GAASqtB,EAAa,GAAI4Y,EAAkBjmC,KAIxF,IACIsiC,EACArqB,EAFA4D,EAAO,GAGPkrB,EAAa,EAEjB,SAASC,EAAgBxtB,GACxB,OAAO/F,GAAW+F,EAAMnH,KAAMA,EAC/B,CAEA,SAASugB,EAAcngB,EAAGqE,GAGzB,OAFArE,GAAK8D,GAAKD,GAAI4hB,KAEP,CACNjgB,SACA5F,KAAM4F,EACJ7F,GAAUC,GACVE,GAAYA,GAAYH,GAAUC,GAAOiwB,EAAeptB,KAAMyK,EAAe3K,GAAMvC,EAAI8zB,IACzFpqB,WACA8V,MAAO3b,EACP0N,WAEF,CAoEA,OAhDAmJ,EAAOngB,MAAQogB,IACV,SAAUA,GAASC,EAAa,EAAGhb,EAAO+a,EAAQ/a,MAClD,aAAc+a,GAASC,EAAa,EAAGlR,EAAWiR,EAAQjR,UAC1D,WAAYiR,GAASC,EAAa,GAAI1T,EAASyT,EAAQzT,QACvD,aAAcyT,GAASC,EAAa,GAAI2N,EAAW5N,EAAQ4N,UAC3D,eAAgB5N,GAASC,EAAa,EAAGtS,EAAaqS,EAAQrS,YAC9D,YAAaqS,GAASC,EAAa,EAAG4N,EAAU7N,EAAQ6N,QAAQ,EAGrE9N,EAAO/sB,GAAG4H,OAAS,KACgB,EAA9BmlB,EAAO/sB,GAAGe,MAAM,GAAmD,EAAjCgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,EAAG0N,EAAUtnB,GAAWpB,EAAMsoB,IAGV,EAA9BxN,EAAO/sB,GAAGe,MAAM,GAA6D,EAA3CgsB,EAAO/sB,GAAGe,MAAM,IACrDksB,EAAa,GAAIhJ,EAAYoW,EAAkBve,MAAKzY,GAAKgQ,GAAWhQ,EAAG4O,MAGzB,WAA3C8a,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,GAAIrJ,EAAW/G,GAAa5K,EAAMib,IAGG,UAA/CH,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,GAAIiV,EAAiB8D,GAAkBH,EAAiB5zB,IAGnB,GAA/C8a,EAAO/sB,GAAGe,MAAM,KAElBksB,EAAa,EAAGpV,GAAU7D,GAAUuL,IACpC0N,EAAa,GAAI0Z,EAAa9uB,EAAS,EAAI,IAIT,SAAhCkV,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAGwN,EAAYlhB,EAAOrO,OAAO07B,IAGG,UAA1C7Z,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAGyN,EAAcE,EAAS1vB,QAAOqwB,KAAa1jB,GAAU0jB,EAAQv3B,MAAM6T,SAAW+uB,EAAgBrL,MAG/E,GAA5BxO,EAAO/sB,GAAGe,MAAM,IACfmV,GACHN,GAAWM,EAAIsc,EAEjB,EAGM,CACNvgB,EACA8J,EACApB,EACAkgB,EACA3kB,EACA2B,EACA0H,EACAkb,EACAC,EACAC,EACA1W,EACAL,EACAnI,EACAymB,EACAyE,EACAxZ,EACA6D,EACA5O,EACAQ,EACAO,EACAvJ,EACAiL,EACA6E,EACAnB,EACAme,EACAE,EACArtB,EACAqhB,EA9FD,WACC,OAAOx5B,MAAOoa,GAAcC,EAAMgf,GACnC,EA8FCoL,EACA3Y,EACAmN,EACAE,EA/FD,SAAuB1D,EAASx1B,GAC/BuF,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/Cpb,EAAKpa,GAAKw1B,EACV5J,EAAa,GAAIxR,EAAK,GAExB,EAEA,SAAsBob,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAuFD,CAEA,MAAM6lB,WAAYpvB,GACjBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GACChH,KACAN,EACA4oB,GACAL,GACA7tB,EACA,CACCqT,KAAM,EACN8J,SAAU,EACVxC,OAAQ,GACRqhB,SAAU,GACVjgB,WAAY,EACZkgB,QAAS,EACTlf,WAAY,IAEb,KACA,EAAE,GAAI,GAER,CAEA,cAAIA,GACH,OAAOnX,KAAKxE,GAAGK,IAAI,GACpB,EAKD,SAAS4tB,GAAmB5tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAItB,OAHAuJ,EAAU,IAAMX,EAAKpI,GACrB+I,EAAU,IAAMX,EAChBW,EAAU,IAAM/I,EACT+I,CACR,CAGA,SAAS2kB,GAAoB1uB,GAC5B,IAAIsR,EAEA0c,EADAhtB,EAAUhB,EAAI,IAElB,MAAMu7B,EAAaA,IAAsBv7B,EAAI,IAAIsR,EAAKtQ,GAChDw6B,EAAeA,IAAsBx7B,EAAI,IAAI,KAAMgB,GAEzD,IAAIy6B,EAAY,CACf7pB,KAAe5R,EAAI,IACnB0b,SAAuB1b,EAAI,GAC3BkZ,OAAmBlZ,EAAI,GACvBu6B,SAAuBv6B,EAAI,GAC3Bsa,WAA2Bta,EAAI,GAC/Bw6B,QAAqBx6B,EAAI,IAM1B,OAHAsR,EAAM,IAAIoqB,GAAI,CAAEz2B,MAAOw2B,IACvBF,IAEO,CACNpzB,CAAAA,GACCsC,GAAiB6G,EAAI3R,GAAGkI,SACxB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4G,EAAKlP,EAAQI,GAC7BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACFM,IAAYhB,EAAI,MACnBw7B,IACAx6B,EAAUhB,EAAI,IACdu7B,KAGD,MAAMI,EAAc,CAAE,EACS,EAA3Bj7B,EAAM,KAAwBi7B,EAAY/pB,KAAgB5R,EAAI,KACtC,EAAxBU,EAAM,KAAqBi7B,EAAYjgB,SAAwB1b,EAAI,IAC7C,EAAtBU,EAAM,KAAmBi7B,EAAYziB,OAAoBlZ,EAAI,IACrC,EAAxBU,EAAM,KAAqBi7B,EAAYpB,SAAwBv6B,EAAI,IACzC,GAA1BU,EAAM,KAAwBi7B,EAAYrhB,WAA4Bta,EAAI,IACnD,GAAvBU,EAAM,KAAqBi7B,EAAYnB,QAAsBx6B,EAAI,IACrEsR,EAAI1E,KAAK+uB,EACT,EACD36B,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAciJ,EAAI3R,GAAGkI,SAAUU,GAC/BylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6I,EAAI3R,GAAGkI,SAAUU,GAChCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACDy4B,IACA1wB,GAAkBwG,EAAKvO,EACxB,EAEF,CAEA,SAAS8rB,GAAkB7uB,GAC1B,IAAImuB,EACAC,EACAJ,EACApD,EACAC,EACAyB,EAAa3jB,GAAkC3I,EAAI,IACnDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAK0tB,GAAoBd,GAAmB5tB,EAAKssB,EAAYtrB,IAG1E,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCgmB,EAAMlrB,EAAQ,OAEd,IAAK,IAAIjC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAGqR,MACvD3M,EAAUypB,EAAK,aAAcptB,GAAef,EAAI,GAAI,IAAM,MAC1DoE,EAAK+pB,EAAK,OAAQ,MAClB,EACDhkB,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEpB,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAIxBH,GAAU,EAELpD,IACJC,EAAUnnB,EAAO1B,OAAQ,SAAyBhC,EAAI,KACtD4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACN,GAAsF,IAAlFA,EAAM,GAAiF,CAE1F,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAkC3I,EAAI,IAG9CgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAY6jB,GAAmB5tB,EAAKssB,EAAYtrB,GAElDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAK0tB,GAAoB3kB,GACrCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEgkB,EAAK,MAExB,CAIA,IAFAlmB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAAiC,IAAtBttB,EAAM,IAAuB0tB,KAAqBA,EAA6BpuB,EAAI,GAAGqR,QACrGjN,EAAK+pB,EAAK,QAASC,KAGfJ,GAAiC,IAAtBttB,EAAM,KACrBgE,EAAUypB,EAAK,aAAcptB,GAAef,EAAI,GAAI,IAAM,KAE3D,EACDgB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRtrB,EAAa0pB,EAAaxpB,GAC1B6nB,GAAU,EACVC,GACD,EAEF,CAEA,SAASoE,GAAWvC,EAAQC,EAASC,GACpC,IAAI1N,EACAsmB,EACA3lB,EACA+b,EACA7c,EACA8lB,EACAhY,EACAC,GACApR,SAAEA,GAAaiR,GACf7D,WAAEA,EAAUpK,QAAEA,EAAO4K,SAAEA,EAAQnE,QAAEA,EAAO6f,OAAEA,EAAMqB,eAAEA,EAAc9jB,aAAEA,EAAYhJ,MAAEA,EAAKiL,WAAEA,GAAete,EAAW,SACrHzG,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,EAAG/M,EAActgB,KAC/EE,EAAoBitB,EAAQhO,GAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQpD,GAAU/pB,GAASqtB,EAAa,GAAIgP,EAAYr8B,KAC5EE,EAAoBitB,EAAQsY,GAAQzlC,GAASqtB,EAAa,GAAIiY,EAAUtlC,KACxEE,EAAoBitB,EAAQ2Z,GAAgB9mC,GAASqtB,EAAa,GAAI4Y,EAAkBjmC,KACxFE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,GAAI1N,EAAgB3f,KACpFE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQlI,GAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChF,IAAI2Z,EAAQqhB,EAAUjgB,EAClBrN,EACAwK,EAF8B+iB,EAAU,GAGxCpf,EAAO,GACPjF,EAAS,EACToQ,EAAiB,CAAE,EAEvB,SAASjL,IACRzG,IACC,KACC+X,EAAa,EAAGzW,EAAS3B,GAAKzT,MAAOoa,GAAcC,EAAMyE,KAAiB,IAC1EglB,EAAQljC,IAAI+Z,EAAUvF,GACtB6uB,EAAOrjC,IAAIkjC,EAAQ,GAEpBte,EACApB,EAEF,CAqEA,OA5DAuH,EAAOngB,MAAQogB,IACV,aAAcA,GAASC,EAAa,EAAGlR,EAAWiR,EAAQjR,SAAS,EAGxEgR,EAAO/sB,GAAG4H,OAAS,KAClB,GAAmF,SAA/EmlB,EAAO/sB,GAAGe,MAAM,GACnB,CACCksB,EAAa,GAAI3f,EAAQ0E,GAAU+K,GAAamD,EAAY,GAAIgN,KAChED,EAAa,GAAInV,EAAM9F,GAAU+K,GAAamD,EAAYlF,IAAI,GAAIkS,KAClE,IAAIgV,EAAiB8D,GAAkBH,EAAiBv4B,GACxD6E,GAAY7E,EAAO40B,EAAeptB,KAClCotB,EAAiB8D,GAAkBH,EAAiB/tB,GAEpDoqB,EAAe9gC,IAAIqP,QAAUZ,GAC3BsC,GAAY2F,EAAKoqB,EAAe9gC,KAChC2R,GAAiE+E,EACpE,CAGD,GAA2H,SAAvHiV,EAAO/sB,GAAGe,MAAM,GAAiH,CAEnIksB,EAAa,EAAG1T,EAAS,IACzB0T,EAAa,EAAG2N,EAAW,IAE3B,IAAK,IAAI52B,KAASob,EACjB,GAAIxD,GAAgB5X,EAAOsJ,EAAOwK,EAAKiE,GAAW,CACjD,IAAI3C,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,GAEvCsE,GAAQpY,EAAMmU,SACjByiB,EAAS16B,KAAKkZ,GAEdG,EAAOrZ,KAAKkZ,EAEd,CAGD6T,EAAa,GAAI2N,GAAYlgB,GAAmBkgB,EAAU1a,EAAa2lB,EAAiBtmB,GAAgBqb,GACxG3N,EAAa,GAAI1T,EAAQoB,GAAcD,GAAmBnB,EAAQ2G,EAAa2lB,EAAiBtmB,GAAgBhG,GAAkB0T,EAAa,EAAGtS,GAAasS,EAAa,GAAI7N,GAAY6N,EAAa,GAAI3f,GAAS2f,EAAa,GAAInV,GAAOmV,EAAa,EAAGlR,GAAYkR,EAAa,EAAG2N,GAAY3N,EAAa,EAAG1T,GAAU0T,EAAa,EAAG/M,GAAe+M,EAAa,GAAI4Y,GAAmB5Y,EAAa,GAAI1N,GAAiB0N,EAAa,GAAIC,KAGtbvR,GAEF,CAE0G,QAAtGoR,EAAO/sB,GAAGe,MAAM,IACnBksB,EAAa,EAAG4N,EAAUoB,EAAUhxB,KAAIjH,IACvC,IAAIoV,EASJ,OAPIpV,GAAS4X,GAAgB5X,EAAOsJ,EAAOwK,EAAKiE,IAC/C3C,EAAQD,GAAiBnV,EAAOsJ,EAAOwK,KACrCsB,IAAUsB,GAAmB,CAACtB,GAAQ8G,EAAa2lB,EAAiBtmB,IAEtEnG,EAAQ,KAGFA,CAAK,IAEd,EAGM,CACN2C,EACAxC,EACAqhB,EACA1a,EACAvF,EACAkgB,EACApf,EACAjF,EACA2W,EACAhE,EACApK,EACA4K,EACA0b,EACAqB,EACA9jB,EACAhJ,EACAiL,EACAlJ,EACArO,EACAwK,EACAyH,EACAsmB,EACA5J,EACA7c,EACA8N,EA5FD,SAAqB2J,EAASx1B,GAC7BuF,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/Cpb,EAAKpa,GAAKw1B,EACV5J,EAAa,EAAGxR,EAAK,GAEvB,EA0FD,CAEA,MAAMorB,WAAal6B,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASorB,GAAYJ,GAAmBtwB,EAAgB,CAAEmd,SAAU,GAAK,KAAM,EAAE,GAAI,GACjG,EAKD,SAAS4T,GAAiBtvB,EAAKoJ,EAAMpI,GACpC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAAS8jB,GAAmB7tB,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAEA,SAASo4B,GAAmBniC,EAAKoJ,EAAMpI,GACtC,MAAM+I,EAAY/J,EAAIQ,QAEtB,OADAuJ,EAAU,IAAMX,EAAKpI,GACd+I,CACR,CAGA,SAASo5B,GAAoBnjC,GAC5B,IAAImuB,EACAC,EAEJ,MAAO,CACNjmB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdmB,EAAK+pB,EAAK,QAASC,EAA6BpuB,EAAI,GAAG8jB,KACvD,EACD3Z,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,EACpB,EACDjB,CAAAA,CAAEvB,EAAKU,GACoB,EAAtBA,EAAM,IAAqB0tB,KAAqBA,EAA6BpuB,EAAI,GAAG8jB,OACvF1f,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,EAET,EAEF,CAGA,SAASE,GAAoBruB,GAC5B,IAAIqsB,EACA6W,EAAev6B,GAAiC3I,EAAI,GAAYA,EAAI,IAAI6R,YACxE0a,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIkiC,EAAapkC,OAAQkC,GAAK,EAC7CurB,EAAYvrB,GAAKmiC,GAAoBhB,GAAmBniC,EAAKkjC,EAAcliC,IAG5E,MAAO,CACNmH,CAAAA,GACC,IAAK,IAAInH,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhBkkB,EAAgB5oB,GAChB,EACD0G,CAAAA,CAAE/H,EAAQI,GACT,IAAK,IAAIxB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAE/H,EAAQI,GAI3BD,EAAOH,EAAQiqB,EAAe7pB,EAC9B,EACDjB,CAAAA,CAAEvB,EAAKU,GACN,GAAmD,GAA/CA,EAAM,GAA6C,CAEtD,IAAIM,EAEJ,IAHAkiC,EAAev6B,GAAiC3I,EAAI,GAAYA,EAAI,IAAI6R,YAGnE7Q,EAAI,EAAGA,EAAIkiC,EAAapkC,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAYo4B,GAAmBniC,EAAKkjC,EAAcliC,GAEpDurB,EAAYvrB,GACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,IAE5B6rB,EAAYvrB,GAAKmiC,GAAoBp5B,GACrCwiB,EAAYvrB,GAAGmH,IACfokB,EAAYvrB,GAAGmJ,EAAEkiB,EAAc1pB,WAAY0pB,GAE7C,CAEA,KAAOrrB,EAAIurB,EAAYztB,OAAQkC,GAAK,EACnCurB,EAAYvrB,GAAGgC,EAAE,GAGlBupB,EAAYztB,OAASokC,EAAapkC,MACnC,CACA,EACDkE,CAAAA,CAAED,GACGA,GACHL,EAAO2pB,GAGRxpB,EAAa0pB,EAAaxpB,EAC3B,EAEF,CAGA,SAASsG,GAAkBrJ,GAC1B,IAAIqR,EACA2c,EAMJ,OAJA3c,EAAO,IAAIm1B,GAAK,CACdvhC,MAAO,CAAEyW,SAAuB1b,EAAI,OAG/B,CACNmI,CAAAA,GACCsC,GAAiB4G,EAAK1R,GAAGkI,SACzB,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB2G,EAAMjP,EAAQI,GAC9BwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GACN,MAAM+lC,EAAe,CAAE,EACY,GAA/B/lC,EAAM,KAA6B+lC,EAAa/qB,SAAwB1b,EAAI,KAChFqR,EAAKzE,KAAK65B,EACV,EACDzlC,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcgJ,EAAK1R,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe4I,EAAK1R,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACD+H,GAAkBuG,EAAMtO,EACzB,EAEF,CAEA,SAAS4sB,GAAkB3vB,GAC1B,IAAIyyB,EACAG,EACAF,EACAC,EACAjI,EACAmI,EACAC,EACA9E,EACApD,EACAC,EACA8D,EAAehmB,GAAkC3I,EAAI,IACrDimC,EAAgB,GAEpB,IAAK,IAAIjlC,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAC7CilC,EAAcjlC,GAAKqtB,GAAoBR,GAAmB7tB,EAAK2uB,EAAc3tB,IAG9E,IAAIsrB,EAAa3jB,GAAsC3I,EAAI,IACvDusB,EAAc,GAElB,IAAK,IAAIvrB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CurB,EAAYvrB,GAAKqI,GAAkBimB,GAAiBtvB,EAAKssB,EAAYtrB,IAGtE,MAAM4tB,EAAM5tB,GAAKyH,GAAe8jB,EAAYvrB,GAAI,EAAG,GAAG,KACrDurB,EAAYvrB,GAAK,IAAI,IAGtB,MAAO,CACNmH,CAAAA,GACCsqB,EAAOxvB,EAAQ,OACf2vB,EAAO3vB,EAAQ,OACfyvB,EAAOzvB,EAAQ,OAEf,IAAK,IAAIjC,EAAI,EAAGA,EAAIilC,EAAcnnC,OAAQkC,GAAK,EAC9CilC,EAAcjlC,GAAGmH,IAGlBuiB,EAAIlnB,IAEJ,IAAK,IAAIxC,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CurB,EAAYvrB,GAAGmH,IAGhB/D,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG+jB,OACzD3f,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG4O,SACzDxK,EAAKquB,EAAM,QAASK,EAA8B9yB,EAAI,GAAGijB,KACzD,EACD9Y,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQqwB,EAAMjwB,GACrBL,EAAOswB,EAAMG,GACbzwB,EAAOywB,EAAMF,GAEb,IAAK,IAAI1xB,EAAI,EAAGA,EAAIilC,EAAcnnC,OAAQkC,GAAK,EAC1CilC,EAAcjlC,IACjBilC,EAAcjlC,GAAGmJ,EAAEuoB,EAAM,MAI3BvwB,EAAOywB,EAAMlI,GAEb,IAAK,IAAI1pB,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxCurB,EAAYvrB,IACfurB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAIR5yB,EAAI,IAAIyyB,GACzBzE,GAAU,EAELpD,IACJC,EAAUnnB,EAAO+uB,EAAM,SAA2BzyB,EAAI,KACtD4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACN,GAAmD,GAA/CA,EAAM,GAA6C,CAEtD,IAAIM,EAEJ,IAHA2tB,EAAehmB,GAAkC3I,EAAI,IAGhDgB,EAAI,EAAGA,EAAI2tB,EAAa7vB,OAAQkC,GAAK,EAAG,CAC5C,MAAM+I,EAAY8jB,GAAmB7tB,EAAK2uB,EAAc3tB,GAEpDilC,EAAcjlC,GACjBilC,EAAcjlC,GAAGO,EAAEwI,EAAWrJ,IAE9BulC,EAAcjlC,GAAKqtB,GAAoBtkB,GACvCk8B,EAAcjlC,GAAGmH,IACjB89B,EAAcjlC,GAAGmJ,EAAEuoB,EAAM,MAE3B,CAEA,KAAO1xB,EAAIilC,EAAcnnC,OAAQkC,GAAK,EACrCilC,EAAcjlC,GAAGgC,EAAE,GAGpBijC,EAAcnnC,OAAS6vB,EAAa7vB,MACrC,CAMA,KAJKkvB,GAAiC,EAAtBttB,EAAM,IAAqBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG+jB,SACrG3f,EAAKsuB,EAAM,QAASC,GAGc,GAA/BjyB,EAAM,GAA6B,CAEtC,IAAIM,EAEJ,IAHAsrB,EAAa3jB,GAAsC3I,EAAI,IAGlDgB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAAG,CAC1C,MAAM+I,EAAYulB,GAAiBtvB,EAAKssB,EAAYtrB,GAEhDurB,EAAYvrB,IACfurB,EAAYvrB,GAAGO,EAAEwI,EAAWrJ,GAC5B2H,GAAckkB,EAAYvrB,GAAI,KAE9BurB,EAAYvrB,GAAKqI,GAAkBU,GACnCwiB,EAAYvrB,GAAGmH,IACfE,GAAckkB,EAAYvrB,GAAI,GAC9BurB,EAAYvrB,GAAGmJ,EAAEyoB,EAAM,MAEzB,CAIA,IAFA3qB,KAEKjH,EAAIsrB,EAAWxtB,OAAQkC,EAAIurB,EAAYztB,OAAQkC,GAAK,EACxD4tB,EAAI5tB,GAGLoH,IACD,GAEK4lB,GAAiC,EAAtBttB,EAAM,IAAqBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG4O,WACrGxK,EAAKwuB,EAAM,QAASC,KAGhB7E,GAAiC,EAAtBttB,EAAM,IAAqBoyB,KAAsBA,EAA8B9yB,EAAI,GAAGijB,QACrG7e,EAAKquB,EAAM,QAASK,EAErB,EACD9xB,CAAAA,CAAEuH,GACD,IAAIylB,EAAJ,CAEA,IAAK,IAAIhtB,EAAI,EAAGA,EAAIsrB,EAAWxtB,OAAQkC,GAAK,EAC3CqH,GAAckkB,EAAYvrB,IAG3BgtB,GAAU,CANG,CAOb,EACDtlB,CAAAA,CAAEH,GACDgkB,EAAcA,EAAY1hB,OAAOmD,SAEjC,IAAK,IAAIhN,EAAI,EAAGA,EAAIurB,EAAYztB,OAAQkC,GAAK,EAC5CyH,GAAe8jB,EAAYvrB,IAG5BgtB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAO+vB,GAGR5vB,EAAaojC,EAAeljC,GAC5BF,EAAa0pB,EAAaxpB,GACT/C,EAAI,IAAI,MACzB4qB,GAAU,EACVC,GACD,EAEF,CAEA,SAASgF,GAAWnD,EAAQC,EAASC,GACpC,IAAIkZ,EACA5mB,EACA4gB,EACAjgB,EACA2lB,EACAjV,EACAqU,EACAD,EACA7X,EACAwY,EACA/B,EAaA1tB,GAZA2S,QAAEA,EAAOuc,UAAEA,EAASE,WAAEA,EAAUM,UAAEA,EAASc,eAAEA,EAAc1C,eAAEA,EAAc7a,WAAEA,EAAUxG,WAAEA,EAAUC,aAAEA,EAAYO,UAAEA,EAASvJ,MAAEA,GAAUrT,EAAW,SA2CvJ,OA1CAzG,EAAoBitB,EAAQlE,GAASjpB,GAASqtB,EAAa,GAAI2D,EAAWhxB,KAC1EE,EAAoBitB,EAAQqY,GAAWxlC,GAASqtB,EAAa,GAAI+X,EAAaplC,KAC9EE,EAAoBitB,EAAQuY,GAAY1lC,GAASqtB,EAAa,GAAIgY,EAAcrlC,KAChFE,EAAoBitB,EAAQ6Y,GAAWhmC,GAASqtB,EAAa,EAAG0Y,EAAa/lC,KAC7EE,EAAoBitB,EAAQ2Z,GAAgB9mC,GAASqtB,EAAa,GAAI4Y,EAAkBjmC,KACxFE,EAAoBitB,EAAQiX,GAAgBpkC,GAASqtB,EAAa,EAAG2W,EAAkBhkC,KACvFE,EAAoBitB,EAAQ5D,GAAYvpB,GAASqtB,EAAa,EAAG/M,EAActgB,KAC/EE,EAAoBitB,EAAQpK,GAAY/iB,GAASqtB,EAAa,GAAIkT,EAAcvgC,KAChFE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,GAAI1N,EAAgB3f,KACpFE,EAAoBitB,EAAQ5J,GAAWvjB,GAASqtB,EAAa,GAAIkZ,EAAavmC,KAC9EE,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAoBrEmtB,EAAO/sB,GAAG4H,OAAS,KACc,EAA5BmlB,EAAO/sB,GAAGe,MAAM,IACnBe,EAAgB+mB,EAAS+H,EAAW1a,EAAI0a,GAGiB,OAAtD7D,EAAO/sB,GAAGe,MAAM,IACfmV,GAlBN,WACC,IAAIgsB,EAAiB8D,GAAkBH,EAAiB3lB,EAAY,IACpE+M,EAAa,EAAG/W,EAAG6wB,YAAc/yB,GAAUmsB,GAAensB,GAAUkuB,EAAeptB,MAAQd,GAAUuL,GAAiB4mB,EAAYjwB,EACnI,CAgBG8wB,EAEF,EAGM,CACN9wB,EACAgK,EACAiN,EACAwY,EACA/B,EACA/a,EACAuc,EACAE,EACAM,EACAc,EACA1C,EACA7a,EACAxG,EACAC,EACAO,EACAvJ,EA7CD,WACC9X,EAAgBsjC,EAAWJ,EAAW+B,WAAanW,EAASmW,WAAY/B,GACxEljC,EAAgBwjC,EAAYL,EAAY5E,UAAYzP,EAASyP,UAAW4E,EACzE,EA4CC9E,EArCD,SAAsBtJ,GACrBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C3gB,EAAK2gB,EACL5J,EAAa,EAAG/W,EAAG,GAErB,EAmCD,CAEA,MAAMsmB,WAAa7vB,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASgsB,GAAYF,GAAmBpxB,EAAgB,CAAE,EAAE,KAAM,EAAE,GAAI,GACpF,EAKD,SAAS8M,GAAgBrL,GACxB,IAAI4yB,EACA3O,EACAiM,EACAwC,EACAhP,EACA0M,EACAnN,EACA0P,EACAE,EACA7E,EAKJ,OAJA/J,EAAU,IAAImhB,GAAQ,IACtB1hB,EAAS,IAAIwY,GAAO,IACpBjZ,EAAO,IAAIkZ,GAAK,IAET,CACNh0B,CAAAA,GACCyqB,EAAO3vB,EAAQ,OACfwH,GAAiBwZ,EAAQtkB,GAAGkI,UAC5BqoB,EAAK1sB,IACLkvB,EAAOzvB,EAAQ,OACfwH,GAAiBiZ,EAAO/jB,GAAGkI,UAC3BuoB,EAAK5sB,IACLiH,GAAiBwY,EAAKtjB,GAAGkI,UACzBzD,EAAKsuB,EAAM,QAASC,EAA8B3yB,EAAI,GAAG4mC,MACzDxiC,EAAKwuB,EAAM,QAASC,EAA8B7yB,EAAI,GAAG6mC,UACzD,EACD18B,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQwwB,EAAMpwB,GACrBkI,GAAgBuZ,EAAS2O,EAAM,MAC/BzwB,EAAOywB,EAAM1C,GACb/tB,EAAOywB,EAAMF,GACbhoB,GAAgBgZ,EAAQgP,EAAM,MAC9BvwB,EAAOuwB,EAAMtC,GACb1lB,GAAgBuY,EAAMyP,EAAM,MAC5B1E,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAG2oB,GAAW,IAARjoB,GAAMioB,IACRqF,GAA8B,EAAnBttB,GAAwBiyB,KAAsBA,EAA8B3yB,EAAI,GAAG4mC,QAClGxiC,EAAKsuB,EAAM,QAASC,KAGhB3E,GAA8B,EAAnBttB,GAAwBmyB,KAAsBA,EAA8B7yB,EAAI,GAAG6mC,aAClGziC,EAAKwuB,EAAM,QAASC,EAErB,EACD7xB,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAc4b,EAAQtkB,GAAGkI,SAAUU,GACnCF,GAAcqb,EAAO/jB,GAAGkI,SAAUU,GAClCF,GAAc4a,EAAKtjB,GAAGkI,SAAUU,GAChCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAewb,EAAQtkB,GAAGkI,SAAUU,GACpCE,GAAeib,EAAO/jB,GAAGkI,SAAUU,GACnCE,GAAewa,EAAKtjB,GAAGkI,SAAUU,GACjCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,GACHL,EAAOkwB,GAGR9nB,GAAkBmZ,GAClBnZ,GAAkB4Y,GAClB5Y,GAAkBmY,EACnB,EAEF,CAEA,SAAS7X,GAASshB,EAAQC,EAASC,GAClC,IAAIE,GACAvT,MAAEA,GAAUrT,EAAW,SAE3B,OADAzG,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KAC9D,CAACutB,EAAQvT,EACjB,CAEA,MAAMgjB,WAAajwB,GAClBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASuH,GAAUC,GAAiB9M,EAAgB,GAChE,EAGD,IAAImO,GAAQ,CACXkY,aAAAA,CAAc/gB,GAEbA,EAAQ6c,WAAWomB,oBAAsB,WACzCjjC,EAAQ6c,WAAWqmB,qBAAuB,WAC1CljC,EAAQ6c,WAAWsmB,sBAAwB,WAC3CnjC,EAAQ0V,MAAM0qB,SAAW,cACzBpgC,EAAQ0V,MAAMqtB,KAAO,UACrB/iC,EAAQ0V,MAAM+F,MAAQ,WACtBzb,EAAQ0V,MAAMstB,UAAY,eAC1BhjC,EAAQ6S,KAAO,uBACf7S,EAAQ6gB,MAAMoiB,oBAAsB,CACnCpmB,WAAY1E,GACZtc,UAAW68B,GACXljB,iBAAiB,EACjByH,gBAAiB,CAACC,QAAS,QAC3BhP,SAAU,CAACV,KAAM,GACjBkR,aAAc,QACdhJ,MAAO+C,GAAU,oCACjBiI,YAAa,CAACrT,KAAM,UAAWE,MAAO,OAAQE,IAAK,YAEpDzN,EAAQ6gB,MAAMqiB,qBAAuB,CACpCrmB,WAAYxE,GACZxc,UAAW68B,GACXljB,iBAAiB,EACjBtH,SAAU,CAAChB,MAAO,GAClBwR,aAAc,QACdhJ,MAAO+C,GAAU,sCAElBzY,EAAQ6gB,MAAMsiB,sBAAwB,CACrCtmB,WAAYvE,GACZzc,UAAW68B,GACXljB,iBAAiB,EACjByH,gBAAiB,CAChBC,QAAS,QACTzP,IAAK,WAENS,SAAU,CAACZ,OAAQ,GACnBoR,aAAc,CAAClR,KAAM,GACrBkI,MAAO+C,GAAU,sCACjBiI,YAAa,CAACrT,KAAM,UAAWE,MAAO,QAEvC,EAEDwY,YAAAA,CAAapL,GACN,mBAAoBA,IACzBA,EAAMmlB,eAAiBplB,GAAcC,IAEtCA,EAAMumB,UAAY73B,QAAS/N,GAC3Bqf,EAAM6nB,eA9yGR,SAAuB7nB,GACnB,OAAO/Q,GACH,CAAC+Q,EAAMqE,YAAarE,EAAMoE,YAAapE,EAAMoD,uBAAwBpD,EAAMsK,WAAYtK,EAAME,UAC7Fd,IAAkF,IAAhF8B,EAAcC,EAAcC,EAAyBC,EAAad,GAASnB,EACrEqpB,EAAgB,CAAE,EACtB,IAAK,IAAIr1B,KAAQiO,EACbonB,EAAcr1B,EAAKC,WAAa4N,GAC5BC,EACAC,EACAC,EACA,CAAChO,GACDmN,GAIR,OAAOkoB,CAAa,GAGhC,CA4xGyBA,CAAczoB,GACrCA,EAAM+mB,UA3xGR,SAAkB/mB,GACd,OAAO/Q,GACH,CAAC+Q,EAAMsK,WAAYtK,EAAM+D,aAAc/D,EAAMkE,kBAAmBlE,EAAM6nB,eAAgB7nB,EAAM4J,iBAC5FlK,IAAwF,IAAtF2B,EAAaX,EAAeC,EAAoBqmB,EAAiBnmB,GAAgBnB,EAC3EgpB,EAAW,CAAE,EACjB,IAAK,IAAIt1B,KAAQiO,EAAa,CAC1B,IAAIsE,EAAOvS,EAAKC,UAChBq1B,EAAS/iB,GAAQA,KAAQqhB,EACnBvmB,GAAYrN,EAAMsN,EAAeC,EAAoBqmB,EAAgBrhB,GAAO9E,GAC5E,EACV,CAEA,OAAO6nB,CAAQ,GAG3B,CA4wGoBA,CAAS1oB,GAC3BA,EAAM0mB,iBA3wGR,SAAyB1mB,GACrB,OAAO/Q,GAAQ+Q,EAAMhD,WAAWqD,GAAcA,EAAWpD,MAAKC,GAAYjG,GAAWiG,GAAUvP,SAASrN,UAC5G,CAywG2BqoC,CAAgB3oB,GACzCA,EAAMwmB,OAAS93B,GAAS,IAAItD,KAC5B4U,EAAMymB,WAAa/3B,QAAS/N,EAC7B,GCpzGD,IAAIioC,IAAO,EAWX,SAASC,GAAM9nC,EAAO+nC,EAAUC,GAC5B,OAAOxmC,GAAIumC,EAAU7yB,GAAI8yB,EAAUhoC,GACvC,CAIA,MAAQyC,OAAQwlC,IAAazlC,EAE7B,SAASqqB,GAAkBpsB,GAC1B,IAAI4qB,EACAC,EAEJ,MAAO,CACN1iB,EAAGvK,EACHuM,CAAAA,CAAE/H,EAAQI,GACJooB,IACJC,EAAU,CACTnnB,EAAO8jC,GAAU,cAAqCxnC,EAAI,KAC1D0D,EAAO8jC,GAAU,YAAiCxnC,EAAI,KACtD0D,EAAO8jC,GAAU,gBAAqCxnC,EAAI,KAC1D0D,EAAO8jC,GAAU,SAA2BxnC,EAAI,IAChD0D,EAAO8jC,GAAU,cAAeC,GAA8CznC,EAAI,MAClF0D,EAAO8jC,GAAU,eAAe,WAC3BnpC,EAAYopC,GAAoDznC,EAAI,OAAOynC,GAAoDznC,EAAI,KAAKqrB,MAAMlnB,KAAMtF,UACxJ,IACD6E,EAAO8jC,GAAU,aAAmCxnC,EAAI,KACxD0D,EAAO8jC,GAAU,YAAmCxnC,EAAI,IAAK,CAAE0nC,SAAS,KAGzE9c,GAAU,EAEX,EACDrpB,CAAAA,CAAE0pB,EAASvqB,GACVV,EAAMirB,CACN,EACDjqB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACD6nB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CASA,SAAS8c,GAAevlC,EAAQmW,GAI/B,OAHAnW,EAAO6K,MAAQsL,EAAOtL,MACtB7K,EAAOqV,IAAMc,EAAOd,IACpBrV,EAAOkV,YAAciB,EAAOjB,YACrBlV,CACR,CAEA,SAASwlC,GAAav4B,GACrB,OAAOA,EAAQw4B,YAAsC,UAAxBx4B,EAAQy4B,aAA6C,EAAlBz4B,EAAQ6d,QACzE,CAEA,SAASua,GAA4BM,GACpC,OAAO14B,IACF04B,KACH14B,EAAQX,gBACT,CAEF,CAEA,SAAS+d,GAAWC,EAAQC,EAASC,GACpC,IAAIkD,EACAkY,EACAjpB,EACA6c,EACAqM,EACAjiB,EACAT,EACAsH,EACA+D,EACAsX,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3C,EACAjG,EACA6I,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA5F,EACAjT,EACArR,EACAmqB,EACAC,EAqCAhY,EACAiY,EACA5lC,EACAmU,EACAlG,EAAM43B,EACN9tB,EAAU+tB,EACVC,EAAOC,EACPC,EAAKC,EACLnS,GAAQG,GAAUiS,GAAQC,GAC1BC,GACAxyB,GACAyyB,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAvvB,GACAwvB,IAvDAlhB,SAAEA,GAAQE,QAAEA,GAAO9K,QAAEA,GAAOjF,MAAEA,GAAK6L,SAAEA,GAAQmlB,WAAEA,GAAUjiB,QAAEA,GAAOkb,oBAAEA,GAAmBgH,UAAEA,GAASC,eAAEA,GAAcC,WAAEA,GAAUC,qBAAEA,GAAoBC,eAAEA,GAAcC,cAAEA,GAAaC,UAAEA,GAASC,oBAAEA,GAAmBC,iBAAEA,GAAgBC,gBAAEA,GAAeC,YAAEA,GAAWC,eAAEA,GAAcC,iBAAEA,GAAgBjpB,WAAEA,GAAYuX,OAAQ2R,GAAQC,sBAAEA,GAAqBC,iBAAEA,GAAgBC,qBAAEA,GAAoBC,kBAAEA,GAAiBppB,aAAEA,GAAYE,WAAEA,GAAUK,UAAEA,GAAWyO,SAAUqa,GAAUC,aAAEA,GAAYC,eAAEA,GAActnB,WAAEA,GAAU9N,KAAEA,IAASxQ,EAAW,SAiLphB,SAAS6lC,GAAO18B,GACfrN,OAAOgqC,eAAeC,kBACtBvC,EAAQE,EAAMv6B,EAAQ68B,QACtBvC,EAAQE,EAAMx6B,EAAQ88B,QACtB,IAAI3a,EAAQpb,GAAsBwzB,EAAKC,KACpCryB,UAAQ5F,OAAM8J,YAAajG,GAAW+b,EAAX/b,CAAkBm0B,EAAKC,IAEjD5yB,GAAasO,GAChBmS,GAASoS,GAASvZ,GAElBmH,GAAS1hB,GAASwb,EAAO9V,EAAW,EAAI,GACxCouB,GAAS9zB,GAASwb,EAAO9V,IA1PR,IAkoBX4V,GAxY8CkS,GAAwB,EAAI,IAGjF4I,KAE4B,UAAxB/8B,EAAQy4B,aAEXlb,EAAa,EAAG0d,GAAQl1B,YACvB,KACKkc,IACHiY,GAAc,EACd8C,GAAKh9B,GACN,IAEAi9B,KACClD,EACAD,IAAyBD,GAG9B,CAEA,SAASmD,GAAKh9B,GACb,GAAIk6B,GAAel6B,GAAmC,UAAxBA,EAAQy4B,aA8W/BhnC,KAAKyrC,KAAKzrC,KAAK2P,IAAIm5B,EAAMF,EAAO,GAAK5oC,KAAK2P,IAAIo5B,EAAMF,EAAO,MA9Wc2C,KAAcrD,EAAqBD,GAAwB,CAC1IO,GAAc,EACdhY,GAASliB,GACT5N,EAAgB+nB,GAASoH,EAAWqZ,GAAQrZ,GAEvCgL,EAAU,KACV0Q,KA8RN7qC,EACC6nB,GACAsS,EAAU,GAAK,CACdxkB,GAAI,WACJI,OAAQ7T,EAAM6T,OACdvK,MAAOtJ,EAAMsJ,MACbyK,MAAO,GACPI,QAAS,UACTC,cAAe,CAAE,EACjBC,gBAAiBiwB,EACjB3wB,YAAa3T,EAAM2T,YACnBa,WAAY,GACZC,OAAQ,IAETwjB,GAxCF,SAAsBvsB,EAASnQ,GAC1BwV,GAAWxV,IACdA,EAAS,CACRyE,MAAOiW,GAAsBjW,GAC7B0L,UACAqH,KAAMD,GAAqBqZ,KAI7BhY,EAAUnU,EAAMmU,QAChBnU,EAAMmU,QAAU,UAChBrW,EAAgB6nB,GAAUsS,EAAU,GAAKzhB,GAAWxW,GAAQi4B,QAE7Cz8B,IAAX6b,IACHvZ,EAAgB6nB,GAAUsS,EAAU,GAAGjG,QAAU3a,GAAQ4gB,GAGtD4O,IACH14B,GAAY8pB,EAAU,GAAGnkB,IAAK+yB,IAG/B7mC,EAAMmU,QAAU,QAChB4G,GAAQ/c,IAAIod,EACb,CAxRIytB,CAAan9B,EAASo9B,KAAa1D,EAAoBD,IAIzD,IAAItzB,EAAUk3B,GAoNRt2B,GAAsBixB,GAAMuC,EAAKW,GAAS,GAAIA,GAAS,IAAKlD,GAAMwC,EAAKU,GAAS,GAAIA,GAAS,MAlNnG,GAAI/0B,EAAS,CACZ,IAAIm3B,EAGJ,KAFGn1B,OAAQm1B,EAAW/6B,KAAM43B,EAAS9tB,SAAU+tB,GAAgBj0B,GAE3Dm3B,IAAcn1B,GAAQ,CACzB,IAAIo1B,EAAYjF,GAAe,CAAE,EAAE/L,EAAU,IACzCiR,EAAehE,EACnBmB,GAAQ75B,IAAgBq5B,EAAU53B,GAAQ,KAEtCk7B,MAEHF,EAAU3/B,MAAQ6E,GAAYH,GAAUhO,EAAMsJ,OAAQ+8B,IAElD4C,EAAU3/B,MAAQi9B,KACrB0C,EAAU3/B,MAAQi9B,GAClBF,GAAQ75B,IAAgB+5B,GAAYvmC,EAAMsJ,OAAS,QAGpD2/B,EAAUn1B,IAAM3F,GAAYH,GAAUhO,EAAM8T,KAAMuyB,IAE9CQ,IACH14B,GAAY86B,EAAUn1B,IAAK+yB,IAGxBiC,KAECG,EAAUn1B,IAAMyyB,KACnB0C,EAAUn1B,IAAMyyB,GAChBF,GAAQ75B,IAAgB+5B,GAAYvmC,EAAM8T,KAAO,MAExC60B,MAENM,EAAUn1B,IAAM9T,EAAM8T,KACzBm1B,EAAU3/B,MAAQwF,GAAiBm6B,EAAUn1B,IAAK0yB,IAClDyC,EAAUn1B,IAAM9T,EAAM8T,KAEtBm1B,EAAU3/B,MAAQtJ,EAAMsJ,MAGzB4/B,EAAejE,IAGfgE,EAAU3/B,MAAQ6E,GAAYH,GAAUhO,EAAMsJ,OAAQ+8B,IAElDtuB,IACHkxB,EAAUt1B,YAAc3T,EAAM2T,YAAYzM,QAAOuM,GAAMA,IAAOsE,EAAStE,KACvEw1B,EAAUt1B,YAAYzX,KAAK4pC,EAAYryB,KAGxCy1B,EAAelE,IAKjB,EAAG,CACF,QAAqBxpC,IAAjB0tC,EAA4B,CAO/B,GANAD,EAAYjF,GAAextB,GAAWxW,GAAQipC,IAM/B,IAJFC,EAAaP,KACxBS,GAAyBH,EAAWv9B,GACpC29B,GAAmBJ,EAAWjpC,EAAO0L,IAEjB,CAErB5N,EAAgB6nB,GAAUsS,EAAU,GAAK+L,GAAe/L,EAAU,GAAIj4B,GAAQi4B,GAE9E,KACD,CACD,CAGAn6B,EAAgB6nB,GAAUsS,EAAU,GAAK+L,GAAe/L,EAAU,GAAIgR,GAAYhR,EACnF,OAAS,EACV,CACD,CACD,CAEA,GAAI8M,EAAa,CAChB,IAAIuE,EAA2B,EAAdpN,EACbqN,EAAapH,EApaHhoC,EAsaN,KACH45B,KACCmS,EAAMoD,GACTjrC,OAAOmrC,SAAS,EAAGpsC,IAAK,IAAK8oC,EAAMoD,GAAc,IAG9CpD,EAAMhS,GAAS/c,IAAMmyB,IACxBvV,GAAOsI,WAAaj/B,IAAK,IAAK8oC,EAAMhS,GAAS/c,IAAMmyB,GAAc,IAG9DpD,EAAM7nC,OAAOorC,YAAcH,GAC9BjrC,OAAOmrC,SAAS,EAAG14B,GAAI,IAAKo1B,EAAM7nC,OAAOorC,YAAcH,GAAc,IAGlEpD,EAAMhS,GAAS9c,OAASkyB,IAC3BvV,GAAOsI,WAAavrB,GAAI,IAAKo1B,EAAMhS,GAAS9c,OAASkyB,GAAc,IAGhEh2B,GAAasO,KACZqkB,EAAM/R,GAASJ,KAAOyV,IACzBxV,GAAOgP,YAAc3lC,IAAK,IAAK6oC,EAAM/R,GAASJ,KAAOyV,GAAc,IAGhEtD,EAAM/R,GAASE,MAAQmV,IAC1BxV,GAAOgP,YAAcjyB,GAAI,IAAKm1B,EAAM/R,GAASE,MAAQmV,GAAc,KAGtE,EAhcK9F,KACDA,IAAO,EACPplC,OAAOqrC,uBAAsB,KACzBvvC,IACAspC,IAAO,CAAK,IA8btB,CAncF,IAAiBtpC,CAochB,CAsGA,SAAS4uC,GAAYlb,GACpB,GAAIA,EAAO,CACV,IAAIhc,EAAUC,GAAW+b,EAAX/b,CAAkBm0B,EAAKC,GAErC,IAAIr0B,EAAQ+N,SASX,OAAO/N,EARP,IAAKqX,EAAYpV,KAAOjC,EAAQ5D,KAAOib,EAAYpV,IAClD,OAAOi1B,GAAYlb,EAAM4E,oBAG1B,IAAKvJ,EAAY5f,OAASuI,EAAQ5D,KAAOib,EAAY5f,MACpD,OAAOy/B,GAAYlb,EAAM8b,uBAK5B,CAEA,OAAO,IACR,CAEA,SAASlB,KACRvU,GAAW/hB,GAAK4hB,IAChBqS,GAAWj0B,GAAKg0B,IAEhBS,GAAW,CACVxpC,GAAI,EAAGgpC,GAAStS,MAAQxgB,GAAasO,GAAS,EAAIS,EAAY,EAAI,IAClEvR,GACCtR,SAASoqC,gBAAgBC,YACzBzD,GAAStS,KAAOqS,GAAO0D,aACpB,EACJzsC,GACC,EACA82B,GAAS/c,KAEVrG,GAAItR,SAASoqC,gBAAgBpc,aAAc0G,GAAS/c,IAAM4c,GAAOvG,cAAgB,EAEnF,CA8CA,SAASsc,KACRhsC,EAAgB6nB,GAAUsS,EAAU,GAAK,KAAMA,EAChD,CAEA,SAAS5J,GAAY5vB,EAAQmW,GAC5BovB,GAAevlC,EAAQmW,GACvBmG,GAAQ/c,IAAIod,EACb,CAEA,SAASguB,GAAyBppC,EAAO0L,GACxC,IAAIpC,MAAEA,EAAKwK,IAAEA,GAAQmC,GAAsBjW,GAE3C,MAAO,CACNsJ,QACAwK,MACA0P,SAAUrU,GAAYnP,EAAMsJ,OAC5Bma,OAAQtU,GAAYnP,EAAM8T,KAC1BD,UACAd,KAAMD,GAAqBqZ,GAC3BpU,WACArM,UAEF,CAEA,SAAS29B,GAAmBrpC,EAAO+pC,EAAUr+B,GAC5C,IAAIoiB,EA2BJ,OAxBCA,EADGgb,KACIK,KACL,CACAa,WAAY3D,GACZ4D,SAAUz9B,GAAe,IAEzB,CACAw9B,WAAYx9B,GAAe,GAC3By9B,SAAU5D,IAGL,CACNA,SACA6D,YAAanyB,IAAa+tB,EAAc/tB,OAAWvc,EACnDsqC,YAAa/tB,IAAa+tB,EAAcA,OAActqC,GAIxDoB,GAAOkxB,EAAM,CACZ9tB,MAAOiW,GAAsBjW,GAC7B+pC,SAAU9zB,GAAsB8zB,GAChCh3B,KAAMD,GAAqBqZ,GAC3BzgB,YAGMoiB,CACR,CAUA,SAASgb,KACR,OAroBwB,IAqoBjBnb,GAAgCwb,IACxC,CAEA,SAASA,KACR,OAxoB0B,IAwoBnBxb,CACR,CAMA,SAASgb,KACR,OA/oBoB,IA+oBbhb,CACR,CAEA,SAASwc,KACR,OAAOxc,GAAUA,EAlpBE,CAmpBpB,CAEA,SAASC,GAASliB,GACb+6B,KACHA,IAAW,EACXqD,KAEI/4B,GAAWszB,IACdA,EAAY,CACX34B,UACAqH,KAAMD,GAAqBqZ,KAI/B,CAtmBArwB,EAAoBitB,EAAQpD,IAAU/pB,GAASqtB,EAAa,GAAIgP,EAAYr8B,KAC5EE,EAAoBitB,EAAQlD,IAASjqB,GAASqtB,EAAa,GAAIgE,EAAWrxB,KAC1EE,EAAoBitB,EAAQhO,IAASnf,GAASqtB,EAAa,GAAI7N,EAAWxf,KAC1EE,EAAoBitB,EAAQjT,IAAOla,GAASqtB,EAAa,GAAIkD,EAASvwB,KACtEE,EAAoBitB,EAAQpH,IAAU/lB,GAASqtB,EAAa,GAAI5G,EAAYzmB,KAC5EE,EAAoBitB,EAAQ+d,IAAYlrC,GAASqtB,EAAa,IAAK0c,EAAc/pC,KACjFE,EAAoBitB,EAAQlE,IAASjpB,GAASqtB,EAAa,IAAK2D,EAAWhxB,KAC3EE,EAAoBitB,EAAQgX,IAAqBnkC,GAASqtB,EAAa,IAAK4W,EAAuBjkC,KACnGE,EAAoBitB,EAAQge,IAAWnrC,GAASqtB,EAAa,GAAIsb,EAAa3oC,KAC9EE,EAAoBitB,EAAQie,IAAgBprC,GAASqtB,EAAa,GAAI+b,EAAkBppC,KACxFE,EAAoBitB,EAAQke,IAAYrrC,GAASqtB,EAAa,GAAI8b,EAAcnpC,KAChFE,EAAoBitB,EAAQme,IAAsBtrC,GAASqtB,EAAa,GAAIoc,EAAwBzpC,KACpGE,EAAoBitB,EAAQoe,IAAgBvrC,GAASqtB,EAAa,GAAIkc,EAAkBvpC,KACxFE,EAAoBitB,EAAQqe,IAAexrC,GAASqtB,EAAa,GAAIyb,EAAiB9oC,KACtFE,EAAoBitB,EAAQse,IAAWzrC,GAASqtB,EAAa,GAAIub,EAAa5oC,KAC9EE,EAAoBitB,EAAQue,IAAqB1rC,GAASqtB,EAAa,IAAKuc,EAAuB5pC,KACnGE,EAAoBitB,EAAQwe,IAAkB3rC,GAASqtB,EAAa,GAAImc,EAAoBxpC,KAC5FE,EAAoBitB,EAAQye,IAAiB5rC,GAASqtB,EAAa,GAAI0b,EAAmB/oC,KAC1FE,EAAoBitB,EAAQ0e,IAAa7rC,GAASqtB,EAAa,GAAIwb,EAAe7oC,KAClFE,EAAoBitB,EAAQ2e,IAAgB9rC,GAASqtB,EAAa,IAAKsc,EAAkB3pC,KACzFE,EAAoBitB,EAAQ4e,IAAkB/rC,GAASqtB,EAAa,GAAIic,EAAoBtpC,KAC5FE,EAAoBitB,EAAQrK,IAAY9iB,GAASqtB,EAAa,IAAKyc,EAAc9pC,KACjFE,EAAoBitB,EAAQ6e,IAAUhsC,GAASqtB,EAAa,GAAI2b,EAAYhpC,KAC5EE,EAAoBitB,EAAQ8e,IAAuBjsC,GAASqtB,EAAa,GAAIqb,EAAyB1oC,KACtGE,EAAoBitB,EAAQ+e,IAAkBlsC,GAASqtB,EAAa,GAAIgc,EAAoBrpC,KAC5FE,EAAoBitB,EAAQgf,IAAsBnsC,GAASqtB,EAAa,IAAKwc,EAAwB7pC,KACrGE,EAAoBitB,EAAQif,IAAmBpsC,GAASqtB,EAAa,IAAKqc,EAAqB1pC,KAC/FE,EAAoBitB,EAAQnK,IAAchjB,GAASqtB,EAAa,IAAK1N,EAAgB3f,KACrFE,EAAoBitB,EAAQjK,IAAYljB,GAASqtB,EAAa,GAAIiT,EAActgC,KAChFE,EAAoBitB,EAAQ5J,IAAWvjB,GAASqtB,EAAa,GAAIkZ,EAAavmC,KAC9EE,EAAoBitB,EAAQkf,IAAYrsC,GAASqtB,EAAa,GAAIob,EAAczoC,KAChFE,EAAoBitB,EAAQmf,IAActsC,GAASqtB,EAAa,GAAI6b,EAAgBlpC,KACpFE,EAAoBitB,EAAQof,IAAgBvsC,GAASqtB,EAAa,GAAI4b,EAAkBjpC,KACxFE,EAAoBitB,EAAQlI,IAAYjlB,GAASqtB,EAAa,GAAIC,EAActtB,KAChFE,EAAoBitB,EAAQhW,IAAMnX,GAASqtB,EAAa,GAAIrH,EAAQhmB,KA2kBpEka,GAAM/a,UAAU6yB,IAmBhB,MAAO,CA/SP,WACKuc,OACH1B,KACAC,KAEF,EA4SC/B,GACAhhB,GACAE,GACA9K,GACAjF,GACA6L,GACAmlB,GACAjiB,GACAkb,GACAgH,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAjpB,GACAkpB,GACAC,GACAC,GACAC,GACAC,GACAppB,GACAE,GACAK,GACA8oB,GACAC,GACAC,GACAtnB,GACA9N,GA7UD,SAA2BrH,GACtBy+B,MAAmBz+B,EAAQw4B,YAC9B+B,EAAMv6B,EAAQ68B,QACdrC,EAAMx6B,EAAQ88B,QACdE,GAAKh9B,GAEP,EAEA,SAAyBA,GAKxB,IAJI+6B,KAAY3B,GAAmBD,GAAmBn5B,EAAQjN,OAAO2rC,QAAQvF,IAC5EjX,GAASliB,GAGNiiB,GAAUjiB,EAAQw4B,UAAW,CAChC,GAAI0B,EACH,GAAI+C,MAGH,GAFAlC,IAAW,EAEP11B,GAAW6zB,GAAY,CAC1B,IAAI9W,EAAOsb,GAAyBnR,EAAU,GAAIvsB,GAClDk5B,EAAU9W,EACX,MACM,CACN9tB,EAAMmU,QAAUA,EAChB,IAAI5Y,EAAWutC,KAAanE,EAAmBD,EAE3C3zB,GAAWxV,IACdA,EAAS,CACRyE,MAAOiW,GAAsBjW,GAC7B0L,UACAqH,KAAMD,GAAqBqZ,KAI7B,IAAI4d,EAAWvzB,GAAWxW,GAK1B,GAJAquB,GAAYruB,EAAOi4B,EAAU,IAC7B6R,KACAvuC,EAAWutC,KAAarE,EAAeD,EAEnCzzB,GAAWxV,GAAW,CACzB,IAAI8uC,EAAWrqC,EAGfzE,EAASqB,GAFEysC,GAAmBrpC,EAAO+pC,EAAUr+B,GAEzB,CACrB4+B,MAAAA,GACCjc,GAAYgc,EAAUN,EACvB,IAEF,CACD,MAEA,IAtciB,IA0oBZpc,GApMagb,OAEb53B,GAAWwzB,KAAgBmC,GAAa,CAC3CT,EAAMv6B,EAAQ68B,QACdrC,EAAMx6B,EAAQ88B,QACd,IAAI3a,EAAQpb,GAAsBwzB,EAAKC,GAEvC,GAAIrY,EAAO,CACV,IAAIha,OAAEA,EAAM5F,KAAEA,EAAI8J,SAAEA,GAAajG,GAAW+b,EAAX/b,CAAkBm0B,EAAKC,GAExD3B,EAAW,CACV1wB,SACA5F,KAAMiB,GAAYjB,GAClBs8B,QAASp7B,GAAYlB,GACrB4f,QACAniB,UACAqH,KAAMD,GAAqBqZ,GAC3BpU,YAEF,CACD,CAIF6tB,GAAc,EACdjY,EAASoY,EAAQC,EAAQC,EAAMC,EAAMlmC,EAAQmU,EAAUlG,EAAO43B,EAAU9tB,EAAW+tB,EAAcO,GAAQQ,GAAgBhzB,GAAS/V,EAAgB+nB,GAASoH,EAAWsZ,GAAYC,GAAanvB,QAAS7b,EAAWyxB,GACnN8G,GAASoS,GAASjS,GAAWkS,QAAW5qC,EAEpCmrC,KACH6D,aAAa7D,IACb1d,EAAa,EAAG0d,QAAQnrC,GAE1B,CAEAkrC,IAAc,CACf,EA0PCyD,GAzDD,SAA0Bz+B,GACzB,GAAIy+B,KAAiB,CACpB,IAAI1rC,EAASiN,EAAQjN,OACjBgsC,EAAQ,GACRjhC,EAAOA,IAAMwH,GAAOy5B,GACxBA,EAAMvuC,KAAKmrB,GAAS5oB,EAAQ,YAAaqlC,IAA4B,IAAM8B,MAC3E6E,EAAMvuC,KAAKmrB,GAAS5oB,EAAQ,WAAY+K,IACxCihC,EAAMvuC,KAAKmrB,GAAS5oB,EAAQ,cAAe+K,GAC5C,CACD,EAhkBA,SAAckhC,EAAah/B,EAAS0mB,EAAQuY,EAAWC,EAAav1B,GAC9DsY,IACJA,EAASsW,GAAav4B,GACpB0mB,EACc,SAAbA,EAAO,GAzHe,EADF,EA6HpBuT,EAAY+E,GA9HE,EAKK,IA8HlBP,OACHnqC,EAAQ0qC,EACRtC,GAAO18B,GAEHi/B,IAEH18B,EAAO08B,GAGJC,IACHvzB,GAASuzB,GAGVtE,GAASlU,EACM,KAAbA,EAAO,GAAY,YAAc,YACjC,WAEEA,IAEC+W,MACH5C,GAAYv4B,GAAUhO,EAAM8T,KAExBD,IACHhE,GAAS02B,GAAWvmC,EAAMsJ,OAEtBi9B,IAAavmC,EAAM8T,KACtBpF,GAAY63B,MAGbz3B,GAAiBy3B,GAAWhrB,GAExBgrB,GAAYvmC,EAAMsJ,QACrBi9B,GAAYvmC,EAAMsJ,OAKnB2E,EAAOjO,EAAMsJ,SAGdi9B,GAAYv4B,GAAUhO,EAAMsJ,OAExBuK,IACHhE,GAAS02B,GAAWvmC,EAAM8T,KAEtByyB,IAAavmC,EAAMsJ,QAAU+L,GAChCtG,GAAOw3B,MAGRp4B,GAAYo4B,GAAWhrB,GAEnBgrB,GAAYvmC,EAAM8T,MACrByyB,GAAYvmC,EAAM8T,KAKnB7F,EAAOjO,EAAM8T,IAERuB,IACJpH,EAAOa,GAAiBd,GAAUC,GAAOsN,MAMxClG,IAAiBxB,KACpBgzB,GAAgBtrB,IAIlBmtB,GAAKh9B,IAGR,EAEA,SAAgBA,GACViiB,IACJA,EAASsW,GAAav4B,GACpBg6B,IAAgBtyB,GAASwO,GA/MR,EACD,EACI,EAkNlBuoB,OACH/B,GAAO18B,GACP46B,GAAS,YACTE,GAAa3yB,GAASrH,GAAe,CAAEmB,IAAK,IAAO4N,EAGnDvb,EAAQ,CACP6T,UACAvK,MAAO2E,EACP6F,IAAK3F,GAAYH,GAAUC,GAAOu4B,IAClC7yB,YAAaoE,EAAW,CAACA,EAAStE,IAAM,IAGzCi1B,GAAKh9B,IAGR,EAEA,WACMiiB,IACJA,EAtOsB,EAwOxB,EA+fCC,GArED,WACC8Y,IAAc,CACf,EAgBA,SAA2B1mC,GAC1B0C,EAAOnC,KAAKC,KAAMuoB,EAAQ/oB,EAC3B,EAE4B6qC,IAAMlE,GAoDnC,CAEA,MAAMmE,WAAeniC,GACpBgU,WAAAA,CAAYzc,GACX8pB,QAEAxiB,GACChH,KACAN,EACA4oB,GACAL,GACA7tB,EACA,CACCy3B,KAAM,GACN4D,OAAQ,GACR6C,SAAU,GACViS,aAAc,EACdnd,SAAU,GACV0G,QAAS,IAEV,KACA,EAAE,GAAI,GAAI,GAAI,GAAI,GAEpB,CAEA,QAAIjC,GACH,OAAO7xB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,UAAI45B,GACH,OAAOz1B,KAAKxE,GAAGK,IAAI,GACpB,CAEA,YAAIy8B,GACH,OAAOt4B,KAAKxE,GAAGK,IAAI,GACpB,CAEA,gBAAI0uC,GACH,OAAOvqC,KAAKxE,GAAGK,IAAI,EACpB,CAEA,YAAIuxB,GACH,OAAOptB,KAAKxE,GAAGK,IAAI,GACpB,CAEA,WAAIi4B,GACH,OAAO9zB,KAAKxE,GAAGK,IAAI,GACpB,EAKD,SAAS6uB,GAAkB7uB,GAC1B,IAAI4qB,EACAC,EAEJ,MAAO,CACN1iB,EAAGvK,EACHuM,CAAAA,CAAE/H,EAAQI,GACJooB,IACJC,EAAU,CACTnnB,EAAO1B,OAAQ,cAAqChC,EAAI,IACxD0D,EAAO1B,OAAQ,SAA2BhC,EAAI,KAG/C4qB,GAAU,EAEX,EACDrpB,EAAG3D,EACHoD,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACD6nB,GAAU,EACV1sB,EAAQ2sB,EACT,EAEF,CAMA,SAASoE,GAAWvC,EAAQC,EAASC,GACpC,IAAIgP,EACA1c,GACAoK,SAAEA,EAAQ/G,aAAEA,GAAiBrc,EAAW,SAC5CzG,EAAoBitB,EAAQpD,GAAU/pB,GAASqtB,EAAa,EAAGgP,EAAYr8B,KAC3EE,EAAoBitB,EAAQnK,GAAchjB,GAASqtB,EAAa,EAAG1N,EAAgB3f,KACnF,IAAIyS,EAAI,EAAGqE,EAAI,EAEf,SAASg2B,IACR,IAAI7a,EAAQpb,GAAsBpE,EAAGqE,GAErC,GAAImb,EAAO,CACV,IAAIha,OAAEA,EAAM5F,KAAEA,EAAI8J,SAAEA,EAAQ6H,SAAEA,GAAa9N,GAAW+b,EAAX/b,CAAkBzD,EAAGqE,GAEhE,IAAKkN,EAAU,CACd,IAAI6N,EAAM5Z,EAAS,EAAI,EASvB,OAPKokB,EAAUxK,IA0BlB,SAA4BA,GAC3B3vB,EACC6nB,EACAsS,EAAUxK,GAAO,CAChBha,GAAI,YACJM,MAAO,GACPI,QAAS,UACTC,cAAe,CAAE,EACjBC,gBAAiB,cACjBG,WAAY,GACZC,OAAQ,IAETwjB,EAEF,CAvCI+S,CAAmBvd,GAGpB3vB,EAAgB6nB,EAAUsS,EAAUxK,GAAKnkB,MAAQ2E,EAAMgqB,GACvDn6B,EAAgB6nB,EAAUsS,EAAUxK,GAAK3Z,IAAM3F,GAAYH,GAAUC,GAAOsN,GAAgB0c,QAC5Fn6B,EAAgB6nB,EAAUsS,EAAUxK,GAAK9Z,YAAcoE,EAAW,CAACA,EAAStE,IAAM,GAAIwkB,EAEvF,CACD,CAEAgT,GACD,CA8BA,SAASA,IACJhT,EAAU,IACbn6B,EAAgB6nB,EAAUsS,EAAU,GAAK,KAAMA,GAG5CA,EAAU,IACbn6B,EAAgB6nB,EAAUsS,EAAU,GAAK,KAAMA,EAEjD,CAUA,OARAlP,EAAO/sB,GAAG4H,OAAS,KACkB,GAAhCmlB,EAAO/sB,GAAGe,OACTk7B,EAAU,IACbgT,GAEF,EAGM,CA9CP,WACCvC,GACD,EA4CsB/iB,EAAU/G,EA1ChC,SAA2BlT,IAvC5B,SAAoBA,GACnB,OAAOA,EAAQw4B,WAAqC,UAAxBx4B,EAAQy4B,WACrC,EAsCM+G,CAAWx/B,KACd2C,EAAI3C,EAAQ68B,QACZ71B,EAAIhH,EAAQ88B,QACZE,IAEF,EAoCiEzQ,EAClE,CAEA,MAAMkT,WAAgBxiC,GACrBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASorB,GAAYJ,GAAmBtwB,EAAgB,CAAEmwC,aAAc,GACpF,CAEA,gBAAIA,GACH,OAAOvqC,KAAKxE,GAAGK,IAAI,EACpB,EAKD,SAAS4rB,GAAkB5rB,GAC1B,IAAImuB,EACAC,EACAxD,EACAC,EAEJ,MAAO,CACN1iB,CAAAA,GACCgmB,EAAMlrB,EAAQ,OACdmB,EAAK+pB,EAAK,QAASC,EAAmCpuB,EAAI,GAAG0zB,SAAqB1zB,EAAI,GAAK,IAAiBA,EAAI,GAAGiN,MAAQ,IAC3H,EACD9C,CAAAA,CAAE/H,EAAQI,GACTD,EAAOH,EAAQ+rB,EAAK3rB,GAEfooB,IACJC,EAAUnnB,EAAOyqB,EAAK,cAAuCnuB,EAAI,KACjE4qB,GAAU,EAEX,EACDrpB,CAAAA,CAAEvB,EAAKU,GACwB,EAA1BA,GAA+B0tB,KAAqBA,EAAmCpuB,EAAI,GAAG0zB,SAAqB1zB,EAAI,GAAK,IAAiBA,EAAI,GAAGiN,MAAQ,MAC/J7I,EAAK+pB,EAAK,QAASC,EAEpB,EACDprB,CAAAA,CAAED,GACGA,GACHL,EAAOyrB,GAGRvD,GAAU,EACVC,GACD,EAEF,CAEA,SAAS8E,GAAkB3vB,GAC1B,IAAIgsB,EACAG,EAAyBnsB,EAAI,IAAM4rB,GAAkB5rB,GAEzD,MAAO,CACNmI,CAAAA,GACKgkB,GAAUA,EAAShkB,IACvB6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACL2pB,GAAUA,EAAShiB,EAAE/H,EAAQI,GACjCD,EAAOH,EAAQ4pB,EAAiBxpB,EAChC,EACDjB,CAAAA,CAAEvB,EAAG4d,GAAW,IAARld,GAAMkd,EACK5d,EAAI,GACjBmsB,EACHA,EAAS5qB,EAAEvB,EAAKU,IAEhByrB,EAAWP,GAAkB5rB,GAC7BmsB,EAAShkB,IACTgkB,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,IAE9BG,IACVA,EAASnpB,EAAE,GACXmpB,EAAW,KAEZ,EACDnrB,EAAGpD,EACH8K,EAAG9K,EACHoF,CAAAA,CAAED,GACGA,GACHL,EAAOspB,GAGJG,GAAUA,EAASnpB,EAAED,EAC1B,EAEF,CAEA,SAAS8sB,GAAWnD,EAAQC,EAASC,GACpC,IAAImiB,EACAC,EACAC,EACAniB,EAQAoiB,GAPAvrC,MAAEA,GAAUgpB,GACZ1f,MAAEA,GAAQ,GAAU0f,GACpBpT,MAAEA,EAAK41B,sBAAEA,EAAqBC,wBAAEA,EAAuBz3B,SAAEA,GAAazR,EAAW,SAsBrF,OArBAzG,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,EAAGE,EAASvtB,KACrEE,EAAoBitB,EAAQyiB,GAAuB5vC,GAASqtB,EAAa,EAAGoiB,EAAyBzvC,KACrGE,EAAoBitB,EAAQ0iB,GAAyB7vC,GAASqtB,EAAa,GAAIqiB,EAA2B1vC,KAC1GE,EAAoBitB,EAAQ/U,GAAUpY,GAASqtB,EAAa,EAAGmiB,EAAYxvC,KAO3EmtB,EAAOngB,MAAQogB,IACV,UAAWA,GAASC,EAAa,EAAGjpB,EAAQgpB,EAAQhpB,OACpD,UAAWgpB,GAASC,EAAa,EAAG3f,EAAQ0f,EAAQ1f,MAAM,EAG/Dyf,EAAO/sB,GAAG4H,OAAS,KACkF,KAAhGmlB,EAAO/sB,GAAGe,OACbksB,EAAa,EAAGsiB,GAAanzB,GAAQpY,EAAMmU,WAAa6D,GAAYhY,EAAMmU,YAAc7K,GAASgiC,MAA+BtrC,EAAMkU,kBAAoBm3B,KAA4BrrC,EAAMgU,UAAYo3B,IACzM,EAGM,CACN9hC,EACAiiC,EACApiB,EACAvT,EACA41B,EACAC,EACAz3B,EACAhU,EACAorC,EACAC,EACAC,EA1BD,SAA6BtrC,GAC5B0C,EAAOnC,KAAKC,KAAMuoB,EAAQ/oB,EAC3B,EA2BD,CAEA,MAAM0rC,WAAgB/iC,GACrBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASgsB,GAAYF,GAAmBpxB,EAAgB,CAAEoF,MAAO,EAAGsJ,MAAO,GACvF,EAKD,SAASihB,GAAgBluB,GACxB,IAAIsvC,EACAthB,EAKJ,OAHAshB,EAAY,IAAIR,GAAQ,CAAE7pC,MADJ,CAAE,IAEFjF,EAAI,IAAIsvC,GAEvB,CACNnnC,CAAAA,GACCsC,GAAiB6kC,EAAU3vC,GAAGkI,SAC9B,EACDsC,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4kC,EAAWltC,EAAQI,GACnCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAKU,GAEN4uC,EAAU1iC,KADgB,CAAE,EAE5B,EACD5L,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcinC,EAAU3vC,GAAGkI,SAAUU,GACrCylB,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6mC,EAAU3vC,GAAGkI,SAAUU,GACtCylB,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACqB/C,EAAI,IAAI,MAC9B8K,GAAkBwkC,EAAWvsC,EAC9B,EAEF,CAEA,SAASsI,GAAgBrL,GACxB,IAAIsxB,EACA5G,EACAsB,EACAgC,EAEJsD,EAAS,IAAImd,GAAO,CAAExpC,MADH,CAAE,IAEFjF,EAAI,IAAIsxB,GAC3B,IAAInF,EAAwBnsB,EAAI,IAAMkuB,GAAgBluB,GAEtD,MAAO,CACNmI,CAAAA,GACCsC,GAAiB6mB,EAAO3xB,GAAGkI,UAC3B6iB,EAAIlnB,IACA2oB,GAAUA,EAAShkB,IACvB6jB,EAAkBvoB,GAClB,EACD0G,CAAAA,CAAE/H,EAAQI,GACTkI,GAAgB4mB,EAAQlvB,EAAQI,GAChCD,EAAOH,EAAQsoB,EAAGloB,GACd2pB,GAAUA,EAAShiB,EAAE/H,EAAQI,GACjCD,EAAOH,EAAQ4pB,EAAiBxpB,GAChCwrB,GAAU,CACV,EACDzsB,CAAAA,CAAEvB,EAAGke,GAAW,IAARxd,GAAMwd,EAEboT,EAAO1kB,KADgB,CAAE,GAGR5M,EAAI,GAChBmsB,GACHA,EAAS5qB,EAAEvB,EAAKU,GAES,EAArBA,GACH2H,GAAc8jB,EAAU,KAGzBA,EAAW+B,GAAgBluB,GAC3BmsB,EAAShkB,IACTE,GAAc8jB,EAAU,GACxBA,EAAShiB,EAAE6hB,EAAgBrpB,WAAYqpB,IAE9BG,IACVlkB,KAEAQ,GAAe0jB,EAAU,EAAG,GAAG,KAC9BA,EAAW,IAAI,IAGhB/jB,KAED,EACDpH,CAAAA,CAAEuH,GACGylB,IACJ3lB,GAAcipB,EAAO3xB,GAAGkI,SAAUU,GAClCF,GAAc8jB,GACd6B,GAAU,EACV,EACDtlB,CAAAA,CAAEH,GACDE,GAAe6oB,EAAO3xB,GAAGkI,SAAUU,GACnCE,GAAe0jB,GACf6B,GAAU,CACV,EACDhrB,CAAAA,CAAED,GACGA,IACHL,EAAOgoB,GACPhoB,EAAOspB,IAGWhsB,EAAI,IAAI,MAC3B8K,GAAkBwmB,EAAQvuB,GACtBopB,GAAUA,EAASnpB,EAAED,EAC1B,EAEF,CAEA,SAASqI,GAASshB,EAAQC,EAASC,GAClC,IAAI+D,EACAJ,EACAzD,EACAwc,EACA3U,EACAoa,EACAQ,EACAC,GACAj2B,MAAEA,EAAK5B,SAAEA,EAAQ83B,mBAAEA,EAAkBC,QAAEA,EAAOlnB,QAAEA,EAAOa,aAAEA,EAAYE,UAAEA,EAASkhB,WAAEA,GAAevkC,EAAW,SAWhH,SAASypC,IACR,IAAK,IAAIjwC,KAAa1B,OAAOmQ,OAAOwiB,GACnCjxB,GAAWgvC,gBAEb,CA4CA,OA1DAjvC,EAAoBitB,EAAQnT,GAAOha,GAASqtB,EAAa,GAAIE,EAASvtB,KACtEE,EAAoBitB,EAAQ/U,GAAUpY,GAASqtB,EAAa,GAAImiB,EAAYxvC,KAC5EE,EAAoBitB,EAAQ+iB,GAAoBlwC,GAASqtB,EAAa,GAAI2iB,EAAsBhwC,KAChGE,EAAoBitB,EAAQgjB,GAASnwC,GAASqtB,EAAa,EAAG4iB,EAAWjwC,KACzEE,EAAoBitB,EAAQlE,GAASjpB,GAASqtB,EAAa,GAAI2D,EAAWhxB,KAC1EE,EAAoBitB,EAAQrD,GAAc9pB,GAASqtB,EAAa,EAAG+D,EAAgBpxB,KACnFE,EAAoBitB,EAAQnD,GAAWhqB,GAASqtB,EAAa,GAAI+H,EAAap1B,KAC9EE,EAAoBitB,EAAQ+d,GAAYlrC,GAASqtB,EAAa,GAAI0c,EAAc/pC,KAChFkC,EAAgB4nB,EAAcsH,EAAc+C,QAAU2b,GAAS1e,GAsB/DjE,EAAO/sB,GAAG4H,OAAS,KACuC,MAArDmlB,EAAO/sB,GAAGe,OACbe,EAAgBgpC,EAAYnB,EAAc3lC,IAAUA,EAAMiU,eAAiB23B,KAAyB5rC,EAAMgU,UAAYo3B,GAAYzF,GAGrF,KAA1C5c,EAAO/sB,GAAGe,OACbe,EACC8nB,EACAoL,EAAaA,CAAChf,EAAWhS,KACxB,IAAImU,QAAEA,GAAYnU,EAElB,OAAOgY,GAAY7D,GACjB,CAACgV,EAAOhV,KACPiE,GAAQjE,IAAYwxB,EAAY3lC,GAChC,CAACmpB,EAAO8iB,WACR,EAAE,EAENjb,GAIiC,KAA/BjI,EAAO/sB,GAAGe,OACT6vB,GACHvF,GAASuF,EAAU,SAAUof,EAE/B,EAGM,CACNhf,EACA6e,EACAj2B,EACA5B,EACA83B,EACAC,EACAlnB,EACAa,EACAE,EACAkhB,EACAla,EACAzD,EACAwc,EACAyF,EACAQ,EAzDD,SAAwB/Y,GACvBjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C7F,EAAcW,OAASkF,EACvBnN,EAAa1nB,IAAIgvB,EAAc,GAEjC,EAEA,SAA2B6F,GAC1BjwB,EAAkBiwB,EAAU,UAAY,SAAQ,KAC/C7F,EAAc+e,QAAUlZ,EACxBnN,EAAa1nB,IAAIgvB,EAAc,GAEjC,EAiDD,CAEA,MAAML,WAAkBhkB,GACvBgU,WAAAA,CAAYzc,GACX8pB,QACAxiB,GAAKhH,KAAMN,EAASuH,GAAUC,GAAiB9M,EAAgB,GAChE,EAGD,IAAImO,GAAQ,CACRkY,aAAAA,CAAc/gB,GACVA,EAAQ6mC,eAAYvrC,EACpB0E,EAAQ8mC,oBAAiBxrC,EACzB0E,EAAQ+mC,YAAa,EACrB/mC,EAAQ8T,UAAW,EACnB9T,EAAQgnC,qBAAuB,EAC/BhnC,EAAQinC,oBAAiB3rC,EACzB0E,EAAQknC,mBAAgB5rC,EACxB0E,EAAQmnC,eAAY7rC,EACpB0E,EAAQsrC,uBAAwB,EAChCtrC,EAAQonC,yBAAsB9rC,EAC9B0E,EAAQurC,yBAA0B,EAClCvrC,EAAQqnC,sBAAmB/rC,EAC3B0E,EAAQsnC,qBAAkBhsC,EAC1B0E,EAAQunC,iBAAcjsC,EACtB0E,EAAQ4rC,oBAAqB,EAC7B5rC,EAAQwnC,eAAiB,IACzBxnC,EAAQ6rC,SAAU,EAClB7rC,EAAQynC,sBAAmBnsC,EAC3B0E,EAAQ+1B,YAASz6B,EACjB0E,EAAQ2nC,2BAAwBrsC,EAChC0E,EAAQ4nC,sBAAmBtsC,EAC3B0E,EAAQ6nC,0BAAuBvsC,EAC/B0E,EAAQ8nC,kBAAoB,EAC5B9nC,EAAQ0tB,cAAWpyB,EACnB0E,EAAQgoC,cAAe,EACvBhoC,EAAQioC,eAAiB,GACzBjoC,EAAQ0V,MAAMq2B,UAAY,eAC1B/rC,EAAQ0V,MAAMs2B,MAAQ,WACtBhsC,EAAQ0V,MAAMqf,QAAU,aACxB/0B,EAAQ0V,MAAMm2B,QAAU,aACxB7rC,EAAQ0V,MAAMma,QAAU,aACxB7vB,EAAQ0V,MAAMtM,MAAQ,WACtBpJ,EAAQ0V,MAAMu2B,SAAW,cACzBjsC,EAAQ0V,MAAMw2B,UAAY,gBAC1BlsC,EAAQ0V,MAAMy2B,UAAY,gBAC1BnsC,EAAQ0V,MAAM+yB,UAAY,cAC7B,EAED1iB,YAAAA,CAAapL,GACTA,EAAMisB,WAAav9B,GAASsf,IAC5BhO,EAAM6G,WAAW9d,QAAOyoB,GAAe,IAAIA,EAAaM,KAC5D,UC50CW,cAAcoB,GACzBpR,WAAAA,CAAYzK,EAAIhS,GACZ8pB,MAAM,CACFvrB,OAAQyT,EACR5Q,MAAO,CACHsb,QAAS,CAAC0vB,GAASC,GAAMlM,GAAUmM,GAAkBC,GAAkBC,IACvExsC,YAGZ","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}
\ No newline at end of file
diff --git a/view.php b/view.php
index cbc541f..50f8157 100644
--- a/view.php
+++ b/view.php
@@ -80,9 +80,9 @@ $event->trigger();
 // Set page settings.
 $PAGE->set_url('/mod/bookit/view.php', ['id' => $cm->id]);
 $PAGE->set_title(format_string($moduleinstance->name));
-$PAGE->requires->js(new moodle_url('/mod/bookit/assets/event-calendar.min.js'), true);
-$PAGE->requires->css(new moodle_url('/mod/bookit/assets/event-calendar.min.css'), true);
-$PAGE->requires->css(new moodle_url('/mod/bookit/assets/custom-calendar.min.css'), true);
+$PAGE->requires->js(new moodle_url('/mod/bookit/thirdpartylibs/event-calendar/event-calendar.min.js'), true);
+$PAGE->requires->css(new moodle_url('/mod/bookit/thirdpartylibs/event-calendar/event-calendar.min.css'));
+$PAGE->requires->css(new moodle_url('/mod/bookit/thirdpartylibs/event-calendar/custom-calendar.min.css'));
 $PAGE->set_heading(format_string($course->fullname));
 $PAGE->set_context($modulecontext);
 
diff --git a/view_room.php b/view_room.php
new file mode 100644
index 0000000..204f029
--- /dev/null
+++ b/view_room.php
@@ -0,0 +1,92 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Admin-Backend concerning rooms for mod_bookit.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+// Override active url for admin tree / breadcrumbs.
+navigation_node::override_active_url(new moodle_url('/mod/bookit/rooms.php'));
+admin_externalpage_setup('mod_bookit_rooms');
+
+$id = required_param('id', PARAM_INT);
+$room = \mod_bookit\local\persistent\room::get_record(['id' => $id], MUST_EXIST);
+
+$url = new moodle_url('/mod/bookit/view_room.php', ['id' => $id]);
+
+$action = optional_param('action', null, PARAM_ALPHANUMEXT);
+if ($action === 'delete') {
+    $weekplanroomid = required_param('weekplanroomid', PARAM_INT);
+    $record = \mod_bookit\local\persistent\weekplan_room::get_record(['id' => $weekplanroomid], MUST_EXIST);
+    $record->delete();
+    redirect($url);
+}
+
+$PAGE->set_url($url);
+$title = $room->get('name');
+$PAGE->set_heading($title);
+$PAGE->set_title($title);
+$PAGE->navbar->add($title, new moodle_url($PAGE->url));
+
+$PAGE->requires->js(new moodle_url('/mod/bookit/thirdpartylibs/event-calendar/event-calendar.min.js'), true);
+$PAGE->requires->css(new moodle_url('/mod/bookit/thirdpartylibs/event-calendar/event-calendar.min.css'));
+$PAGE->requires->css(new moodle_url('/mod/bookit/thirdpartylibs/event-calendar/custom-calendar.min.css'));
+$eventsource = (new moodle_url('/mod/bookit/events_available.php', ['roomid' => $room->get('id')]))->out(false);
+$PAGE->requires->js_call_amd(
+    'mod_bookit/available_calendar',
+    'init',
+    [
+        $eventsource,
+        current_language(),
+        [],
+    ]
+);
+
+$table = new \mod_bookit\local\table\weekplan_room_table($id);
+
+echo $OUTPUT->header();
+
+echo \core\output\html_writer::link(
+    new moodle_url('/mod/bookit/edit_room.php', ['id' => $id]),
+    get_string('edit_room_data', 'mod_bookit'),
+    ['class' => 'btn btn-primary mb-3']
+);
+
+echo $OUTPUT->heading(get_string('weekplan_assignments', 'mod_bookit'), 2, 'mt-4');
+
+echo \core\output\html_writer::link(
+    new moodle_url('/mod/bookit/edit_weekplan_room.php', ['roomid' => $room->get('id')]),
+    get_string('new_weekplan_assignment', 'mod_bookit'),
+    ['class' => 'btn btn-primary mb-2']
+);
+
+$table->out(48, false);
+
+echo $OUTPUT->heading(get_string('calendar', 'mod_bookit'), 2, 'mt-4');
+
+echo '<div id="ec" class="mt-2 mb-2"></div>';
+
+echo $OUTPUT->render_from_template('mod_bookit/admin_calendar_legend', []);
+
+echo $OUTPUT->footer();
diff --git a/weekplan.php b/weekplan.php
new file mode 100644
index 0000000..e6ed8d3
--- /dev/null
+++ b/weekplan.php
@@ -0,0 +1,63 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Admin-Backend concerning rooms for mod_bookit.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $DB, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+// Override active url for admin tree / breadcrumbs.
+navigation_node::override_active_url(new moodle_url('/mod/bookit/weekplans.php'));
+admin_externalpage_setup('mod_bookit_weekplans');
+
+$id = required_param('id', PARAM_INT);
+$weekplan = $DB->get_record('bookit_weekplan', ['id' => $id], '*', MUST_EXIST);
+
+$records = $DB->get_records('bookit_weekplanslot', ['weekplanid' => $id]);
+$eventsbyday = \mod_bookit\local\manager\weekplan_manager::group_events_by_day($records);
+
+$PAGE->set_url(new moodle_url('/mod/bookit/weekplan.php', ['id' => $id]));
+$PAGE->set_heading($weekplan->name);
+$PAGE->set_title($weekplan->name);
+
+$PAGE->navbar->add($weekplan->name, new moodle_url($PAGE->url));
+
+echo $OUTPUT->header();
+
+echo $OUTPUT->render(new \core\output\single_button(
+    new moodle_url('/mod/bookit/edit_weekplan.php', ['id' => $id]),
+    get_string('edit'),
+    'post',
+    single_button::BUTTON_PRIMARY
+)) . '<br><br>';
+
+foreach ($eventsbyday as $weekdayindex => $events) {
+    echo "<h3>" . \mod_bookit\local\manager\weekplan_manager::WEEKDAYS[$weekdayindex] . "</h3>";
+    echo "<ul>";
+    foreach ($events as $event) {
+        echo "<li>" . htmlentities($event) . "</li>";
+    }
+    echo "</ul>";
+}
+
+echo $OUTPUT->footer();
diff --git a/weekplans.php b/weekplans.php
new file mode 100644
index 0000000..62acfa2
--- /dev/null
+++ b/weekplans.php
@@ -0,0 +1,46 @@
+<?php
+// This file is part of Moodle - http://moodle.org/
+//
+// Moodle is free software: you can redistribute it and/or modify
+// it under the terms of the GNU General Public License as published by
+// the Free Software Foundation, either version 3 of the License, or
+// (at your option) any later version.
+//
+// Moodle is distributed in the hope that it will be useful,
+// but WITHOUT ANY WARRANTY; without even the implied warranty of
+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+// GNU General Public License for more details.
+//
+// You should have received a copy of the GNU General Public License
+// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
+
+/**
+ * Admin-Backend concerning rooms for mod_bookit.
+ *
+ * @package    mod_bookit
+ * @copyright  2025 Justus Dieckmann RUB
+ * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
+ */
+
+require_once(__DIR__ . '/../../config.php');
+global $CFG, $OUTPUT, $PAGE;
+require_once($CFG->libdir . '/adminlib.php');
+
+admin_externalpage_setup('mod_bookit_weekplans');
+$PAGE->set_url(new moodle_url('/mod/bookit/weekplans.php'));
+$PAGE->set_heading(get_string('weekplans', 'mod_bookit'));
+
+$table = new \mod_bookit\local\table\weekplans_table();
+
+echo $OUTPUT->header();
+
+echo $OUTPUT->render(new \core\output\single_button(
+    new moodle_url('/mod/bookit/edit_weekplan.php'),
+    get_string('new_weekplan', 'mod_bookit'),
+    'post',
+    single_button::BUTTON_PRIMARY
+)) . '<br><br>';
+
+$table->out(48, false);
+
+echo $OUTPUT->footer();
-- 
2.34.1


From fdc26e61a203b4da5c589569afd5baba84d452a5 Mon Sep 17 00:00:00 2001
From: Andreas Rosenthal <arosenthal@ssystems.de>
Date: Mon, 29 Sep 2025 13:43:34 +0200
Subject: [PATCH 2/2] fix room and role colors

---
 assets/roles/bookit_serviceteam.xml           |  2 +
 .../local/entity/bookit_checklist_item.php    | 23 +++++-
 classes/local/manager/checklist_manager.php   | 81 ++++++++++++++++---
 classes/local/manager/color_manager.php       |  9 ++-
 .../bookit_checklist_item_roles.mustache      |  2 +-
 .../bookit_checklist_item_rooms.mustache      |  3 +-
 version.php                                   |  2 +-
 7 files changed, 103 insertions(+), 19 deletions(-)

diff --git a/assets/roles/bookit_serviceteam.xml b/assets/roles/bookit_serviceteam.xml
index daedfc0..04f5578 100644
--- a/assets/roles/bookit_serviceteam.xml
+++ b/assets/roles/bookit_serviceteam.xml
@@ -7,6 +7,7 @@
 	<contextlevels>
 		<level>course</level>
 		<level>module</level>
+		<level>system</level>
 	</contextlevels>
 	<allowassign>
 		<shortname>serviceteam</shortname>
@@ -957,5 +958,6 @@
 		<allow>moodle/course:enrolreview</allow>
 		<allow>moodle/role:assign</allow>
 		<allow>moodle/user:viewdetails</allow>
+		<allow>moodle/site:configview</allow>
 	</permissions>
 </role>
diff --git a/classes/local/entity/bookit_checklist_item.php b/classes/local/entity/bookit_checklist_item.php
index 4995370..a255f6c 100644
--- a/classes/local/entity/bookit_checklist_item.php
+++ b/classes/local/entity/bookit_checklist_item.php
@@ -209,23 +209,40 @@ class bookit_checklist_item implements \renderable, \templatable {
         $data->roomids = json_encode($this->roomids);
 
         foreach ($this->roomids as $roomid) {
+            $room = checklist_manager::get_room_by_id((int) $roomid);
             $data->roomnames[] = [
-                'roomname' => checklist_manager::get_roomname_by_id((int) $roomid),
+                'roomname' => $room->name,
                 'roomid' => (int) $roomid,
+                'eventcolor' => $room->eventcolor,
+                'textclass' => $room->textclass,
             ];
         }
 
         $data->roleids = json_encode($this->roleids);
         $data->rolenames = [];
+
         foreach ($this->roleids as $roleid) {
-            $data->rolenames[] = [
-                'rolename' => checklist_manager::get_rolename_by_id((int) $roleid),
+            $role = checklist_manager::get_role_by_id((int) $roleid);
+
+            $roleData = [
+                'rolename' => $role ? $role->name : '',
                 'roleid' => (int) $roleid,
             ];
+
+            // Check if current user has this specific role
+            if (checklist_manager::user_has_bookit_role((int) $roleid)) {
+                $roleData['extraclasses'] = 'badge badge-warning text-dark';
+            } else {
+                $roleData['extraclasses'] = 'badge badge-primary text-light';
+            }
+
+            $data->rolenames[] = $roleData;
         }
 
         $data->type = 'item';
 
+        // die(print_r($data, true));
+
         return $data;
     }
 }
diff --git a/classes/local/manager/checklist_manager.php b/classes/local/manager/checklist_manager.php
index 372155a..58469cd 100644
--- a/classes/local/manager/checklist_manager.php
+++ b/classes/local/manager/checklist_manager.php
@@ -29,6 +29,7 @@ use mod_bookit\local\entity\bookit_checklist_master;
 use mod_bookit\local\entity\bookit_checklist_category;
 use mod_bookit\local\entity\bookit_checklist_item;
 use mod_bookit\local\entity\bookit_notification_slot;
+use mod_bookit\local\manager\color_manager;
 
 /**
  * Checklist manager class.
@@ -137,19 +138,49 @@ class checklist_manager {
     /**
      * Get all rooms available for BookIt.
      *
-     * @return array Array of room resources
+     * @return array Array of room records from database
+     * @throws dml_exception
      */
     public static function get_bookit_rooms() {
+        global $DB;
+
+        $records = $DB->get_records('bookit_room', null, 'name ASC');
 
-        $categories = categories_manager::get_categories();
+        return array_values(array_map(function($record) {
+            $eventcolor = $record->eventcolor ?? '';
+            $textcolor = color_manager::get_textcolor_for_background($eventcolor);
+            $textclass = $textcolor === '#000' ? 'text-dark' : 'text-light';
 
-        $roomsarray = array_filter($categories, fn($cat) => $cat['name'] === 'Rooms');
-        $rooms = reset($roomsarray)['resources'];
+            $record->textclass = $textclass;
 
-        return $rooms;
+            return $record;
+        }, $records));
     }
 
     /**
+     * Get a single room by ID.
+     *
+     * @param int $roomid The ID of the room
+     * @return object|null Room record or null if not found
+     * @throws dml_exception
+     */
+    public static function get_room_by_id(int $roomid): ?object {
+        global $DB;
+
+        $record = $DB->get_record('bookit_room', ['id' => $roomid]);
+
+        if (!$record) {
+            return null;
+        }
+
+        $eventcolor = $record->eventcolor ?? '';
+        $textcolor = color_manager::get_textcolor_for_background($eventcolor);
+        $textclass = $textcolor === '#000' ? 'text-dark' : 'text-light';
+
+        $record->textclass = $textclass;
+
+        return $record;
+    }    /**
      * Get the readable name for a checklist item state.
      *
      * @param int $state The state value
@@ -196,12 +227,8 @@ class checklist_manager {
      * @return string Room name or empty string if not found
      */
     public static function get_roomname_by_id(int $roomid): string {
-        $rooms = self::get_bookit_rooms();
-        $roommatch = array_filter($rooms, fn($item) => $item['id'] == $roomid);
-        if (!empty($roommatch)) {
-            return reset($roommatch)['name'];
-        }
-        return '';
+        $room = self::get_room_by_id($roomid);
+        return $room ? $room->name : '';
     }
 
     /**
@@ -218,4 +245,36 @@ class checklist_manager {
         }
         return '';
     }
+
+    /**
+     * Get role by role ID.
+     *
+     * @param int $roleid The ID of the role
+     * @return object|null Role object or null if not found
+     */
+    public static function get_role_by_id(int $roleid): ?object {
+        $roles = self::get_bookit_roles();
+        $rolematch = array_filter($roles, fn($item) => $item->id == $roleid);
+        if (!empty($rolematch)) {
+            return reset($rolematch);
+        }
+        return null;
+    }
+
+    /**
+     * Check if current user has a specific role ID in any context.
+     *
+     * @param int $roleid Role ID to check
+     * @return bool True if user has the role
+     */
+    public static function user_has_bookit_role(int $roleid): bool {
+        global $USER, $DB;
+
+        $sql = "SELECT COUNT(*)
+                FROM {role_assignments} ra
+                WHERE ra.roleid = ?
+                AND ra.userid = ?";
+
+        return $DB->count_records_sql($sql, [$roleid, $USER->id]) > 0;
+    }
 }
diff --git a/classes/local/manager/color_manager.php b/classes/local/manager/color_manager.php
index a0745b6..2385dab 100644
--- a/classes/local/manager/color_manager.php
+++ b/classes/local/manager/color_manager.php
@@ -42,8 +42,13 @@ class color_manager {
     }
 
     private static function calculate_textcolor_for_background(string $color): string {
-        return self::calculate_luminosity_ratio($color, '#000') > self::calculate_luminosity_ratio($color, '#fff')
-            ? '#000' : '#fff';
+        // Simple luminosity-based approach: if background is dark, use white text; if light, use black text
+        $luminosity = self::calculate_luminosity($color);
+
+        // Luminosity threshold: 0.5 is middle grey
+        // Values below 0.5 are considered dark (use white text)
+        // Values above 0.5 are considered light (use black text)
+        return $luminosity < 0.5 ? '#fff' : '#000';
     }
 
     /**
diff --git a/templates/bookit_checklist_item_roles.mustache b/templates/bookit_checklist_item_roles.mustache
index 47e2e48..f98a0eb 100644
--- a/templates/bookit_checklist_item_roles.mustache
+++ b/templates/bookit_checklist_item_roles.mustache
@@ -29,7 +29,7 @@
 <td class="align-middle py-3" data-bookit-checklistitem-tabledata-roleids-id="{{id}}">
 {{#rolenames}}
     <div>
-        <span class="badge badge-primary text-light" style="opacity: 0.8;"
+        <span class="badge {{extraclasses}}" style="opacity: 0.8;"
             data-bookit-checklistitem-tabledata-role-id="{{roleid}}"
             data-bookit-checklistitem-rolename="{{rolename}}"
             data-bookit-checklistitem-tabledata-is-role-element>{{rolename}}</span>
diff --git a/templates/bookit_checklist_item_rooms.mustache b/templates/bookit_checklist_item_rooms.mustache
index d74669f..126abce 100644
--- a/templates/bookit_checklist_item_rooms.mustache
+++ b/templates/bookit_checklist_item_rooms.mustache
@@ -29,7 +29,8 @@
 <td class="align-middle py-3" data-bookit-checklistitem-tabledata-roomids-id="{{id}}">
 {{#roomnames}}
     <div>
-        <span class="badge badge-info text-light" style="opacity: 0.8;"
+        <span class="badge {{textclass}}"
+            style="opacity: 0.8;background-color: {{eventcolor}};"
             data-bookit-checklistitem-tabledata-room-id="{{roomid}}"
             data-bookit-checklistitem-roomname="{{roomname}}"
             data-bookit-checklistitem-tabledata-is-room-element>{{roomname}}</span>
diff --git a/version.php b/version.php
index d480f45..749ba88 100644
--- a/version.php
+++ b/version.php
@@ -25,7 +25,7 @@
 defined('MOODLE_INTERNAL') || die();
 
 $plugin->component = 'mod_bookit';
-$plugin->version = 2025091801;
+$plugin->version = 2025092900;
 $plugin->release = '0.1.0';
 $plugin->requires = 2024100700; // Moodle 4.5 (LTS).
 $plugin->supported = [405, 406];
-- 
2.34.1

