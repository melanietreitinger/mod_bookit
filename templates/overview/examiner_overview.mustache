{{!
    This file is part of Moodle - https://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template mod_bookit/overview/examiner_overview

    Examiner overview table with live search and sortable columns.
    The title link opens the event details ModalForm (handled by existing AMD JS).

    Classes required for JS:
    * bookit-event-link

    IDs required for JS:
    * bookit-filter

    Context variables required for this template:
    * tableid - The HTML id attribute value for the table element.
    * events - Array of event rows.

    Event row fields:
    * id - Event id.
    * name - Event title (already formatted).
    * room - Room label (string).
    * personincharge - Full name of the person in charge (string).
    * myrole - Role label for current user (string).
    * statustext - Booking status label (string).
    * statusstyle - Inline CSS for the status cell (string).
    * datestr - Date string for display (string).
    * starttime - Unix timestamp used for sorting (number).
    * cmid - Course module id for the modal (number).
    * checklistprogress - Checklist progress label (string).
    * checklistlabel - Checklist button label (string).

    Example context (json):
    {
      "tableid": "overview-table",
      "events": [
        {
          "id": 123,
          "name": "Exam A",
          "room": "Room 1",
          "personincharge": "Jane Doe",
          "myrole": "Person in charge",
          "statustext": "Accepted",
          "statusstyle": "background-color:#d4edda;color:#000000;",
          "datestr": "14.01.2026",
          "starttime": 1768425600,
          "cmid": 42,
          "checklistprogress": "--",
          "checklistlabel": "Checklist"
        }
      ]
    }
}}

<div class="mod_bookit-overview-examiner_overview">
    <div class="mb-3">
        <label for="bookit-filter" class="mr-2">{{#str}}search, core{{/str}}:</label>
        <input type="text" id="bookit-filter" class="form-control w-auto d-inline">
    </div>

    <table id="{{tableid}}" class="generaltable table-striped table-hover w-100">
        <thead>
            <tr style="background-color:#cfe2ff;">
                <th>ID</th>
                <th>Title</th>
                <th>Room</th>
                <th>Person in charge</th>
                <th>My role</th>
                <th>Booking status</th>
                <th>Date</th>
                <th>Checklist progress</th>
                <th>Checklist</th>
            </tr>
        </thead>

        <tbody>
            {{#events}}
                <tr>
                    <td>{{id}}</td>

                    <td>
                        <a href="#"
                           class="bookit-event-link"
                           data-eventid="{{id}}"
                           data-cmid="{{cmid}}">
                            {{name}}
                        </a>
                    </td>

                    <td>{{room}}</td>
                    <td>{{personincharge}}</td>
                    <td>{{myrole}}</td>

                    <td style="{{statusstyle}}">{{statustext}}</td>

                    <td data-sort="{{starttime}}">{{datestr}}</td>

                    <td><span class="badge bg-secondary">{{checklistprogress}}</span></td>

                    <td><a href="#" class="btn btn-sm btn-primary">{{checklistlabel}}</a></td>
                </tr>
            {{/events}}
        </tbody>
    </table>
</div>
