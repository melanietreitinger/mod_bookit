{"version":3,"file":"drag_handle.min.js","sources":["../../src/helpers/drag_handle.js"],"sourcesContent":["import {BaseComponent, DragDrop} from 'core/reactive';\r\nimport {masterChecklistReactiveInstance} from 'mod_bookit/masterchecklist/master_checklist_reactive';\r\nimport {SELECTORS} from 'mod_bookit/masterchecklist/master_checklist_reactive';\r\n\r\nexport default class extends BaseComponent {\r\n\r\n    static init(target, selectors) {\r\n        return new this({\r\n            element: document.querySelector(target),\r\n            reactive: masterChecklistReactiveInstance,\r\n            selectors: selectors || SELECTORS,\r\n        });\r\n    }\r\n\r\n    stateReady() {\r\n        this.relativeDrag = true;\r\n\r\n        const dragType = this.element.dataset.bookitDragHandleType;\r\n        const dragId = this.element.dataset.bookitDragHandleId;\r\n\r\n        var fullRegionSelector = '';\r\n\r\n        switch (dragType) {\r\n            case 'item':\r\n                fullRegionSelector = `tr[data-bookit-drag-handle-${dragType}-id=\"${dragId}\"]`;\r\n                break;\r\n            case 'category':\r\n                fullRegionSelector = `tbody[data-bookit-tbody-category-id=\"${dragId}\"]`;\r\n                break;\r\n            default:\r\n                throw new Error(`Unknown drag handle type: ${dragType}`);\r\n        }\r\n\r\n        const fullRegionElement = document.querySelector(fullRegionSelector);\r\n\r\n        this.fullregion = fullRegionElement;\r\n\r\n        this.dragdrop = new DragDrop(this);\r\n    }\r\n\r\n    destroy() {\r\n        if (this.dragdrop !== undefined) {\r\n            this.dragdrop.unregister();\r\n        }\r\n    }\r\n\r\n    getDraggableData() {\r\n        const dragType = this.element.dataset.bookitDragHandleType;\r\n        var parentId;\r\n        switch (dragType) {\r\n            case 'item':\r\n                parentId = this.fullregion.dataset.bookitChecklistitemCategoryid;\r\n                break;\r\n            case 'category':\r\n                parentId = this.fullregion.dataset.bookitCategoryMasterid;\r\n                break;\r\n            default:\r\n                throw new Error(`Unknown drag handle type: ${dragType}`);\r\n        }\r\n\r\n        return {\r\n            id: this.element.dataset.bookitDragHandleId,\r\n            type: this.element.dataset.bookitDragHandleType,\r\n            parentId: parentId,\r\n        };\r\n    }\r\n\r\n}"],"names":["BaseComponent","target","selectors","this","element","document","querySelector","reactive","masterChecklistReactiveInstance","SELECTORS","stateReady","relativeDrag","dragType","dataset","bookitDragHandleType","dragId","bookitDragHandleId","fullRegionSelector","Error","fullRegionElement","fullregion","dragdrop","DragDrop","destroy","undefined","unregister","getDraggableData","parentId","bookitChecklistitemCategoryid","bookitCategoryMasterid","id","type"],"mappings":"2RAI6BA,oCAEbC,OAAQC,kBACT,IAAIC,KAAK,CACZC,QAASC,SAASC,cAAcL,QAChCM,SAAUC,2DACVN,UAAWA,WAAaO,uCAIhCC,kBACSC,cAAe,QAEdC,SAAWT,KAAKC,QAAQS,QAAQC,qBAChCC,OAASZ,KAAKC,QAAQS,QAAQG,uBAEhCC,mBAAqB,UAEjBL,cACC,OACDK,wDAAmDL,yBAAgBG,uBAElE,WACDE,kEAA6DF,iCAGvD,IAAIG,0CAAmCN,iBAG/CO,kBAAoBd,SAASC,cAAcW,yBAE5CG,WAAaD,uBAEbE,SAAW,IAAIC,mBAASnB,MAGjCoB,eAC0BC,IAAlBrB,KAAKkB,eACAA,SAASI,aAItBC,yBACUd,SAAWT,KAAKC,QAAQS,QAAQC,yBAClCa,gBACIf,cACC,OACDe,SAAWxB,KAAKiB,WAAWP,QAAQe,wCAElC,WACDD,SAAWxB,KAAKiB,WAAWP,QAAQgB,2CAG7B,IAAIX,0CAAmCN,iBAG9C,CACHkB,GAAI3B,KAAKC,QAAQS,QAAQG,mBACzBe,KAAM5B,KAAKC,QAAQS,QAAQC,qBAC3Ba,SAAUA"}